import { parseBSONSync } from "./lib/parsers/parse-bson.js";
// __VERSION__ is injected by babel-plugin-version-inline
// @ts-ignore TS2304: Cannot find name '__VERSION__'.
const VERSION = typeof "4.3.3" !== 'undefined' ? "4.3.3" : 'latest';
export const BSONLoader = {
    dataType: null,
    batchType: null,
    name: 'BSON',
    id: 'bson',
    module: 'bson',
    version: VERSION,
    extensions: ['bson'],
    mimeTypes: ['application/bson'],
    category: 'json',
    binary: true,
    parse,
    parseSync,
    options: {
        bson: {}
    }
};
async function parse(arrayBuffer, options) {
    const bsonOptions = { ...BSONLoader.options.bson, ...options?.bson };
    return parseBSONSync(arrayBuffer, bsonOptions);
}
function parseSync(arrayBuffer, options) {
    const bsonOptions = { ...BSONLoader.options.bson, ...options?.bson };
    return parseBSONSync(arrayBuffer, bsonOptions);
}
