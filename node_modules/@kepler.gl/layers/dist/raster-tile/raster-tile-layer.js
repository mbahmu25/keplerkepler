"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getNumRasterTilesBeingLoaded = exports["default"] = exports.LOAD_ELEVATION_AFTER_ZOOM = void 0;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _typed = require("@deck.gl/core/typed");
var _typed2 = require("@deck.gl/geo-layers/typed");
var _pmtiles = require("@loaders.gl/pmtiles");
var _memoize = _interopRequireDefault(require("lodash/memoize"));
var _typed3 = require("@deck.gl/layers/typed");
var _constants = require("@kepler.gl/constants");
var _deckglLayers = require("@kepler.gl/deckgl-layers");
var _commonUtils = require("@kepler.gl/common-utils");
var _utils = require("@kepler.gl/utils");
var _config = require("./config");
var _gpuUtils = require("./gpu-utils");
var _image = require("./image");
var _rasterTileIcon = _interopRequireDefault(require("./raster-tile-icon"));
var _rasterTileUtils = require("./raster-tile-utils");
var _baseLayer = _interopRequireDefault(require("../base-layer"));
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2["default"])(o), (0, _possibleConstructorReturn2["default"])(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2["default"])(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, e, r, o) { var p = (0, _get2["default"])((0, _getPrototypeOf2["default"])(1 & o ? t.prototype : t), e, r); return 2 & o ? function (t) { return p.apply(r, t); } : p; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
// Adjust tileSize to devicePixelRatio, but not higher than 2 to reduce requests to server
var devicePixelRatio = Math.min(2, typeof window !== 'undefined' && window.devicePixelRatio || 1);

// Global counter that represents the number of tiles currently being loaded across all the raster tile layers
var tilesBeingLoaded = 0;

// This is a temp solution to track loading
var getNumRasterTilesBeingLoaded = exports.getNumRasterTilesBeingLoaded = function getNumRasterTilesBeingLoaded() {
  return tilesBeingLoaded;
};
var LOAD_ELEVATION_AFTER_ZOOM = exports.LOAD_ELEVATION_AFTER_ZOOM = 8.9;
var getShouldLoadTerrain = function getShouldLoadTerrain(stac, mapState, visConfig) {
  var _stac$rasterTileServe;
  return Boolean(
  // we need a raster tile server for elevations even when we user PMTiles
  ((_stac$rasterTileServe = stac.rasterTileServerUrls) === null || _stac$rasterTileServe === void 0 ? void 0 : _stac$rasterTileServe.length) > 0 &&
  // check the switch from the layer configurator
  visConfig.enableTerrain && (
  // disabled in Top view by default
  mapState.dragRotate || visConfig.enableTerrainTopView) && (0, _utils.getApplicationConfig)().rasterServerSupportsElevation);
};
var RasterTileLayer = exports["default"] = /*#__PURE__*/function (_KeplerLayer) {
  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
  function RasterTileLayer(props) {
    var _this;
    (0, _classCallCheck2["default"])(this, RasterTileLayer);
    _this = _callSuper(this, RasterTileLayer, [props]);
    /** Min bands image data value, based on the current viewport */
    (0, _defineProperty2["default"])(_this, "minViewportPixelValue", Infinity);
    /** Max bands image data value, based on the current viewport */
    (0, _defineProperty2["default"])(_this, "maxViewportPixelValue", -Infinity);
    /** Memoized method that calculates data source params */
    (0, _defineProperty2["default"])(_this, "getDataSourceParams", void 0);
    _this.registerVisConfig(_config.rasterVisConfigs);

    // No two STAC ids may be the same within a single collection, though it's conceivably possible
    // across multiple STAC collections there could be an id collision. Note: STAC Collection
    // objects don't have a `collection` key; STAC Item objects have a `collection` key (which
    // matches the collection's `id`).
    var resolver = function resolver(stac, preset, presetOptions) {
      var _presetOptions$single, _presetOptions$single2;
      return "".concat(stac.id, "-").concat(stac.collection, "-").concat(preset, "-").concat((_presetOptions$single = presetOptions.singleBand) === null || _presetOptions$single === void 0 ? void 0 : _presetOptions$single.assetId, "-").concat((_presetOptions$single2 = presetOptions.singleBand) === null || _presetOptions$single2 === void 0 ? void 0 : _presetOptions$single2.bandIndex);
    };
    _this.getDataSourceParams = (0, _memoize["default"])(function (stac, preset, presetOptions) {
      return (0, _rasterTileUtils.getDataSourceParams)(stac, preset, presetOptions);
    }, resolver);
    _this.meta = {
      zRange: null
    };
    return _this;
  }
  (0, _inherits2["default"])(RasterTileLayer, _KeplerLayer);
  return (0, _createClass2["default"])(RasterTileLayer, [{
    key: "type",
    get: function get() {
      return _constants.LAYER_TYPES.rasterTile;
    }
  }, {
    key: "name",
    get: function get() {
      return 'Raster Tile';
    }
  }, {
    key: "layerIcon",
    get: function get() {
      return _rasterTileIcon["default"];
    }
  }, {
    key: "supportedDatasetTypes",
    get: function get() {
      return [_constants.DatasetType.RASTER_TILE];
    }
  }, {
    key: "visualChannels",
    get: function get() {
      var categoricalColorLegends = this.config.visConfig.colorRange.colorLegends;
      if (categoricalColorLegends) {
        return {
          color: _superPropGet(RasterTileLayer, "visualChannels", this, 1).color
        };
      } else {
        return {};
      }
    }
  }, {
    key: "requireData",
    get: function get() {
      return true;
    }
  }, {
    key: "getDefaultLayerConfig",
    value: function getDefaultLayerConfig(props) {
      return _objectSpread(_objectSpread({}, _superPropGet(RasterTileLayer, "getDefaultLayerConfig", this, 3)([props])), {}, {
        colorField: {
          analyzerType: '',
          name: 'Category',
          format: '',
          type: 'string',
          fieldIdx: -1,
          valueAccessor: function valueAccessor() {
            return '';
          },
          displayName: 'Category'
        }
      });
    }
  }, {
    key: "getHoverData",
    value: function getHoverData() {
      return null;
    }

    // We can render without columns, so we redefine this method
  }, {
    key: "shouldRenderLayer",
    value: function shouldRenderLayer() {
      return Boolean(this.type && this.config.isVisible);
    }
  }, {
    key: "formatLayerData",
    value: function formatLayerData(datasets, oldLayerData) {
      var _dataset$metadata;
      var dataId = this.config.dataId;
      if (!(0, _commonUtils.notNullorUndefined)(dataId)) {
        return {};
      }
      var dataset = datasets[dataId];

      // call updateData to updateLayerMeta
      var dataUpdateTriggers = this.getDataUpdateTriggers(dataset);
      var triggerChanged = this.getChangedTriggers(dataUpdateTriggers);
      if (triggerChanged && triggerChanged.getMeta) {
        this.updateLayerMeta(dataset);
      }
      var tileSource = null;
      if (((_dataset$metadata = dataset.metadata) === null || _dataset$metadata === void 0 ? void 0 : _dataset$metadata.pmtilesType) === _constants.PMTilesType.RASTER) {
        var metadataUrl = dataset.metadata.metadataUrl;
        // use the old tile source if it exists and matches the new metadataUrl
        var _ref = oldLayerData || {},
          oldDataset = _ref.dataset,
          oldTileSource = _ref.tileSource;
        if (oldDataset === dataset && (oldTileSource === null || oldTileSource === void 0 ? void 0 : oldTileSource.data) === metadataUrl) {
          tileSource = oldLayerData.tileSource;
        } else {
          tileSource = metadataUrl ? _pmtiles.PMTilesSource.createDataSource(metadataUrl, {}) : null;
        }
      }
      return {
        dataset: dataset,
        tileSource: tileSource
      };
    }
  }, {
    key: "updateLayerMeta",
    value: function updateLayerMeta(dataset) {
      if (dataset.type !== _constants.DatasetType.RASTER_TILE) {
        return;
      }
      var stac = dataset.metadata;
      if (stac.pmtilesType === _constants.PMTilesType.RASTER) {
        return this.updateMeta({
          bounds: stac.bounds
        });
      }
      var bounds = (0, _rasterTileUtils.getSTACBounds)(stac);
      if (bounds) {
        // If a STAC Item (i.e. stac.type === 'Feature'), then set map bounds.
        // But we don't want to set bounds for Landsat or Sentinel because it would zoom out to zoom
        // 0, and we don't have low-zoom tiles.
        if (stac.type === 'Feature') {
          this.updateMeta({
            bounds: bounds
          });
        }
      }
    }

    /**
     * Run when adding a new dataset
     */
  }, {
    key: "setInitialLayerConfig",
    value: function setInitialLayerConfig(dataset) {
      var stac = dataset === null || dataset === void 0 ? void 0 : dataset.metadata;
      if (!stac) {
        return this;
      }
      if (stac.pmtilesType === _constants.PMTilesType.RASTER) {
        return this;
      }

      // When a STAC Collection is added, useStacSearching should be true to prevent a black screen
      this.updateLayerVisConfig({
        useSTACSearching: stac.type === 'Collection'
      });

      // Set singleBandName if there is only one band
      var availableBands = (0, _rasterTileUtils.getEOBands)(stac) || [];
      if ((availableBands === null || availableBands === void 0 ? void 0 : availableBands.length) === 1) {
        this.updateLayerVisConfig({
          singleBandName: availableBands[0].name
        });
      }

      // Change the preset if the default one is not allowed
      var availablePresets = (0, _rasterTileUtils.filterAvailablePresets)(stac, _config.PRESET_OPTIONS);
      if (availablePresets !== null && availablePresets !== void 0 && availablePresets.length && !(availablePresets !== null && availablePresets !== void 0 && availablePresets.includes(this.visConfigSettings.preset.defaultValue))) {
        this.updateLayerVisConfig({
          preset: availablePresets[0]
        });
      }

      // Apply improved image processing props only for non single band modes
      var preset = this.config.visConfig.preset;
      var colorDefaults = _config.DATA_SOURCE_COLOR_DEFAULTS[stac.id];
      if (colorDefaults && preset !== 'singleBand') {
        this.updateLayerVisConfig(colorDefaults);
      }

      /*
      LandSat specifies temporal bounds but the valid data is after end date
      const updatedDates = timeRangeToStacTemporalInterval(
        stac as StacTypes.STACCollection,
        this.config.visConfig.startDate,
        this.config.visConfig.endDate
      );
      this.updateLayerVisConfig(updatedDates);
      */

      return this;
    }

    /**
     * Update zRange of viewport. This is necessary so that tiles in extruded mode are shown properly
     * at high elevations: https://github.com/foursquare/studio-monorepo/pull/1892/files
     * Derived from https://github.com/visgl/deck.gl/blob/8d824a4b836fee3bfebe6fc962e0f03d8c1dbd0d/modules/geo-layers/src/terrain-layer/terrain-layer.js#L173-L196
     *
     * @param tiles Array of tiles in current viewport
     */
  }, {
    key: "onViewportLoad",
    value: function onViewportLoad(tiles) {
      this.updateMinMaxPixelValue(tiles);
      var newZRange = (0, _rasterTileUtils.computeZRange)(tiles);
      if (!newZRange) {
        return;
      }
      var zRange = this.meta.zRange;
      if (!zRange || newZRange[0] < zRange[0] || newZRange[1] > zRange[1]) {
        this.meta.zRange = newZRange;
      }
    }

    /**
     * Update viewport-related minPxelValue and maxPixelValue
     * @param tiles - deck.gl tiles
     */
  }, {
    key: "updateMinMaxPixelValue",
    value: function updateMinMaxPixelValue(tiles) {
      var _getMinMaxFromTile2DH = (0, _rasterTileUtils.getMinMaxFromTile2DHeaders)(tiles),
        _getMinMaxFromTile2DH2 = (0, _slicedToArray2["default"])(_getMinMaxFromTile2DH, 2),
        min = _getMinMaxFromTile2DH2[0],
        max = _getMinMaxFromTile2DH2[1];
      this.minViewportPixelValue = min;
      this.maxViewportPixelValue = max;
    }

    /**
     * Calculate min and max values of input raster band image properties
     * and update `minBandsValue` and `maxBandsValue`
     * @param images - raster band image properties
     * @return [min, max] pixel values for the tile
     */
  }, {
    key: "getMinMaxPixelValues",
    value: function getMinMaxPixelValues(images) {
      var minPixelValue = Infinity;
      var maxPixelValue = -Infinity;
      if (images) {
        var _iterator = _createForOfIteratorHelper(images),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var image = _step.value;
            var _getImageMinMax = (0, _rasterTileUtils.getImageMinMax)(image.data),
              _getImageMinMax2 = (0, _slicedToArray2["default"])(_getImageMinMax, 2),
              min = _getImageMinMax2[0],
              max = _getImageMinMax2[1];
            if (typeof min === 'number') {
              minPixelValue = Math.min(min, minPixelValue);
            }
            if (typeof max === 'number') {
              maxPixelValue = Math.max(max, maxPixelValue);
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }
      return [minPixelValue, maxPixelValue];
    }

    // generate a deck layer
  }, {
    key: "renderLayer",
    value: function renderLayer(opts) {
      var _data$dataset;
      var data = opts.data;
      if ((data === null || data === void 0 || (_data$dataset = data.dataset) === null || _data$dataset === void 0 || (_data$dataset = _data$dataset.metadata) === null || _data$dataset === void 0 ? void 0 : _data$dataset.pmtilesType) === _constants.PMTilesType.RASTER) {
        return this.renderPMTilesLayer(opts);
      }
      return this.renderStacLayer(opts);
    }
  }, {
    key: "renderStacLayer",
    value: function renderStacLayer(opts) {
      var _data$dataset2,
        _this2 = this;
      var data = opts.data,
        mapState = opts.mapState,
        experimentalContext = opts.experimentalContext;
      var stac = data === null || data === void 0 || (_data$dataset2 = data.dataset) === null || _data$dataset2 === void 0 ? void 0 : _data$dataset2.metadata;

      // If a tabular dataset is loaded, and then the layer type is switched from Point to Raster Tile
      // layer, this `stac` object will exist but will not be raster metadata
      if (!stac || !stac.stac_version) {
        return [];
      }
      var visConfig = this.config.visConfig;
      var _this$getDefaultDeckL = this.getDefaultDeckLayerProps(opts),
        id = _this$getDefaultDeckL.id,
        opacity = _this$getDefaultDeckL.opacity,
        visible = _this$getDefaultDeckL.visible;
      var hasShadowEffect = experimentalContext === null || experimentalContext === void 0 ? void 0 : experimentalContext.hasShadowEffect;
      var preset = visConfig.preset,
        colormapId = visConfig.colormapId,
        linearRescaling = visConfig.linearRescaling,
        linearRescalingFactor = visConfig.linearRescalingFactor,
        nonLinearRescaling = visConfig.nonLinearRescaling,
        gammaContrastFactor = visConfig.gammaContrastFactor,
        sigmoidalContrastFactor = visConfig.sigmoidalContrastFactor,
        sigmoidalBiasFactor = visConfig.sigmoidalBiasFactor,
        saturationValue = visConfig.saturationValue,
        filterEnabled = visConfig.filterEnabled,
        filterRange = visConfig.filterRange,
        useSTACSearching = visConfig.useSTACSearching,
        stacSearchProvider = visConfig.stacSearchProvider,
        startDate = visConfig.startDate,
        endDate = visConfig.endDate,
        _stacQuery = visConfig._stacQuery,
        singleBandName = visConfig.singleBandName,
        categoricalColorMap = visConfig.colorRange.colorMap,
        dynamicColor = visConfig.dynamicColor;
      var shouldLoadTerrain = getShouldLoadTerrain(stac, mapState, visConfig);
      if (new Date(endDate) < new Date(startDate)) {
        return [];
      }
      var bandCombination = _config.PRESET_OPTIONS[preset].bandCombination;
      var singleBand = (0, _rasterTileUtils.getSingleBandPresetOptions)(stac, singleBandName);
      var dataSourceParams = this.getDataSourceParams(stac, preset, {
        singleBand: singleBand
      });
      if (!dataSourceParams) {
        return [];
      }
      var minZoom = dataSourceParams.minZoom,
        maxZoom = dataSourceParams.maxZoom,
        globalBounds = dataSourceParams.globalBounds,
        loadAssetIds = dataSourceParams.loadAssetIds,
        loadBandIndexes = dataSourceParams.loadBandIndexes,
        renderBandIndexes = dataSourceParams.renderBandIndexes,
        dataType = dataSourceParams.dataType,
        dsMinPixelValue = dataSourceParams.minPixelValue,
        dsMaxPixelValue = dataSourceParams.maxPixelValue,
        minCategoricalBandValue = dataSourceParams.minCategoricalBandValue,
        maxCategoricalBandValue = dataSourceParams.maxCategoricalBandValue;
      var minPixelValue = !dynamicColor && Number.isFinite(dsMinPixelValue) ? dsMinPixelValue : this.minViewportPixelValue;
      var maxPixelValue = !dynamicColor && Number.isFinite(dsMaxPixelValue) ? dsMaxPixelValue : this.maxViewportPixelValue;
      var getTileDataCustomProps = {
        stac: stac,
        loadAssetIds: loadAssetIds,
        loadBandIndexes: loadBandIndexes,
        colormapId: colormapId,
        shouldLoadTerrain: shouldLoadTerrain,
        globalBounds: globalBounds,
        useSTACSearching: useSTACSearching,
        stacSearchProvider: stacSearchProvider,
        startDate: startDate,
        endDate: endDate,
        _stacQuery: _stacQuery,
        categoricalColorMap: categoricalColorMap,
        minCategoricalBandValue: minCategoricalBandValue,
        maxCategoricalBandValue: maxCategoricalBandValue
      };
      var tileLayer = new _typed2.TileLayer(_objectSpread(_objectSpread({
        id: id,
        minZoom: minZoom,
        maxZoom: maxZoom,
        tileSize: 512 / devicePixelRatio,
        getTileData: function getTileData(args) {
          return _this2.getTileData(_objectSpread(_objectSpread({}, args), getTileDataCustomProps));
        },
        onViewportLoad: this.onViewportLoad.bind(this),
        // @ts-expect-error - TS doesn't know we'll pass appropriate props here
        renderSubLayers: renderSubLayersStac,
        maxRequests: (0, _rasterTileUtils.getMaxRequests)(stac.rasterTileServerUrls || []),
        // Passing visible on to TileLayer is necessary for split view to work
        visible: visible,
        updateTriggers: {
          getTileData: [shouldLoadTerrain,
          // Colormap has changed
          colormapId].concat((0, _toConsumableArray2["default"])(loadAssetIds), (0, _toConsumableArray2["default"])(loadBandIndexes), [useSTACSearching, stacSearchProvider, startDate, endDate, _stacQuery, categoricalColorMap, minCategoricalBandValue, maxCategoricalBandValue])
        }
      }, shouldLoadTerrain ? {
        zRange: this.meta.zRange || null,
        refinementStrategy: 'no-overlap'
      } : {}), {}, {
        renderBandIndexes: renderBandIndexes,
        opacity: opacity,
        linearRescaling: linearRescaling,
        linearRescalingFactor: linearRescalingFactor,
        nonLinearRescaling: nonLinearRescaling,
        minPixelValue: minPixelValue,
        maxPixelValue: maxPixelValue,
        gammaContrastFactor: gammaContrastFactor,
        sigmoidalContrastFactor: sigmoidalContrastFactor,
        sigmoidalBiasFactor: sigmoidalBiasFactor,
        saturationValue: saturationValue,
        bandCombination: bandCombination,
        filterEnabled: filterEnabled,
        filterRange: filterRange,
        dataType: dataType,
        minCategoricalBandValue: minCategoricalBandValue,
        maxCategoricalBandValue: maxCategoricalBandValue,
        hasCategoricalColorMap: Boolean(categoricalColorMap),
        hasShadowEffect: hasShadowEffect
      }));
      return [tileLayer];
    }
  }, {
    key: "renderPMTilesLayer",
    value: function renderPMTilesLayer(opts) {
      var _data$dataset3,
        _this3 = this;
      var _this$getDefaultDeckL2 = this.getDefaultDeckLayerProps(opts),
        id = _this$getDefaultDeckL2.id,
        opacity = _this$getDefaultDeckL2.opacity,
        visible = _this$getDefaultDeckL2.visible;
      var data = opts.data,
        mapState = opts.mapState;
      var metadata = data === null || data === void 0 || (_data$dataset3 = data.dataset) === null || _data$dataset3 === void 0 ? void 0 : _data$dataset3.metadata;
      var visConfig = this.config.visConfig;
      var tileSource = data.tileSource;
      var showTileBorders = false;
      var minZoom = metadata.minZoom || 0;
      var maxZoom = metadata.maxZoom || 30;
      var shouldLoadTerrain = getShouldLoadTerrain(metadata, mapState, visConfig);
      return [new _typed2.TileLayer(_objectSpread({
        id: id,
        getTileData: function getTileData(args) {
          return _this3.getTileDataPMTiles(_objectSpread(_objectSpread({}, args), {}, {
            shouldLoadTerrain: shouldLoadTerrain,
            metadata: metadata
          }), tileSource);
        },
        // Assume the pmtiles file support HTTP/2, so we aren't limited by the browser to a certain number per domain.
        maxRequests: 20,
        pickable: true,
        autoHighlight: showTileBorders,
        onViewportLoad: this.onViewportLoad.bind(this),
        minZoom: minZoom,
        maxZoom: maxZoom,
        tileSize: 512 / devicePixelRatio,
        zoomOffset: devicePixelRatio === 1 ? -1 : 0,
        // @ts-expect-error - TS doesn't know we'll pass appropriate props here
        renderSubLayers: renderSubLayersPMTiles,
        tileSource: tileSource,
        showTileBorders: showTileBorders,
        visible: visible,
        opacity: opacity,
        updateTriggers: {
          getTileData: [shouldLoadTerrain]
        }
      }, shouldLoadTerrain ? {
        zRange: this.meta.zRange || null,
        refinementStrategy: 'no-overlap'
      } : {}))];
    }
  }, {
    key: "getTileData",
    value: function () {
      var _getTileData = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(props) {
        var shouldLoadTerrain, globalBounds, _props$bbox, west, south, east, north, zoom, assetRequests, terrain, _yield$Promise$all, _yield$Promise$all2, images, _terrain, _this$getMinMaxPixelV, _this$getMinMaxPixelV2, min, max;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              shouldLoadTerrain = props.shouldLoadTerrain, globalBounds = props.globalBounds, _props$bbox = props.bbox, west = _props$bbox.west, south = _props$bbox.south, east = _props$bbox.east, north = _props$bbox.north, zoom = props.index.z;
              if (!(globalBounds && !(0, _rasterTileUtils.bboxIntersects)(globalBounds, [west, south, east, north]))) {
                _context.next = 3;
                break;
              }
              return _context.abrupt("return", null);
            case 3:
              _context.next = 5;
              return (0, _image.getSTACImageRequests)(props);
            case 5:
              assetRequests = _context.sent;
              if (assetRequests) {
                _context.next = 14;
                break;
              }
              _context.t0 = shouldLoadTerrain && LOAD_ELEVATION_AFTER_ZOOM < zoom;
              if (!_context.t0) {
                _context.next = 12;
                break;
              }
              _context.next = 11;
              return (0, _image.loadTerrain)({
                boundsForGeometry: [west, north, east, south],
                index: props.index,
                signal: props.signal,
                rasterTileServerUrls: props.stac.rasterTileServerUrls || []
              });
            case 11:
              _context.t0 = _context.sent;
            case 12:
              terrain = _context.t0;
              return _context.abrupt("return", _objectSpread({
                images: null
              }, terrain ? {
                terrain: terrain
              } : {}));
            case 14:
              tilesBeingLoaded++;

              // Wrap loading images into a try/catch because tiles that are only briefly in view will be
              // aborted. The `AbortController.abort()` creates a DOMException error.
              // Note that since loading is async, try/catch will only work when awaited inside the try block
              _context.prev = 15;
              _context.next = 18;
              return Promise.all([(0, _image.loadImages)(assetRequests, props.colormapId, {
                colorMap: props.categoricalColorMap,
                minValue: props.minCategoricalBandValue,
                maxValue: props.maxCategoricalBandValue
              }), shouldLoadTerrain && LOAD_ELEVATION_AFTER_ZOOM < zoom ? (0, _image.loadTerrain)({
                boundsForGeometry: [west, north, east, south],
                index: props.index,
                signal: props.signal,
                rasterTileServerUrls: props.stac.rasterTileServerUrls || []
              }) : null]);
            case 18:
              _yield$Promise$all = _context.sent;
              _yield$Promise$all2 = (0, _slicedToArray2["default"])(_yield$Promise$all, 2);
              images = _yield$Promise$all2[0];
              _terrain = _yield$Promise$all2[1];
              _this$getMinMaxPixelV = this.getMinMaxPixelValues(images.imageBands), _this$getMinMaxPixelV2 = (0, _slicedToArray2["default"])(_this$getMinMaxPixelV, 2), min = _this$getMinMaxPixelV2[0], max = _this$getMinMaxPixelV2[1];
              tilesBeingLoaded--;

              // Add terrain data only if we requested it above
              return _context.abrupt("return", _objectSpread(_objectSpread({
                images: images
              }, _terrain ? {
                terrain: _terrain
              } : {}), {}, {
                minPixelValue: min,
                maxPixelValue: max
              }));
            case 27:
              _context.prev = 27;
              _context.t1 = _context["catch"](15);
              tilesBeingLoaded--;
              if (!(_context.t1.name === 'AbortError')) {
                _context.next = 32;
                break;
              }
              return _context.abrupt("return", null);
            case 32:
              throw _context.t1;
            case 33:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[15, 27]]);
      }));
      function getTileData(_x) {
        return _getTileData.apply(this, arguments);
      }
      return getTileData;
    }()
  }, {
    key: "getTileDataPMTiles",
    value: function () {
      var _getTileDataPMTiles = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(props, tileSource) {
        var shouldLoadTerrain, globalBounds, _props$bbox2, west, south, east, north, zoom, metadata, _yield$Promise$all3, _yield$Promise$all4, image, terrain, minPixelValue, maxPixelValue, _this$getMinMaxPixelV3, _this$getMinMaxPixelV4, min, max;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              shouldLoadTerrain = props.shouldLoadTerrain, globalBounds = props.globalBounds, _props$bbox2 = props.bbox, west = _props$bbox2.west, south = _props$bbox2.south, east = _props$bbox2.east, north = _props$bbox2.north, zoom = props.index.z, metadata = props.metadata;
              if (!(globalBounds && !(0, _rasterTileUtils.bboxIntersects)(globalBounds, [west, south, east, north]))) {
                _context2.next = 3;
                break;
              }
              return _context2.abrupt("return", null);
            case 3:
              tilesBeingLoaded++;
              _context2.prev = 4;
              _context2.next = 7;
              return Promise.all([tileSource.getTileData(props)]);
            case 7:
              _yield$Promise$all3 = _context2.sent;
              _yield$Promise$all4 = (0, _slicedToArray2["default"])(_yield$Promise$all3, 1);
              image = _yield$Promise$all4[0];
              if (!(image && shouldLoadTerrain && LOAD_ELEVATION_AFTER_ZOOM < zoom)) {
                _context2.next = 16;
                break;
              }
              _context2.next = 13;
              return (0, _image.loadTerrain)({
                boundsForGeometry: [west, north, east, south],
                index: props.index,
                signal: props.signal,
                rasterTileServerUrls: metadata.rasterTileServerUrls
              });
            case 13:
              _context2.t0 = _context2.sent;
              _context2.next = 17;
              break;
            case 16:
              _context2.t0 = null;
            case 17:
              terrain = _context2.t0;
              minPixelValue = null;
              maxPixelValue = null;
              if (image) {
                _this$getMinMaxPixelV3 = this.getMinMaxPixelValues([{
                  data: image
                }]), _this$getMinMaxPixelV4 = (0, _slicedToArray2["default"])(_this$getMinMaxPixelV3, 2), min = _this$getMinMaxPixelV4[0], max = _this$getMinMaxPixelV4[1];
                minPixelValue = min;
                maxPixelValue = max;
              }
              tilesBeingLoaded--;

              // Add terrain data only if we requested it above
              return _context2.abrupt("return", _objectSpread({
                image: image,
                minPixelValue: minPixelValue,
                maxPixelValue: maxPixelValue
              }, terrain ? {
                terrain: terrain
              } : {}));
            case 25:
              _context2.prev = 25;
              _context2.t1 = _context2["catch"](4);
              tilesBeingLoaded--;
              if (!(_context2.t1.name === 'AbortError')) {
                _context2.next = 30;
                break;
              }
              return _context2.abrupt("return", null);
            case 30:
              throw _context2.t1;
            case 31:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[4, 25]]);
      }));
      function getTileDataPMTiles(_x2, _x3) {
        return _getTileDataPMTiles.apply(this, arguments);
      }
      return getTileDataPMTiles;
    }()
  }], [{
    key: "findDefaultLayerProps",
    value: function findDefaultLayerProps(dataset) {
      if (dataset.type !== _constants.DatasetType.RASTER_TILE) {
        return {
          props: []
        };
      }
      var newLayerProp = {
        dataId: dataset.id,
        label: dataset.label,
        isVisible: true
      };
      return {
        props: [newLayerProp]
      };
    }
  }]);
}(_baseLayer["default"]);
function renderSubLayersStac(props) {
  var tile = props.tile,
    data = props.data,
    globalMinPixelValue = props.minPixelValue,
    globalMaxPixelValue = props.maxPixelValue;
  var bbox = tile.bbox;
  var west = bbox.west,
    south = bbox.south,
    east = bbox.east,
    north = bbox.north;
  if (!data) {
    return [];
  }
  var images = data.images,
    terrain = data.terrain,
    tileMinPixelValue = data.minPixelValue,
    tileMaxPixelValue = data.maxPixelValue;
  if (!images || Array.isArray(images) && images.length === 0) {
    return [];
  }
  var minPixelValue = Number.isFinite(globalMinPixelValue) ? globalMinPixelValue : tileMinPixelValue;
  var maxPixelValue = Number.isFinite(globalMaxPixelValue) ? globalMaxPixelValue : tileMaxPixelValue;
  if (typeof minPixelValue !== 'number' || typeof maxPixelValue !== 'number') {
    return [];
  }
  var _getModules = (0, _gpuUtils.getModules)({
      images: images,
      props: _objectSpread(_objectSpread({}, props), {}, {
        minPixelValue: minPixelValue,
        maxPixelValue: maxPixelValue
      })
    }),
    modules = _getModules.modules,
    moduleProps = _getModules.moduleProps;
  var idSuffix = props.hasShadowEffect ? 'shadow' : '';
  return terrain ? new _deckglLayers.RasterMeshLayer(props, {
    id: "raster-3d-layer-".concat(props.id, "-").concat(idSuffix),
    // Dummy data
    data: [1],
    mesh: terrain,
    images: images,
    modules: modules,
    moduleProps: moduleProps,
    getPolygonOffset: null,
    coordinateSystem: _typed.COORDINATE_SYSTEM.LNGLAT,
    // Color to use if surfaceImage is unavailable
    getColor: [255, 255, 255]
    // material: false
  }) : new _deckglLayers.RasterLayer(props, {
    id: "raster-2d-layer-".concat(props.id, "-").concat(idSuffix),
    images: images,
    modules: modules,
    moduleProps: moduleProps,
    bounds: [west, south, east, north],
    _imageCoordinateSystem: _typed.COORDINATE_SYSTEM.CARTESIAN
  });
}
function renderSubLayersPMTiles(props) {
  var _props$data;
  var tileSource = props.tileSource,
    showTileBorders = props.showTileBorders,
    minZoom = props.minZoom,
    maxZoom = props.maxZoom,
    _props$tile = props.tile,
    zoom = _props$tile.index.z,
    _props$tile$bbox = _props$tile.bbox,
    west = _props$tile$bbox.west,
    south = _props$tile$bbox.south,
    east = _props$tile$bbox.east,
    north = _props$tile$bbox.north;
  var layers = [];
  if ((_props$data = props.data) !== null && _props$data !== void 0 && _props$data.image) {
    switch (tileSource.mimeType) {
      case 'image/png':
      case 'image/jpeg':
      case 'image/webp':
      case 'image/avif':
        layers.push(getRasterLayerPMTiles(props));
        break;
      default:
        break;
    }
  }

  // Debug tile borders
  var borderColor = zoom <= minZoom || zoom >= maxZoom ? [255, 0, 0, 255] : [0, 0, 255, 255];
  if (showTileBorders) {
    layers.push(new _typed3.PathLayer({
      id: "".concat(props.id, "-border"),
      data: [[[west, north], [west, south], [east, south], [east, north], [west, north]]],
      getPath: function getPath(d) {
        return d;
      },
      getColor: borderColor,
      widthMinPixels: 4
    }));
  }
  return layers;
}
function getRasterLayerPMTiles(props) {
  var tile = props.tile,
    data = props.data;
  var bbox = tile.bbox;
  var west = bbox.west,
    south = bbox.south,
    east = bbox.east,
    north = bbox.north;
  if (!(data !== null && data !== void 0 && data.image)) {
    return [];
  }
  var images = {
    imageRgba: {
      data: data.image
    }
  };
  var terrain = data.terrain;
  var _getModules2 = (0, _gpuUtils.getModules)({
      images: images
    }),
    modules = _getModules2.modules,
    moduleProps = _getModules2.moduleProps;
  return terrain ? new _deckglLayers.RasterMeshLayer(props, {
    id: "raster-3d-layer-".concat(props.id),
    // Dummy data
    data: [1],
    mesh: terrain,
    images: images,
    modules: modules,
    moduleProps: moduleProps,
    getPolygonOffset: null,
    coordinateSystem: _typed.COORDINATE_SYSTEM.LNGLAT,
    // Color to use if surfaceImage is unavailable
    getColor: [255, 255, 255]
    // material: false
  }) : new _deckglLayers.RasterLayer(props, {
    id: "raster-2d-layer-".concat(props.id),
    data: null,
    images: images,
    modules: modules,
    moduleProps: moduleProps,
    bounds: [west, south, east, north],
    _imageCoordinateSystem: _typed.COORDINATE_SYSTEM.CARTESIAN
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdHlwZWQiLCJyZXF1aXJlIiwiX3R5cGVkMiIsIl9wbXRpbGVzIiwiX21lbW9pemUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3R5cGVkMyIsIl9jb25zdGFudHMiLCJfZGVja2dsTGF5ZXJzIiwiX2NvbW1vblV0aWxzIiwiX3V0aWxzIiwiX2NvbmZpZyIsIl9ncHVVdGlscyIsIl9pbWFnZSIsIl9yYXN0ZXJUaWxlSWNvbiIsIl9yYXN0ZXJUaWxlVXRpbHMiLCJfYmFzZUxheWVyIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJyIiwiZSIsInQiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkFycmF5IiwiaXNBcnJheSIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsImxlbmd0aCIsIl9uIiwiRiIsInMiLCJuIiwiZG9uZSIsInZhbHVlIiwiZiIsIlR5cGVFcnJvciIsIm8iLCJhIiwidSIsImNhbGwiLCJuZXh0IiwiX2FycmF5TGlrZVRvQXJyYXkiLCJ0b1N0cmluZyIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiZnJvbSIsInRlc3QiLCJvd25LZXlzIiwiT2JqZWN0Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5IiwiX2NhbGxTdXBlciIsIl9nZXRQcm90b3R5cGVPZjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsIkJvb2xlYW4iLCJwcm90b3R5cGUiLCJ2YWx1ZU9mIiwiX3N1cGVyUHJvcEdldCIsInAiLCJfZ2V0MiIsImRldmljZVBpeGVsUmF0aW8iLCJNYXRoIiwibWluIiwid2luZG93IiwidGlsZXNCZWluZ0xvYWRlZCIsImdldE51bVJhc3RlclRpbGVzQmVpbmdMb2FkZWQiLCJleHBvcnRzIiwiTE9BRF9FTEVWQVRJT05fQUZURVJfWk9PTSIsImdldFNob3VsZExvYWRUZXJyYWluIiwic3RhYyIsIm1hcFN0YXRlIiwidmlzQ29uZmlnIiwiX3N0YWMkcmFzdGVyVGlsZVNlcnZlIiwicmFzdGVyVGlsZVNlcnZlclVybHMiLCJlbmFibGVUZXJyYWluIiwiZHJhZ1JvdGF0ZSIsImVuYWJsZVRlcnJhaW5Ub3BWaWV3IiwiZ2V0QXBwbGljYXRpb25Db25maWciLCJyYXN0ZXJTZXJ2ZXJTdXBwb3J0c0VsZXZhdGlvbiIsIlJhc3RlclRpbGVMYXllciIsIl9LZXBsZXJMYXllciIsInByb3BzIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2syIiwiSW5maW5pdHkiLCJyZWdpc3RlclZpc0NvbmZpZyIsInJhc3RlclZpc0NvbmZpZ3MiLCJyZXNvbHZlciIsInByZXNldCIsInByZXNldE9wdGlvbnMiLCJfcHJlc2V0T3B0aW9ucyRzaW5nbGUiLCJfcHJlc2V0T3B0aW9ucyRzaW5nbGUyIiwiY29uY2F0IiwiaWQiLCJjb2xsZWN0aW9uIiwic2luZ2xlQmFuZCIsImFzc2V0SWQiLCJiYW5kSW5kZXgiLCJnZXREYXRhU291cmNlUGFyYW1zIiwibWVtb2l6ZSIsIm1ldGEiLCJ6UmFuZ2UiLCJfaW5oZXJpdHMyIiwiX2NyZWF0ZUNsYXNzMiIsImtleSIsImdldCIsIkxBWUVSX1RZUEVTIiwicmFzdGVyVGlsZSIsIlJhc3Rlckljb24iLCJEYXRhc2V0VHlwZSIsIlJBU1RFUl9USUxFIiwiY2F0ZWdvcmljYWxDb2xvckxlZ2VuZHMiLCJjb25maWciLCJjb2xvclJhbmdlIiwiY29sb3JMZWdlbmRzIiwiY29sb3IiLCJnZXREZWZhdWx0TGF5ZXJDb25maWciLCJjb2xvckZpZWxkIiwiYW5hbHl6ZXJUeXBlIiwiZm9ybWF0IiwidHlwZSIsImZpZWxkSWR4IiwidmFsdWVBY2Nlc3NvciIsImRpc3BsYXlOYW1lIiwiZ2V0SG92ZXJEYXRhIiwic2hvdWxkUmVuZGVyTGF5ZXIiLCJpc1Zpc2libGUiLCJmb3JtYXRMYXllckRhdGEiLCJkYXRhc2V0cyIsIm9sZExheWVyRGF0YSIsIl9kYXRhc2V0JG1ldGFkYXRhIiwiZGF0YUlkIiwibm90TnVsbG9yVW5kZWZpbmVkIiwiZGF0YXNldCIsImRhdGFVcGRhdGVUcmlnZ2VycyIsImdldERhdGFVcGRhdGVUcmlnZ2VycyIsInRyaWdnZXJDaGFuZ2VkIiwiZ2V0Q2hhbmdlZFRyaWdnZXJzIiwiZ2V0TWV0YSIsInVwZGF0ZUxheWVyTWV0YSIsInRpbGVTb3VyY2UiLCJtZXRhZGF0YSIsInBtdGlsZXNUeXBlIiwiUE1UaWxlc1R5cGUiLCJSQVNURVIiLCJtZXRhZGF0YVVybCIsIl9yZWYiLCJvbGREYXRhc2V0Iiwib2xkVGlsZVNvdXJjZSIsImRhdGEiLCJQTVRpbGVzU291cmNlIiwiY3JlYXRlRGF0YVNvdXJjZSIsInVwZGF0ZU1ldGEiLCJib3VuZHMiLCJnZXRTVEFDQm91bmRzIiwic2V0SW5pdGlhbExheWVyQ29uZmlnIiwidXBkYXRlTGF5ZXJWaXNDb25maWciLCJ1c2VTVEFDU2VhcmNoaW5nIiwiYXZhaWxhYmxlQmFuZHMiLCJnZXRFT0JhbmRzIiwic2luZ2xlQmFuZE5hbWUiLCJhdmFpbGFibGVQcmVzZXRzIiwiZmlsdGVyQXZhaWxhYmxlUHJlc2V0cyIsIlBSRVNFVF9PUFRJT05TIiwiaW5jbHVkZXMiLCJ2aXNDb25maWdTZXR0aW5ncyIsImRlZmF1bHRWYWx1ZSIsImNvbG9yRGVmYXVsdHMiLCJEQVRBX1NPVVJDRV9DT0xPUl9ERUZBVUxUUyIsIm9uVmlld3BvcnRMb2FkIiwidGlsZXMiLCJ1cGRhdGVNaW5NYXhQaXhlbFZhbHVlIiwibmV3WlJhbmdlIiwiY29tcHV0ZVpSYW5nZSIsIl9nZXRNaW5NYXhGcm9tVGlsZTJESCIsImdldE1pbk1heEZyb21UaWxlMkRIZWFkZXJzIiwiX2dldE1pbk1heEZyb21UaWxlMkRIMiIsIl9zbGljZWRUb0FycmF5MiIsIm1heCIsIm1pblZpZXdwb3J0UGl4ZWxWYWx1ZSIsIm1heFZpZXdwb3J0UGl4ZWxWYWx1ZSIsImdldE1pbk1heFBpeGVsVmFsdWVzIiwiaW1hZ2VzIiwibWluUGl4ZWxWYWx1ZSIsIm1heFBpeGVsVmFsdWUiLCJfaXRlcmF0b3IiLCJfc3RlcCIsImltYWdlIiwiX2dldEltYWdlTWluTWF4IiwiZ2V0SW1hZ2VNaW5NYXgiLCJfZ2V0SW1hZ2VNaW5NYXgyIiwiZXJyIiwicmVuZGVyTGF5ZXIiLCJvcHRzIiwiX2RhdGEkZGF0YXNldCIsInJlbmRlclBNVGlsZXNMYXllciIsInJlbmRlclN0YWNMYXllciIsIl9kYXRhJGRhdGFzZXQyIiwiX3RoaXMyIiwiZXhwZXJpbWVudGFsQ29udGV4dCIsInN0YWNfdmVyc2lvbiIsIl90aGlzJGdldERlZmF1bHREZWNrTCIsImdldERlZmF1bHREZWNrTGF5ZXJQcm9wcyIsIm9wYWNpdHkiLCJ2aXNpYmxlIiwiaGFzU2hhZG93RWZmZWN0IiwiY29sb3JtYXBJZCIsImxpbmVhclJlc2NhbGluZyIsImxpbmVhclJlc2NhbGluZ0ZhY3RvciIsIm5vbkxpbmVhclJlc2NhbGluZyIsImdhbW1hQ29udHJhc3RGYWN0b3IiLCJzaWdtb2lkYWxDb250cmFzdEZhY3RvciIsInNpZ21vaWRhbEJpYXNGYWN0b3IiLCJzYXR1cmF0aW9uVmFsdWUiLCJmaWx0ZXJFbmFibGVkIiwiZmlsdGVyUmFuZ2UiLCJzdGFjU2VhcmNoUHJvdmlkZXIiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiX3N0YWNRdWVyeSIsImNhdGVnb3JpY2FsQ29sb3JNYXAiLCJjb2xvck1hcCIsImR5bmFtaWNDb2xvciIsInNob3VsZExvYWRUZXJyYWluIiwiRGF0ZSIsImJhbmRDb21iaW5hdGlvbiIsImdldFNpbmdsZUJhbmRQcmVzZXRPcHRpb25zIiwiZGF0YVNvdXJjZVBhcmFtcyIsIm1pblpvb20iLCJtYXhab29tIiwiZ2xvYmFsQm91bmRzIiwibG9hZEFzc2V0SWRzIiwibG9hZEJhbmRJbmRleGVzIiwicmVuZGVyQmFuZEluZGV4ZXMiLCJkYXRhVHlwZSIsImRzTWluUGl4ZWxWYWx1ZSIsImRzTWF4UGl4ZWxWYWx1ZSIsIm1pbkNhdGVnb3JpY2FsQmFuZFZhbHVlIiwibWF4Q2F0ZWdvcmljYWxCYW5kVmFsdWUiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImdldFRpbGVEYXRhQ3VzdG9tUHJvcHMiLCJ0aWxlTGF5ZXIiLCJUaWxlTGF5ZXIiLCJ0aWxlU2l6ZSIsImdldFRpbGVEYXRhIiwiYXJncyIsImJpbmQiLCJyZW5kZXJTdWJMYXllcnMiLCJyZW5kZXJTdWJMYXllcnNTdGFjIiwibWF4UmVxdWVzdHMiLCJnZXRNYXhSZXF1ZXN0cyIsInVwZGF0ZVRyaWdnZXJzIiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsInJlZmluZW1lbnRTdHJhdGVneSIsImhhc0NhdGVnb3JpY2FsQ29sb3JNYXAiLCJfZGF0YSRkYXRhc2V0MyIsIl90aGlzMyIsIl90aGlzJGdldERlZmF1bHREZWNrTDIiLCJzaG93VGlsZUJvcmRlcnMiLCJnZXRUaWxlRGF0YVBNVGlsZXMiLCJwaWNrYWJsZSIsImF1dG9IaWdobGlnaHQiLCJ6b29tT2Zmc2V0IiwicmVuZGVyU3ViTGF5ZXJzUE1UaWxlcyIsIl9nZXRUaWxlRGF0YSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWdlbmVyYXRvciIsIm1hcmsiLCJfY2FsbGVlIiwiX3Byb3BzJGJib3giLCJ3ZXN0Iiwic291dGgiLCJlYXN0Iiwibm9ydGgiLCJ6b29tIiwiYXNzZXRSZXF1ZXN0cyIsInRlcnJhaW4iLCJfeWllbGQkUHJvbWlzZSRhbGwiLCJfeWllbGQkUHJvbWlzZSRhbGwyIiwiX3RlcnJhaW4iLCJfdGhpcyRnZXRNaW5NYXhQaXhlbFYiLCJfdGhpcyRnZXRNaW5NYXhQaXhlbFYyIiwid3JhcCIsIl9jYWxsZWUkIiwiX2NvbnRleHQiLCJwcmV2IiwiYmJveCIsImluZGV4IiwieiIsImJib3hJbnRlcnNlY3RzIiwiYWJydXB0IiwiZ2V0U1RBQ0ltYWdlUmVxdWVzdHMiLCJzZW50IiwidDAiLCJsb2FkVGVycmFpbiIsImJvdW5kc0Zvckdlb21ldHJ5Iiwic2lnbmFsIiwiUHJvbWlzZSIsImFsbCIsImxvYWRJbWFnZXMiLCJtaW5WYWx1ZSIsIm1heFZhbHVlIiwiaW1hZ2VCYW5kcyIsInQxIiwic3RvcCIsIl94IiwiX2dldFRpbGVEYXRhUE1UaWxlcyIsIl9jYWxsZWUyIiwiX3Byb3BzJGJib3gyIiwiX3lpZWxkJFByb21pc2UkYWxsMyIsIl95aWVsZCRQcm9taXNlJGFsbDQiLCJfdGhpcyRnZXRNaW5NYXhQaXhlbFYzIiwiX3RoaXMkZ2V0TWluTWF4UGl4ZWxWNCIsIl9jYWxsZWUyJCIsIl9jb250ZXh0MiIsIl94MiIsIl94MyIsImZpbmREZWZhdWx0TGF5ZXJQcm9wcyIsIm5ld0xheWVyUHJvcCIsImxhYmVsIiwiS2VwbGVyTGF5ZXIiLCJ0aWxlIiwiZ2xvYmFsTWluUGl4ZWxWYWx1ZSIsImdsb2JhbE1heFBpeGVsVmFsdWUiLCJ0aWxlTWluUGl4ZWxWYWx1ZSIsInRpbGVNYXhQaXhlbFZhbHVlIiwiX2dldE1vZHVsZXMiLCJnZXRNb2R1bGVzIiwibW9kdWxlcyIsIm1vZHVsZVByb3BzIiwiaWRTdWZmaXgiLCJSYXN0ZXJNZXNoTGF5ZXIiLCJtZXNoIiwiZ2V0UG9seWdvbk9mZnNldCIsImNvb3JkaW5hdGVTeXN0ZW0iLCJDT09SRElOQVRFX1NZU1RFTSIsIkxOR0xBVCIsImdldENvbG9yIiwiUmFzdGVyTGF5ZXIiLCJfaW1hZ2VDb29yZGluYXRlU3lzdGVtIiwiQ0FSVEVTSUFOIiwiX3Byb3BzJGRhdGEiLCJfcHJvcHMkdGlsZSIsIl9wcm9wcyR0aWxlJGJib3giLCJsYXllcnMiLCJtaW1lVHlwZSIsImdldFJhc3RlckxheWVyUE1UaWxlcyIsImJvcmRlckNvbG9yIiwiUGF0aExheWVyIiwiZ2V0UGF0aCIsImQiLCJ3aWR0aE1pblBpeGVscyIsImltYWdlUmdiYSIsIl9nZXRNb2R1bGVzMiJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yYXN0ZXItdGlsZS9yYXN0ZXItdGlsZS1sYXllci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQge0NPT1JESU5BVEVfU1lTVEVNLCBMYXllciBhcyBEZWNrTGF5ZXJ9IGZyb20gJ0BkZWNrLmdsL2NvcmUvdHlwZWQnO1xuaW1wb3J0IHtUaWxlTGF5ZXIsIEdlb0JvdW5kaW5nQm94fSBmcm9tICdAZGVjay5nbC9nZW8tbGF5ZXJzL3R5cGVkJztcbmltcG9ydCB7UE1UaWxlc1NvdXJjZSwgUE1UaWxlc1RpbGVTb3VyY2V9IGZyb20gJ0Bsb2FkZXJzLmdsL3BtdGlsZXMnO1xuaW1wb3J0IHtUZXh0dXJlMkRQcm9wc30gZnJvbSAnQGx1bWEuZ2wvd2ViZ2wnO1xuaW1wb3J0IG1lbW9pemUgZnJvbSAnbG9kYXNoL21lbW9pemUnO1xuXG5pbXBvcnQge1BhdGhMYXllcn0gZnJvbSAnQGRlY2suZ2wvbGF5ZXJzL3R5cGVkJztcbmltcG9ydCB7RGF0YXNldFR5cGUsIFBNVGlsZXNUeXBlLCBMQVlFUl9UWVBFU30gZnJvbSAnQGtlcGxlci5nbC9jb25zdGFudHMnO1xuaW1wb3J0IHtSYXN0ZXJMYXllciwgUmFzdGVyTWVzaExheWVyfSBmcm9tICdAa2VwbGVyLmdsL2RlY2tnbC1sYXllcnMnO1xuaW1wb3J0IHtcbiAgTGF5ZXJCYXNlQ29uZmlnLFxuICBMYXllckNvbG9yQ29uZmlnLFxuICBMYXllckhlaWdodENvbmZpZyxcbiAgVmlzdWFsQ2hhbm5lbCxcbiAgVmlzQ29uZmlnQ29sb3JSYW5nZSxcbiAgVmlzQ29uZmlnU2VsZWN0aW9uLFxuICBWaXNDb25maWdCb29sZWFuLFxuICBWaXNDb25maWdJbnB1dCxcbiAgVmlzQ29uZmlnUmFuZ2UsXG4gIFZpc0NvbmZpZ051bWJlclxufSBmcm9tICdAa2VwbGVyLmdsL3R5cGVzJztcblxuaW1wb3J0IHtub3ROdWxsb3JVbmRlZmluZWR9IGZyb20gJ0BrZXBsZXIuZ2wvY29tbW9uLXV0aWxzJztcbmltcG9ydCB7RGF0YXNldHMsIEtlcGxlclRhYmxlIGFzIEtlcGxlckRhdGFzZXQsIFZlY3RvclRpbGVNZXRhZGF0YX0gZnJvbSAnQGtlcGxlci5nbC90YWJsZSc7XG5pbXBvcnQge2dldEFwcGxpY2F0aW9uQ29uZmlnfSBmcm9tICdAa2VwbGVyLmdsL3V0aWxzJztcblxuaW1wb3J0IHtyYXN0ZXJWaXNDb25maWdzLCBQUkVTRVRfT1BUSU9OUywgREFUQV9TT1VSQ0VfQ09MT1JfREVGQVVMVFN9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7Z2V0TW9kdWxlc30gZnJvbSAnLi9ncHUtdXRpbHMnO1xuaW1wb3J0IHtnZXRTVEFDSW1hZ2VSZXF1ZXN0cywgbG9hZEltYWdlcywgbG9hZFRlcnJhaW59IGZyb20gJy4vaW1hZ2UnO1xuaW1wb3J0IFJhc3Rlckljb24gZnJvbSAnLi9yYXN0ZXItdGlsZS1pY29uJztcbmltcG9ydCB7XG4gIGdldERhdGFTb3VyY2VQYXJhbXMsXG4gIGdldE1heFJlcXVlc3RzLFxuICBiYm94SW50ZXJzZWN0cyxcbiAgY29tcHV0ZVpSYW5nZSxcbiAgZ2V0U1RBQ0JvdW5kcyxcbiAgZ2V0RU9CYW5kcyxcbiAgZmlsdGVyQXZhaWxhYmxlUHJlc2V0cyxcbiAgZ2V0U2luZ2xlQmFuZFByZXNldE9wdGlvbnMsXG4gIGdldEltYWdlTWluTWF4LFxuICBnZXRNaW5NYXhGcm9tVGlsZTJESGVhZGVyc1xufSBmcm9tICcuL3Jhc3Rlci10aWxlLXV0aWxzJztcbmltcG9ydCB7XG4gIEdldFRpbGVEYXRhQ3VzdG9tUHJvcHMsXG4gIEdldFRpbGVEYXRhRGVmYXVsdFByb3BzLFxuICBHZXRUaWxlRGF0YVByb3BzLFxuICBSZW5kZXJTdWJMYXllcnNQcm9wcyxcbiAgR2V0VGlsZURhdGFPdXRwdXQsXG4gIERhdGFTb3VyY2VQYXJhbXMsXG4gIEtlcGxlclJhc3RlckRhdGFzZXQsXG4gIFRpbGUyREhlYWRlcixcbiAgUHJlc2V0T3B0aW9uLFxuICBDb21wbGV0ZVNUQUNPYmplY3Rcbn0gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCB7RmluZERlZmF1bHRMYXllclByb3BzUmV0dXJuVmFsdWV9IGZyb20gJy4uL2xheWVyLXV0aWxzJztcbmltcG9ydCB7ZGVmYXVsdCBhcyBLZXBsZXJMYXllciwgTGF5ZXJCYXNlQ29uZmlnUGFydGlhbH0gZnJvbSAnLi4vYmFzZS1sYXllcic7XG5cbi8vIEFkanVzdCB0aWxlU2l6ZSB0byBkZXZpY2VQaXhlbFJhdGlvLCBidXQgbm90IGhpZ2hlciB0aGFuIDIgdG8gcmVkdWNlIHJlcXVlc3RzIHRvIHNlcnZlclxuY29uc3QgZGV2aWNlUGl4ZWxSYXRpbzogbnVtYmVyID0gTWF0aC5taW4oXG4gIDIsXG4gICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykgfHwgMVxuKTtcblxuLy8gR2xvYmFsIGNvdW50ZXIgdGhhdCByZXByZXNlbnRzIHRoZSBudW1iZXIgb2YgdGlsZXMgY3VycmVudGx5IGJlaW5nIGxvYWRlZCBhY3Jvc3MgYWxsIHRoZSByYXN0ZXIgdGlsZSBsYXllcnNcbmxldCB0aWxlc0JlaW5nTG9hZGVkID0gMDtcblxuLy8gVGhpcyBpcyBhIHRlbXAgc29sdXRpb24gdG8gdHJhY2sgbG9hZGluZ1xuZXhwb3J0IGNvbnN0IGdldE51bVJhc3RlclRpbGVzQmVpbmdMb2FkZWQgPSAoKSA9PiB7XG4gIHJldHVybiB0aWxlc0JlaW5nTG9hZGVkO1xufTtcblxuZXhwb3J0IGNvbnN0IExPQURfRUxFVkFUSU9OX0FGVEVSX1pPT00gPSA4Ljk7XG5cbmNvbnN0IGdldFNob3VsZExvYWRUZXJyYWluID0gKHN0YWMsIG1hcFN0YXRlLCB2aXNDb25maWcpID0+IHtcbiAgcmV0dXJuIEJvb2xlYW4oXG4gICAgLy8gd2UgbmVlZCBhIHJhc3RlciB0aWxlIHNlcnZlciBmb3IgZWxldmF0aW9ucyBldmVuIHdoZW4gd2UgdXNlciBQTVRpbGVzXG4gICAgc3RhYy5yYXN0ZXJUaWxlU2VydmVyVXJscz8ubGVuZ3RoID4gMCAmJlxuICAgICAgLy8gY2hlY2sgdGhlIHN3aXRjaCBmcm9tIHRoZSBsYXllciBjb25maWd1cmF0b3JcbiAgICAgIHZpc0NvbmZpZy5lbmFibGVUZXJyYWluICYmXG4gICAgICAvLyBkaXNhYmxlZCBpbiBUb3AgdmlldyBieSBkZWZhdWx0XG4gICAgICAobWFwU3RhdGUuZHJhZ1JvdGF0ZSB8fCB2aXNDb25maWcuZW5hYmxlVGVycmFpblRvcFZpZXcpICYmXG4gICAgICBnZXRBcHBsaWNhdGlvbkNvbmZpZygpLnJhc3RlclNlcnZlclN1cHBvcnRzRWxldmF0aW9uXG4gICk7XG59O1xuXG5leHBvcnQgdHlwZSBSYXN0ZXJUaWxlTGF5ZXJWaXNDb25maWdDb21tb25TZXR0aW5ncyA9IHtcbiAgb3BhY2l0eTogVmlzQ29uZmlnTnVtYmVyO1xuICBlbmFibGVUZXJyYWluOiBWaXNDb25maWdCb29sZWFuO1xuICBlbmFibGVUZXJyYWluVG9wVmlldzogVmlzQ29uZmlnQm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIFJhc3RlclRpbGVMYXllclZpc0NvbmZpZ1NldHRpbmdzID0gUmFzdGVyVGlsZUxheWVyVmlzQ29uZmlnQ29tbW9uU2V0dGluZ3MgJiB7XG4gIHByZXNldDogVmlzQ29uZmlnU2VsZWN0aW9uO1xuICB1c2VTVEFDU2VhcmNoaW5nOiBWaXNDb25maWdCb29sZWFuO1xuICBzdGFjU2VhcmNoUHJvdmlkZXI6IFZpc0NvbmZpZ1NlbGVjdGlvbjtcbiAgc3RhcnREYXRlOiBWaXNDb25maWdJbnB1dDtcbiAgZW5kRGF0ZTogVmlzQ29uZmlnSW5wdXQ7XG4gIGR5bmFtaWNDb2xvcjogVmlzQ29uZmlnQm9vbGVhbjtcbiAgY29sb3JtYXBJZDogVmlzQ29uZmlnU2VsZWN0aW9uO1xuICBjb2xvclJhbmdlOiBWaXNDb25maWdDb2xvclJhbmdlO1xuICBsaW5lYXJSZXNjYWxpbmdGYWN0b3I6IFZpc0NvbmZpZ1JhbmdlO1xuICBub25MaW5lYXJSZXNjYWxpbmc6IFZpc0NvbmZpZ0Jvb2xlYW47XG4gIGdhbW1hQ29udHJhc3RGYWN0b3I6IFZpc0NvbmZpZ051bWJlcjtcbiAgc2lnbW9pZGFsQ29udHJhc3RGYWN0b3I6IFZpc0NvbmZpZ051bWJlcjtcbiAgc2lnbW9pZGFsQmlhc0ZhY3RvcjogVmlzQ29uZmlnTnVtYmVyO1xuICBzYXR1cmF0aW9uVmFsdWU6IFZpc0NvbmZpZ051bWJlcjtcbiAgZmlsdGVyRW5hYmxlZDogVmlzQ29uZmlnQm9vbGVhbjtcbiAgZmlsdGVyUmFuZ2U6IFZpc0NvbmZpZ1JhbmdlO1xuICBfc3RhY1F1ZXJ5OiBWaXNDb25maWdJbnB1dDtcbiAgc2luZ2xlQmFuZE5hbWU6IFZpc0NvbmZpZ1NlbGVjdGlvbjtcbn07XG5cbnR5cGUgUmFzdGVyVGlsZUxheWVyTWV0YSA9IHtcbiAgelJhbmdlOiBudW1iZXJbXSB8IG51bGw7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSYXN0ZXJUaWxlTGF5ZXIgZXh0ZW5kcyBLZXBsZXJMYXllciB7XG4gIGRlY2xhcmUgdmlzQ29uZmlnU2V0dGluZ3M6IFJhc3RlclRpbGVMYXllclZpc0NvbmZpZ1NldHRpbmdzO1xuICBkZWNsYXJlIG1ldGE6IFJhc3RlclRpbGVMYXllck1ldGE7XG5cbiAgLyoqIE1pbiBiYW5kcyBpbWFnZSBkYXRhIHZhbHVlLCBiYXNlZCBvbiB0aGUgY3VycmVudCB2aWV3cG9ydCAqL1xuICBtaW5WaWV3cG9ydFBpeGVsVmFsdWUgPSBJbmZpbml0eTtcbiAgLyoqIE1heCBiYW5kcyBpbWFnZSBkYXRhIHZhbHVlLCBiYXNlZCBvbiB0aGUgY3VycmVudCB2aWV3cG9ydCAqL1xuICBtYXhWaWV3cG9ydFBpeGVsVmFsdWUgPSAtSW5maW5pdHk7XG4gIC8qKiBNZW1vaXplZCBtZXRob2QgdGhhdCBjYWxjdWxhdGVzIGRhdGEgc291cmNlIHBhcmFtcyAqL1xuXG4gIGdldERhdGFTb3VyY2VQYXJhbXM6IChcbiAgICBzdGFjOiBDb21wbGV0ZVNUQUNPYmplY3QsXG4gICAgcHJlc2V0OiBzdHJpbmcsXG4gICAgcHJlc2V0T3B0aW9uczogUHJlc2V0T3B0aW9uXG4gICkgPT4gRGF0YVNvdXJjZVBhcmFtcyB8IG51bGw7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXNcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5yZWdpc3RlclZpc0NvbmZpZyhyYXN0ZXJWaXNDb25maWdzKTtcblxuICAgIC8vIE5vIHR3byBTVEFDIGlkcyBtYXkgYmUgdGhlIHNhbWUgd2l0aGluIGEgc2luZ2xlIGNvbGxlY3Rpb24sIHRob3VnaCBpdCdzIGNvbmNlaXZhYmx5IHBvc3NpYmxlXG4gICAgLy8gYWNyb3NzIG11bHRpcGxlIFNUQUMgY29sbGVjdGlvbnMgdGhlcmUgY291bGQgYmUgYW4gaWQgY29sbGlzaW9uLiBOb3RlOiBTVEFDIENvbGxlY3Rpb25cbiAgICAvLyBvYmplY3RzIGRvbid0IGhhdmUgYSBgY29sbGVjdGlvbmAga2V5OyBTVEFDIEl0ZW0gb2JqZWN0cyBoYXZlIGEgYGNvbGxlY3Rpb25gIGtleSAod2hpY2hcbiAgICAvLyBtYXRjaGVzIHRoZSBjb2xsZWN0aW9uJ3MgYGlkYCkuXG4gICAgY29uc3QgcmVzb2x2ZXIgPSAoc3RhYzogQ29tcGxldGVTVEFDT2JqZWN0LCBwcmVzZXQ6IHN0cmluZywgcHJlc2V0T3B0aW9uczogUHJlc2V0T3B0aW9uKSA9PlxuICAgICAgYCR7c3RhYy5pZH0tJHtzdGFjLmNvbGxlY3Rpb259LSR7cHJlc2V0fS0ke3ByZXNldE9wdGlvbnMuc2luZ2xlQmFuZD8uYXNzZXRJZH0tJHtwcmVzZXRPcHRpb25zLnNpbmdsZUJhbmQ/LmJhbmRJbmRleH1gO1xuICAgIHRoaXMuZ2V0RGF0YVNvdXJjZVBhcmFtcyA9IG1lbW9pemUoXG4gICAgICAoc3RhYywgcHJlc2V0LCBwcmVzZXRPcHRpb25zKSA9PiBnZXREYXRhU291cmNlUGFyYW1zKHN0YWMsIHByZXNldCwgcHJlc2V0T3B0aW9ucyksXG4gICAgICByZXNvbHZlclxuICAgICk7XG5cbiAgICB0aGlzLm1ldGEgPSB7elJhbmdlOiBudWxsfTtcbiAgfVxuXG4gIHN0YXRpYyBmaW5kRGVmYXVsdExheWVyUHJvcHMoZGF0YXNldDogS2VwbGVyRGF0YXNldCk6IEZpbmREZWZhdWx0TGF5ZXJQcm9wc1JldHVyblZhbHVlIHtcbiAgICBpZiAoZGF0YXNldC50eXBlICE9PSBEYXRhc2V0VHlwZS5SQVNURVJfVElMRSkge1xuICAgICAgcmV0dXJuIHtwcm9wczogW119O1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0xheWVyUHJvcCA9IHtcbiAgICAgIGRhdGFJZDogZGF0YXNldC5pZCxcbiAgICAgIGxhYmVsOiBkYXRhc2V0LmxhYmVsLFxuICAgICAgaXNWaXNpYmxlOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiB7cHJvcHM6IFtuZXdMYXllclByb3BdfTtcbiAgfVxuXG4gIGdldCB0eXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIExBWUVSX1RZUEVTLnJhc3RlclRpbGU7XG4gIH1cblxuICBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnUmFzdGVyIFRpbGUnO1xuICB9XG5cbiAgZ2V0IGxheWVySWNvbigpOiBLZXBsZXJMYXllclsnbGF5ZXJJY29uJ10ge1xuICAgIHJldHVybiBSYXN0ZXJJY29uO1xuICB9XG5cbiAgZ2V0IHN1cHBvcnRlZERhdGFzZXRUeXBlcygpOiBEYXRhc2V0VHlwZVtdIHtcbiAgICByZXR1cm4gW0RhdGFzZXRUeXBlLlJBU1RFUl9USUxFXTtcbiAgfVxuXG4gIGdldCB2aXN1YWxDaGFubmVscygpOiBSZWNvcmQ8c3RyaW5nLCBWaXN1YWxDaGFubmVsPiB7XG4gICAgY29uc3Qge1xuICAgICAgdmlzQ29uZmlnOiB7XG4gICAgICAgIGNvbG9yUmFuZ2U6IHtjb2xvckxlZ2VuZHM6IGNhdGVnb3JpY2FsQ29sb3JMZWdlbmRzfVxuICAgICAgfVxuICAgIH0gPSB0aGlzLmNvbmZpZztcbiAgICBpZiAoY2F0ZWdvcmljYWxDb2xvckxlZ2VuZHMpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbG9yOiBzdXBlci52aXN1YWxDaGFubmVscy5jb2xvclxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfVxuXG4gIGdldCByZXF1aXJlRGF0YSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldERlZmF1bHRMYXllckNvbmZpZyhcbiAgICBwcm9wczogTGF5ZXJCYXNlQ29uZmlnUGFydGlhbFxuICApOiBMYXllckJhc2VDb25maWcgJiBQYXJ0aWFsPExheWVyQ29sb3JDb25maWcgJiBMYXllckhlaWdodENvbmZpZz4ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdXBlci5nZXREZWZhdWx0TGF5ZXJDb25maWcocHJvcHMpLFxuICAgICAgY29sb3JGaWVsZDoge1xuICAgICAgICBhbmFseXplclR5cGU6ICcnLFxuICAgICAgICBuYW1lOiAnQ2F0ZWdvcnknLFxuICAgICAgICBmb3JtYXQ6ICcnLFxuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgZmllbGRJZHg6IC0xLFxuICAgICAgICB2YWx1ZUFjY2Vzc29yOiAoKSA9PiAnJyxcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDYXRlZ29yeSdcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZ2V0SG92ZXJEYXRhKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gV2UgY2FuIHJlbmRlciB3aXRob3V0IGNvbHVtbnMsIHNvIHdlIHJlZGVmaW5lIHRoaXMgbWV0aG9kXG4gIHNob3VsZFJlbmRlckxheWVyKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMudHlwZSAmJiB0aGlzLmNvbmZpZy5pc1Zpc2libGUpO1xuICB9XG5cbiAgZm9ybWF0TGF5ZXJEYXRhKGRhdGFzZXRzOiBEYXRhc2V0cywgb2xkTGF5ZXJEYXRhPzogYW55KSB7XG4gICAgY29uc3Qge2RhdGFJZH0gPSB0aGlzLmNvbmZpZztcbiAgICBpZiAoIW5vdE51bGxvclVuZGVmaW5lZChkYXRhSWQpKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGNvbnN0IGRhdGFzZXQgPSBkYXRhc2V0c1tkYXRhSWRdO1xuXG4gICAgLy8gY2FsbCB1cGRhdGVEYXRhIHRvIHVwZGF0ZUxheWVyTWV0YVxuICAgIGNvbnN0IGRhdGFVcGRhdGVUcmlnZ2VycyA9IHRoaXMuZ2V0RGF0YVVwZGF0ZVRyaWdnZXJzKGRhdGFzZXQpO1xuICAgIGNvbnN0IHRyaWdnZXJDaGFuZ2VkID0gdGhpcy5nZXRDaGFuZ2VkVHJpZ2dlcnMoZGF0YVVwZGF0ZVRyaWdnZXJzKTtcblxuICAgIGlmICh0cmlnZ2VyQ2hhbmdlZCAmJiB0cmlnZ2VyQ2hhbmdlZC5nZXRNZXRhKSB7XG4gICAgICB0aGlzLnVwZGF0ZUxheWVyTWV0YShkYXRhc2V0IGFzIEtlcGxlclJhc3RlckRhdGFzZXQpO1xuICAgIH1cblxuICAgIGxldCB0aWxlU291cmNlOiBQTVRpbGVzVGlsZVNvdXJjZSB8IG51bGwgPSBudWxsO1xuICAgIGlmIChkYXRhc2V0Lm1ldGFkYXRhPy5wbXRpbGVzVHlwZSA9PT0gUE1UaWxlc1R5cGUuUkFTVEVSKSB7XG4gICAgICBjb25zdCBtZXRhZGF0YVVybCA9IGRhdGFzZXQubWV0YWRhdGEubWV0YWRhdGFVcmw7XG4gICAgICAvLyB1c2UgdGhlIG9sZCB0aWxlIHNvdXJjZSBpZiBpdCBleGlzdHMgYW5kIG1hdGNoZXMgdGhlIG5ldyBtZXRhZGF0YVVybFxuICAgICAgY29uc3Qge2RhdGFzZXQ6IG9sZERhdGFzZXQsIHRpbGVTb3VyY2U6IG9sZFRpbGVTb3VyY2V9ID0gb2xkTGF5ZXJEYXRhIHx8IHt9O1xuICAgICAgaWYgKG9sZERhdGFzZXQgPT09IGRhdGFzZXQgJiYgb2xkVGlsZVNvdXJjZT8uZGF0YSA9PT0gbWV0YWRhdGFVcmwpIHtcbiAgICAgICAgdGlsZVNvdXJjZSA9IG9sZExheWVyRGF0YS50aWxlU291cmNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGlsZVNvdXJjZSA9IG1ldGFkYXRhVXJsID8gUE1UaWxlc1NvdXJjZS5jcmVhdGVEYXRhU291cmNlKG1ldGFkYXRhVXJsLCB7fSkgOiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7ZGF0YXNldCwgdGlsZVNvdXJjZX07XG4gIH1cblxuICB1cGRhdGVMYXllck1ldGEoZGF0YXNldDogS2VwbGVyUmFzdGVyRGF0YXNldCk6IHZvaWQge1xuICAgIGlmIChkYXRhc2V0LnR5cGUgIT09IERhdGFzZXRUeXBlLlJBU1RFUl9USUxFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhYyA9IGRhdGFzZXQubWV0YWRhdGE7XG4gICAgaWYgKHN0YWMucG10aWxlc1R5cGUgPT09IFBNVGlsZXNUeXBlLlJBU1RFUikge1xuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlTWV0YSh7XG4gICAgICAgIGJvdW5kczogc3RhYy5ib3VuZHNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGJvdW5kcyA9IGdldFNUQUNCb3VuZHMoc3RhYyk7XG4gICAgaWYgKGJvdW5kcykge1xuICAgICAgLy8gSWYgYSBTVEFDIEl0ZW0gKGkuZS4gc3RhYy50eXBlID09PSAnRmVhdHVyZScpLCB0aGVuIHNldCBtYXAgYm91bmRzLlxuICAgICAgLy8gQnV0IHdlIGRvbid0IHdhbnQgdG8gc2V0IGJvdW5kcyBmb3IgTGFuZHNhdCBvciBTZW50aW5lbCBiZWNhdXNlIGl0IHdvdWxkIHpvb20gb3V0IHRvIHpvb21cbiAgICAgIC8vIDAsIGFuZCB3ZSBkb24ndCBoYXZlIGxvdy16b29tIHRpbGVzLlxuICAgICAgaWYgKHN0YWMudHlwZSA9PT0gJ0ZlYXR1cmUnKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTWV0YSh7Ym91bmRzfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJ1biB3aGVuIGFkZGluZyBhIG5ldyBkYXRhc2V0XG4gICAqL1xuICBzZXRJbml0aWFsTGF5ZXJDb25maWcoZGF0YXNldDogS2VwbGVyRGF0YXNldCk6IFJhc3RlclRpbGVMYXllciB7XG4gICAgY29uc3Qgc3RhYyA9IGRhdGFzZXQ/Lm1ldGFkYXRhIGFzIEdldFRpbGVEYXRhQ3VzdG9tUHJvcHNbJ3N0YWMnXTtcblxuICAgIGlmICghc3RhYykge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHN0YWMucG10aWxlc1R5cGUgPT09IFBNVGlsZXNUeXBlLlJBU1RFUikge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gV2hlbiBhIFNUQUMgQ29sbGVjdGlvbiBpcyBhZGRlZCwgdXNlU3RhY1NlYXJjaGluZyBzaG91bGQgYmUgdHJ1ZSB0byBwcmV2ZW50IGEgYmxhY2sgc2NyZWVuXG4gICAgdGhpcy51cGRhdGVMYXllclZpc0NvbmZpZyh7XG4gICAgICB1c2VTVEFDU2VhcmNoaW5nOiBzdGFjLnR5cGUgPT09ICdDb2xsZWN0aW9uJ1xuICAgIH0pO1xuXG4gICAgLy8gU2V0IHNpbmdsZUJhbmROYW1lIGlmIHRoZXJlIGlzIG9ubHkgb25lIGJhbmRcbiAgICBjb25zdCBhdmFpbGFibGVCYW5kcyA9IGdldEVPQmFuZHMoc3RhYykgfHwgW107XG4gICAgaWYgKGF2YWlsYWJsZUJhbmRzPy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHRoaXMudXBkYXRlTGF5ZXJWaXNDb25maWcoe3NpbmdsZUJhbmROYW1lOiBhdmFpbGFibGVCYW5kc1swXS5uYW1lfSk7XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBwcmVzZXQgaWYgdGhlIGRlZmF1bHQgb25lIGlzIG5vdCBhbGxvd2VkXG4gICAgY29uc3QgYXZhaWxhYmxlUHJlc2V0cyA9IGZpbHRlckF2YWlsYWJsZVByZXNldHMoc3RhYywgUFJFU0VUX09QVElPTlMpO1xuICAgIGlmIChcbiAgICAgIGF2YWlsYWJsZVByZXNldHM/Lmxlbmd0aCAmJlxuICAgICAgIWF2YWlsYWJsZVByZXNldHM/LmluY2x1ZGVzKHRoaXMudmlzQ29uZmlnU2V0dGluZ3MucHJlc2V0LmRlZmF1bHRWYWx1ZSBhcyBzdHJpbmcpXG4gICAgKSB7XG4gICAgICB0aGlzLnVwZGF0ZUxheWVyVmlzQ29uZmlnKHtwcmVzZXQ6IGF2YWlsYWJsZVByZXNldHNbMF19KTtcbiAgICB9XG5cbiAgICAvLyBBcHBseSBpbXByb3ZlZCBpbWFnZSBwcm9jZXNzaW5nIHByb3BzIG9ubHkgZm9yIG5vbiBzaW5nbGUgYmFuZCBtb2Rlc1xuICAgIGNvbnN0IHByZXNldCA9IHRoaXMuY29uZmlnLnZpc0NvbmZpZy5wcmVzZXQ7XG4gICAgY29uc3QgY29sb3JEZWZhdWx0cyA9IERBVEFfU09VUkNFX0NPTE9SX0RFRkFVTFRTW3N0YWMuaWRdO1xuICAgIGlmIChjb2xvckRlZmF1bHRzICYmIHByZXNldCAhPT0gJ3NpbmdsZUJhbmQnKSB7XG4gICAgICB0aGlzLnVwZGF0ZUxheWVyVmlzQ29uZmlnKGNvbG9yRGVmYXVsdHMpO1xuICAgIH1cblxuICAgIC8qXG4gICAgTGFuZFNhdCBzcGVjaWZpZXMgdGVtcG9yYWwgYm91bmRzIGJ1dCB0aGUgdmFsaWQgZGF0YSBpcyBhZnRlciBlbmQgZGF0ZVxuICAgIGNvbnN0IHVwZGF0ZWREYXRlcyA9IHRpbWVSYW5nZVRvU3RhY1RlbXBvcmFsSW50ZXJ2YWwoXG4gICAgICBzdGFjIGFzIFN0YWNUeXBlcy5TVEFDQ29sbGVjdGlvbixcbiAgICAgIHRoaXMuY29uZmlnLnZpc0NvbmZpZy5zdGFydERhdGUsXG4gICAgICB0aGlzLmNvbmZpZy52aXNDb25maWcuZW5kRGF0ZVxuICAgICk7XG4gICAgdGhpcy51cGRhdGVMYXllclZpc0NvbmZpZyh1cGRhdGVkRGF0ZXMpO1xuICAgICovXG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgelJhbmdlIG9mIHZpZXdwb3J0LiBUaGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRpbGVzIGluIGV4dHJ1ZGVkIG1vZGUgYXJlIHNob3duIHByb3Blcmx5XG4gICAqIGF0IGhpZ2ggZWxldmF0aW9uczogaHR0cHM6Ly9naXRodWIuY29tL2ZvdXJzcXVhcmUvc3R1ZGlvLW1vbm9yZXBvL3B1bGwvMTg5Mi9maWxlc1xuICAgKiBEZXJpdmVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3Zpc2dsL2RlY2suZ2wvYmxvYi84ZDgyNGE0YjgzNmZlZTNiZmViZTZmYzk2MmUwZjAzZDhjMWRiZDBkL21vZHVsZXMvZ2VvLWxheWVycy9zcmMvdGVycmFpbi1sYXllci90ZXJyYWluLWxheWVyLmpzI0wxNzMtTDE5NlxuICAgKlxuICAgKiBAcGFyYW0gdGlsZXMgQXJyYXkgb2YgdGlsZXMgaW4gY3VycmVudCB2aWV3cG9ydFxuICAgKi9cbiAgb25WaWV3cG9ydExvYWQodGlsZXM6IChUaWxlMkRIZWFkZXIgfCBudWxsKVtdKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVNaW5NYXhQaXhlbFZhbHVlKHRpbGVzKTtcbiAgICBjb25zdCBuZXdaUmFuZ2UgPSBjb21wdXRlWlJhbmdlKHRpbGVzKTtcbiAgICBpZiAoIW5ld1pSYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHt6UmFuZ2V9ID0gdGhpcy5tZXRhO1xuICAgIGlmICghelJhbmdlIHx8IG5ld1pSYW5nZVswXSA8IHpSYW5nZVswXSB8fCBuZXdaUmFuZ2VbMV0gPiB6UmFuZ2VbMV0pIHtcbiAgICAgIHRoaXMubWV0YS56UmFuZ2UgPSBuZXdaUmFuZ2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB2aWV3cG9ydC1yZWxhdGVkIG1pblB4ZWxWYWx1ZSBhbmQgbWF4UGl4ZWxWYWx1ZVxuICAgKiBAcGFyYW0gdGlsZXMgLSBkZWNrLmdsIHRpbGVzXG4gICAqL1xuICB1cGRhdGVNaW5NYXhQaXhlbFZhbHVlKHRpbGVzOiAoVGlsZTJESGVhZGVyIHwgbnVsbClbXSk6IHZvaWQge1xuICAgIGNvbnN0IFttaW4sIG1heF0gPSBnZXRNaW5NYXhGcm9tVGlsZTJESGVhZGVycyh0aWxlcyk7XG4gICAgdGhpcy5taW5WaWV3cG9ydFBpeGVsVmFsdWUgPSBtaW47XG4gICAgdGhpcy5tYXhWaWV3cG9ydFBpeGVsVmFsdWUgPSBtYXg7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIG1pbiBhbmQgbWF4IHZhbHVlcyBvZiBpbnB1dCByYXN0ZXIgYmFuZCBpbWFnZSBwcm9wZXJ0aWVzXG4gICAqIGFuZCB1cGRhdGUgYG1pbkJhbmRzVmFsdWVgIGFuZCBgbWF4QmFuZHNWYWx1ZWBcbiAgICogQHBhcmFtIGltYWdlcyAtIHJhc3RlciBiYW5kIGltYWdlIHByb3BlcnRpZXNcbiAgICogQHJldHVybiBbbWluLCBtYXhdIHBpeGVsIHZhbHVlcyBmb3IgdGhlIHRpbGVcbiAgICovXG4gIGdldE1pbk1heFBpeGVsVmFsdWVzKGltYWdlczogVGV4dHVyZTJEUHJvcHNbXSB8IG51bGwpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICBsZXQgbWluUGl4ZWxWYWx1ZSA9IEluZmluaXR5O1xuICAgIGxldCBtYXhQaXhlbFZhbHVlID0gLUluZmluaXR5O1xuICAgIGlmIChpbWFnZXMpIHtcbiAgICAgIGZvciAoY29uc3QgaW1hZ2Ugb2YgaW1hZ2VzKSB7XG4gICAgICAgIGNvbnN0IFttaW4sIG1heF0gPSBnZXRJbWFnZU1pbk1heChpbWFnZS5kYXRhKTtcbiAgICAgICAgaWYgKHR5cGVvZiBtaW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgbWluUGl4ZWxWYWx1ZSA9IE1hdGgubWluKG1pbiwgbWluUGl4ZWxWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBtYXggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgbWF4UGl4ZWxWYWx1ZSA9IE1hdGgubWF4KG1heCwgbWF4UGl4ZWxWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFttaW5QaXhlbFZhbHVlLCBtYXhQaXhlbFZhbHVlXTtcbiAgfVxuXG4gIC8vIGdlbmVyYXRlIGEgZGVjayBsYXllclxuICByZW5kZXJMYXllcihvcHRzKTogVGlsZUxheWVyPGFueT5bXSB7XG4gICAgY29uc3Qge2RhdGF9ID0gb3B0cztcblxuICAgIGlmIChkYXRhPy5kYXRhc2V0Py5tZXRhZGF0YT8ucG10aWxlc1R5cGUgPT09IFBNVGlsZXNUeXBlLlJBU1RFUikge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUE1UaWxlc0xheWVyKG9wdHMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZW5kZXJTdGFjTGF5ZXIob3B0cyk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN0YWNMYXllcihvcHRzKTogVGlsZUxheWVyPGFueT5bXSB7XG4gICAgY29uc3Qge2RhdGEsIG1hcFN0YXRlLCBleHBlcmltZW50YWxDb250ZXh0fSA9IG9wdHM7XG4gICAgY29uc3Qgc3RhYyA9IGRhdGE/LmRhdGFzZXQ/Lm1ldGFkYXRhIGFzIEdldFRpbGVEYXRhQ3VzdG9tUHJvcHNbJ3N0YWMnXTtcblxuICAgIC8vIElmIGEgdGFidWxhciBkYXRhc2V0IGlzIGxvYWRlZCwgYW5kIHRoZW4gdGhlIGxheWVyIHR5cGUgaXMgc3dpdGNoZWQgZnJvbSBQb2ludCB0byBSYXN0ZXIgVGlsZVxuICAgIC8vIGxheWVyLCB0aGlzIGBzdGFjYCBvYmplY3Qgd2lsbCBleGlzdCBidXQgd2lsbCBub3QgYmUgcmFzdGVyIG1ldGFkYXRhXG4gICAgaWYgKCFzdGFjIHx8ICFzdGFjLnN0YWNfdmVyc2lvbikge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHt2aXNDb25maWd9ID0gdGhpcy5jb25maWc7XG4gICAgY29uc3Qge2lkLCBvcGFjaXR5LCB2aXNpYmxlfSA9IHRoaXMuZ2V0RGVmYXVsdERlY2tMYXllclByb3BzKG9wdHMpO1xuXG4gICAgY29uc3QgaGFzU2hhZG93RWZmZWN0ID0gZXhwZXJpbWVudGFsQ29udGV4dD8uaGFzU2hhZG93RWZmZWN0O1xuXG4gICAgY29uc3Qge1xuICAgICAgcHJlc2V0LFxuICAgICAgY29sb3JtYXBJZCxcbiAgICAgIGxpbmVhclJlc2NhbGluZyxcbiAgICAgIGxpbmVhclJlc2NhbGluZ0ZhY3RvcixcbiAgICAgIG5vbkxpbmVhclJlc2NhbGluZyxcbiAgICAgIGdhbW1hQ29udHJhc3RGYWN0b3IsXG4gICAgICBzaWdtb2lkYWxDb250cmFzdEZhY3RvcixcbiAgICAgIHNpZ21vaWRhbEJpYXNGYWN0b3IsXG4gICAgICBzYXR1cmF0aW9uVmFsdWUsXG4gICAgICBmaWx0ZXJFbmFibGVkLFxuICAgICAgZmlsdGVyUmFuZ2UsXG4gICAgICB1c2VTVEFDU2VhcmNoaW5nLFxuICAgICAgc3RhY1NlYXJjaFByb3ZpZGVyLFxuICAgICAgc3RhcnREYXRlLFxuICAgICAgZW5kRGF0ZSxcbiAgICAgIF9zdGFjUXVlcnksXG4gICAgICBzaW5nbGVCYW5kTmFtZSxcbiAgICAgIGNvbG9yUmFuZ2U6IHtjb2xvck1hcDogY2F0ZWdvcmljYWxDb2xvck1hcH0sXG4gICAgICBkeW5hbWljQ29sb3JcbiAgICB9ID0gdmlzQ29uZmlnO1xuXG4gICAgY29uc3Qgc2hvdWxkTG9hZFRlcnJhaW4gPSBnZXRTaG91bGRMb2FkVGVycmFpbihzdGFjLCBtYXBTdGF0ZSwgdmlzQ29uZmlnKTtcblxuICAgIGlmIChuZXcgRGF0ZShlbmREYXRlKSA8IG5ldyBEYXRlKHN0YXJ0RGF0ZSkpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCB7YmFuZENvbWJpbmF0aW9ufSA9IFBSRVNFVF9PUFRJT05TW3ByZXNldF07XG5cbiAgICBjb25zdCBzaW5nbGVCYW5kID0gZ2V0U2luZ2xlQmFuZFByZXNldE9wdGlvbnMoc3RhYywgc2luZ2xlQmFuZE5hbWUpO1xuICAgIGNvbnN0IGRhdGFTb3VyY2VQYXJhbXM6IERhdGFTb3VyY2VQYXJhbXMgfCBudWxsID0gdGhpcy5nZXREYXRhU291cmNlUGFyYW1zKHN0YWMsIHByZXNldCwge1xuICAgICAgc2luZ2xlQmFuZFxuICAgIH0pO1xuXG4gICAgaWYgKCFkYXRhU291cmNlUGFyYW1zKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgbWluWm9vbSxcbiAgICAgIG1heFpvb20sXG4gICAgICBnbG9iYWxCb3VuZHMsXG4gICAgICBsb2FkQXNzZXRJZHMsXG4gICAgICBsb2FkQmFuZEluZGV4ZXMsXG4gICAgICByZW5kZXJCYW5kSW5kZXhlcyxcbiAgICAgIGRhdGFUeXBlLFxuICAgICAgbWluUGl4ZWxWYWx1ZTogZHNNaW5QaXhlbFZhbHVlLFxuICAgICAgbWF4UGl4ZWxWYWx1ZTogZHNNYXhQaXhlbFZhbHVlLFxuICAgICAgbWluQ2F0ZWdvcmljYWxCYW5kVmFsdWUsXG4gICAgICBtYXhDYXRlZ29yaWNhbEJhbmRWYWx1ZVxuICAgIH0gPSBkYXRhU291cmNlUGFyYW1zO1xuXG4gICAgY29uc3QgbWluUGl4ZWxWYWx1ZSA9XG4gICAgICAhZHluYW1pY0NvbG9yICYmIE51bWJlci5pc0Zpbml0ZShkc01pblBpeGVsVmFsdWUpXG4gICAgICAgID8gZHNNaW5QaXhlbFZhbHVlXG4gICAgICAgIDogdGhpcy5taW5WaWV3cG9ydFBpeGVsVmFsdWU7XG4gICAgY29uc3QgbWF4UGl4ZWxWYWx1ZSA9XG4gICAgICAhZHluYW1pY0NvbG9yICYmIE51bWJlci5pc0Zpbml0ZShkc01heFBpeGVsVmFsdWUpXG4gICAgICAgID8gZHNNYXhQaXhlbFZhbHVlXG4gICAgICAgIDogdGhpcy5tYXhWaWV3cG9ydFBpeGVsVmFsdWU7XG5cbiAgICBjb25zdCBnZXRUaWxlRGF0YUN1c3RvbVByb3BzOiBHZXRUaWxlRGF0YUN1c3RvbVByb3BzID0ge1xuICAgICAgc3RhYyxcbiAgICAgIGxvYWRBc3NldElkcyxcbiAgICAgIGxvYWRCYW5kSW5kZXhlcyxcbiAgICAgIGNvbG9ybWFwSWQsXG4gICAgICBzaG91bGRMb2FkVGVycmFpbixcbiAgICAgIGdsb2JhbEJvdW5kcyxcbiAgICAgIHVzZVNUQUNTZWFyY2hpbmcsXG4gICAgICBzdGFjU2VhcmNoUHJvdmlkZXIsXG4gICAgICBzdGFydERhdGUsXG4gICAgICBlbmREYXRlLFxuICAgICAgX3N0YWNRdWVyeSxcbiAgICAgIGNhdGVnb3JpY2FsQ29sb3JNYXAsXG4gICAgICBtaW5DYXRlZ29yaWNhbEJhbmRWYWx1ZSxcbiAgICAgIG1heENhdGVnb3JpY2FsQmFuZFZhbHVlXG4gICAgfTtcblxuICAgIGNvbnN0IHRpbGVMYXllciA9IG5ldyBUaWxlTGF5ZXI8YW55LCBSZW5kZXJTdWJMYXllcnNQcm9wcz4oe1xuICAgICAgaWQsXG4gICAgICBtaW5ab29tLFxuICAgICAgbWF4Wm9vbSxcbiAgICAgIHRpbGVTaXplOiA1MTIgLyBkZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgZ2V0VGlsZURhdGE6IChhcmdzOiBhbnkpID0+IHRoaXMuZ2V0VGlsZURhdGEoey4uLmFyZ3MsIC4uLmdldFRpbGVEYXRhQ3VzdG9tUHJvcHN9KSxcbiAgICAgIG9uVmlld3BvcnRMb2FkOiB0aGlzLm9uVmlld3BvcnRMb2FkLmJpbmQodGhpcyksXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gVFMgZG9lc24ndCBrbm93IHdlJ2xsIHBhc3MgYXBwcm9wcmlhdGUgcHJvcHMgaGVyZVxuICAgICAgcmVuZGVyU3ViTGF5ZXJzOiByZW5kZXJTdWJMYXllcnNTdGFjLFxuICAgICAgbWF4UmVxdWVzdHM6IGdldE1heFJlcXVlc3RzKHN0YWMucmFzdGVyVGlsZVNlcnZlclVybHMgfHwgW10pLFxuICAgICAgLy8gUGFzc2luZyB2aXNpYmxlIG9uIHRvIFRpbGVMYXllciBpcyBuZWNlc3NhcnkgZm9yIHNwbGl0IHZpZXcgdG8gd29ya1xuICAgICAgdmlzaWJsZSxcbiAgICAgIHVwZGF0ZVRyaWdnZXJzOiB7XG4gICAgICAgIGdldFRpbGVEYXRhOiBbXG4gICAgICAgICAgc2hvdWxkTG9hZFRlcnJhaW4sXG4gICAgICAgICAgLy8gQ29sb3JtYXAgaGFzIGNoYW5nZWRcbiAgICAgICAgICBjb2xvcm1hcElkLFxuICAgICAgICAgIC8vIGFzc2V0cyB0byBiZSBsb2FkZWQgaGFzIGNoYW5nZWRcbiAgICAgICAgICAuLi5sb2FkQXNzZXRJZHMsXG4gICAgICAgICAgLy8gYmFuZCBpbmRleGVzIHRvIGJlIGxvYWRlZCBoYXMgY2hhbmdlZFxuICAgICAgICAgIC4uLmxvYWRCYW5kSW5kZXhlcyxcbiAgICAgICAgICB1c2VTVEFDU2VhcmNoaW5nLFxuICAgICAgICAgIHN0YWNTZWFyY2hQcm92aWRlcixcbiAgICAgICAgICBzdGFydERhdGUsXG4gICAgICAgICAgZW5kRGF0ZSxcbiAgICAgICAgICBfc3RhY1F1ZXJ5LFxuICAgICAgICAgIGNhdGVnb3JpY2FsQ29sb3JNYXAsXG4gICAgICAgICAgbWluQ2F0ZWdvcmljYWxCYW5kVmFsdWUsXG4gICAgICAgICAgbWF4Q2F0ZWdvcmljYWxCYW5kVmFsdWVcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIC8vIFByb3BzIGZvciAzRCBtb2RlXG4gICAgICAuLi4oc2hvdWxkTG9hZFRlcnJhaW5cbiAgICAgICAgPyB7XG4gICAgICAgICAgICB6UmFuZ2U6IHRoaXMubWV0YS56UmFuZ2UgfHwgbnVsbCxcbiAgICAgICAgICAgIHJlZmluZW1lbnRTdHJhdGVneTogJ25vLW92ZXJsYXAnXG4gICAgICAgICAgfVxuICAgICAgICA6IHt9KSxcbiAgICAgIHJlbmRlckJhbmRJbmRleGVzLFxuICAgICAgb3BhY2l0eSxcbiAgICAgIGxpbmVhclJlc2NhbGluZyxcbiAgICAgIGxpbmVhclJlc2NhbGluZ0ZhY3RvcixcbiAgICAgIG5vbkxpbmVhclJlc2NhbGluZyxcbiAgICAgIG1pblBpeGVsVmFsdWUsXG4gICAgICBtYXhQaXhlbFZhbHVlLFxuICAgICAgZ2FtbWFDb250cmFzdEZhY3RvcixcbiAgICAgIHNpZ21vaWRhbENvbnRyYXN0RmFjdG9yLFxuICAgICAgc2lnbW9pZGFsQmlhc0ZhY3RvcixcbiAgICAgIHNhdHVyYXRpb25WYWx1ZSxcbiAgICAgIGJhbmRDb21iaW5hdGlvbixcbiAgICAgIGZpbHRlckVuYWJsZWQsXG4gICAgICBmaWx0ZXJSYW5nZSxcbiAgICAgIGRhdGFUeXBlLFxuICAgICAgbWluQ2F0ZWdvcmljYWxCYW5kVmFsdWUsXG4gICAgICBtYXhDYXRlZ29yaWNhbEJhbmRWYWx1ZSxcbiAgICAgIGhhc0NhdGVnb3JpY2FsQ29sb3JNYXA6IEJvb2xlYW4oY2F0ZWdvcmljYWxDb2xvck1hcCksXG4gICAgICBoYXNTaGFkb3dFZmZlY3RcbiAgICB9KTtcblxuICAgIHJldHVybiBbdGlsZUxheWVyXTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUE1UaWxlc0xheWVyKG9wdHMpOiBUaWxlTGF5ZXI8YW55PltdIHtcbiAgICBjb25zdCB7aWQsIG9wYWNpdHksIHZpc2libGV9ID0gdGhpcy5nZXREZWZhdWx0RGVja0xheWVyUHJvcHMob3B0cyk7XG5cbiAgICBjb25zdCB7ZGF0YSwgbWFwU3RhdGV9ID0gb3B0cztcbiAgICBjb25zdCBtZXRhZGF0YSA9IGRhdGE/LmRhdGFzZXQ/Lm1ldGFkYXRhIGFzIFZlY3RvclRpbGVNZXRhZGF0YTtcbiAgICBjb25zdCB7dmlzQ29uZmlnfSA9IHRoaXMuY29uZmlnO1xuXG4gICAgY29uc3QgdGlsZVNvdXJjZSA9IGRhdGEudGlsZVNvdXJjZTtcbiAgICBjb25zdCBzaG93VGlsZUJvcmRlcnMgPSBmYWxzZTtcbiAgICBjb25zdCBtaW5ab29tID0gbWV0YWRhdGEubWluWm9vbSB8fCAwO1xuICAgIGNvbnN0IG1heFpvb20gPSBtZXRhZGF0YS5tYXhab29tIHx8IDMwO1xuXG4gICAgY29uc3Qgc2hvdWxkTG9hZFRlcnJhaW4gPSBnZXRTaG91bGRMb2FkVGVycmFpbihtZXRhZGF0YSwgbWFwU3RhdGUsIHZpc0NvbmZpZyk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgbmV3IFRpbGVMYXllcjxhbnksIFJhc3RlclRpbGVMYXllclZpc0NvbmZpZ0NvbW1vblNldHRpbmdzPih7XG4gICAgICAgIGlkLFxuICAgICAgICBnZXRUaWxlRGF0YTogKGFyZ3M6IGFueSkgPT5cbiAgICAgICAgICB0aGlzLmdldFRpbGVEYXRhUE1UaWxlcyh7Li4uYXJncywgc2hvdWxkTG9hZFRlcnJhaW4sIG1ldGFkYXRhfSwgdGlsZVNvdXJjZSksXG5cbiAgICAgICAgLy8gQXNzdW1lIHRoZSBwbXRpbGVzIGZpbGUgc3VwcG9ydCBIVFRQLzIsIHNvIHdlIGFyZW4ndCBsaW1pdGVkIGJ5IHRoZSBicm93c2VyIHRvIGEgY2VydGFpbiBudW1iZXIgcGVyIGRvbWFpbi5cbiAgICAgICAgbWF4UmVxdWVzdHM6IDIwLFxuXG4gICAgICAgIHBpY2thYmxlOiB0cnVlLFxuICAgICAgICBhdXRvSGlnaGxpZ2h0OiBzaG93VGlsZUJvcmRlcnMsXG5cbiAgICAgICAgb25WaWV3cG9ydExvYWQ6IHRoaXMub25WaWV3cG9ydExvYWQuYmluZCh0aGlzKSxcblxuICAgICAgICBtaW5ab29tLFxuICAgICAgICBtYXhab29tLFxuICAgICAgICB0aWxlU2l6ZTogNTEyIC8gZGV2aWNlUGl4ZWxSYXRpbyxcbiAgICAgICAgem9vbU9mZnNldDogZGV2aWNlUGl4ZWxSYXRpbyA9PT0gMSA/IC0xIDogMCxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIFRTIGRvZXNuJ3Qga25vdyB3ZSdsbCBwYXNzIGFwcHJvcHJpYXRlIHByb3BzIGhlcmVcbiAgICAgICAgcmVuZGVyU3ViTGF5ZXJzOiByZW5kZXJTdWJMYXllcnNQTVRpbGVzLFxuXG4gICAgICAgIHRpbGVTb3VyY2UsXG4gICAgICAgIHNob3dUaWxlQm9yZGVycyxcblxuICAgICAgICB2aXNpYmxlLFxuICAgICAgICBvcGFjaXR5LFxuXG4gICAgICAgIHVwZGF0ZVRyaWdnZXJzOiB7XG4gICAgICAgICAgZ2V0VGlsZURhdGE6IFtzaG91bGRMb2FkVGVycmFpbl1cbiAgICAgICAgfSxcbiAgICAgICAgLy8gUHJvcHMgZm9yIDNEIG1vZGVcbiAgICAgICAgLi4uKHNob3VsZExvYWRUZXJyYWluXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIHpSYW5nZTogdGhpcy5tZXRhLnpSYW5nZSB8fCBudWxsLFxuICAgICAgICAgICAgICByZWZpbmVtZW50U3RyYXRlZ3k6ICduby1vdmVybGFwJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge30pXG4gICAgICB9KVxuICAgIF07XG4gIH1cblxuICBhc3luYyBnZXRUaWxlRGF0YShwcm9wczogR2V0VGlsZURhdGFQcm9wcyk6IFByb21pc2U8R2V0VGlsZURhdGFPdXRwdXQ+IHtcbiAgICBjb25zdCB7XG4gICAgICBzaG91bGRMb2FkVGVycmFpbixcbiAgICAgIGdsb2JhbEJvdW5kcyxcbiAgICAgIGJib3g6IHt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGh9LFxuICAgICAgaW5kZXg6IHt6OiB6b29tfVxuICAgIH0gPSBwcm9wcztcblxuICAgIGlmIChnbG9iYWxCb3VuZHMgJiYgIWJib3hJbnRlcnNlY3RzKGdsb2JhbEJvdW5kcywgW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF0pKSB7XG4gICAgICAvLyB0aWxlIGlzIG91dHNpZGUgb2YgU1RBQyBvYmplY3QncyBib3VuZGluZyBib3g7IGRvbid0IGZldGNoIHRpbGVcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGFzc2V0UmVxdWVzdHMgPSBhd2FpdCBnZXRTVEFDSW1hZ2VSZXF1ZXN0cyhwcm9wcyk7XG4gICAgLy8gTm8gYXNzZXRzIHRvIGxvYWQsIG1vc3QgbGlrZWx5IGR1ZSB0byBwcm9wcyBiZWluZyBpbnZhbGlkL3Vuc3VwcG9ydGVkXG4gICAgaWYgKCFhc3NldFJlcXVlc3RzKSB7XG4gICAgICAvLyBXZSBzdGlsbCBpc3N1ZSB0aGUgbG9hZFRlcnJhaW4gcmVxdWVzdCBpZiBhcHBsaWNhYmxlXG4gICAgICBjb25zdCB0ZXJyYWluID1cbiAgICAgICAgc2hvdWxkTG9hZFRlcnJhaW4gJiZcbiAgICAgICAgTE9BRF9FTEVWQVRJT05fQUZURVJfWk9PTSA8IHpvb20gJiZcbiAgICAgICAgKGF3YWl0IGxvYWRUZXJyYWluKHtcbiAgICAgICAgICBib3VuZHNGb3JHZW9tZXRyeTogW3dlc3QsIG5vcnRoLCBlYXN0LCBzb3V0aF0sXG4gICAgICAgICAgaW5kZXg6IHByb3BzLmluZGV4LFxuICAgICAgICAgIHNpZ25hbDogcHJvcHMuc2lnbmFsLFxuICAgICAgICAgIHJhc3RlclRpbGVTZXJ2ZXJVcmxzOiBwcm9wcy5zdGFjLnJhc3RlclRpbGVTZXJ2ZXJVcmxzIHx8IFtdXG4gICAgICAgIH0pKTtcbiAgICAgIHJldHVybiB7aW1hZ2VzOiBudWxsLCAuLi4odGVycmFpbiA/IHt0ZXJyYWlufSA6IHt9KX07XG4gICAgfVxuXG4gICAgdGlsZXNCZWluZ0xvYWRlZCsrO1xuXG4gICAgLy8gV3JhcCBsb2FkaW5nIGltYWdlcyBpbnRvIGEgdHJ5L2NhdGNoIGJlY2F1c2UgdGlsZXMgdGhhdCBhcmUgb25seSBicmllZmx5IGluIHZpZXcgd2lsbCBiZVxuICAgIC8vIGFib3J0ZWQuIFRoZSBgQWJvcnRDb250cm9sbGVyLmFib3J0KClgIGNyZWF0ZXMgYSBET01FeGNlcHRpb24gZXJyb3IuXG4gICAgLy8gTm90ZSB0aGF0IHNpbmNlIGxvYWRpbmcgaXMgYXN5bmMsIHRyeS9jYXRjaCB3aWxsIG9ubHkgd29yayB3aGVuIGF3YWl0ZWQgaW5zaWRlIHRoZSB0cnkgYmxvY2tcbiAgICB0cnkge1xuICAgICAgY29uc3QgW2ltYWdlcywgdGVycmFpbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGxvYWRJbWFnZXMoYXNzZXRSZXF1ZXN0cywgcHJvcHMuY29sb3JtYXBJZCwge1xuICAgICAgICAgIGNvbG9yTWFwOiBwcm9wcy5jYXRlZ29yaWNhbENvbG9yTWFwLFxuICAgICAgICAgIG1pblZhbHVlOiBwcm9wcy5taW5DYXRlZ29yaWNhbEJhbmRWYWx1ZSxcbiAgICAgICAgICBtYXhWYWx1ZTogcHJvcHMubWF4Q2F0ZWdvcmljYWxCYW5kVmFsdWVcbiAgICAgICAgfSksXG4gICAgICAgIHNob3VsZExvYWRUZXJyYWluICYmIExPQURfRUxFVkFUSU9OX0FGVEVSX1pPT00gPCB6b29tXG4gICAgICAgICAgPyBsb2FkVGVycmFpbih7XG4gICAgICAgICAgICAgIGJvdW5kc0Zvckdlb21ldHJ5OiBbd2VzdCwgbm9ydGgsIGVhc3QsIHNvdXRoXSxcbiAgICAgICAgICAgICAgaW5kZXg6IHByb3BzLmluZGV4LFxuICAgICAgICAgICAgICBzaWduYWw6IHByb3BzLnNpZ25hbCxcbiAgICAgICAgICAgICAgcmFzdGVyVGlsZVNlcnZlclVybHM6IHByb3BzLnN0YWMucmFzdGVyVGlsZVNlcnZlclVybHMgfHwgW11cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiBudWxsXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgW21pbiwgbWF4XSA9IHRoaXMuZ2V0TWluTWF4UGl4ZWxWYWx1ZXMoaW1hZ2VzLmltYWdlQmFuZHMpO1xuICAgICAgdGlsZXNCZWluZ0xvYWRlZC0tO1xuXG4gICAgICAvLyBBZGQgdGVycmFpbiBkYXRhIG9ubHkgaWYgd2UgcmVxdWVzdGVkIGl0IGFib3ZlXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbWFnZXMsXG4gICAgICAgIC4uLih0ZXJyYWluID8ge3RlcnJhaW59IDoge30pLFxuICAgICAgICBtaW5QaXhlbFZhbHVlOiBtaW4sXG4gICAgICAgIG1heFBpeGVsVmFsdWU6IG1heFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGlsZXNCZWluZ0xvYWRlZC0tO1xuICAgICAgaWYgKChlcnJvciBhcyBhbnkpLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICAvLyB0aWxlIHdhcyBhYm9ydGVkXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTb21lIG90aGVyIHVuaGFuZGxlZCBlcnJvclxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VGlsZURhdGFQTVRpbGVzKFxuICAgIHByb3BzOiBHZXRUaWxlRGF0YURlZmF1bHRQcm9wcyAmIHtcbiAgICAgIHNob3VsZExvYWRUZXJyYWluOiBib29sZWFuO1xuICAgICAgbWV0YWRhdGE6IHtyYXN0ZXJUaWxlU2VydmVyVXJsczogc3RyaW5nW119O1xuICAgICAgZ2xvYmFsQm91bmRzOiBEYXRhU291cmNlUGFyYW1zWydnbG9iYWxCb3VuZHMnXTtcbiAgICB9LFxuICAgIHRpbGVTb3VyY2VcbiAgKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCB7XG4gICAgICBzaG91bGRMb2FkVGVycmFpbixcbiAgICAgIGdsb2JhbEJvdW5kcyxcbiAgICAgIGJib3g6IHt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGh9LFxuICAgICAgaW5kZXg6IHt6OiB6b29tfSxcbiAgICAgIG1ldGFkYXRhXG4gICAgfSA9IHByb3BzO1xuXG4gICAgaWYgKGdsb2JhbEJvdW5kcyAmJiAhYmJveEludGVyc2VjdHMoZ2xvYmFsQm91bmRzLCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXSkpIHtcbiAgICAgIC8vIHRpbGUgaXMgb3V0c2lkZSBvZiBTVEFDIG9iamVjdCdzIGJvdW5kaW5nIGJveDsgZG9uJ3QgZmV0Y2ggdGlsZVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdGlsZXNCZWluZ0xvYWRlZCsrO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFtpbWFnZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbdGlsZVNvdXJjZS5nZXRUaWxlRGF0YShwcm9wcyldKTtcbiAgICAgIC8vIEZvciBud28gY2hlY2sgaWYgdGhlIGJhc2UgdGlsZSBleGlzdHMsIGFzIHRoaXMgY2FuIGNhdXNlIGxvYWRpbmcgdG8gZ2V0IHN0dWNrIHdpdGggXCJzcGFyc2VcIiBQTVRpbGVzLlxuICAgICAgY29uc3QgdGVycmFpbiA9XG4gICAgICAgIGltYWdlICYmIHNob3VsZExvYWRUZXJyYWluICYmIExPQURfRUxFVkFUSU9OX0FGVEVSX1pPT00gPCB6b29tXG4gICAgICAgICAgPyBhd2FpdCBsb2FkVGVycmFpbih7XG4gICAgICAgICAgICAgIGJvdW5kc0Zvckdlb21ldHJ5OiBbd2VzdCwgbm9ydGgsIGVhc3QsIHNvdXRoXSxcbiAgICAgICAgICAgICAgaW5kZXg6IHByb3BzLmluZGV4LFxuICAgICAgICAgICAgICBzaWduYWw6IHByb3BzLnNpZ25hbCxcbiAgICAgICAgICAgICAgcmFzdGVyVGlsZVNlcnZlclVybHM6IG1ldGFkYXRhLnJhc3RlclRpbGVTZXJ2ZXJVcmxzXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogbnVsbDtcblxuICAgICAgbGV0IG1pblBpeGVsVmFsdWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgICAgbGV0IG1heFBpeGVsVmFsdWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgICAgaWYgKGltYWdlKSB7XG4gICAgICAgIGNvbnN0IFttaW4sIG1heF0gPSB0aGlzLmdldE1pbk1heFBpeGVsVmFsdWVzKFt7ZGF0YTogaW1hZ2V9XSk7XG4gICAgICAgIG1pblBpeGVsVmFsdWUgPSBtaW47XG4gICAgICAgIG1heFBpeGVsVmFsdWUgPSBtYXg7XG4gICAgICB9XG4gICAgICB0aWxlc0JlaW5nTG9hZGVkLS07XG5cbiAgICAgIC8vIEFkZCB0ZXJyYWluIGRhdGEgb25seSBpZiB3ZSByZXF1ZXN0ZWQgaXQgYWJvdmVcbiAgICAgIHJldHVybiB7aW1hZ2UsIG1pblBpeGVsVmFsdWUsIG1heFBpeGVsVmFsdWUsIC4uLih0ZXJyYWluID8ge3RlcnJhaW59IDoge30pfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGlsZXNCZWluZ0xvYWRlZC0tO1xuXG4gICAgICBpZiAoKGVycm9yIGFzIEVycm9yKS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgLy8gdGlsZSB3YXMgYWJvcnRlZFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gU29tZSBvdGhlciB1bmhhbmRsZWQgZXJyb3JcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXJTdWJMYXllcnNTdGFjKHByb3BzOiBSZW5kZXJTdWJMYXllcnNQcm9wcyk6IERlY2tMYXllcjxhbnk+IHwgRGVja0xheWVyPGFueT5bXSB7XG4gIGNvbnN0IHtcbiAgICB0aWxlLFxuICAgIGRhdGEsXG4gICAgbWluUGl4ZWxWYWx1ZTogZ2xvYmFsTWluUGl4ZWxWYWx1ZSxcbiAgICBtYXhQaXhlbFZhbHVlOiBnbG9iYWxNYXhQaXhlbFZhbHVlXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgYmJveCA9IHRpbGUuYmJveCBhcyBHZW9Cb3VuZGluZ0JveDtcbiAgY29uc3Qge3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aH0gPSBiYm94O1xuXG4gIGlmICghZGF0YSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICBpbWFnZXMsXG4gICAgdGVycmFpbixcbiAgICBtaW5QaXhlbFZhbHVlOiB0aWxlTWluUGl4ZWxWYWx1ZSxcbiAgICBtYXhQaXhlbFZhbHVlOiB0aWxlTWF4UGl4ZWxWYWx1ZVxuICB9ID0gZGF0YTtcbiAgaWYgKCFpbWFnZXMgfHwgKEFycmF5LmlzQXJyYXkoaW1hZ2VzKSAmJiBpbWFnZXMubGVuZ3RoID09PSAwKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IG1pblBpeGVsVmFsdWUgPSBOdW1iZXIuaXNGaW5pdGUoZ2xvYmFsTWluUGl4ZWxWYWx1ZSlcbiAgICA/IGdsb2JhbE1pblBpeGVsVmFsdWVcbiAgICA6IHRpbGVNaW5QaXhlbFZhbHVlO1xuICBjb25zdCBtYXhQaXhlbFZhbHVlID0gTnVtYmVyLmlzRmluaXRlKGdsb2JhbE1heFBpeGVsVmFsdWUpXG4gICAgPyBnbG9iYWxNYXhQaXhlbFZhbHVlXG4gICAgOiB0aWxlTWF4UGl4ZWxWYWx1ZTtcbiAgaWYgKHR5cGVvZiBtaW5QaXhlbFZhbHVlICE9PSAnbnVtYmVyJyB8fCB0eXBlb2YgbWF4UGl4ZWxWYWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCB7bW9kdWxlcywgbW9kdWxlUHJvcHN9ID0gZ2V0TW9kdWxlcyh7XG4gICAgaW1hZ2VzLFxuICAgIHByb3BzOiB7Li4ucHJvcHMsIG1pblBpeGVsVmFsdWUsIG1heFBpeGVsVmFsdWV9XG4gIH0pO1xuXG4gIGNvbnN0IGlkU3VmZml4ID0gcHJvcHMuaGFzU2hhZG93RWZmZWN0ID8gJ3NoYWRvdycgOiAnJztcblxuICByZXR1cm4gdGVycmFpblxuICAgID8gbmV3IFJhc3Rlck1lc2hMYXllcihwcm9wcywge1xuICAgICAgICBpZDogYHJhc3Rlci0zZC1sYXllci0ke3Byb3BzLmlkfS0ke2lkU3VmZml4fWAsXG4gICAgICAgIC8vIER1bW15IGRhdGFcbiAgICAgICAgZGF0YTogWzFdLFxuICAgICAgICBtZXNoOiB0ZXJyYWluLFxuICAgICAgICBpbWFnZXMsXG4gICAgICAgIG1vZHVsZXMsXG4gICAgICAgIG1vZHVsZVByb3BzLFxuXG4gICAgICAgIGdldFBvbHlnb25PZmZzZXQ6IG51bGwsXG4gICAgICAgIGNvb3JkaW5hdGVTeXN0ZW06IENPT1JESU5BVEVfU1lTVEVNLkxOR0xBVCxcbiAgICAgICAgLy8gQ29sb3IgdG8gdXNlIGlmIHN1cmZhY2VJbWFnZSBpcyB1bmF2YWlsYWJsZVxuICAgICAgICBnZXRDb2xvcjogWzI1NSwgMjU1LCAyNTVdXG4gICAgICAgIC8vIG1hdGVyaWFsOiBmYWxzZVxuICAgICAgfSlcbiAgICA6IG5ldyBSYXN0ZXJMYXllcihwcm9wcywge1xuICAgICAgICBpZDogYHJhc3Rlci0yZC1sYXllci0ke3Byb3BzLmlkfS0ke2lkU3VmZml4fWAsXG4gICAgICAgIGltYWdlcyxcbiAgICAgICAgbW9kdWxlcyxcbiAgICAgICAgbW9kdWxlUHJvcHMsXG4gICAgICAgIGJvdW5kczogW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF0sXG4gICAgICAgIF9pbWFnZUNvb3JkaW5hdGVTeXN0ZW06IENPT1JESU5BVEVfU1lTVEVNLkNBUlRFU0lBTlxuICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclN1YkxheWVyc1BNVGlsZXMocHJvcHM6IHtcbiAgaWQ6IHN0cmluZztcbiAgZGF0YTogYW55O1xuICB0aWxlU291cmNlOiBhbnk7XG4gIHNob3dUaWxlQm9yZGVyczogYW55O1xuICBtaW5ab29tOiBhbnk7XG4gIG1heFpvb206IGFueTtcbiAgdGlsZTogYW55O1xufSkge1xuICBjb25zdCB7XG4gICAgdGlsZVNvdXJjZSxcbiAgICBzaG93VGlsZUJvcmRlcnMsXG4gICAgbWluWm9vbSxcbiAgICBtYXhab29tLFxuICAgIHRpbGU6IHtcbiAgICAgIGluZGV4OiB7ejogem9vbX0sXG4gICAgICBiYm94OiB7d2VzdCwgc291dGgsIGVhc3QsIG5vcnRofVxuICAgIH1cbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IGxheWVyczogYW55W10gPSBbXTtcblxuICBpZiAocHJvcHMuZGF0YT8uaW1hZ2UpIHtcbiAgICBzd2l0Y2ggKHRpbGVTb3VyY2UubWltZVR5cGUpIHtcbiAgICAgIGNhc2UgJ2ltYWdlL3BuZyc6XG4gICAgICBjYXNlICdpbWFnZS9qcGVnJzpcbiAgICAgIGNhc2UgJ2ltYWdlL3dlYnAnOlxuICAgICAgY2FzZSAnaW1hZ2UvYXZpZic6XG4gICAgICAgIGxheWVycy5wdXNoKGdldFJhc3RlckxheWVyUE1UaWxlcyhwcm9wcykpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gRGVidWcgdGlsZSBib3JkZXJzXG4gIGNvbnN0IGJvcmRlckNvbG9yID0gem9vbSA8PSBtaW5ab29tIHx8IHpvb20gPj0gbWF4Wm9vbSA/IFsyNTUsIDAsIDAsIDI1NV0gOiBbMCwgMCwgMjU1LCAyNTVdO1xuICBpZiAoc2hvd1RpbGVCb3JkZXJzKSB7XG4gICAgbGF5ZXJzLnB1c2goXG4gICAgICBuZXcgUGF0aExheWVyKHtcbiAgICAgICAgaWQ6IGAke3Byb3BzLmlkfS1ib3JkZXJgLFxuICAgICAgICBkYXRhOiBbXG4gICAgICAgICAgW1xuICAgICAgICAgICAgW3dlc3QsIG5vcnRoXSxcbiAgICAgICAgICAgIFt3ZXN0LCBzb3V0aF0sXG4gICAgICAgICAgICBbZWFzdCwgc291dGhdLFxuICAgICAgICAgICAgW2Vhc3QsIG5vcnRoXSxcbiAgICAgICAgICAgIFt3ZXN0LCBub3J0aF1cbiAgICAgICAgICBdXG4gICAgICAgIF0sXG4gICAgICAgIGdldFBhdGg6IGQgPT4gZCxcbiAgICAgICAgZ2V0Q29sb3I6IGJvcmRlckNvbG9yIGFzIGFueSxcbiAgICAgICAgd2lkdGhNaW5QaXhlbHM6IDRcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBsYXllcnM7XG59XG5cbmZ1bmN0aW9uIGdldFJhc3RlckxheWVyUE1UaWxlcyhwcm9wczoge2lkOiBzdHJpbmc7IGRhdGE6IGFueTsgdGlsZTogYW55fSkge1xuICBjb25zdCB7dGlsZSwgZGF0YX0gPSBwcm9wcztcbiAgY29uc3QgYmJveCA9IHRpbGUuYmJveCBhcyBHZW9Cb3VuZGluZ0JveDtcbiAgY29uc3Qge3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aH0gPSBiYm94O1xuXG4gIGlmICghZGF0YT8uaW1hZ2UpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBpbWFnZXMgPSB7aW1hZ2VSZ2JhOiB7ZGF0YTogZGF0YS5pbWFnZX19O1xuICBjb25zdCB7dGVycmFpbn0gPSBkYXRhO1xuXG4gIGNvbnN0IHttb2R1bGVzLCBtb2R1bGVQcm9wc30gPSBnZXRNb2R1bGVzKHtcbiAgICBpbWFnZXNcbiAgfSk7XG5cbiAgcmV0dXJuIHRlcnJhaW5cbiAgICA/IG5ldyBSYXN0ZXJNZXNoTGF5ZXIocHJvcHMsIHtcbiAgICAgICAgaWQ6IGByYXN0ZXItM2QtbGF5ZXItJHtwcm9wcy5pZH1gLFxuICAgICAgICAvLyBEdW1teSBkYXRhXG4gICAgICAgIGRhdGE6IFsxXSxcbiAgICAgICAgbWVzaDogdGVycmFpbixcbiAgICAgICAgaW1hZ2VzLFxuICAgICAgICBtb2R1bGVzLFxuICAgICAgICBtb2R1bGVQcm9wcyxcblxuICAgICAgICBnZXRQb2x5Z29uT2Zmc2V0OiBudWxsLFxuICAgICAgICBjb29yZGluYXRlU3lzdGVtOiBDT09SRElOQVRFX1NZU1RFTS5MTkdMQVQsXG4gICAgICAgIC8vIENvbG9yIHRvIHVzZSBpZiBzdXJmYWNlSW1hZ2UgaXMgdW5hdmFpbGFibGVcbiAgICAgICAgZ2V0Q29sb3I6IFsyNTUsIDI1NSwgMjU1XVxuICAgICAgICAvLyBtYXRlcmlhbDogZmFsc2VcbiAgICAgIH0pXG4gICAgOiBuZXcgUmFzdGVyTGF5ZXIocHJvcHMsIHtcbiAgICAgICAgaWQ6IGByYXN0ZXItMmQtbGF5ZXItJHtwcm9wcy5pZH1gLFxuICAgICAgICBkYXRhOiBudWxsIGFzIG5ldmVyLFxuICAgICAgICBpbWFnZXMsXG4gICAgICAgIG1vZHVsZXMsXG4gICAgICAgIG1vZHVsZVByb3BzLFxuICAgICAgICBib3VuZHM6IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdLFxuICAgICAgICBfaW1hZ2VDb29yZGluYXRlU3lzdGVtOiBDT09SRElOQVRFX1NZU1RFTS5DQVJURVNJQU5cbiAgICAgIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFFQSxJQUFBRyxRQUFBLEdBQUFDLHNCQUFBLENBQUFKLE9BQUE7QUFFQSxJQUFBSyxPQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxVQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxhQUFBLEdBQUFQLE9BQUE7QUFjQSxJQUFBUSxZQUFBLEdBQUFSLE9BQUE7QUFFQSxJQUFBUyxNQUFBLEdBQUFU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