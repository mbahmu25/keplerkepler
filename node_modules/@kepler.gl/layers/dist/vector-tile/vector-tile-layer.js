"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.MAX_CACHE_SIZE_MOBILE = exports.DEFAULT_STROKE_WIDTH = exports.DEFAULT_HIGHLIGHT_STROKE_COLOR = exports.DEFAULT_HIGHLIGHT_FILL_COLOR = void 0;
exports.tileLayerBoundsLayer = tileLayerBoundsLayer;
exports.vectorTileVisConfigs = void 0;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _typed = require("@deck.gl/layers/typed");
var _mvt = require("@loaders.gl/mvt");
var _pmtiles = require("@loaders.gl/pmtiles");
var _constants = _interopRequireDefault(require("@luma.gl/constants"));
var _commonUtils = require("@kepler.gl/common-utils");
var _constants2 = require("@kepler.gl/constants");
var _table = require("@kepler.gl/table");
var _mvtLayer = require("./mvt-layer");
var _vectorTileIcon = _interopRequireDefault(require("./vector-tile-icon"));
var _baseLayer = _interopRequireDefault(require("../base-layer"));
var _abstractTileLayer = _interopRequireWildcard(require("./abstract-tile-layer"));
var _tileDataset = _interopRequireDefault(require("./common-tile/tile-dataset"));
var _tileUtils = require("./common-tile/tile-utils");
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2["default"])(o), (0, _possibleConstructorReturn2["default"])(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2["default"])(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, e, r, o) { var p = (0, _get2["default"])((0, _getPrototypeOf2["default"])(1 & o ? t.prototype : t), e, r); return 2 & o ? function (t) { return p.apply(r, t); } : p; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
var DEFAULT_HIGHLIGHT_FILL_COLOR = exports.DEFAULT_HIGHLIGHT_FILL_COLOR = [252, 242, 26, 150];
var DEFAULT_HIGHLIGHT_STROKE_COLOR = exports.DEFAULT_HIGHLIGHT_STROKE_COLOR = [252, 242, 26, 255];
var MAX_CACHE_SIZE_MOBILE = exports.MAX_CACHE_SIZE_MOBILE = 1; // Minimize caching, visible tiles will always be loaded
var DEFAULT_STROKE_WIDTH = exports.DEFAULT_STROKE_WIDTH = 1;

/**
 * Type for transformRequest returned parameters.
 */

// This type *seems* to be what loaders.gl currently returns for tile content.
// Apparently this might be different depending on the loaders version, and for...
// reasons we use two different versions of loaders right now.
// TODO: The Features[] version should not be needed when we update to a newer
// version of Deck.gl and use only one version of loaders

var vectorTileVisConfigs = exports.vectorTileVisConfigs = _objectSpread(_objectSpread({}, _abstractTileLayer.commonTileVisConfigs), {}, {
  stroked: _objectSpread(_objectSpread({}, _constants2.LAYER_VIS_CONFIGS.stroked), {}, {
    defaultValue: false
  }),
  // TODO figure out why strokeColorScale can't be const
  strokeColorScale: 'strokeColorScale',
  strokeColorRange: 'strokeColorRange',
  sizeRange: 'strokeWidthRange',
  strokeWidth: _objectSpread(_objectSpread({}, _constants2.LAYER_VIS_CONFIGS.thickness), {}, {
    property: 'strokeWidth',
    defaultValue: 0.5,
    allowCustomValue: false
  }),
  radiusScale: 'radiusScale',
  radiusRange: _objectSpread(_objectSpread({}, _constants2.LAYER_VIS_CONFIGS.radiusRange), {}, {
    type: 'number',
    defaultValue: [0, 1],
    isRanged: true,
    range: [0, 1],
    step: 0.01
  })
});
function tileLayerBoundsLayer(id, props) {
  var bounds = props.bounds;
  if ((bounds === null || bounds === void 0 ? void 0 : bounds.length) !== 4) return [];
  var data = [{
    path: [[bounds[0], bounds[1]], [bounds[2], bounds[1]], [bounds[2], bounds[3]], [bounds[0], bounds[3]], [bounds[0], bounds[1]]]
  }];
  var layer = new _typed.PathLayer({
    id: "".concat(id, "-vector-tile-bounds"),
    data: data,
    getPath: function getPath(d) {
      return d.path;
    },
    getColor: [128, 128, 128, 255],
    getWidth: 1,
    widthUnits: 'pixels',
    pickable: false
  });
  return [layer];
}
var VectorTileLayer = exports["default"] = /*#__PURE__*/function (_AbstractTileLayer) {
  function VectorTileLayer(props) {
    var _this;
    (0, _classCallCheck2["default"])(this, VectorTileLayer);
    _this = _callSuper(this, VectorTileLayer, [props]);
    (0, _defineProperty2["default"])(_this, "meta", {});
    _this.registerVisConfig(vectorTileVisConfigs);
    _this.tileDataset = _this.initTileDataset();
    return _this;
  }
  (0, _inherits2["default"])(VectorTileLayer, _AbstractTileLayer);
  return (0, _createClass2["default"])(VectorTileLayer, [{
    key: "initTileDataset",
    value: function initTileDataset() {
      return new _tileDataset["default"]({
        getTileId: function getTileId(tile) {
          return tile.id;
        },
        getIterable: function getIterable(tile) {
          if (tile.content) {
            return tile.content.shape === 'geojson-table' ? tile.content.features : tile.content;
          }
          return [];
        },
        getRowCount: function getRowCount(features) {
          return features.length;
        },
        getRowValue: this.accessRowValue
      });
    }
  }, {
    key: "type",
    get: function get() {
      return _constants2.LAYER_TYPES.vectorTile;
    }
  }, {
    key: "name",
    get: function get() {
      return 'Vector Tile';
    }
  }, {
    key: "layerIcon",
    get: function get() {
      return _vectorTileIcon["default"];
    }
  }, {
    key: "supportedDatasetTypes",
    get: function get() {
      return [_constants2.DatasetType.VECTOR_TILE];
    }
  }, {
    key: "visualChannels",
    get: function get() {
      var visualChannels = _superPropGet(VectorTileLayer, "visualChannels", this, 1);
      return _objectSpread(_objectSpread({}, visualChannels), {}, {
        strokeColor: {
          property: 'strokeColor',
          field: 'strokeColorField',
          scale: 'strokeColorScale',
          domain: 'strokeColorDomain',
          range: 'strokeColorRange',
          key: 'strokeColor',
          channelScaleType: _constants2.CHANNEL_SCALES.color,
          accessor: 'getLineColor',
          condition: function condition(config) {
            return config.visConfig.stroked;
          },
          nullValue: visualChannels.color.nullValue,
          getAttributeValue: function getAttributeValue(config) {
            return config.visConfig.strokeColor || config.color;
          }
        },
        size: {
          property: 'stroke',
          field: 'sizeField',
          scale: 'sizeScale',
          domain: 'sizeDomain',
          range: 'sizeRange',
          key: 'size',
          channelScaleType: _constants2.CHANNEL_SCALES.size,
          nullValue: 0,
          accessor: 'getLineWidth',
          condition: function condition(config) {
            return config.visConfig.stroked;
          },
          getAttributeValue: function getAttributeValue(config) {
            return config.visConfig.strokeWidth || DEFAULT_STROKE_WIDTH;
          }
        },
        radius: {
          property: 'radius',
          field: 'radiusField',
          scale: 'radiusScale',
          domain: 'radiusDomain',
          range: 'radiusRange',
          key: 'radius',
          channelScaleType: _constants2.CHANNEL_SCALES.size,
          nullValue: 0,
          getAttributeValue: function getAttributeValue(config) {
            return config.visConfig.radius || config.radius;
          },
          accessor: 'getPointRadius',
          defaultValue: function defaultValue(config) {
            return config.radius;
          }
        }
      });
    }
  }, {
    key: "getDefaultLayerConfig",
    value: function getDefaultLayerConfig(props) {
      var defaultLayerConfig = _superPropGet(VectorTileLayer, "getDefaultLayerConfig", this, 3)([props]);
      return _objectSpread(_objectSpread({}, defaultLayerConfig), {}, {
        colorScale: _constants2.SCALE_TYPES.quantize,
        strokeColorField: null,
        strokeColorDomain: [0, 1],
        strokeColorScale: _constants2.SCALE_TYPES.quantile,
        colorUI: _objectSpread(_objectSpread({}, defaultLayerConfig.colorUI), {}, {
          // @ts-expect-error LayerConfig
          strokeColorRange: _constants2.DEFAULT_COLOR_UI
        }),
        radiusField: null,
        radiusDomain: [0, 1],
        radiusScale: _constants2.SCALE_TYPES.linear
      });
    }
  }, {
    key: "getHoverData",
    value: function getHoverData(object, dataContainer, fields) {
      return fields.map(function (f) {
        var _object$properties$f$, _object$properties;
        return (_object$properties$f$ = (_object$properties = object.properties) === null || _object$properties === void 0 ? void 0 : _object$properties[f.name]) !== null && _object$properties$f$ !== void 0 ? _object$properties$f$ : null;
      });
    }
  }, {
    key: "calculateLayerDomain",
    value: function calculateLayerDomain(dataset, visualChannel) {
      var _field$filterProps, _field$filterProps2, _field$filterProps3;
      var defaultDomain = [0, 1];
      var field = this.config[visualChannel.field];
      var scale = this.config[visualChannel.scale];
      if (!field) {
        // if colorField or sizeField were set back to null
        return defaultDomain;
      }
      if (scale === _constants2.SCALE_TYPES.quantile && (0, _tileUtils.isDomainQuantiles)(field === null || field === void 0 || (_field$filterProps = field.filterProps) === null || _field$filterProps === void 0 ? void 0 : _field$filterProps.domainQuantiles)) {
        return field.filterProps.domainQuantiles;
      }
      if ((0, _tileUtils.isDomainStops)(field === null || field === void 0 || (_field$filterProps2 = field.filterProps) === null || _field$filterProps2 === void 0 ? void 0 : _field$filterProps2.domainStops)) {
        return field.filterProps.domainStops;
      } else if (Array.isArray(field === null || field === void 0 || (_field$filterProps3 = field.filterProps) === null || _field$filterProps3 === void 0 ? void 0 : _field$filterProps3.domain)) {
        return field.filterProps.domain;
      }
      return defaultDomain;
    }
  }, {
    key: "getScaleOptions",
    value: function getScaleOptions(channelKey) {
      var _field$filterProps4;
      var options = _baseLayer["default"].prototype.getScaleOptions.call(this, channelKey);
      var channel = this.visualChannels.strokeColor;
      var field = this.config[channel.field];
      if (!((0, _tileUtils.isDomainQuantiles)(field === null || field === void 0 || (_field$filterProps4 = field.filterProps) === null || _field$filterProps4 === void 0 ? void 0 : _field$filterProps4.domainQuantiles) || this.config.visConfig.dynamicColor ||
      // If we've set the scale to quantile, we need to include it - there's a loading
      // period in which the visConfig isn't set yet, but if we don't return the right
      // scale type we lose it
      this.config.colorScale === _constants2.SCALE_TYPES.quantile)) {
        options = options.filter(function (scale) {
          return scale !== _constants2.SCALE_TYPES.quantile;
        });
      }
      return options;
    }
  }, {
    key: "accessRowValue",
    value: function accessRowValue(field, indexKey) {
      // if is indexed field
      if ((0, _tileUtils.isIndexedField)(field) && indexKey !== null) {
        var _field$indexBy;
        var fieldName = indexKey && (field === null || field === void 0 || (_field$indexBy = field.indexBy) === null || _field$indexBy === void 0 ? void 0 : _field$indexBy.mappedValue[indexKey]);
        if (fieldName) {
          return function (f, datum) {
            if (datum.properties) {
              return datum.properties[fieldName];
            }
            // TODO debug this with indexed tiled dataset
            return datum[fieldName];
          };
        }
      }

      // default
      return function (f, datum) {
        if (f && datum.properties) {
          return datum.properties[f.name];
        }
        // support picking & highlighting
        return f ? datum[f.fieldIdx] : null;
      };
    }
  }, {
    key: "updateLayerMeta",
    value: function updateLayerMeta(dataset, datasets) {
      if (dataset.type !== _constants2.DatasetType.VECTOR_TILE) {
        return;
      }
      var datasetMeta = dataset.metadata;
      this.updateMeta({
        datasetId: dataset.id,
        datasets: datasets,
        bounds: datasetMeta.bounds
      });
    }
  }, {
    key: "formatLayerData",
    value: function formatLayerData(datasets, oldLayerData, animationConfig) {
      var dataId = this.config.dataId;
      if (!(0, _commonUtils.notNullorUndefined)(dataId)) {
        return {
          tileSource: null
        };
      }
      var dataset = datasets[dataId];
      var tilesetDataUrl;
      var tileSource = null;
      if ((dataset === null || dataset === void 0 ? void 0 : dataset.type) === _constants2.DatasetType.VECTOR_TILE) {
        var datasetMetadata = dataset.metadata;
        var remoteTileFormat = datasetMetadata === null || datasetMetadata === void 0 ? void 0 : datasetMetadata.remoteTileFormat;
        if (remoteTileFormat === _constants2.RemoteTileFormat.MVT) {
          var _datasetMetadata$tile;
          var transformFetch = /*#__PURE__*/function () {
            var _ref = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(input, init) {
              var requestData;
              return _regenerator["default"].wrap(function _callee$(_context) {
                while (1) switch (_context.prev = _context.next) {
                  case 0:
                    requestData = {
                      url: input,
                      searchParams: new URLSearchParams(),
                      options: init !== null && init !== void 0 ? init : {}
                    };
                    return _context.abrupt("return", fetch(requestData.url, requestData.options));
                  case 2:
                  case "end":
                    return _context.stop();
                }
              }, _callee);
            }));
            return function transformFetch(_x, _x2) {
              return _ref.apply(this, arguments);
            };
          }();
          tilesetDataUrl = datasetMetadata === null || datasetMetadata === void 0 ? void 0 : datasetMetadata.tilesetDataUrl;
          tileSource = tilesetDataUrl ? _mvt.MVTSource.createDataSource(decodeURIComponent(tilesetDataUrl), {
            mvt: {
              metadataUrl: (_datasetMetadata$tile = datasetMetadata === null || datasetMetadata === void 0 ? void 0 : datasetMetadata.tilesetMetadataUrl) !== null && _datasetMetadata$tile !== void 0 ? _datasetMetadata$tile : null,
              loadOptions: {
                fetch: transformFetch
              }
            }
          }) : null;
        } else if (remoteTileFormat === _constants2.RemoteTileFormat.PMTILES) {
          // TODO: to render image pmtiles need to use TileLayer and BitmapLayer (https://github.com/visgl/loaders.gl/blob/master/examples/website/tiles/components/tile-source-layer.ts)
          tilesetDataUrl = datasetMetadata === null || datasetMetadata === void 0 ? void 0 : datasetMetadata.tilesetDataUrl;
          tileSource = tilesetDataUrl ? _pmtiles.PMTilesSource.createDataSource(tilesetDataUrl, {}) : null;
        }
      }
      return _objectSpread(_objectSpread({}, _superPropGet(VectorTileLayer, "formatLayerData", this, 3)([datasets, oldLayerData, animationConfig])), {}, {
        tilesetDataUrl: typeof tilesetDataUrl === 'string' ? (0, _table.getTileUrl)(tilesetDataUrl) : null,
        tileSource: tileSource
      });
    }
  }, {
    key: "hasHoveredObject",
    value: function hasHoveredObject(objectInfo) {
      if (_superPropGet(VectorTileLayer, "hasHoveredObject", this, 3)([objectInfo])) {
        var _objectInfo$tile;
        var features = objectInfo === null || objectInfo === void 0 || (_objectInfo$tile = objectInfo.tile) === null || _objectInfo$tile === void 0 || (_objectInfo$tile = _objectInfo$tile.content) === null || _objectInfo$tile === void 0 ? void 0 : _objectInfo$tile.features;
        return features[objectInfo.index];
      }
      return null;
    }
  }, {
    key: "renderSubLayers",
    value: function renderSubLayers(props) {
      var _data, _data2;
      var data = props.data;
      data = ((_data = data) === null || _data === void 0 ? void 0 : _data.shape) === 'geojson-table' ? data.features : data;
      if (!((_data2 = data) !== null && _data2 !== void 0 && _data2.length)) {
        return [];
      }
      var tile = props.tile;
      var zoom = tile.index.z;
      return new _typed.GeoJsonLayer(_objectSpread(_objectSpread({}, props), {}, {
        data: data,
        getFillColor: props.getFillColorByZoom ? props.getFillColor(zoom) : props.getFillColor,
        getElevation: props.getElevationByZoom ? props.getElevation(zoom) : props.getElevation,
        // radius for points
        pointRadiusScale: props.pointRadiusScale,
        // props.getPointRadiusScaleByZoom(zoom),
        pointRadiusUnits: props.pointRadiusUnits,
        getPointRadius: props.getPointRadius,
        // For some reason tile Layer reset autoHighlight to false
        pickable: true,
        autoHighlight: true,
        stroked: props.stroked,
        // wrapLongitude: true causes missing side polygon when extrude is enabled
        wrapLongitude: false
      }));
    }

    // generate a deck layer
  }, {
    key: "renderLayer",
    value: function renderLayer(opts) {
      var mapState = opts.mapState,
        data = opts.data,
        animationConfig = opts.animationConfig,
        gpuFilter = opts.gpuFilter,
        objectHovered = opts.objectHovered,
        layerCallbacks = opts.layerCallbacks;
      var _this$config = this.config,
        animation = _this$config.animation,
        visConfig = _this$config.visConfig;
      this.setLayerDomain = layerCallbacks.onSetLayerDomain;
      var defaultLayerProps = this.getDefaultDeckLayerProps(opts);
      var eleZoomFactor = this.getElevationZoomFactor(mapState);
      var transitions = this.config.visConfig.transition ? {
        getFillColor: {
          duration: animationConfig.duration
        },
        getElevation: {
          duration: animationConfig.duration
        }
      } : undefined;
      var colorField = this.config.colorField;
      var heightField = this.config.heightField;
      var strokeColorField = this.config.strokeColorField;
      var sizeField = this.config.sizeField;
      var radiusField = this.config.radiusField;
      if (data.tileSource) {
        var _data$tileSource, _objectHovered$source;
        var hoveredObject = this.hasHoveredObject(objectHovered);
        var layers = [new _mvtLayer.MVTLayer(_objectSpread(_objectSpread(_objectSpread({}, defaultLayerProps), data), {}, {
          onViewportLoad: this.onViewportLoad,
          data: data.tilesetDataUrl,
          getTileData: (_data$tileSource = data.tileSource) === null || _data$tileSource === void 0 ? void 0 : _data$tileSource.getTileData,
          tileSource: data.tileSource,
          getFilterValue: this.getGpuFilterValueAccessor(opts),
          filterRange: gpuFilter.filterRange,
          lineWidthUnits: 'pixels',
          binary: false,
          elevationScale: visConfig.elevationScale * eleZoomFactor,
          extruded: visConfig.enable3d,
          stroked: visConfig.stroked,
          // TODO: this is hard coded, design a UI to allow user assigned unique property id
          // uniqueIdProperty: 'ufid',
          renderSubLayers: this.renderSubLayers,
          // when radiusUnits is meter
          getPointRadiusScaleByZoom: (0, _tileUtils.getPropertyByZoom)(visConfig.radiusByZoom, visConfig.radius),
          pointRadiusUnits: visConfig.radiusUnits ? 'pixels' : 'meters',
          pointRadiusScale: radiusField ? visConfig.radius : 1,
          pointRadiusMinPixels: 1,
          autoHighlight: true,
          highlightColor: DEFAULT_HIGHLIGHT_FILL_COLOR,
          pickable: true,
          transitions: transitions,
          updateTriggers: {
            getFilterValue: _objectSpread(_objectSpread({}, gpuFilter.filterValueUpdateTriggers), {}, {
              currentTime: animation.enabled ? animationConfig.currentTime : null
            }),
            getFillColor: {
              color: this.config.color,
              colorField: this.config.colorField,
              colorScale: this.config.colorScale,
              colorDomain: this.config.colorDomain,
              colorRange: visConfig.colorRange,
              currentTime: (0, _tileUtils.isIndexedField)(colorField) ? animationConfig.currentTime : null
            },
            getElevation: {
              heightField: this.config.heightField,
              heightScaleType: this.config.heightScale,
              heightRange: visConfig.heightRange,
              currentTime: (0, _tileUtils.isIndexedField)(heightField) ? animationConfig.currentTime : null
            },
            getLineColor: {
              strokeColor: visConfig.strokeColor,
              strokeColorField: this.config.strokeColorField,
              // @ts-expect-error prop not in LayerConfig
              strokeColorScale: this.config.strokeColorScale,
              // @ts-expect-error prop not in LayerConfig
              strokeColorDomain: this.config.strokeColorDomain,
              // FIXME: Strip out empty arrays from individual color map steps, and replace with `null`, otherwise the layer may show the incorrect color.
              // So far it seems that it uses the previous color chosen in the palette rather than the currently chosen color for the specific custom ordinal value when there are "sparse" color maps.
              // In other words, a color map with "holes" of colors with unassigned field values, which may have been assigned in the past.
              // For example "abc" was green, stored as `["abc"]`. Then "abc" was reassigned to the red color map step, stored as `["abc"]`. Now the green color map step's stored value is `[]`, and the layer will incorrectly still render "abc" in green.
              // Quick patch example:
              // strokeColorRange: visConfig?.strokeColorRange?.colorMap?.map(cm =>
              //   cm[0]?.length === 0 ? [null, cm[1]] : cm
              // ),
              // Note: for regular scales the colorMap in the above patch is undefined and breaks strokeColorRange update trigger.
              strokeColorRange: visConfig.strokeColorRange,
              currentTime: (0, _tileUtils.isIndexedField)(strokeColorField) ? animationConfig.currentTime : null
            },
            getLineWidth: {
              sizeRange: visConfig.sizeRange,
              strokeWidth: visConfig.strokeWidth,
              sizeField: this.config.sizeField,
              sizeScale: this.config.sizeScale,
              sizeDomain: this.config.sizeDomain,
              currentTime: (0, _tileUtils.isIndexedField)(sizeField) ? animationConfig.currentTime : null
            },
            getPointRadius: {
              radius: visConfig.radius,
              radiusField: this.config.radiusField,
              radiusScale: this.config.radiusScale,
              radiusDomain: this.config.radiusDomain,
              radiusRange: this.config.radiusRange,
              currentTime: (0, _tileUtils.isIndexedField)(radiusField) ? animationConfig.currentTime : null
            }
          },
          _subLayerProps: {
            'polygons-stroke': {
              opacity: visConfig.strokeOpacity
            },
            'polygons-fill': {
              parameters: {
                cullFace: _constants["default"].BACK
              }
            }
          },
          loadOptions: {
            mvt: (0, _constants2.getLoaderOptions)().mvt
          }
        }))].concat((0, _toConsumableArray2["default"])(hoveredObject ? [new _typed.GeoJsonLayer(_objectSpread(_objectSpread(_objectSpread({}, (_objectHovered$source = objectHovered.sourceLayer) === null || _objectHovered$source === void 0 ? void 0 : _objectHovered$source.props), this.getDefaultHoverLayerProps()), {}, {
          visible: true,
          wrapLongitude: false,
          data: [hoveredObject],
          getLineColor: DEFAULT_HIGHLIGHT_STROKE_COLOR,
          getFillColor: DEFAULT_HIGHLIGHT_FILL_COLOR,
          getLineWidth: visConfig.strokeWidth + 1,
          lineWidthUnits: 'pixels',
          stroked: true,
          filled: true
        }))] : []));
        return layers;
      }
      return [];
    }
  }], [{
    key: "findDefaultLayerProps",
    value: function findDefaultLayerProps(dataset) {
      if (dataset.type !== _constants2.DatasetType.VECTOR_TILE) {
        return {
          props: []
        };
      }
      return _superPropGet(VectorTileLayer, "findDefaultLayerProps", this, 2)([dataset]);
    }
  }]);
}(_abstractTileLayer["default"]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdHlwZWQiLCJyZXF1aXJlIiwiX212dCIsIl9wbXRpbGVzIiwiX2NvbnN0YW50cyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY29tbW9uVXRpbHMiLCJfY29uc3RhbnRzMiIsIl90YWJsZSIsIl9tdnRMYXllciIsIl92ZWN0b3JUaWxlSWNvbiIsIl9iYXNlTGF5ZXIiLCJfYWJzdHJhY3RUaWxlTGF5ZXIiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl90aWxlRGF0YXNldCIsIl90aWxlVXRpbHMiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJfY2FsbFN1cGVyIiwibyIsIl9nZXRQcm90b3R5cGVPZjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImNvbnN0cnVjdG9yIiwiYXBwbHkiLCJCb29sZWFuIiwicHJvdG90eXBlIiwidmFsdWVPZiIsIl9zdXBlclByb3BHZXQiLCJwIiwiX2dldDIiLCJvd25LZXlzIiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImZpbHRlciIsImVudW1lcmFibGUiLCJwdXNoIiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJERUZBVUxUX0hJR0hMSUdIVF9GSUxMX0NPTE9SIiwiZXhwb3J0cyIsIkRFRkFVTFRfSElHSExJR0hUX1NUUk9LRV9DT0xPUiIsIk1BWF9DQUNIRV9TSVpFX01PQklMRSIsIkRFRkFVTFRfU1RST0tFX1dJRFRIIiwidmVjdG9yVGlsZVZpc0NvbmZpZ3MiLCJjb21tb25UaWxlVmlzQ29uZmlncyIsInN0cm9rZWQiLCJMQVlFUl9WSVNfQ09ORklHUyIsImRlZmF1bHRWYWx1ZSIsInN0cm9rZUNvbG9yU2NhbGUiLCJzdHJva2VDb2xvclJhbmdlIiwic2l6ZVJhbmdlIiwic3Ryb2tlV2lkdGgiLCJ0aGlja25lc3MiLCJwcm9wZXJ0eSIsImFsbG93Q3VzdG9tVmFsdWUiLCJyYWRpdXNTY2FsZSIsInJhZGl1c1JhbmdlIiwidHlwZSIsImlzUmFuZ2VkIiwicmFuZ2UiLCJzdGVwIiwidGlsZUxheWVyQm91bmRzTGF5ZXIiLCJpZCIsInByb3BzIiwiYm91bmRzIiwiZGF0YSIsInBhdGgiLCJsYXllciIsIlBhdGhMYXllciIsImNvbmNhdCIsImdldFBhdGgiLCJkIiwiZ2V0Q29sb3IiLCJnZXRXaWR0aCIsIndpZHRoVW5pdHMiLCJwaWNrYWJsZSIsIlZlY3RvclRpbGVMYXllciIsIl9BYnN0cmFjdFRpbGVMYXllciIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrMiIsInJlZ2lzdGVyVmlzQ29uZmlnIiwidGlsZURhdGFzZXQiLCJpbml0VGlsZURhdGFzZXQiLCJfaW5oZXJpdHMyIiwiX2NyZWF0ZUNsYXNzMiIsImtleSIsInZhbHVlIiwiVGlsZURhdGFzZXQiLCJnZXRUaWxlSWQiLCJ0aWxlIiwiZ2V0SXRlcmFibGUiLCJjb250ZW50Iiwic2hhcGUiLCJmZWF0dXJlcyIsImdldFJvd0NvdW50IiwiZ2V0Um93VmFsdWUiLCJhY2Nlc3NSb3dWYWx1ZSIsIkxBWUVSX1RZUEVTIiwidmVjdG9yVGlsZSIsIlZlY3RvclRpbGVJY29uIiwiRGF0YXNldFR5cGUiLCJWRUNUT1JfVElMRSIsInZpc3VhbENoYW5uZWxzIiwic3Ryb2tlQ29sb3IiLCJmaWVsZCIsInNjYWxlIiwiZG9tYWluIiwiY2hhbm5lbFNjYWxlVHlwZSIsIkNIQU5ORUxfU0NBTEVTIiwiY29sb3IiLCJhY2Nlc3NvciIsImNvbmRpdGlvbiIsImNvbmZpZyIsInZpc0NvbmZpZyIsIm51bGxWYWx1ZSIsImdldEF0dHJpYnV0ZVZhbHVlIiwic2l6ZSIsInJhZGl1cyIsImdldERlZmF1bHRMYXllckNvbmZpZyIsImRlZmF1bHRMYXllckNvbmZpZyIsImNvbG9yU2NhbGUiLCJTQ0FMRV9UWVBFUyIsInF1YW50aXplIiwic3Ryb2tlQ29sb3JGaWVsZCIsInN0cm9rZUNvbG9yRG9tYWluIiwicXVhbnRpbGUiLCJjb2xvclVJIiwiREVGQVVMVF9DT0xPUl9VSSIsInJhZGl1c0ZpZWxkIiwicmFkaXVzRG9tYWluIiwibGluZWFyIiwiZ2V0SG92ZXJEYXRhIiwib2JqZWN0IiwiZGF0YUNvbnRhaW5lciIsImZpZWxkcyIsIm1hcCIsImYiLCJfb2JqZWN0JHByb3BlcnRpZXMkZiQiLCJfb2JqZWN0JHByb3BlcnRpZXMiLCJwcm9wZXJ0aWVzIiwibmFtZSIsImNhbGN1bGF0ZUxheWVyRG9tYWluIiwiZGF0YXNldCIsInZpc3VhbENoYW5uZWwiLCJfZmllbGQkZmlsdGVyUHJvcHMiLCJfZmllbGQkZmlsdGVyUHJvcHMyIiwiX2ZpZWxkJGZpbHRlclByb3BzMyIsImRlZmF1bHREb21haW4iLCJpc0RvbWFpblF1YW50aWxlcyIsImZpbHRlclByb3BzIiwiZG9tYWluUXVhbnRpbGVzIiwiaXNEb21haW5TdG9wcyIsImRvbWFpblN0b3BzIiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0U2NhbGVPcHRpb25zIiwiY2hhbm5lbEtleSIsIl9maWVsZCRmaWx0ZXJQcm9wczQiLCJvcHRpb25zIiwiS2VwbGVyTGF5ZXIiLCJjaGFubmVsIiwiZHluYW1pY0NvbG9yIiwiaW5kZXhLZXkiLCJpc0luZGV4ZWRGaWVsZCIsIl9maWVsZCRpbmRleEJ5IiwiZmllbGROYW1lIiwiaW5kZXhCeSIsIm1hcHBlZFZhbHVlIiwiZGF0dW0iLCJmaWVsZElkeCIsInVwZGF0ZUxheWVyTWV0YSIsImRhdGFzZXRzIiwiZGF0YXNldE1ldGEiLCJtZXRhZGF0YSIsInVwZGF0ZU1ldGEiLCJkYXRhc2V0SWQiLCJmb3JtYXRMYXllckRhdGEiLCJvbGRMYXllckRhdGEiLCJhbmltYXRpb25Db25maWciLCJkYXRhSWQiLCJub3ROdWxsb3JVbmRlZmluZWQiLCJ0aWxlU291cmNlIiwidGlsZXNldERhdGFVcmwiLCJkYXRhc2V0TWV0YWRhdGEiLCJyZW1vdGVUaWxlRm9ybWF0IiwiUmVtb3RlVGlsZUZvcm1hdCIsIk1WVCIsIl9kYXRhc2V0TWV0YWRhdGEkdGlsZSIsInRyYW5zZm9ybUZldGNoIiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWdlbmVyYXRvciIsIm1hcmsiLCJfY2FsbGVlIiwiaW5wdXQiLCJpbml0IiwicmVxdWVzdERhdGEiLCJ3cmFwIiwiX2NhbGxlZSQiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwidXJsIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiYWJydXB0IiwiZmV0Y2giLCJzdG9wIiwiX3giLCJfeDIiLCJNVlRTb3VyY2UiLCJjcmVhdGVEYXRhU291cmNlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwibXZ0IiwibWV0YWRhdGFVcmwiLCJ0aWxlc2V0TWV0YWRhdGFVcmwiLCJsb2FkT3B0aW9ucyIsIlBNVElMRVMiLCJQTVRpbGVzU291cmNlIiwiZ2V0VGlsZVVybCIsImhhc0hvdmVyZWRPYmplY3QiLCJvYmplY3RJbmZvIiwiX29iamVjdEluZm8kdGlsZSIsImluZGV4IiwicmVuZGVyU3ViTGF5ZXJzIiwiX2RhdGEiLCJfZGF0YTIiLCJ6b29tIiwieiIsIkdlb0pzb25MYXllciIsImdldEZpbGxDb2xvciIsImdldEZpbGxDb2xvckJ5Wm9vbSIsImdldEVsZXZhdGlvbiIsImdldEVsZXZhdGlvbkJ5Wm9vbSIsInBvaW50UmFkaXVzU2NhbGUiLCJwb2ludFJhZGl1c1VuaXRzIiwiZ2V0UG9pbnRSYWRpdXMiLCJhdXRvSGlnaGxpZ2h0Iiwid3JhcExvbmdpdHVkZSIsInJlbmRlckxheWVyIiwib3B0cyIsIm1hcFN0YXRlIiwiZ3B1RmlsdGVyIiwib2JqZWN0SG92ZXJlZCIsImxheWVyQ2FsbGJhY2tzIiwiX3RoaXMkY29uZmlnIiwiYW5pbWF0aW9uIiwic2V0TGF5ZXJEb21haW4iLCJvblNldExheWVyRG9tYWluIiwiZGVmYXVsdExheWVyUHJvcHMiLCJnZXREZWZhdWx0RGVja0xheWVyUHJvcHMiLCJlbGVab29tRmFjdG9yIiwiZ2V0RWxldmF0aW9uWm9vbUZhY3RvciIsInRyYW5zaXRpb25zIiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwidW5kZWZpbmVkIiwiY29sb3JGaWVsZCIsImhlaWdodEZpZWxkIiwic2l6ZUZpZWxkIiwiX2RhdGEkdGlsZVNvdXJjZSIsIl9vYmplY3RIb3ZlcmVkJHNvdXJjZSIsImhvdmVyZWRPYmplY3QiLCJsYXllcnMiLCJDdXN0b21NVlRMYXllciIsIm9uVmlld3BvcnRMb2FkIiwiZ2V0VGlsZURhdGEiLCJnZXRGaWx0ZXJWYWx1ZSIsImdldEdwdUZpbHRlclZhbHVlQWNjZXNzb3IiLCJmaWx0ZXJSYW5nZSIsImxpbmVXaWR0aFVuaXRzIiwiYmluYXJ5IiwiZWxldmF0aW9uU2NhbGUiLCJleHRydWRlZCIsImVuYWJsZTNkIiwiZ2V0UG9pbnRSYWRpdXNTY2FsZUJ5Wm9vbSIsImdldFByb3BlcnR5Qnlab29tIiwicmFkaXVzQnlab29tIiwicmFkaXVzVW5pdHMiLCJwb2ludFJhZGl1c01pblBpeGVscyIsImhpZ2hsaWdodENvbG9yIiwidXBkYXRlVHJpZ2dlcnMiLCJmaWx0ZXJWYWx1ZVVwZGF0ZVRyaWdnZXJzIiwiY3VycmVudFRpbWUiLCJlbmFibGVkIiwiY29sb3JEb21haW4iLCJjb2xvclJhbmdlIiwiaGVpZ2h0U2NhbGVUeXBlIiwiaGVpZ2h0U2NhbGUiLCJoZWlnaHRSYW5nZSIsImdldExpbmVDb2xvciIsImdldExpbmVXaWR0aCIsInNpemVTY2FsZSIsInNpemVEb21haW4iLCJfc3ViTGF5ZXJQcm9wcyIsIm9wYWNpdHkiLCJzdHJva2VPcGFjaXR5IiwicGFyYW1ldGVycyIsImN1bGxGYWNlIiwiR0wiLCJCQUNLIiwiZ2V0TG9hZGVyT3B0aW9ucyIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJzb3VyY2VMYXllciIsImdldERlZmF1bHRIb3ZlckxheWVyUHJvcHMiLCJ2aXNpYmxlIiwiZmlsbGVkIiwiZmluZERlZmF1bHRMYXllclByb3BzIiwiQWJzdHJhY3RUaWxlTGF5ZXIiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdmVjdG9yLXRpbGUvdmVjdG9yLXRpbGUtbGF5ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IHtGZWF0dXJlQ29sbGVjdGlvbiwgRmVhdHVyZX0gZnJvbSAnZ2VvanNvbic7XG5cbmltcG9ydCB7TGF5ZXIgYXMgRGVja0xheWVyfSBmcm9tICdAZGVjay5nbC9jb3JlL3R5cGVkJztcbmltcG9ydCB7X1RpbGUyREhlYWRlciBhcyBUaWxlMkRIZWFkZXJ9IGZyb20gJ0BkZWNrLmdsL2dlby1sYXllcnMvdHlwZWQnO1xuaW1wb3J0IHtHZW9Kc29uTGF5ZXIsIFBhdGhMYXllcn0gZnJvbSAnQGRlY2suZ2wvbGF5ZXJzL3R5cGVkJztcbmltcG9ydCB7TVZUU291cmNlLCBNVlRUaWxlU291cmNlfSBmcm9tICdAbG9hZGVycy5nbC9tdnQnO1xuaW1wb3J0IHtQTVRpbGVzU291cmNlLCBQTVRpbGVzVGlsZVNvdXJjZX0gZnJvbSAnQGxvYWRlcnMuZ2wvcG10aWxlcyc7XG5pbXBvcnQgR0wgZnJvbSAnQGx1bWEuZ2wvY29uc3RhbnRzJztcblxuaW1wb3J0IHtub3ROdWxsb3JVbmRlZmluZWR9IGZyb20gJ0BrZXBsZXIuZ2wvY29tbW9uLXV0aWxzJztcbmltcG9ydCB7XG4gIGdldExvYWRlck9wdGlvbnMsXG4gIERhdGFzZXRUeXBlLFxuICBMQVlFUl9UWVBFUyxcbiAgUmVtb3RlVGlsZUZvcm1hdCxcbiAgVmVjdG9yVGlsZURhdGFzZXRNZXRhZGF0YSxcbiAgU0NBTEVfVFlQRVMsXG4gIENIQU5ORUxfU0NBTEVTLFxuICBERUZBVUxUX0NPTE9SX1VJLFxuICBMQVlFUl9WSVNfQ09ORklHU1xufSBmcm9tICdAa2VwbGVyLmdsL2NvbnN0YW50cyc7XG5pbXBvcnQge1xuICBnZXRUaWxlVXJsLFxuICBLZXBsZXJUYWJsZSBhcyBLZXBsZXJEYXRhc2V0LFxuICBEYXRhc2V0cyBhcyBLZXBsZXJEYXRhc2V0cyxcbiAgR3B1RmlsdGVyLFxuICBWZWN0b3JUaWxlTWV0YWRhdGFcbn0gZnJvbSAnQGtlcGxlci5nbC90YWJsZSc7XG5pbXBvcnQge1xuICBBbmltYXRpb25Db25maWcsXG4gIEZpZWxkIGFzIEtlcGxlckZpZWxkLFxuICBMYXllckNvbG9yQ29uZmlnLFxuICBMYXllckhlaWdodENvbmZpZyxcbiAgTWVyZ2UsXG4gIE1hcFN0YXRlLFxuICBCaW5kZWRMYXllckNhbGxiYWNrcyxcbiAgVmlzQ29uZmlnUmFuZ2UsXG4gIFZpc0NvbmZpZ051bWJlcixcbiAgRG9tYWluU3RvcHNcbn0gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5pbXBvcnQge0RhdGFDb250YWluZXJJbnRlcmZhY2V9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuXG5pbXBvcnQge01WVExheWVyIGFzIEN1c3RvbU1WVExheWVyfSBmcm9tICcuL212dC1sYXllcic7XG5pbXBvcnQgVmVjdG9yVGlsZUljb24gZnJvbSAnLi92ZWN0b3ItdGlsZS1pY29uJztcbmltcG9ydCB7XG4gIGRlZmF1bHQgYXMgS2VwbGVyTGF5ZXIsXG4gIExheWVyQmFzZUNvbmZpZyxcbiAgTGF5ZXJCYXNlQ29uZmlnUGFydGlhbCxcbiAgVmlzdWFsQ2hhbm5lbCxcbiAgVmlzdWFsQ2hhbm5lbERvbWFpbixcbiAgVmlzdWFsQ2hhbm5lbEZpZWxkXG59IGZyb20gJy4uL2Jhc2UtbGF5ZXInO1xuaW1wb3J0IHtGaW5kRGVmYXVsdExheWVyUHJvcHNSZXR1cm5WYWx1ZX0gZnJvbSAnLi4vbGF5ZXItdXRpbHMnO1xuXG5pbXBvcnQgQWJzdHJhY3RUaWxlTGF5ZXIsIHtcbiAgTGF5ZXJEYXRhIGFzIENvbW1vbkxheWVyRGF0YSxcbiAgY29tbW9uVGlsZVZpc0NvbmZpZ3MsXG4gIEFic3RyYWN0VGlsZUxheWVyQ29uZmlnLFxuICBBYnN0cmFjdFRpbGVMYXllclZpc0NvbmZpZ1NldHRpbmdzXG59IGZyb20gJy4vYWJzdHJhY3QtdGlsZS1sYXllcic7XG5pbXBvcnQgVGlsZURhdGFzZXQgZnJvbSAnLi9jb21tb24tdGlsZS90aWxlLWRhdGFzZXQnO1xuaW1wb3J0IHtcbiAgaXNEb21haW5TdG9wcyxcbiAgaXNEb21haW5RdWFudGlsZXMsXG4gIGlzSW5kZXhlZEZpZWxkLFxuICBnZXRQcm9wZXJ0eUJ5Wm9vbVxufSBmcm9tICcuL2NvbW1vbi10aWxlL3RpbGUtdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9ISUdITElHSFRfRklMTF9DT0xPUiA9IFsyNTIsIDI0MiwgMjYsIDE1MF07XG5leHBvcnQgY29uc3QgREVGQVVMVF9ISUdITElHSFRfU1RST0tFX0NPTE9SID0gWzI1MiwgMjQyLCAyNiwgMjU1XTtcbmV4cG9ydCBjb25zdCBNQVhfQ0FDSEVfU0laRV9NT0JJTEUgPSAxOyAvLyBNaW5pbWl6ZSBjYWNoaW5nLCB2aXNpYmxlIHRpbGVzIHdpbGwgYWx3YXlzIGJlIGxvYWRlZFxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1RST0tFX1dJRFRIID0gMTtcblxuLyoqXG4gKiBUeXBlIGZvciB0cmFuc2Zvcm1SZXF1ZXN0IHJldHVybmVkIHBhcmFtZXRlcnMuXG4gKi9cbmV4cG9ydCB0eXBlIFJlcXVlc3RQYXJhbWV0ZXJzID0ge1xuICAvKiogVGhlIFVSTCB0byBiZSByZXF1ZXN0ZWQuICovXG4gIHVybDogc3RyaW5nO1xuICAvKiogU2VhcmNoIHBhcmFtZXRlcnMgdG8gYmUgYWRkZWQgb250byB0aGUgVVJMLiAqL1xuICBzZWFyY2hQYXJhbXM6IFVSTFNlYXJjaFBhcmFtcztcbiAgLyoqIE9wdGlvbnMgcGFzc2VkIHRvIGZldGNoLiAqL1xuICBvcHRpb25zOiBSZXF1ZXN0SW5pdDtcbn07XG5cbi8vIFRoaXMgdHlwZSAqc2VlbXMqIHRvIGJlIHdoYXQgbG9hZGVycy5nbCBjdXJyZW50bHkgcmV0dXJucyBmb3IgdGlsZSBjb250ZW50LlxuLy8gQXBwYXJlbnRseSB0aGlzIG1pZ2h0IGJlIGRpZmZlcmVudCBkZXBlbmRpbmcgb24gdGhlIGxvYWRlcnMgdmVyc2lvbiwgYW5kIGZvci4uLlxuLy8gcmVhc29ucyB3ZSB1c2UgdHdvIGRpZmZlcmVudCB2ZXJzaW9ucyBvZiBsb2FkZXJzIHJpZ2h0IG5vdy5cbi8vIFRPRE86IFRoZSBGZWF0dXJlc1tdIHZlcnNpb24gc2hvdWxkIG5vdCBiZSBuZWVkZWQgd2hlbiB3ZSB1cGRhdGUgdG8gYSBuZXdlclxuLy8gdmVyc2lvbiBvZiBEZWNrLmdsIGFuZCB1c2Ugb25seSBvbmUgdmVyc2lvbiBvZiBsb2FkZXJzXG50eXBlIFRpbGVDb250ZW50ID1cbiAgfCAoRmVhdHVyZUNvbGxlY3Rpb24gJiB7c2hhcGU6ICdnZW9qc29uLXRhYmxlJ30pXG4gIHwgKEZlYXR1cmVbXSAmIHtzaGFwZTogdW5kZWZpbmVkfSk7XG5cbnR5cGUgVmVjdG9yVGlsZSA9IFRpbGUyREhlYWRlcjxUaWxlQ29udGVudD47XG5cbnR5cGUgTGF5ZXJEYXRhID0gQ29tbW9uTGF5ZXJEYXRhICYge1xuICB0aWxlc2V0RGF0YVVybD86IHN0cmluZyB8IG51bGw7XG4gIHRpbGVTb3VyY2U6IE1WVFRpbGVTb3VyY2UgfCBQTVRpbGVzVGlsZVNvdXJjZSB8IG51bGw7XG59O1xuXG50eXBlIFZlY3RvclRpbGVMYXllclJlbmRlck9wdGlvbnMgPSBNZXJnZTxcbiAge1xuICAgIGlkeDogbnVtYmVyO1xuICAgIHZpc2libGU6IGJvb2xlYW47XG4gICAgbWFwU3RhdGU6IE1hcFN0YXRlO1xuICAgIGRhdGE6IGFueTtcbiAgICBhbmltYXRpb25Db25maWc6IEFuaW1hdGlvbkNvbmZpZztcbiAgICBncHVGaWx0ZXI6IEdwdUZpbHRlcjtcbiAgICBsYXllckNhbGxiYWNrczogQmluZGVkTGF5ZXJDYWxsYmFja3M7XG4gICAgb2JqZWN0SG92ZXJlZDoge1xuICAgICAgaW5kZXg6IG51bWJlcjtcbiAgICAgIHRpbGU6IFZlY3RvclRpbGU7XG4gICAgICBzb3VyY2VMYXllcjogdHlwZW9mIEdlb0pzb25MYXllcjtcbiAgICB9O1xuICB9LFxuICBMYXllckRhdGFcbj47XG5cbmV4cG9ydCBjb25zdCB2ZWN0b3JUaWxlVmlzQ29uZmlncyA9IHtcbiAgLi4uY29tbW9uVGlsZVZpc0NvbmZpZ3MsXG5cbiAgc3Ryb2tlZDoge1xuICAgIC4uLkxBWUVSX1ZJU19DT05GSUdTLnN0cm9rZWQsXG4gICAgZGVmYXVsdFZhbHVlOiBmYWxzZVxuICB9LFxuXG4gIC8vIFRPRE8gZmlndXJlIG91dCB3aHkgc3Ryb2tlQ29sb3JTY2FsZSBjYW4ndCBiZSBjb25zdFxuICBzdHJva2VDb2xvclNjYWxlOiAnc3Ryb2tlQ29sb3JTY2FsZScgYXMgYW55LFxuICBzdHJva2VDb2xvclJhbmdlOiAnc3Ryb2tlQ29sb3JSYW5nZScgYXMgY29uc3QsXG5cbiAgc2l6ZVJhbmdlOiAnc3Ryb2tlV2lkdGhSYW5nZScgYXMgY29uc3QsXG4gIHN0cm9rZVdpZHRoOiB7XG4gICAgLi4uTEFZRVJfVklTX0NPTkZJR1MudGhpY2tuZXNzLFxuICAgIHByb3BlcnR5OiAnc3Ryb2tlV2lkdGgnLFxuICAgIGRlZmF1bHRWYWx1ZTogMC41LFxuICAgIGFsbG93Q3VzdG9tVmFsdWU6IGZhbHNlXG4gIH0sXG5cbiAgcmFkaXVzU2NhbGU6ICdyYWRpdXNTY2FsZScgYXMgYW55LFxuICByYWRpdXNSYW5nZToge1xuICAgIC4uLkxBWUVSX1ZJU19DT05GSUdTLnJhZGl1c1JhbmdlLFxuICAgIHR5cGU6ICdudW1iZXInLFxuICAgIGRlZmF1bHRWYWx1ZTogWzAsIDFdLFxuICAgIGlzUmFuZ2VkOiB0cnVlLFxuICAgIHJhbmdlOiBbMCwgMV0sXG4gICAgc3RlcDogMC4wMVxuICB9IGFzIFZpc0NvbmZpZ1JhbmdlXG59O1xuXG5leHBvcnQgdHlwZSBWZWN0b3JUaWxlTGF5ZXJDb25maWcgPSBNZXJnZTxcbiAgQWJzdHJhY3RUaWxlTGF5ZXJDb25maWcsXG4gIHtcbiAgICBzaXplRmllbGQ/OiBWaXN1YWxDaGFubmVsRmllbGQ7XG4gICAgc2l6ZVNjYWxlPzogc3RyaW5nO1xuICAgIHNpemVEb21haW4/OiBWaXN1YWxDaGFubmVsRG9tYWluO1xuXG4gICAgc3Ryb2tlQ29sb3JGaWVsZDogVmlzdWFsQ2hhbm5lbEZpZWxkO1xuXG4gICAgcmFkaXVzRmllbGQ/OiBWaXN1YWxDaGFubmVsRmllbGQ7XG4gICAgcmFkaXVzU2NhbGU/OiBzdHJpbmc7XG4gICAgcmFkaXVzRG9tYWluPzogVmlzdWFsQ2hhbm5lbERvbWFpbjtcbiAgICByYWRpdXNSYW5nZT86IGFueTtcbiAgfVxuPjtcblxuZXhwb3J0IHR5cGUgVmVjdG9yVGlsZUxheWVyVmlzQ29uZmlnU2V0dGluZ3MgPSBNZXJnZTxcbiAgQWJzdHJhY3RUaWxlTGF5ZXJWaXNDb25maWdTZXR0aW5ncyxcbiAge1xuICAgIHNpemVSYW5nZTogVmlzQ29uZmlnUmFuZ2U7XG4gICAgc3Ryb2tlV2lkdGg6IFZpc0NvbmZpZ051bWJlcjtcbiAgfVxuPjtcblxuZXhwb3J0IGZ1bmN0aW9uIHRpbGVMYXllckJvdW5kc0xheWVyKGlkOiBzdHJpbmcsIHByb3BzOiB7Ym91bmRzPzogbnVtYmVyW119KTogRGVja0xheWVyW10ge1xuICBjb25zdCB7Ym91bmRzfSA9IHByb3BzO1xuICBpZiAoYm91bmRzPy5sZW5ndGggIT09IDQpIHJldHVybiBbXTtcblxuICBjb25zdCBkYXRhID0gW1xuICAgIHtcbiAgICAgIHBhdGg6IFtcbiAgICAgICAgW2JvdW5kc1swXSwgYm91bmRzWzFdXSxcbiAgICAgICAgW2JvdW5kc1syXSwgYm91bmRzWzFdXSxcbiAgICAgICAgW2JvdW5kc1syXSwgYm91bmRzWzNdXSxcbiAgICAgICAgW2JvdW5kc1swXSwgYm91bmRzWzNdXSxcbiAgICAgICAgW2JvdW5kc1swXSwgYm91bmRzWzFdXVxuICAgICAgXVxuICAgIH1cbiAgXTtcblxuICBjb25zdCBsYXllciA9IG5ldyBQYXRoTGF5ZXIoe1xuICAgIGlkOiBgJHtpZH0tdmVjdG9yLXRpbGUtYm91bmRzYCxcbiAgICBkYXRhLFxuICAgIGdldFBhdGg6IGQgPT4gZC5wYXRoLFxuICAgIGdldENvbG9yOiBbMTI4LCAxMjgsIDEyOCwgMjU1XSxcbiAgICBnZXRXaWR0aDogMSxcbiAgICB3aWR0aFVuaXRzOiAncGl4ZWxzJyxcbiAgICBwaWNrYWJsZTogZmFsc2VcbiAgfSk7XG5cbiAgcmV0dXJuIFtsYXllcl07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlY3RvclRpbGVMYXllciBleHRlbmRzIEFic3RyYWN0VGlsZUxheWVyPFZlY3RvclRpbGUsIEZlYXR1cmVbXT4ge1xuICBkZWNsYXJlIGNvbmZpZzogVmVjdG9yVGlsZUxheWVyQ29uZmlnO1xuICBkZWNsYXJlIHZpc0NvbmZpZ1NldHRpbmdzOiBWZWN0b3JUaWxlTGF5ZXJWaXNDb25maWdTZXR0aW5ncztcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogQ29uc3RydWN0b3JQYXJhbWV0ZXJzPHR5cGVvZiBBYnN0cmFjdFRpbGVMYXllcj5bMF0pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5yZWdpc3RlclZpc0NvbmZpZyh2ZWN0b3JUaWxlVmlzQ29uZmlncyk7XG4gICAgdGhpcy50aWxlRGF0YXNldCA9IHRoaXMuaW5pdFRpbGVEYXRhc2V0KCk7XG4gIH1cblxuICBtZXRhID0ge307XG5cbiAgc3RhdGljIGZpbmREZWZhdWx0TGF5ZXJQcm9wcyhkYXRhc2V0OiBLZXBsZXJEYXRhc2V0KTogRmluZERlZmF1bHRMYXllclByb3BzUmV0dXJuVmFsdWUge1xuICAgIGlmIChkYXRhc2V0LnR5cGUgIT09IERhdGFzZXRUeXBlLlZFQ1RPUl9USUxFKSB7XG4gICAgICByZXR1cm4ge3Byb3BzOiBbXX07XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5maW5kRGVmYXVsdExheWVyUHJvcHMoZGF0YXNldCk7XG4gIH1cblxuICBpbml0VGlsZURhdGFzZXQoKTogVGlsZURhdGFzZXQ8VmVjdG9yVGlsZSwgRmVhdHVyZVtdPiB7XG4gICAgcmV0dXJuIG5ldyBUaWxlRGF0YXNldCh7XG4gICAgICBnZXRUaWxlSWQ6ICh0aWxlOiBWZWN0b3JUaWxlKTogc3RyaW5nID0+IHRpbGUuaWQsXG4gICAgICBnZXRJdGVyYWJsZTogKHRpbGU6IFZlY3RvclRpbGUpOiBGZWF0dXJlW10gPT4ge1xuICAgICAgICBpZiAodGlsZS5jb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHRpbGUuY29udGVudC5zaGFwZSA9PT0gJ2dlb2pzb24tdGFibGUnID8gdGlsZS5jb250ZW50LmZlYXR1cmVzIDogdGlsZS5jb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH0sXG4gICAgICBnZXRSb3dDb3VudDogKGZlYXR1cmVzOiBGZWF0dXJlW10pOiBudW1iZXIgPT4gZmVhdHVyZXMubGVuZ3RoLFxuICAgICAgZ2V0Um93VmFsdWU6IHRoaXMuYWNjZXNzUm93VmFsdWVcbiAgICB9KTtcbiAgfVxuXG4gIGdldCB0eXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIExBWUVSX1RZUEVTLnZlY3RvclRpbGU7XG4gIH1cblxuICBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmVjdG9yIFRpbGUnO1xuICB9XG5cbiAgZ2V0IGxheWVySWNvbigpOiBLZXBsZXJMYXllclsnbGF5ZXJJY29uJ10ge1xuICAgIHJldHVybiBWZWN0b3JUaWxlSWNvbjtcbiAgfVxuXG4gIGdldCBzdXBwb3J0ZWREYXRhc2V0VHlwZXMoKTogRGF0YXNldFR5cGVbXSB7XG4gICAgcmV0dXJuIFtEYXRhc2V0VHlwZS5WRUNUT1JfVElMRV07XG4gIH1cblxuICBnZXQgdmlzdWFsQ2hhbm5lbHMoKTogUmVjb3JkPHN0cmluZywgVmlzdWFsQ2hhbm5lbD4ge1xuICAgIGNvbnN0IHZpc3VhbENoYW5uZWxzID0gc3VwZXIudmlzdWFsQ2hhbm5lbHM7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnZpc3VhbENoYW5uZWxzLFxuICAgICAgc3Ryb2tlQ29sb3I6IHtcbiAgICAgICAgcHJvcGVydHk6ICdzdHJva2VDb2xvcicsXG4gICAgICAgIGZpZWxkOiAnc3Ryb2tlQ29sb3JGaWVsZCcsXG4gICAgICAgIHNjYWxlOiAnc3Ryb2tlQ29sb3JTY2FsZScsXG4gICAgICAgIGRvbWFpbjogJ3N0cm9rZUNvbG9yRG9tYWluJyxcbiAgICAgICAgcmFuZ2U6ICdzdHJva2VDb2xvclJhbmdlJyxcbiAgICAgICAga2V5OiAnc3Ryb2tlQ29sb3InLFxuICAgICAgICBjaGFubmVsU2NhbGVUeXBlOiBDSEFOTkVMX1NDQUxFUy5jb2xvcixcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRMaW5lQ29sb3InLFxuICAgICAgICBjb25kaXRpb246IGNvbmZpZyA9PiBjb25maWcudmlzQ29uZmlnLnN0cm9rZWQsXG4gICAgICAgIG51bGxWYWx1ZTogdmlzdWFsQ2hhbm5lbHMuY29sb3IubnVsbFZhbHVlLFxuICAgICAgICBnZXRBdHRyaWJ1dGVWYWx1ZTogY29uZmlnID0+IGNvbmZpZy52aXNDb25maWcuc3Ryb2tlQ29sb3IgfHwgY29uZmlnLmNvbG9yXG4gICAgICB9LFxuICAgICAgc2l6ZToge1xuICAgICAgICBwcm9wZXJ0eTogJ3N0cm9rZScsXG4gICAgICAgIGZpZWxkOiAnc2l6ZUZpZWxkJyxcbiAgICAgICAgc2NhbGU6ICdzaXplU2NhbGUnLFxuICAgICAgICBkb21haW46ICdzaXplRG9tYWluJyxcbiAgICAgICAgcmFuZ2U6ICdzaXplUmFuZ2UnLFxuICAgICAgICBrZXk6ICdzaXplJyxcbiAgICAgICAgY2hhbm5lbFNjYWxlVHlwZTogQ0hBTk5FTF9TQ0FMRVMuc2l6ZSxcbiAgICAgICAgbnVsbFZhbHVlOiAwLFxuICAgICAgICBhY2Nlc3NvcjogJ2dldExpbmVXaWR0aCcsXG4gICAgICAgIGNvbmRpdGlvbjogY29uZmlnID0+IGNvbmZpZy52aXNDb25maWcuc3Ryb2tlZCxcbiAgICAgICAgZ2V0QXR0cmlidXRlVmFsdWU6IGNvbmZpZyA9PiBjb25maWcudmlzQ29uZmlnLnN0cm9rZVdpZHRoIHx8IERFRkFVTFRfU1RST0tFX1dJRFRIXG4gICAgICB9LFxuICAgICAgcmFkaXVzOiB7XG4gICAgICAgIHByb3BlcnR5OiAncmFkaXVzJyxcbiAgICAgICAgZmllbGQ6ICdyYWRpdXNGaWVsZCcsXG4gICAgICAgIHNjYWxlOiAncmFkaXVzU2NhbGUnLFxuICAgICAgICBkb21haW46ICdyYWRpdXNEb21haW4nLFxuICAgICAgICByYW5nZTogJ3JhZGl1c1JhbmdlJyxcbiAgICAgICAga2V5OiAncmFkaXVzJyxcbiAgICAgICAgY2hhbm5lbFNjYWxlVHlwZTogQ0hBTk5FTF9TQ0FMRVMuc2l6ZSxcbiAgICAgICAgbnVsbFZhbHVlOiAwLFxuICAgICAgICBnZXRBdHRyaWJ1dGVWYWx1ZTogY29uZmlnID0+IHtcbiAgICAgICAgICByZXR1cm4gY29uZmlnLnZpc0NvbmZpZy5yYWRpdXMgfHwgY29uZmlnLnJhZGl1cztcbiAgICAgICAgfSxcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRQb2ludFJhZGl1cycsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogY29uZmlnID0+IGNvbmZpZy5yYWRpdXNcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZ2V0RGVmYXVsdExheWVyQ29uZmlnKFxuICAgIHByb3BzOiBMYXllckJhc2VDb25maWdQYXJ0aWFsXG4gICk6IExheWVyQmFzZUNvbmZpZyAmIFBhcnRpYWw8TGF5ZXJDb2xvckNvbmZpZyAmIExheWVySGVpZ2h0Q29uZmlnPiB7XG4gICAgY29uc3QgZGVmYXVsdExheWVyQ29uZmlnID0gc3VwZXIuZ2V0RGVmYXVsdExheWVyQ29uZmlnKHByb3BzKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZGVmYXVsdExheWVyQ29uZmlnLFxuICAgICAgY29sb3JTY2FsZTogU0NBTEVfVFlQRVMucXVhbnRpemUsXG5cbiAgICAgIHN0cm9rZUNvbG9yRmllbGQ6IG51bGwsXG4gICAgICBzdHJva2VDb2xvckRvbWFpbjogWzAsIDFdLFxuICAgICAgc3Ryb2tlQ29sb3JTY2FsZTogU0NBTEVfVFlQRVMucXVhbnRpbGUsXG4gICAgICBjb2xvclVJOiB7XG4gICAgICAgIC4uLmRlZmF1bHRMYXllckNvbmZpZy5jb2xvclVJLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIExheWVyQ29uZmlnXG4gICAgICAgIHN0cm9rZUNvbG9yUmFuZ2U6IERFRkFVTFRfQ09MT1JfVUlcbiAgICAgIH0sXG5cbiAgICAgIHJhZGl1c0ZpZWxkOiBudWxsLFxuICAgICAgcmFkaXVzRG9tYWluOiBbMCwgMV0sXG4gICAgICByYWRpdXNTY2FsZTogU0NBTEVfVFlQRVMubGluZWFyXG4gICAgfTtcbiAgfVxuXG4gIGdldEhvdmVyRGF0YShcbiAgICBvYmplY3Q6IHtwcm9wZXJ0aWVzPzogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+fSxcbiAgICBkYXRhQ29udGFpbmVyOiBEYXRhQ29udGFpbmVySW50ZXJmYWNlLFxuICAgIGZpZWxkczogS2VwbGVyRmllbGRbXVxuICApOiAoUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsKVtdIHtcbiAgICByZXR1cm4gZmllbGRzLm1hcChmID0+IG9iamVjdC5wcm9wZXJ0aWVzPy5bZi5uYW1lXSA/PyBudWxsKTtcbiAgfVxuXG4gIGNhbGN1bGF0ZUxheWVyRG9tYWluKFxuICAgIGRhdGFzZXQ6IEtlcGxlckRhdGFzZXQsXG4gICAgdmlzdWFsQ2hhbm5lbDogVmlzdWFsQ2hhbm5lbFxuICApOiBEb21haW5TdG9wcyB8IG51bWJlcltdIHtcbiAgICBjb25zdCBkZWZhdWx0RG9tYWluID0gWzAsIDFdO1xuXG4gICAgY29uc3QgZmllbGQgPSB0aGlzLmNvbmZpZ1t2aXN1YWxDaGFubmVsLmZpZWxkXTtcbiAgICBjb25zdCBzY2FsZSA9IHRoaXMuY29uZmlnW3Zpc3VhbENoYW5uZWwuc2NhbGVdO1xuICAgIGlmICghZmllbGQpIHtcbiAgICAgIC8vIGlmIGNvbG9yRmllbGQgb3Igc2l6ZUZpZWxkIHdlcmUgc2V0IGJhY2sgdG8gbnVsbFxuICAgICAgcmV0dXJuIGRlZmF1bHREb21haW47XG4gICAgfVxuICAgIGlmIChzY2FsZSA9PT0gU0NBTEVfVFlQRVMucXVhbnRpbGUgJiYgaXNEb21haW5RdWFudGlsZXMoZmllbGQ/LmZpbHRlclByb3BzPy5kb21haW5RdWFudGlsZXMpKSB7XG4gICAgICByZXR1cm4gZmllbGQuZmlsdGVyUHJvcHMuZG9tYWluUXVhbnRpbGVzO1xuICAgIH1cbiAgICBpZiAoaXNEb21haW5TdG9wcyhmaWVsZD8uZmlsdGVyUHJvcHM/LmRvbWFpblN0b3BzKSkge1xuICAgICAgcmV0dXJuIGZpZWxkLmZpbHRlclByb3BzLmRvbWFpblN0b3BzO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShmaWVsZD8uZmlsdGVyUHJvcHM/LmRvbWFpbikpIHtcbiAgICAgIHJldHVybiBmaWVsZC5maWx0ZXJQcm9wcy5kb21haW47XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlZmF1bHREb21haW47XG4gIH1cblxuICBnZXRTY2FsZU9wdGlvbnMoY2hhbm5lbEtleTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGxldCBvcHRpb25zID0gS2VwbGVyTGF5ZXIucHJvdG90eXBlLmdldFNjYWxlT3B0aW9ucy5jYWxsKHRoaXMsIGNoYW5uZWxLZXkpO1xuXG4gICAgY29uc3QgY2hhbm5lbCA9IHRoaXMudmlzdWFsQ2hhbm5lbHMuc3Ryb2tlQ29sb3I7XG4gICAgY29uc3QgZmllbGQgPSB0aGlzLmNvbmZpZ1tjaGFubmVsLmZpZWxkXTtcbiAgICBpZiAoXG4gICAgICAhKFxuICAgICAgICBpc0RvbWFpblF1YW50aWxlcyhmaWVsZD8uZmlsdGVyUHJvcHM/LmRvbWFpblF1YW50aWxlcykgfHxcbiAgICAgICAgdGhpcy5jb25maWcudmlzQ29uZmlnLmR5bmFtaWNDb2xvciB8fFxuICAgICAgICAvLyBJZiB3ZSd2ZSBzZXQgdGhlIHNjYWxlIHRvIHF1YW50aWxlLCB3ZSBuZWVkIHRvIGluY2x1ZGUgaXQgLSB0aGVyZSdzIGEgbG9hZGluZ1xuICAgICAgICAvLyBwZXJpb2QgaW4gd2hpY2ggdGhlIHZpc0NvbmZpZyBpc24ndCBzZXQgeWV0LCBidXQgaWYgd2UgZG9uJ3QgcmV0dXJuIHRoZSByaWdodFxuICAgICAgICAvLyBzY2FsZSB0eXBlIHdlIGxvc2UgaXRcbiAgICAgICAgdGhpcy5jb25maWcuY29sb3JTY2FsZSA9PT0gU0NBTEVfVFlQRVMucXVhbnRpbGVcbiAgICAgIClcbiAgICApIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zLmZpbHRlcihzY2FsZSA9PiBzY2FsZSAhPT0gU0NBTEVfVFlQRVMucXVhbnRpbGUpO1xuICAgIH1cblxuICAgIHJldHVybiBvcHRpb25zO1xuICB9XG5cbiAgYWNjZXNzUm93VmFsdWUoXG4gICAgZmllbGQ/OiBLZXBsZXJGaWVsZCxcbiAgICBpbmRleEtleT86IG51bWJlciB8IG51bGxcbiAgKTogKGZpZWxkOiBLZXBsZXJGaWVsZCwgZGF0dW06IEZlYXR1cmUpID0+IG51bWJlciB8IG51bGwge1xuICAgIC8vIGlmIGlzIGluZGV4ZWQgZmllbGRcbiAgICBpZiAoaXNJbmRleGVkRmllbGQoZmllbGQpICYmIGluZGV4S2V5ICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBmaWVsZE5hbWUgPSBpbmRleEtleSAmJiBmaWVsZD8uaW5kZXhCeT8ubWFwcGVkVmFsdWVbaW5kZXhLZXldO1xuICAgICAgaWYgKGZpZWxkTmFtZSkge1xuICAgICAgICByZXR1cm4gKGYsIGRhdHVtKSA9PiB7XG4gICAgICAgICAgaWYgKGRhdHVtLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXR1bS5wcm9wZXJ0aWVzW2ZpZWxkTmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFRPRE8gZGVidWcgdGhpcyB3aXRoIGluZGV4ZWQgdGlsZWQgZGF0YXNldFxuICAgICAgICAgIHJldHVybiBkYXR1bVtmaWVsZE5hbWVdO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGRlZmF1bHRcbiAgICByZXR1cm4gKGYsIGRhdHVtKSA9PiB7XG4gICAgICBpZiAoZiAmJiBkYXR1bS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBkYXR1bS5wcm9wZXJ0aWVzW2YubmFtZV07XG4gICAgICB9XG4gICAgICAvLyBzdXBwb3J0IHBpY2tpbmcgJiBoaWdobGlnaHRpbmdcbiAgICAgIHJldHVybiBmID8gZGF0dW1bZi5maWVsZElkeF0gOiBudWxsO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGVMYXllck1ldGEoZGF0YXNldDogS2VwbGVyRGF0YXNldCwgZGF0YXNldHM6IEtlcGxlckRhdGFzZXRzKTogdm9pZCB7XG4gICAgaWYgKGRhdGFzZXQudHlwZSAhPT0gRGF0YXNldFR5cGUuVkVDVE9SX1RJTEUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhc2V0TWV0YSA9IGRhdGFzZXQubWV0YWRhdGEgYXMgVmVjdG9yVGlsZU1ldGFkYXRhICYgVmVjdG9yVGlsZURhdGFzZXRNZXRhZGF0YTtcbiAgICB0aGlzLnVwZGF0ZU1ldGEoe1xuICAgICAgZGF0YXNldElkOiBkYXRhc2V0LmlkLFxuICAgICAgZGF0YXNldHMsXG4gICAgICBib3VuZHM6IGRhdGFzZXRNZXRhLmJvdW5kc1xuICAgIH0pO1xuICB9XG5cbiAgZm9ybWF0TGF5ZXJEYXRhKFxuICAgIGRhdGFzZXRzOiBLZXBsZXJEYXRhc2V0cyxcbiAgICBvbGRMYXllckRhdGE6IHVua25vd24sXG4gICAgYW5pbWF0aW9uQ29uZmlnOiBBbmltYXRpb25Db25maWdcbiAgKTogTGF5ZXJEYXRhIHtcbiAgICBjb25zdCB7ZGF0YUlkfSA9IHRoaXMuY29uZmlnO1xuICAgIGlmICghbm90TnVsbG9yVW5kZWZpbmVkKGRhdGFJZCkpIHtcbiAgICAgIHJldHVybiB7dGlsZVNvdXJjZTogbnVsbH07XG4gICAgfVxuICAgIGNvbnN0IGRhdGFzZXQgPSBkYXRhc2V0c1tkYXRhSWRdO1xuXG4gICAgbGV0IHRpbGVzZXREYXRhVXJsOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgbGV0IHRpbGVTb3VyY2U6IExheWVyRGF0YVsndGlsZVNvdXJjZSddID0gbnVsbDtcblxuICAgIGlmIChkYXRhc2V0Py50eXBlID09PSBEYXRhc2V0VHlwZS5WRUNUT1JfVElMRSkge1xuICAgICAgY29uc3QgZGF0YXNldE1ldGFkYXRhID0gZGF0YXNldC5tZXRhZGF0YSBhcyBWZWN0b3JUaWxlTWV0YWRhdGEgJiBWZWN0b3JUaWxlRGF0YXNldE1ldGFkYXRhO1xuICAgICAgY29uc3QgcmVtb3RlVGlsZUZvcm1hdCA9IGRhdGFzZXRNZXRhZGF0YT8ucmVtb3RlVGlsZUZvcm1hdDtcbiAgICAgIGlmIChyZW1vdGVUaWxlRm9ybWF0ID09PSBSZW1vdGVUaWxlRm9ybWF0Lk1WVCkge1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm1GZXRjaCA9IGFzeW5jIChpbnB1dDogUmVxdWVzdEluZm8gfCBVUkwsIGluaXQ/OiBSZXF1ZXN0SW5pdCB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlcXVlc3REYXRhOiBSZXF1ZXN0UGFyYW1ldGVycyA9IHtcbiAgICAgICAgICAgIHVybDogaW5wdXQgYXMgc3RyaW5nLFxuICAgICAgICAgICAgc2VhcmNoUGFyYW1zOiBuZXcgVVJMU2VhcmNoUGFyYW1zKCksXG4gICAgICAgICAgICBvcHRpb25zOiBpbml0ID8/IHt9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJldHVybiBmZXRjaChyZXF1ZXN0RGF0YS51cmwsIHJlcXVlc3REYXRhLm9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRpbGVzZXREYXRhVXJsID0gZGF0YXNldE1ldGFkYXRhPy50aWxlc2V0RGF0YVVybDtcbiAgICAgICAgdGlsZVNvdXJjZSA9IHRpbGVzZXREYXRhVXJsXG4gICAgICAgICAgPyBNVlRTb3VyY2UuY3JlYXRlRGF0YVNvdXJjZShkZWNvZGVVUklDb21wb25lbnQodGlsZXNldERhdGFVcmwpLCB7XG4gICAgICAgICAgICAgIG12dDoge1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhVXJsOiBkYXRhc2V0TWV0YWRhdGE/LnRpbGVzZXRNZXRhZGF0YVVybCA/PyBudWxsLFxuICAgICAgICAgICAgICAgIGxvYWRPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICBmZXRjaDogdHJhbnNmb3JtRmV0Y2hcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiBudWxsO1xuICAgICAgfSBlbHNlIGlmIChyZW1vdGVUaWxlRm9ybWF0ID09PSBSZW1vdGVUaWxlRm9ybWF0LlBNVElMRVMpIHtcbiAgICAgICAgLy8gVE9ETzogdG8gcmVuZGVyIGltYWdlIHBtdGlsZXMgbmVlZCB0byB1c2UgVGlsZUxheWVyIGFuZCBCaXRtYXBMYXllciAoaHR0cHM6Ly9naXRodWIuY29tL3Zpc2dsL2xvYWRlcnMuZ2wvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvd2Vic2l0ZS90aWxlcy9jb21wb25lbnRzL3RpbGUtc291cmNlLWxheWVyLnRzKVxuICAgICAgICB0aWxlc2V0RGF0YVVybCA9IGRhdGFzZXRNZXRhZGF0YT8udGlsZXNldERhdGFVcmw7XG4gICAgICAgIHRpbGVTb3VyY2UgPSB0aWxlc2V0RGF0YVVybCA/IFBNVGlsZXNTb3VyY2UuY3JlYXRlRGF0YVNvdXJjZSh0aWxlc2V0RGF0YVVybCwge30pIDogbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3VwZXIuZm9ybWF0TGF5ZXJEYXRhKGRhdGFzZXRzLCBvbGRMYXllckRhdGEsIGFuaW1hdGlvbkNvbmZpZyksXG4gICAgICB0aWxlc2V0RGF0YVVybDogdHlwZW9mIHRpbGVzZXREYXRhVXJsID09PSAnc3RyaW5nJyA/IGdldFRpbGVVcmwodGlsZXNldERhdGFVcmwpIDogbnVsbCxcbiAgICAgIHRpbGVTb3VyY2VcbiAgICB9O1xuICB9XG5cbiAgaGFzSG92ZXJlZE9iamVjdChvYmplY3RJbmZvKSB7XG4gICAgaWYgKHN1cGVyLmhhc0hvdmVyZWRPYmplY3Qob2JqZWN0SW5mbykpIHtcbiAgICAgIGNvbnN0IGZlYXR1cmVzID0gb2JqZWN0SW5mbz8udGlsZT8uY29udGVudD8uZmVhdHVyZXM7XG4gICAgICByZXR1cm4gZmVhdHVyZXNbb2JqZWN0SW5mby5pbmRleF07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmVuZGVyU3ViTGF5ZXJzKHByb3BzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogRGVja0xheWVyIHwgRGVja0xheWVyW10ge1xuICAgIGxldCB7ZGF0YX0gPSBwcm9wcztcblxuICAgIGRhdGEgPSBkYXRhPy5zaGFwZSA9PT0gJ2dlb2pzb24tdGFibGUnID8gZGF0YS5mZWF0dXJlcyA6IGRhdGE7XG4gICAgaWYgKCFkYXRhPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCB0aWxlOiBUaWxlMkRIZWFkZXIgPSBwcm9wcy50aWxlO1xuICAgIGNvbnN0IHpvb20gPSB0aWxlLmluZGV4Lno7XG5cbiAgICByZXR1cm4gbmV3IEdlb0pzb25MYXllcih7XG4gICAgICAuLi5wcm9wcyxcbiAgICAgIGRhdGEsXG4gICAgICBnZXRGaWxsQ29sb3I6IHByb3BzLmdldEZpbGxDb2xvckJ5Wm9vbSA/IHByb3BzLmdldEZpbGxDb2xvcih6b29tKSA6IHByb3BzLmdldEZpbGxDb2xvcixcbiAgICAgIGdldEVsZXZhdGlvbjogcHJvcHMuZ2V0RWxldmF0aW9uQnlab29tID8gcHJvcHMuZ2V0RWxldmF0aW9uKHpvb20pIDogcHJvcHMuZ2V0RWxldmF0aW9uLFxuICAgICAgLy8gcmFkaXVzIGZvciBwb2ludHNcbiAgICAgIHBvaW50UmFkaXVzU2NhbGU6IHByb3BzLnBvaW50UmFkaXVzU2NhbGUsIC8vIHByb3BzLmdldFBvaW50UmFkaXVzU2NhbGVCeVpvb20oem9vbSksXG4gICAgICBwb2ludFJhZGl1c1VuaXRzOiBwcm9wcy5wb2ludFJhZGl1c1VuaXRzLFxuICAgICAgZ2V0UG9pbnRSYWRpdXM6IHByb3BzLmdldFBvaW50UmFkaXVzLFxuICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIHRpbGUgTGF5ZXIgcmVzZXQgYXV0b0hpZ2hsaWdodCB0byBmYWxzZVxuICAgICAgcGlja2FibGU6IHRydWUsXG4gICAgICBhdXRvSGlnaGxpZ2h0OiB0cnVlLFxuICAgICAgc3Ryb2tlZDogcHJvcHMuc3Ryb2tlZCxcbiAgICAgIC8vIHdyYXBMb25naXR1ZGU6IHRydWUgY2F1c2VzIG1pc3Npbmcgc2lkZSBwb2x5Z29uIHdoZW4gZXh0cnVkZSBpcyBlbmFibGVkXG4gICAgICB3cmFwTG9uZ2l0dWRlOiBmYWxzZVxuICAgIH0pO1xuICB9XG5cbiAgLy8gZ2VuZXJhdGUgYSBkZWNrIGxheWVyXG4gIHJlbmRlckxheWVyKG9wdHM6IFZlY3RvclRpbGVMYXllclJlbmRlck9wdGlvbnMpOiBEZWNrTGF5ZXJbXSB7XG4gICAgY29uc3Qge21hcFN0YXRlLCBkYXRhLCBhbmltYXRpb25Db25maWcsIGdwdUZpbHRlciwgb2JqZWN0SG92ZXJlZCwgbGF5ZXJDYWxsYmFja3N9ID0gb3B0cztcbiAgICBjb25zdCB7YW5pbWF0aW9uLCB2aXNDb25maWd9ID0gdGhpcy5jb25maWc7XG5cbiAgICB0aGlzLnNldExheWVyRG9tYWluID0gbGF5ZXJDYWxsYmFja3Mub25TZXRMYXllckRvbWFpbjtcblxuICAgIGNvbnN0IGRlZmF1bHRMYXllclByb3BzID0gdGhpcy5nZXREZWZhdWx0RGVja0xheWVyUHJvcHMob3B0cyk7XG4gICAgY29uc3QgZWxlWm9vbUZhY3RvciA9IHRoaXMuZ2V0RWxldmF0aW9uWm9vbUZhY3RvcihtYXBTdGF0ZSk7XG5cbiAgICBjb25zdCB0cmFuc2l0aW9ucyA9IHRoaXMuY29uZmlnLnZpc0NvbmZpZy50cmFuc2l0aW9uXG4gICAgICA/IHtcbiAgICAgICAgICBnZXRGaWxsQ29sb3I6IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBhbmltYXRpb25Db25maWcuZHVyYXRpb25cbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldEVsZXZhdGlvbjoge1xuICAgICAgICAgICAgZHVyYXRpb246IGFuaW1hdGlvbkNvbmZpZy5kdXJhdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBjb2xvckZpZWxkID0gdGhpcy5jb25maWcuY29sb3JGaWVsZCBhcyBLZXBsZXJGaWVsZDtcbiAgICBjb25zdCBoZWlnaHRGaWVsZCA9IHRoaXMuY29uZmlnLmhlaWdodEZpZWxkIGFzIEtlcGxlckZpZWxkO1xuICAgIGNvbnN0IHN0cm9rZUNvbG9yRmllbGQgPSB0aGlzLmNvbmZpZy5zdHJva2VDb2xvckZpZWxkIGFzIEtlcGxlckZpZWxkO1xuICAgIGNvbnN0IHNpemVGaWVsZCA9IHRoaXMuY29uZmlnLnNpemVGaWVsZCBhcyBLZXBsZXJGaWVsZDtcbiAgICBjb25zdCByYWRpdXNGaWVsZCA9IHRoaXMuY29uZmlnLnJhZGl1c0ZpZWxkIGFzIEtlcGxlckZpZWxkO1xuXG4gICAgaWYgKGRhdGEudGlsZVNvdXJjZSkge1xuICAgICAgY29uc3QgaG92ZXJlZE9iamVjdCA9IHRoaXMuaGFzSG92ZXJlZE9iamVjdChvYmplY3RIb3ZlcmVkKTtcblxuICAgICAgY29uc3QgbGF5ZXJzID0gW1xuICAgICAgICBuZXcgQ3VzdG9tTVZUTGF5ZXIoe1xuICAgICAgICAgIC4uLmRlZmF1bHRMYXllclByb3BzLFxuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgb25WaWV3cG9ydExvYWQ6IHRoaXMub25WaWV3cG9ydExvYWQsXG4gICAgICAgICAgZGF0YTogZGF0YS50aWxlc2V0RGF0YVVybCxcbiAgICAgICAgICBnZXRUaWxlRGF0YTogZGF0YS50aWxlU291cmNlPy5nZXRUaWxlRGF0YSxcbiAgICAgICAgICB0aWxlU291cmNlOiBkYXRhLnRpbGVTb3VyY2UsXG4gICAgICAgICAgZ2V0RmlsdGVyVmFsdWU6IHRoaXMuZ2V0R3B1RmlsdGVyVmFsdWVBY2Nlc3NvcihvcHRzKSxcbiAgICAgICAgICBmaWx0ZXJSYW5nZTogZ3B1RmlsdGVyLmZpbHRlclJhbmdlLFxuICAgICAgICAgIGxpbmVXaWR0aFVuaXRzOiAncGl4ZWxzJyxcblxuICAgICAgICAgIGJpbmFyeTogZmFsc2UsXG4gICAgICAgICAgZWxldmF0aW9uU2NhbGU6IHZpc0NvbmZpZy5lbGV2YXRpb25TY2FsZSAqIGVsZVpvb21GYWN0b3IsXG4gICAgICAgICAgZXh0cnVkZWQ6IHZpc0NvbmZpZy5lbmFibGUzZCxcbiAgICAgICAgICBzdHJva2VkOiB2aXNDb25maWcuc3Ryb2tlZCxcblxuICAgICAgICAgIC8vIFRPRE86IHRoaXMgaXMgaGFyZCBjb2RlZCwgZGVzaWduIGEgVUkgdG8gYWxsb3cgdXNlciBhc3NpZ25lZCB1bmlxdWUgcHJvcGVydHkgaWRcbiAgICAgICAgICAvLyB1bmlxdWVJZFByb3BlcnR5OiAndWZpZCcsXG4gICAgICAgICAgcmVuZGVyU3ViTGF5ZXJzOiB0aGlzLnJlbmRlclN1YkxheWVycyxcbiAgICAgICAgICAvLyB3aGVuIHJhZGl1c1VuaXRzIGlzIG1ldGVyXG4gICAgICAgICAgZ2V0UG9pbnRSYWRpdXNTY2FsZUJ5Wm9vbTogZ2V0UHJvcGVydHlCeVpvb20odmlzQ29uZmlnLnJhZGl1c0J5Wm9vbSwgdmlzQ29uZmlnLnJhZGl1cyksXG4gICAgICAgICAgcG9pbnRSYWRpdXNVbml0czogdmlzQ29uZmlnLnJhZGl1c1VuaXRzID8gJ3BpeGVscycgOiAnbWV0ZXJzJyxcbiAgICAgICAgICBwb2ludFJhZGl1c1NjYWxlOiByYWRpdXNGaWVsZCA/IHZpc0NvbmZpZy5yYWRpdXMgOiAxLFxuXG4gICAgICAgICAgcG9pbnRSYWRpdXNNaW5QaXhlbHM6IDEsXG4gICAgICAgICAgYXV0b0hpZ2hsaWdodDogdHJ1ZSxcbiAgICAgICAgICBoaWdobGlnaHRDb2xvcjogREVGQVVMVF9ISUdITElHSFRfRklMTF9DT0xPUixcbiAgICAgICAgICBwaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICB0cmFuc2l0aW9ucyxcbiAgICAgICAgICB1cGRhdGVUcmlnZ2Vyczoge1xuICAgICAgICAgICAgZ2V0RmlsdGVyVmFsdWU6IHtcbiAgICAgICAgICAgICAgLi4uZ3B1RmlsdGVyLmZpbHRlclZhbHVlVXBkYXRlVHJpZ2dlcnMsXG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBhbmltYXRpb24uZW5hYmxlZCA/IGFuaW1hdGlvbkNvbmZpZy5jdXJyZW50VGltZSA6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRGaWxsQ29sb3I6IHtcbiAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29uZmlnLmNvbG9yLFxuICAgICAgICAgICAgICBjb2xvckZpZWxkOiB0aGlzLmNvbmZpZy5jb2xvckZpZWxkLFxuICAgICAgICAgICAgICBjb2xvclNjYWxlOiB0aGlzLmNvbmZpZy5jb2xvclNjYWxlLFxuICAgICAgICAgICAgICBjb2xvckRvbWFpbjogdGhpcy5jb25maWcuY29sb3JEb21haW4sXG4gICAgICAgICAgICAgIGNvbG9yUmFuZ2U6IHZpc0NvbmZpZy5jb2xvclJhbmdlLFxuICAgICAgICAgICAgICBjdXJyZW50VGltZTogaXNJbmRleGVkRmllbGQoY29sb3JGaWVsZCkgPyBhbmltYXRpb25Db25maWcuY3VycmVudFRpbWUgOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0RWxldmF0aW9uOiB7XG4gICAgICAgICAgICAgIGhlaWdodEZpZWxkOiB0aGlzLmNvbmZpZy5oZWlnaHRGaWVsZCxcbiAgICAgICAgICAgICAgaGVpZ2h0U2NhbGVUeXBlOiB0aGlzLmNvbmZpZy5oZWlnaHRTY2FsZSxcbiAgICAgICAgICAgICAgaGVpZ2h0UmFuZ2U6IHZpc0NvbmZpZy5oZWlnaHRSYW5nZSxcbiAgICAgICAgICAgICAgY3VycmVudFRpbWU6IGlzSW5kZXhlZEZpZWxkKGhlaWdodEZpZWxkKSA/IGFuaW1hdGlvbkNvbmZpZy5jdXJyZW50VGltZSA6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRMaW5lQ29sb3I6IHtcbiAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6IHZpc0NvbmZpZy5zdHJva2VDb2xvcixcbiAgICAgICAgICAgICAgc3Ryb2tlQ29sb3JGaWVsZDogdGhpcy5jb25maWcuc3Ryb2tlQ29sb3JGaWVsZCxcbiAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBwcm9wIG5vdCBpbiBMYXllckNvbmZpZ1xuICAgICAgICAgICAgICBzdHJva2VDb2xvclNjYWxlOiB0aGlzLmNvbmZpZy5zdHJva2VDb2xvclNjYWxlLFxuICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHByb3Agbm90IGluIExheWVyQ29uZmlnXG4gICAgICAgICAgICAgIHN0cm9rZUNvbG9yRG9tYWluOiB0aGlzLmNvbmZpZy5zdHJva2VDb2xvckRvbWFpbixcbiAgICAgICAgICAgICAgLy8gRklYTUU6IFN0cmlwIG91dCBlbXB0eSBhcnJheXMgZnJvbSBpbmRpdmlkdWFsIGNvbG9yIG1hcCBzdGVwcywgYW5kIHJlcGxhY2Ugd2l0aCBgbnVsbGAsIG90aGVyd2lzZSB0aGUgbGF5ZXIgbWF5IHNob3cgdGhlIGluY29ycmVjdCBjb2xvci5cbiAgICAgICAgICAgICAgLy8gU28gZmFyIGl0IHNlZW1zIHRoYXQgaXQgdXNlcyB0aGUgcHJldmlvdXMgY29sb3IgY2hvc2VuIGluIHRoZSBwYWxldHRlIHJhdGhlciB0aGFuIHRoZSBjdXJyZW50bHkgY2hvc2VuIGNvbG9yIGZvciB0aGUgc3BlY2lmaWMgY3VzdG9tIG9yZGluYWwgdmFsdWUgd2hlbiB0aGVyZSBhcmUgXCJzcGFyc2VcIiBjb2xvciBtYXBzLlxuICAgICAgICAgICAgICAvLyBJbiBvdGhlciB3b3JkcywgYSBjb2xvciBtYXAgd2l0aCBcImhvbGVzXCIgb2YgY29sb3JzIHdpdGggdW5hc3NpZ25lZCBmaWVsZCB2YWx1ZXMsIHdoaWNoIG1heSBoYXZlIGJlZW4gYXNzaWduZWQgaW4gdGhlIHBhc3QuXG4gICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlIFwiYWJjXCIgd2FzIGdyZWVuLCBzdG9yZWQgYXMgYFtcImFiY1wiXWAuIFRoZW4gXCJhYmNcIiB3YXMgcmVhc3NpZ25lZCB0byB0aGUgcmVkIGNvbG9yIG1hcCBzdGVwLCBzdG9yZWQgYXMgYFtcImFiY1wiXWAuIE5vdyB0aGUgZ3JlZW4gY29sb3IgbWFwIHN0ZXAncyBzdG9yZWQgdmFsdWUgaXMgYFtdYCwgYW5kIHRoZSBsYXllciB3aWxsIGluY29ycmVjdGx5IHN0aWxsIHJlbmRlciBcImFiY1wiIGluIGdyZWVuLlxuICAgICAgICAgICAgICAvLyBRdWljayBwYXRjaCBleGFtcGxlOlxuICAgICAgICAgICAgICAvLyBzdHJva2VDb2xvclJhbmdlOiB2aXNDb25maWc/LnN0cm9rZUNvbG9yUmFuZ2U/LmNvbG9yTWFwPy5tYXAoY20gPT5cbiAgICAgICAgICAgICAgLy8gICBjbVswXT8ubGVuZ3RoID09PSAwID8gW251bGwsIGNtWzFdXSA6IGNtXG4gICAgICAgICAgICAgIC8vICksXG4gICAgICAgICAgICAgIC8vIE5vdGU6IGZvciByZWd1bGFyIHNjYWxlcyB0aGUgY29sb3JNYXAgaW4gdGhlIGFib3ZlIHBhdGNoIGlzIHVuZGVmaW5lZCBhbmQgYnJlYWtzIHN0cm9rZUNvbG9yUmFuZ2UgdXBkYXRlIHRyaWdnZXIuXG4gICAgICAgICAgICAgIHN0cm9rZUNvbG9yUmFuZ2U6IHZpc0NvbmZpZy5zdHJva2VDb2xvclJhbmdlLFxuICAgICAgICAgICAgICBjdXJyZW50VGltZTogaXNJbmRleGVkRmllbGQoc3Ryb2tlQ29sb3JGaWVsZCkgPyBhbmltYXRpb25Db25maWcuY3VycmVudFRpbWUgOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0TGluZVdpZHRoOiB7XG4gICAgICAgICAgICAgIHNpemVSYW5nZTogdmlzQ29uZmlnLnNpemVSYW5nZSxcbiAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHZpc0NvbmZpZy5zdHJva2VXaWR0aCxcbiAgICAgICAgICAgICAgc2l6ZUZpZWxkOiB0aGlzLmNvbmZpZy5zaXplRmllbGQsXG4gICAgICAgICAgICAgIHNpemVTY2FsZTogdGhpcy5jb25maWcuc2l6ZVNjYWxlLFxuICAgICAgICAgICAgICBzaXplRG9tYWluOiB0aGlzLmNvbmZpZy5zaXplRG9tYWluLFxuICAgICAgICAgICAgICBjdXJyZW50VGltZTogaXNJbmRleGVkRmllbGQoc2l6ZUZpZWxkKSA/IGFuaW1hdGlvbkNvbmZpZy5jdXJyZW50VGltZSA6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRQb2ludFJhZGl1czoge1xuICAgICAgICAgICAgICByYWRpdXM6IHZpc0NvbmZpZy5yYWRpdXMsXG4gICAgICAgICAgICAgIHJhZGl1c0ZpZWxkOiB0aGlzLmNvbmZpZy5yYWRpdXNGaWVsZCxcbiAgICAgICAgICAgICAgcmFkaXVzU2NhbGU6IHRoaXMuY29uZmlnLnJhZGl1c1NjYWxlLFxuICAgICAgICAgICAgICByYWRpdXNEb21haW46IHRoaXMuY29uZmlnLnJhZGl1c0RvbWFpbixcbiAgICAgICAgICAgICAgcmFkaXVzUmFuZ2U6IHRoaXMuY29uZmlnLnJhZGl1c1JhbmdlLFxuICAgICAgICAgICAgICBjdXJyZW50VGltZTogaXNJbmRleGVkRmllbGQocmFkaXVzRmllbGQpID8gYW5pbWF0aW9uQ29uZmlnLmN1cnJlbnRUaW1lIDogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgX3N1YkxheWVyUHJvcHM6IHtcbiAgICAgICAgICAgICdwb2x5Z29ucy1zdHJva2UnOiB7b3BhY2l0eTogdmlzQ29uZmlnLnN0cm9rZU9wYWNpdHl9LFxuICAgICAgICAgICAgJ3BvbHlnb25zLWZpbGwnOiB7XG4gICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgICAgICBjdWxsRmFjZTogR0wuQkFDS1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBsb2FkT3B0aW9uczoge1xuICAgICAgICAgICAgbXZ0OiBnZXRMb2FkZXJPcHRpb25zKCkubXZ0XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgLy8gaG92ZXIgbGF5ZXJcbiAgICAgICAgLi4uKGhvdmVyZWRPYmplY3RcbiAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgbmV3IEdlb0pzb25MYXllcih7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBwcm9wcyBub3QgdHlwZWQ/XG4gICAgICAgICAgICAgICAgLi4ub2JqZWN0SG92ZXJlZC5zb3VyY2VMYXllcj8ucHJvcHMsXG4gICAgICAgICAgICAgICAgLi4uKHRoaXMuZ2V0RGVmYXVsdEhvdmVyTGF5ZXJQcm9wcygpIGFzIGFueSksXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3cmFwTG9uZ2l0dWRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBbaG92ZXJlZE9iamVjdF0sXG4gICAgICAgICAgICAgICAgZ2V0TGluZUNvbG9yOiBERUZBVUxUX0hJR0hMSUdIVF9TVFJPS0VfQ09MT1IsXG4gICAgICAgICAgICAgICAgZ2V0RmlsbENvbG9yOiBERUZBVUxUX0hJR0hMSUdIVF9GSUxMX0NPTE9SLFxuICAgICAgICAgICAgICAgIGdldExpbmVXaWR0aDogdmlzQ29uZmlnLnN0cm9rZVdpZHRoICsgMSxcbiAgICAgICAgICAgICAgICBsaW5lV2lkdGhVbml0czogJ3BpeGVscycsXG4gICAgICAgICAgICAgICAgc3Ryb2tlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmaWxsZWQ6IHRydWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgICA6IFtdKVxuICAgICAgICAvLyAuLi50aWxlTGF5ZXJCb3VuZHNMYXllcihkZWZhdWx0TGF5ZXJQcm9wcy5pZCwgZGF0YSksXG4gICAgICBdO1xuXG4gICAgICByZXR1cm4gbGF5ZXJzO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxJQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxVQUFBLEdBQUFDLHNCQUFBLENBQUFKLE9BQUE7QUFFQSxJQUFBSyxZQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxXQUFBLEdBQUFOLE9BQUE7QUFXQSxJQUFBTyxNQUFBLEdBQUFQLE9BQUE7QUFxQkEsSUFBQVEsU0FBQSxHQUFBUixPQUFBO0FBQ0EsSUFBQVMsZUFBQSxHQUFBTCxzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQVUsVUFBQSxHQUFBTixzQkFBQSxDQUFBSixPQUFBO0FBVUEsSUFBQVcsa0JBQUEsR0FBQUMsdUJBQUEsQ0FBQVosT0FBQTtBQU1BLElBQUFhLFlBQUEsR0FBQVQsc0JBQUEsQ0FBQUosT0FBQTtBQUNBLElBQUFjLFVBQUEsR0FBQWQsT0FBQTtBQUtrQyxTQUFBZSx5QkFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxtQkFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsQ0FBQSxXQUFBQSxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxLQUFBRixDQUFBO0FBQUEsU0FBQUosd0JBQUFJLENBQUEsRUFBQUUsQ0FBQSxTQUFBQSxDQUFBLElBQUFGLENBQUEsSUFBQUEsQ0FBQSxDQUFBSSxVQUFBLFNBQUFKLENB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