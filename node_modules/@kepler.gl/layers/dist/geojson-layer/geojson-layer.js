"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.geojsonVisConfigs = exports.geoJsonRequiredColumns = exports.featureAccessor = exports.defaultRadius = exports.defaultLineWidth = exports.defaultElevation = exports["default"] = exports.COLUMN_MODE_TABLE = void 0;
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _helpers = require("@turf/helpers");
var _booleanWithin = _interopRequireDefault(require("@turf/boolean-within"));
var _uniq = _interopRequireDefault(require("lodash/uniq"));
var _typeAnalyzer = require("type-analyzer");
var _baseLayer = _interopRequireWildcard(require("../base-layer"));
var _layers = require("@deck.gl/layers");
var _geojsonUtils = require("./geojson-utils");
var _layerUtils = require("../layer-utils");
var _geojsonLayerIcon = _interopRequireDefault(require("./geojson-layer-icon"));
var _constants = require("@kepler.gl/constants");
var _utils = require("@kepler.gl/utils");
var _deckglLayers = require("@kepler.gl/deckgl-layers");
var _geojsonInfoModal = _interopRequireDefault(require("./geojson-info-modal"));
var _excluded = ["data"];
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2["default"])(o), (0, _possibleConstructorReturn2["default"])(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2["default"])(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, e, r, o) { var p = (0, _get2["default"])((0, _getPrototypeOf2["default"])(1 & o ? t.prototype : t), e, r); return 2 & o ? function (t) { return p.apply(r, t); } : p; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
var SUPPORTED_ANALYZER_TYPES = (0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])({}, _typeAnalyzer.DATA_TYPES.GEOMETRY, true), _typeAnalyzer.DATA_TYPES.GEOMETRY_FROM_STRING, true), _typeAnalyzer.DATA_TYPES.PAIR_GEOMETRY_FROM_STRING, true);
var geojsonVisConfigs = exports.geojsonVisConfigs = {
  opacity: 'opacity',
  strokeOpacity: _objectSpread(_objectSpread({}, _constants.LAYER_VIS_CONFIGS.opacity), {}, {
    property: 'strokeOpacity'
  }),
  thickness: _objectSpread(_objectSpread({}, _constants.LAYER_VIS_CONFIGS.thickness), {}, {
    defaultValue: 0.5
  }),
  strokeColor: 'strokeColor',
  colorRange: 'colorRange',
  strokeColorRange: 'strokeColorRange',
  radius: 'radius',
  sizeRange: 'strokeWidthRange',
  radiusRange: 'radiusRange',
  heightRange: 'elevationRange',
  elevationScale: 'elevationScale',
  stroked: 'stroked',
  filled: 'filled',
  enable3d: 'enable3d',
  wireframe: 'wireframe',
  fixedHeight: 'fixedHeight'
};
var geoJsonRequiredColumns = exports.geoJsonRequiredColumns = ['geojson'];
var featureAccessor = exports.featureAccessor = function featureAccessor(_ref) {
  var geojson = _ref.geojson;
  return function (dc) {
    return function (d) {
      return dc.valueAt(d.index, geojson.fieldIdx);
    };
  };
};
var geoColumnAccessor = function geoColumnAccessor(_ref2) {
  var geojson = _ref2.geojson;
  return function (dc) {
    var _dc$getColumn;
    return (_dc$getColumn = dc.getColumn) === null || _dc$getColumn === void 0 ? void 0 : _dc$getColumn.call(dc, geojson.fieldIdx);
  };
};
var getTableModeValueAccessor = function getTableModeValueAccessor(feature) {
  // Called from gpu-filter-utils.getFilterValueAccessor()
  return function (field) {
    return feature.properties.values.map(function (v) {
      return field.valueAccessor(v);
    });
  };
};
var getTableModeFieldValue = function getTableModeFieldValue(field, data) {
  var rv;
  if (typeof data === 'function') {
    rv = data(field);
  } else {
    rv = (0, _baseLayer.defaultGetFieldValue)(field, data);
  }
  return rv;
};
var geoFieldAccessor = function geoFieldAccessor(_ref3) {
  var geojson = _ref3.geojson;
  return function (dc) {
    return dc.getField ? dc.getField(geojson.fieldIdx) : null;
  };
};

// access feature properties from geojson sub layer
var defaultElevation = exports.defaultElevation = 500;
var defaultLineWidth = exports.defaultLineWidth = 1;
var defaultRadius = exports.defaultRadius = 1;

// don't use strokes by default for datasets with large number of polygons
var DEFAULT_POLYGON_STROKE_LIMIT = 100000;
var COLUMN_MODE_TABLE = exports.COLUMN_MODE_TABLE = 'table';
var SUPPORTED_COLUMN_MODES = [{
  key: _geojsonUtils.COLUMN_MODE_GEOJSON,
  label: 'GeoJSON',
  requiredColumns: ['geojson']
}, {
  key: COLUMN_MODE_TABLE,
  label: 'Table columns',
  requiredColumns: ['id', 'lat', 'lng'],
  optionalColumns: ['altitude', 'sortBy']
}];
var DEFAULT_COLUMN_MODE = _geojsonUtils.COLUMN_MODE_GEOJSON;
var GeoJsonLayer = exports["default"] = /*#__PURE__*/function (_Layer) {
  function GeoJsonLayer(props) {
    var _this;
    (0, _classCallCheck2["default"])(this, GeoJsonLayer);
    _this = _callSuper(this, GeoJsonLayer, [props]);
    (0, _defineProperty2["default"])(_this, "dataToFeature", []);
    (0, _defineProperty2["default"])(_this, "dataContainer", null);
    (0, _defineProperty2["default"])(_this, "filteredIndex", null);
    (0, _defineProperty2["default"])(_this, "filteredIndexTrigger", null);
    (0, _defineProperty2["default"])(_this, "centroids", []);
    (0, _defineProperty2["default"])(_this, "_layerInfoModal", void 0);
    _this.registerVisConfig(geojsonVisConfigs);
    _this.getPositionAccessor = function (dataContainer) {
      return featureAccessor(_this.config.columns)(dataContainer);
    };
    _this._layerInfoModal = (0, _defineProperty2["default"])((0, _defineProperty2["default"])({}, COLUMN_MODE_TABLE, (0, _geojsonInfoModal["default"])(COLUMN_MODE_TABLE)), _geojsonUtils.COLUMN_MODE_GEOJSON, (0, _geojsonInfoModal["default"])(_geojsonUtils.COLUMN_MODE_GEOJSON));
    return _this;
  }
  (0, _inherits2["default"])(GeoJsonLayer, _Layer);
  return (0, _createClass2["default"])(GeoJsonLayer, [{
    key: "type",
    get: function get() {
      return GeoJsonLayer.type;
    }
  }, {
    key: "name",
    get: function get() {
      return 'Polygon';
    }
  }, {
    key: "layerIcon",
    get: function get() {
      return _geojsonLayerIcon["default"];
    }
  }, {
    key: "columnPairs",
    get: function get() {
      return this.defaultPointColumnPairs;
    }
  }, {
    key: "supportedColumnModes",
    get: function get() {
      return SUPPORTED_COLUMN_MODES;
    }
  }, {
    key: "layerInfoModal",
    get: function get() {
      return (0, _defineProperty2["default"])((0, _defineProperty2["default"])({}, _geojsonUtils.COLUMN_MODE_GEOJSON, {
        id: 'iconInfo',
        template: this._layerInfoModal[_geojsonUtils.COLUMN_MODE_GEOJSON],
        modalProps: {
          title: 'modal.polygonInfo.title'
        }
      }), COLUMN_MODE_TABLE, {
        id: 'iconInfo',
        template: this._layerInfoModal[COLUMN_MODE_TABLE],
        modalProps: {
          title: 'modal.polygonInfo.titleTable'
        }
      });
    }
  }, {
    key: "accessVSFieldValue",
    value: function accessVSFieldValue() {
      if (this.config.columnMode === _geojsonUtils.COLUMN_MODE_GEOJSON) {
        return _baseLayer.defaultGetFieldValue;
      }
      return getTableModeFieldValue;
    }
  }, {
    key: "visualChannels",
    get: function get() {
      var visualChannels = _superPropGet(GeoJsonLayer, "visualChannels", this, 1);
      return {
        color: _objectSpread(_objectSpread({}, visualChannels.color), {}, {
          accessor: 'getFillColor',
          condition: function condition(config) {
            return config.visConfig.filled;
          },
          nullValue: visualChannels.color.nullValue,
          getAttributeValue: function getAttributeValue(config) {
            return function (d) {
              return d.properties.fillColor || config.color;
            };
          },
          // used this to get updateTriggers
          defaultValue: function defaultValue(config) {
            return config.color;
          }
        }),
        strokeColor: {
          property: 'strokeColor',
          field: 'strokeColorField',
          scale: 'strokeColorScale',
          domain: 'strokeColorDomain',
          range: 'strokeColorRange',
          key: 'strokeColor',
          channelScaleType: _constants.CHANNEL_SCALES.color,
          accessor: 'getLineColor',
          condition: function condition(config) {
            return config.visConfig.stroked;
          },
          nullValue: visualChannels.color.nullValue,
          getAttributeValue: function getAttributeValue(config) {
            return function (d) {
              return d.properties.lineColor || config.visConfig.strokeColor || config.color;
            };
          },
          // used this to get updateTriggers
          defaultValue: function defaultValue(config) {
            return config.visConfig.strokeColor || config.color;
          }
        },
        size: _objectSpread(_objectSpread({}, visualChannels.size), {}, {
          property: 'stroke',
          accessor: 'getLineWidth',
          condition: function condition(config) {
            return config.visConfig.stroked;
          },
          nullValue: 0,
          getAttributeValue: function getAttributeValue() {
            return function (d) {
              return d.properties.lineWidth || defaultLineWidth;
            };
          }
        }),
        height: {
          property: 'height',
          field: 'heightField',
          scale: 'heightScale',
          domain: 'heightDomain',
          range: 'heightRange',
          key: 'height',
          fixed: 'fixedHeight',
          channelScaleType: _constants.CHANNEL_SCALES.size,
          accessor: 'getElevation',
          condition: function condition(config) {
            return config.visConfig.enable3d;
          },
          nullValue: 0,
          getAttributeValue: function getAttributeValue() {
            return function (d) {
              return d.properties.elevation || defaultElevation;
            };
          }
        },
        radius: {
          property: 'radius',
          field: 'radiusField',
          scale: 'radiusScale',
          domain: 'radiusDomain',
          range: 'radiusRange',
          key: 'radius',
          channelScaleType: _constants.CHANNEL_SCALES.radius,
          accessor: 'getPointRadius',
          nullValue: 0,
          getAttributeValue: function getAttributeValue() {
            return function (d) {
              return d.properties.radius || defaultRadius;
            };
          }
        }
      };
    }
  }, {
    key: "getDefaultLayerConfig",
    value: function getDefaultLayerConfig(props) {
      var _props$columnMode;
      var defaultLayerConfig = _superPropGet(GeoJsonLayer, "getDefaultLayerConfig", this, 3)([props !== null && props !== void 0 ? props : {}]);
      return _objectSpread(_objectSpread({}, defaultLayerConfig), {}, {
        columnMode: (_props$columnMode = props === null || props === void 0 ? void 0 : props.columnMode) !== null && _props$columnMode !== void 0 ? _props$columnMode : DEFAULT_COLUMN_MODE,
        // add height visual channel
        heightField: null,
        heightDomain: [0, 1],
        heightScale: 'linear',
        // add radius visual channel
        radiusField: null,
        radiusDomain: [0, 1],
        radiusScale: 'linear',
        // add stroke color visual channel
        strokeColorField: null,
        strokeColorDomain: [0, 1],
        strokeColorScale: 'quantile',
        colorUI: _objectSpread(_objectSpread({}, defaultLayerConfig.colorUI), {}, {
          strokeColorRange: _constants.DEFAULT_COLOR_UI
        })
      });
    }
  }, {
    key: "getHoverData",
    value: function getHoverData(object, dataContainer) {
      var _object$properties;
      // index of dataContainer is saved to feature.properties
      // for arrow format, `object` is the index of the row returned from deck
      var index = this.geoArrowMode ? object : object === null || object === void 0 || (_object$properties = object.properties) === null || _object$properties === void 0 ? void 0 : _object$properties.index;
      if (index >= 0) {
        return dataContainer.row(index);
      }
      return null;
    }
  }, {
    key: "getFilteredItemCount",
    value: function getFilteredItemCount() {
      // return -polygons-fill or -polygons-stroke
      // + -linestrings
      // + -points-circle
      if (Object.keys(this.filteredItemCount).length) {
        var polygonCount = this.filteredItemCount["".concat(this.id, "-polygons-fill")] || this.filteredItemCount["".concat(this.id, "-polygons-stroke")] || 0;
        var linestringCount = this.filteredItemCount["".concat(this.id, "-linestrings")] || 0;
        var pointCount = this.filteredItemCount["".concat(this.id, "-points-circle")] || 0;
        return polygonCount + linestringCount + pointCount;
      }
      return null;
    }
  }, {
    key: "calculateDataAttribute",
    value: function calculateDataAttribute(dataset) {
      var _this2 = this;
      this.geoArrowMode = (0, _geojsonUtils.fieldIsGeoArrow)(geoFieldAccessor(this.config.columns)(dataset.dataContainer));
      var dataContainer = dataset.dataContainer,
        filteredIndex = dataset.filteredIndex;
      if (this.geoArrowMode) {
        // TODO add columnMode logic here for ArrowDataContainer?
        // filter geojson/arrow table by values and make a partial copy of the raw table are expensive
        // so we will use filteredIndex to create an attribute e.g. filteredIndex [0|1] for GPU filtering
        // in deck.gl layer, see: FilterArrowExtension in @kepler.gl/deckgl-layers
        if (!this.filteredIndex || this.filteredIndex.length !== dataContainer.numRows()) {
          // for incremental data loading, we need to update filteredIndex
          this.filteredIndex = new Uint8ClampedArray(dataContainer.numRows());
          this.filteredIndex.fill(1);
        }

        // check if filteredIndex is a range from 0 to numRows if it is, we don't need to update it
        var isRange = filteredIndex && filteredIndex.length === dataContainer.numRows();
        if (!isRange || this.filteredIndexTrigger !== null) {
          this.filteredIndex.fill(0);
          for (var i = 0; i < filteredIndex.length; ++i) {
            this.filteredIndex[filteredIndex[i]] = 1;
          }
          this.filteredIndexTrigger = filteredIndex;
        }
        // for arrow, always return full dataToFeature instead of a filtered one, so there is no need to update attributes in GPU
        return this.dataToFeature;
      }

      // for geojson, this should work as well and more efficient. But we need to update some test cases e.g. #GeojsonLayer -> formatLayerData
      switch (this.config.columnMode) {
        case _geojsonUtils.COLUMN_MODE_GEOJSON:
          {
            return filteredIndex.map(function (i) {
              return _this2.dataToFeature[i];
            }).filter(function (d) {
              return d;
            });
          }
        case COLUMN_MODE_TABLE:
          return (0, _geojsonUtils.applyFiltersToTableColumns)(dataset, this.dataToFeature);
        default:
          return [];
      }
    }
  }, {
    key: "formatLayerData",
    value: function formatLayerData(datasets, oldLayerData) {
      var _this3 = this;
      if (this.config.dataId === null) {
        return {};
      }
      var _datasets$this$config = datasets[this.config.dataId],
        gpuFilter = _datasets$this$config.gpuFilter,
        dataContainer = _datasets$this$config.dataContainer;
      var _this$updateData = this.updateData(datasets, oldLayerData),
        data = _this$updateData.data;
      var filterValueAccessor;
      var dataAccessor;
      if (this.config.columnMode === _geojsonUtils.COLUMN_MODE_GEOJSON) {
        filterValueAccessor = function filterValueAccessor(dc, d, fieldIndex) {
          return dc.valueAt(d.properties.index, fieldIndex);
        };
        dataAccessor = function dataAccessor() {
          return function (d) {
            return {
              index: d.properties.index
            };
          };
        };
      } else {
        filterValueAccessor = getTableModeValueAccessor;
        dataAccessor = function dataAccessor() {
          return function (d) {
            return {
              index: d.properties.index
            };
          };
        };
      }
      var indexAccessor = function indexAccessor(f) {
        return f.properties.index;
      };
      var accessors = this.getAttributeAccessors({
        dataAccessor: dataAccessor,
        dataContainer: dataContainer
      });
      var isFilteredAccessor = function isFilteredAccessor(d) {
        return _this3.filteredIndex ? _this3.filteredIndex[d.properties.index] : 1;
      };
      return _objectSpread({
        data: data,
        getFilterValue: gpuFilter.filterValueAccessor(dataContainer)(indexAccessor, filterValueAccessor),
        getFiltered: isFilteredAccessor
      }, accessors);
    }
  }, {
    key: "isInPolygon",
    value: function isInPolygon(data, index, polygon) {
      var _polygon$properties, _polygon$properties2;
      if (this.centroids.length === 0 || !this.centroids[index]) {
        return false;
      }
      var isReactangleSearchBox = ((_polygon$properties = polygon.properties) === null || _polygon$properties === void 0 ? void 0 : _polygon$properties.shape) === 'Rectangle';
      var point = this.centroids[index];
      // if no valid centroid, return false
      if (!point) return false;
      // quick check if centroid is within the query rectangle
      if (isReactangleSearchBox && (_polygon$properties2 = polygon.properties) !== null && _polygon$properties2 !== void 0 && _polygon$properties2.bbox) {
        var _polygon$properties3;
        var _ref5 = (polygon === null || polygon === void 0 || (_polygon$properties3 = polygon.properties) === null || _polygon$properties3 === void 0 ? void 0 : _polygon$properties3.bbox) || [],
          _ref6 = (0, _slicedToArray2["default"])(_ref5, 4),
          minX = _ref6[0],
          minY = _ref6[1],
          maxX = _ref6[2],
          maxY = _ref6[3];
        return point[0] >= minX && point[0] <= maxX && point[1] >= minY && point[1] <= maxY;
      }
      // use turf.js to check if centroid is within query polygon
      return (0, _booleanWithin["default"])((0, _helpers.point)(point), polygon);
    }
  }, {
    key: "updateLayerMeta",
    value: function updateLayerMeta(dataset) {
      var dataContainer = dataset.dataContainer;
      this.dataContainer = dataContainer;
      this.geoArrowMode = (0, _geojsonUtils.fieldIsGeoArrow)(geoFieldAccessor(this.config.columns)(dataset.dataContainer));
      if (this.geoArrowMode && dataContainer instanceof _utils.ArrowDataContainer) {
        var geoColumn = geoColumnAccessor(this.config.columns)(dataContainer);
        var geoField = geoFieldAccessor(this.config.columns)(dataContainer);

        // update the latest batch/chunk of geoarrow data when loading data incrementally
        if (geoColumn && geoField && this.dataToFeature.length < dataContainer.numChunks()) {
          // for incrementally loading data, we only load and render the latest batch; otherwise, we will load and render all batches
          var isIncrementalLoad = dataContainer.numChunks() - this.dataToFeature.length === 1;
          // TODO: add support for COLUMN_MODE_TABLE in getGeojsonLayerMetaFromArrow
          var _getGeojsonLayerMetaF = (0, _layerUtils.getGeojsonLayerMetaFromArrow)(_objectSpread({
              dataContainer: dataContainer,
              geoColumn: geoColumn,
              geoField: geoField
            }, isIncrementalLoad ? {
              chunkIndex: this.dataToFeature.length
            } : null)),
            dataToFeature = _getGeojsonLayerMetaF.dataToFeature,
            bounds = _getGeojsonLayerMetaF.bounds,
            fixedRadius = _getGeojsonLayerMetaF.fixedRadius,
            featureTypes = _getGeojsonLayerMetaF.featureTypes,
            centroids = _getGeojsonLayerMetaF.centroids;
          if (centroids) this.centroids = this.centroids.concat(centroids);
          this.updateMeta({
            bounds: bounds,
            fixedRadius: fixedRadius,
            featureTypes: featureTypes
          });
          this.dataToFeature = [].concat((0, _toConsumableArray2["default"])(this.dataToFeature), (0, _toConsumableArray2["default"])(dataToFeature));
        }
      } else if (this.dataToFeature.length === 0 || this.config.columnMode === COLUMN_MODE_TABLE) {
        var getFeature = this.getPositionAccessor(dataContainer);
        var _getGeojsonLayerMeta = (0, _geojsonUtils.getGeojsonLayerMeta)({
            dataContainer: dataContainer,
            getFeature: getFeature,
            config: this.config
          }),
          _dataToFeature = _getGeojsonLayerMeta.dataToFeature,
          _bounds = _getGeojsonLayerMeta.bounds,
          _fixedRadius = _getGeojsonLayerMeta.fixedRadius,
          _featureTypes = _getGeojsonLayerMeta.featureTypes,
          _centroids = _getGeojsonLayerMeta.centroids;
        if (_centroids) this.centroids = _centroids;
        this.dataToFeature = _dataToFeature;
        this.updateMeta({
          bounds: _bounds,
          fixedRadius: _fixedRadius,
          featureTypes: _featureTypes
        });
      }
    }
  }, {
    key: "setInitialLayerConfig",
    value: function setInitialLayerConfig(dataset) {
      var dataContainer = dataset.dataContainer;
      if (!dataContainer.numRows()) {
        return this;
      }

      // defefaultLayerProps will automatically find geojson column
      // if not found, we try to set it to id / lat /lng /ts
      if (!this.config.columns.geojson.value) {
        // find columns from lat, lng, id, and ts
        var columnConfig = (0, _geojsonUtils.detectTableColumns)(dataset, this.config.columns, 'sortBy');
        if (columnConfig) {
          this.updateLayerConfig(_objectSpread(_objectSpread({}, columnConfig), {}, {
            columnMode: COLUMN_MODE_TABLE
          }));
        } else {
          return this;
        }
      }
      this.updateLayerMeta(dataset);
      var featureTypes = this.meta.featureTypes;
      // default settings is stroke: true, filled: false
      if (featureTypes && featureTypes.polygon) {
        // set both fill and stroke to true
        return this.updateLayerVisConfig({
          filled: true,
          stroked: dataContainer.numRows() < DEFAULT_POLYGON_STROKE_LIMIT,
          strokeColor: _baseLayer.colorMaker.next().value
        });
      } else if (featureTypes && featureTypes.point) {
        // set fill to true if detect point
        return this.updateLayerVisConfig({
          filled: true,
          stroked: false
        });
      }
      return this;
    }
  }, {
    key: "isLayerHovered",
    value: function isLayerHovered(objectInfo) {
      return this.geoArrowMode ? (0, _layerUtils.isLayerHoveredFromArrow)(objectInfo, this.id) : _superPropGet(GeoJsonLayer, "isLayerHovered", this, 3)([objectInfo]);
    }
  }, {
    key: "hasHoveredObject",
    value: function hasHoveredObject(objectInfo) {
      return this.geoArrowMode ? (0, _layerUtils.getHoveredObjectFromArrow)(objectInfo, this.dataContainer, this.id, geoColumnAccessor(this.config.columns), geoFieldAccessor(this.config.columns)) : _superPropGet(GeoJsonLayer, "hasHoveredObject", this, 3)([objectInfo]);
    }
  }, {
    key: "getElevationZoomFactor",
    value: function getElevationZoomFactor(_ref7) {
      var zoom = _ref7.zoom,
        _ref7$zoomOffset = _ref7.zoomOffset,
        zoomOffset = _ref7$zoomOffset === void 0 ? 0 : _ref7$zoomOffset;
      return this.config.visConfig.fixedHeight ? 1 : Math.pow(2, Math.max(8 - zoom + zoomOffset, 0));
    }
  }, {
    key: "renderLayer",
    value: function renderLayer(opts) {
      var _this4 = this;
      var dataProps = opts.data,
        gpuFilter = opts.gpuFilter,
        objectHovered = opts.objectHovered,
        mapState = opts.mapState,
        interactionConfig = opts.interactionConfig;
      var _this$meta = this.meta,
        fixedRadius = _this$meta.fixedRadius,
        featureTypes = _this$meta.featureTypes;
      var radiusScale = this.getRadiusScaleByZoom(mapState, fixedRadius);
      var zoomFactor = this.getZoomFactor(mapState);
      var eleZoomFactor = this.getElevationZoomFactor(mapState);
      var visConfig = this.config.visConfig;
      var layerProps = {
        lineWidthScale: visConfig.thickness * zoomFactor * 8,
        elevationScale: visConfig.elevationScale * eleZoomFactor,
        pointRadiusScale: radiusScale,
        lineMiterLimit: 4
      };
      var updateTriggers = _objectSpread(_objectSpread({}, this.getVisualChannelUpdateTriggers()), {}, {
        getFilterValue: gpuFilter.filterValueUpdateTriggers,
        getFiltered: this.filteredIndexTrigger
      });
      var defaultLayerProps = this.getDefaultDeckLayerProps(opts);
      var opaOverwrite = {
        opacity: visConfig.strokeOpacity
      };
      var pickable = interactionConfig.tooltip.enabled;
      var hoveredObject = this.hasHoveredObject(objectHovered);
      var data = dataProps.data,
        props = (0, _objectWithoutProperties2["default"])(dataProps, _excluded);

      // arrow table can have multiple chunks, a deck.gl layer is created for each chunk
      var deckLayerData = this.geoArrowMode ? data : [data];
      var deckLayers = deckLayerData.map(function (d, i) {
        return new _layers.GeoJsonLayer(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, defaultLayerProps), layerProps), props), {}, {
          data: d,
          id: deckLayerData.length > 1 ? "".concat(_this4.id, "-").concat(i) : _this4.id,
          pickable: pickable,
          highlightColor: _constants.HIGHLIGH_COLOR_3D,
          autoHighlight: visConfig.enable3d && pickable,
          stroked: visConfig.stroked,
          filled: visConfig.filled,
          extruded: visConfig.enable3d,
          wireframe: visConfig.wireframe,
          wrapLongitude: false,
          lineMiterLimit: 2,
          capRounded: true,
          jointRounded: true,
          updateTriggers: updateTriggers,
          extensions: [].concat((0, _toConsumableArray2["default"])(defaultLayerProps.extensions), [new _deckglLayers.FilterArrowExtension()]),
          _subLayerProps: _objectSpread(_objectSpread(_objectSpread({}, featureTypes !== null && featureTypes !== void 0 && featureTypes.polygon ? {
            'polygons-stroke': opaOverwrite
          } : {}), featureTypes !== null && featureTypes !== void 0 && featureTypes.line ? {
            linestrings: opaOverwrite
          } : {}), featureTypes !== null && featureTypes !== void 0 && featureTypes.point ? {
            points: {
              lineOpacity: visConfig.strokeOpacity
            }
          } : {})
        }));
      });
      return [].concat((0, _toConsumableArray2["default"])(deckLayers), (0, _toConsumableArray2["default"])(hoveredObject && !visConfig.enable3d ? [new _layers.GeoJsonLayer(_objectSpread(_objectSpread(_objectSpread({}, this.getDefaultHoverLayerProps()), layerProps), {}, {
        visible: defaultLayerProps.visible,
        wrapLongitude: false,
        data: [hoveredObject],
        getLineWidth: props.getLineWidth,
        getPointRadius: props.getPointRadius,
        getElevation: props.getElevation,
        getLineColor: this.config.highlightColor,
        getFillColor: this.config.highlightColor,
        // always draw outline
        stroked: true,
        filled: false
      }))] : []));
    }
  }], [{
    key: "type",
    get: function get() {
      return 'geojson';
    }
  }, {
    key: "findDefaultLayerProps",
    value: function findDefaultLayerProps(_ref8) {
      var _this5 = this;
      var label = _ref8.label,
        _ref8$fields = _ref8.fields,
        fields = _ref8$fields === void 0 ? [] : _ref8$fields;
      var geojsonColumns = fields.filter(function (f) {
        return (f.type === 'geojson' || f.type === 'geoarrow') && f.analyzerType && SUPPORTED_ANALYZER_TYPES[f.analyzerType];
      }).map(function (f) {
        return f.name;
      });
      var defaultColumns = {
        geojson: (0, _uniq["default"])([].concat((0, _toConsumableArray2["default"])(_constants.GEOJSON_FIELDS.geojson), (0, _toConsumableArray2["default"])(geojsonColumns)))
      };
      var foundColumns = this.findDefaultColumnField(defaultColumns, fields);
      if (!foundColumns || !foundColumns.length) {
        return {
          props: []
        };
      }
      return {
        props: foundColumns.map(function (columns) {
          return {
            label: typeof label === 'string' && label.replace(/\.[^/.]+$/, '') || _this5.type,
            columns: columns,
            isVisible: true
          };
        })
      };
    }
  }]);
}(_baseLayer["default"]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaGVscGVycyIsInJlcXVpcmUiLCJfYm9vbGVhbldpdGhpbiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdW5pcSIsIl90eXBlQW5hbHl6ZXIiLCJfYmFzZUxheWVyIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfbGF5ZXJzIiwiX2dlb2pzb25VdGlscyIsIl9sYXllclV0aWxzIiwiX2dlb2pzb25MYXllckljb24iLCJfY29uc3RhbnRzIiwiX3V0aWxzIiwiX2RlY2tnbExheWVycyIsIl9nZW9qc29uSW5mb01vZGFsIiwiX2V4Y2x1ZGVkIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsIl9fZXNNb2R1bGUiLCJfdHlwZW9mIiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0IiwiX2NhbGxTdXBlciIsIm8iLCJfZ2V0UHJvdG90eXBlT2YyIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yIiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIlJlZmxlY3QiLCJjb25zdHJ1Y3QiLCJjb25zdHJ1Y3RvciIsImFwcGx5IiwiQm9vbGVhbiIsInByb3RvdHlwZSIsInZhbHVlT2YiLCJfc3VwZXJQcm9wR2V0IiwicCIsIl9nZXQyIiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJmaWx0ZXIiLCJlbnVtZXJhYmxlIiwicHVzaCIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiU1VQUE9SVEVEX0FOQUxZWkVSX1RZUEVTIiwiREFUQV9UWVBFUyIsIkdFT01FVFJZIiwiR0VPTUVUUllfRlJPTV9TVFJJTkciLCJQQUlSX0dFT01FVFJZX0ZST01fU1RSSU5HIiwiZ2VvanNvblZpc0NvbmZpZ3MiLCJleHBvcnRzIiwib3BhY2l0eSIsInN0cm9rZU9wYWNpdHkiLCJMQVlFUl9WSVNfQ09ORklHUyIsInByb3BlcnR5IiwidGhpY2tuZXNzIiwiZGVmYXVsdFZhbHVlIiwic3Ryb2tlQ29sb3IiLCJjb2xvclJhbmdlIiwic3Ryb2tlQ29sb3JSYW5nZSIsInJhZGl1cyIsInNpemVSYW5nZSIsInJhZGl1c1JhbmdlIiwiaGVpZ2h0UmFuZ2UiLCJlbGV2YXRpb25TY2FsZSIsInN0cm9rZWQiLCJmaWxsZWQiLCJlbmFibGUzZCIsIndpcmVmcmFtZSIsImZpeGVkSGVpZ2h0IiwiZ2VvSnNvblJlcXVpcmVkQ29sdW1ucyIsImZlYXR1cmVBY2Nlc3NvciIsIl9yZWYiLCJnZW9qc29uIiwiZGMiLCJkIiwidmFsdWVBdCIsImluZGV4IiwiZmllbGRJZHgiLCJnZW9Db2x1bW5BY2Nlc3NvciIsIl9yZWYyIiwiX2RjJGdldENvbHVtbiIsImdldENvbHVtbiIsImdldFRhYmxlTW9kZVZhbHVlQWNjZXNzb3IiLCJmZWF0dXJlIiwiZmllbGQiLCJwcm9wZXJ0aWVzIiwidmFsdWVzIiwibWFwIiwidiIsInZhbHVlQWNjZXNzb3IiLCJnZXRUYWJsZU1vZGVGaWVsZFZhbHVlIiwiZGF0YSIsInJ2IiwiZGVmYXVsdEdldEZpZWxkVmFsdWUiLCJnZW9GaWVsZEFjY2Vzc29yIiwiX3JlZjMiLCJnZXRGaWVsZCIsImRlZmF1bHRFbGV2YXRpb24iLCJkZWZhdWx0TGluZVdpZHRoIiwiZGVmYXVsdFJhZGl1cyIsIkRFRkFVTFRfUE9MWUdPTl9TVFJPS0VfTElNSVQiLCJDT0xVTU5fTU9ERV9UQUJMRSIsIlNVUFBPUlRFRF9DT0xVTU5fTU9ERVMiLCJrZXkiLCJDT0xVTU5fTU9ERV9HRU9KU09OIiwibGFiZWwiLCJyZXF1aXJlZENvbHVtbnMiLCJvcHRpb25hbENvbHVtbnMiLCJERUZBVUxUX0NPTFVNTl9NT0RFIiwiR2VvSnNvbkxheWVyIiwiX0xheWVyIiwicHJvcHMiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjazIiLCJyZWdpc3RlclZpc0NvbmZpZyIsImdldFBvc2l0aW9uQWNjZXNzb3IiLCJkYXRhQ29udGFpbmVyIiwiY29uZmlnIiwiY29sdW1ucyIsIl9sYXllckluZm9Nb2RhbCIsIkdlb2pzb25JbmZvTW9kYWxGYWN0b3J5IiwiX2luaGVyaXRzMiIsIl9jcmVhdGVDbGFzczIiLCJ0eXBlIiwiR2VvanNvbkxheWVySWNvbiIsImRlZmF1bHRQb2ludENvbHVtblBhaXJzIiwiaWQiLCJ0ZW1wbGF0ZSIsIm1vZGFsUHJvcHMiLCJ0aXRsZSIsInZhbHVlIiwiYWNjZXNzVlNGaWVsZFZhbHVlIiwiY29sdW1uTW9kZSIsInZpc3VhbENoYW5uZWxzIiwiY29sb3IiLCJhY2Nlc3NvciIsImNvbmRpdGlvbiIsInZpc0NvbmZpZyIsIm51bGxWYWx1ZSIsImdldEF0dHJpYnV0ZVZhbHVlIiwiZmlsbENvbG9yIiwic2NhbGUiLCJkb21haW4iLCJyYW5nZSIsImNoYW5uZWxTY2FsZVR5cGUiLCJDSEFOTkVMX1NDQUxFUyIsImxpbmVDb2xvciIsInNpemUiLCJsaW5lV2lkdGgiLCJoZWlnaHQiLCJmaXhlZCIsImVsZXZhdGlvbiIsImdldERlZmF1bHRMYXllckNvbmZpZyIsIl9wcm9wcyRjb2x1bW5Nb2RlIiwiZGVmYXVsdExheWVyQ29uZmlnIiwiaGVpZ2h0RmllbGQiLCJoZWlnaHREb21haW4iLCJoZWlnaHRTY2FsZSIsInJhZGl1c0ZpZWxkIiwicmFkaXVzRG9tYWluIiwicmFkaXVzU2NhbGUiLCJzdHJva2VDb2xvckZpZWxkIiwic3Ryb2tlQ29sb3JEb21haW4iLCJzdHJva2VDb2xvclNjYWxlIiwiY29sb3JVSSIsIkRFRkFVTFRfQ09MT1JfVUkiLCJnZXRIb3ZlckRhdGEiLCJvYmplY3QiLCJfb2JqZWN0JHByb3BlcnRpZXMiLCJnZW9BcnJvd01vZGUiLCJyb3ciLCJnZXRGaWx0ZXJlZEl0ZW1Db3VudCIsImZpbHRlcmVkSXRlbUNvdW50IiwicG9seWdvbkNvdW50IiwiY29uY2F0IiwibGluZXN0cmluZ0NvdW50IiwicG9pbnRDb3VudCIsImNhbGN1bGF0ZURhdGFBdHRyaWJ1dGUiLCJkYXRhc2V0IiwiX3RoaXMyIiwiZmllbGRJc0dlb0Fycm93IiwiZmlsdGVyZWRJbmRleCIsIm51bVJvd3MiLCJVaW50OENsYW1wZWRBcnJheSIsImZpbGwiLCJpc1JhbmdlIiwiZmlsdGVyZWRJbmRleFRyaWdnZXIiLCJkYXRhVG9GZWF0dXJlIiwiYXBwbHlGaWx0ZXJzVG9UYWJsZUNvbHVtbnMiLCJmb3JtYXRMYXllckRhdGEiLCJkYXRhc2V0cyIsIm9sZExheWVyRGF0YSIsIl90aGlzMyIsImRhdGFJZCIsIl9kYXRhc2V0cyR0aGlzJGNvbmZpZyIsImdwdUZpbHRlciIsIl90aGlzJHVwZGF0ZURhdGEiLCJ1cGRhdGVEYXRhIiwiZmlsdGVyVmFsdWVBY2Nlc3NvciIsImRhdGFBY2Nlc3NvciIsImZpZWxkSW5kZXgiLCJpbmRleEFjY2Vzc29yIiwiZiIsImFjY2Vzc29ycyIsImdldEF0dHJpYnV0ZUFjY2Vzc29ycyIsImlzRmlsdGVyZWRBY2Nlc3NvciIsImdldEZpbHRlclZhbHVlIiwiZ2V0RmlsdGVyZWQiLCJpc0luUG9seWdvbiIsInBvbHlnb24iLCJfcG9seWdvbiRwcm9wZXJ0aWVzIiwiX3BvbHlnb24kcHJvcGVydGllczIiLCJjZW50cm9pZHMiLCJpc1JlYWN0YW5nbGVTZWFyY2hCb3giLCJzaGFwZSIsInBvaW50IiwiYmJveCIsIl9wb2x5Z29uJHByb3BlcnRpZXMzIiwiX3JlZjUiLCJfcmVmNiIsIl9zbGljZWRUb0FycmF5MiIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJib29sZWFuV2l0aGluIiwidHVyZlBvaW50IiwidXBkYXRlTGF5ZXJNZXRhIiwiQXJyb3dEYXRhQ29udGFpbmVyIiwiZ2VvQ29sdW1uIiwiZ2VvRmllbGQiLCJudW1DaHVua3MiLCJpc0luY3JlbWVudGFsTG9hZCIsIl9nZXRHZW9qc29uTGF5ZXJNZXRhRiIsImdldEdlb2pzb25MYXllck1ldGFGcm9tQXJyb3ciLCJjaHVua0luZGV4IiwiYm91bmRzIiwiZml4ZWRSYWRpdXMiLCJmZWF0dXJlVHlwZXMiLCJ1cGRhdGVNZXRhIiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsImdldEZlYXR1cmUiLCJfZ2V0R2VvanNvbkxheWVyTWV0YSIsImdldEdlb2pzb25MYXllck1ldGEiLCJzZXRJbml0aWFsTGF5ZXJDb25maWciLCJjb2x1bW5Db25maWciLCJkZXRlY3RUYWJsZUNvbHVtbnMiLCJ1cGRhdGVMYXllckNvbmZpZyIsIm1ldGEiLCJ1cGRhdGVMYXllclZpc0NvbmZpZyIsImNvbG9yTWFrZXIiLCJuZXh0IiwiaXNMYXllckhvdmVyZWQiLCJvYmplY3RJbmZvIiwiaXNMYXllckhvdmVyZWRGcm9tQXJyb3ciLCJoYXNIb3ZlcmVkT2JqZWN0IiwiZ2V0SG92ZXJlZE9iamVjdEZyb21BcnJvdyIsImdldEVsZXZhdGlvblpvb21GYWN0b3IiLCJfcmVmNyIsInpvb20iLCJfcmVmNyR6b29tT2Zmc2V0Iiwiem9vbU9mZnNldCIsIk1hdGgiLCJwb3ciLCJtYXgiLCJyZW5kZXJMYXllciIsIm9wdHMiLCJfdGhpczQiLCJkYXRhUHJvcHMiLCJvYmplY3RIb3ZlcmVkIiwibWFwU3RhdGUiLCJpbnRlcmFjdGlvbkNvbmZpZyIsIl90aGlzJG1ldGEiLCJnZXRSYWRpdXNTY2FsZUJ5Wm9vbSIsInpvb21GYWN0b3IiLCJnZXRab29tRmFjdG9yIiwiZWxlWm9vbUZhY3RvciIsImxheWVyUHJvcHMiLCJsaW5lV2lkdGhTY2FsZSIsInBvaW50UmFkaXVzU2NhbGUiLCJsaW5lTWl0ZXJMaW1pdCIsInVwZGF0ZVRyaWdnZXJzIiwiZ2V0VmlzdWFsQ2hhbm5lbFVwZGF0ZVRyaWdnZXJzIiwiZmlsdGVyVmFsdWVVcGRhdGVUcmlnZ2VycyIsImRlZmF1bHRMYXllclByb3BzIiwiZ2V0RGVmYXVsdERlY2tMYXllclByb3BzIiwib3BhT3ZlcndyaXRlIiwicGlja2FibGUiLCJ0b29sdGlwIiwiZW5hYmxlZCIsImhvdmVyZWRPYmplY3QiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyIiwiZGVja0xheWVyRGF0YSIsImRlY2tMYXllcnMiLCJEZWNrR0xHZW9Kc29uTGF5ZXIiLCJoaWdobGlnaHRDb2xvciIsIkhJR0hMSUdIX0NPTE9SXzNEIiwiYXV0b0hpZ2hsaWdodCIsImV4dHJ1ZGVkIiwid3JhcExvbmdpdHVkZSIsImNhcFJvdW5kZWQiLCJqb2ludFJvdW5kZWQiLCJleHRlbnNpb25zIiwiRmlsdGVyQXJyb3dFeHRlbnNpb24iLCJfc3ViTGF5ZXJQcm9wcyIsImxpbmUiLCJsaW5lc3RyaW5ncyIsInBvaW50cyIsImxpbmVPcGFjaXR5IiwiZ2V0RGVmYXVsdEhvdmVyTGF5ZXJQcm9wcyIsInZpc2libGUiLCJnZXRMaW5lV2lkdGgiLCJnZXRQb2ludFJhZGl1cyIsImdldEVsZXZhdGlvbiIsImdldExpbmVDb2xvciIsImdldEZpbGxDb2xvciIsImZpbmREZWZhdWx0TGF5ZXJQcm9wcyIsIl9yZWY4IiwiX3RoaXM1IiwiX3JlZjgkZmllbGRzIiwiZmllbGRzIiwiZ2VvanNvbkNvbHVtbnMiLCJhbmFseXplclR5cGUiLCJuYW1lIiwiZGVmYXVsdENvbHVtbnMiLCJ1bmlxIiwiR0VPSlNPTl9GSUVMRFMiLCJmb3VuZENvbHVtbnMiLCJmaW5kRGVmYXVsdENvbHVtbkZpZWxkIiwicmVwbGFjZSIsImlzVmlzaWJsZSIsIkxheWVyIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2dlb2pzb24tbGF5ZXIvZ2VvanNvbi1sYXllci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQgKiBhcyBhcnJvdyBmcm9tICdhcGFjaGUtYXJyb3cnO1xuaW1wb3J0IHtwb2ludCBhcyB0dXJmUG9pbnR9IGZyb20gJ0B0dXJmL2hlbHBlcnMnO1xuaW1wb3J0IGJvb2xlYW5XaXRoaW4gZnJvbSAnQHR1cmYvYm9vbGVhbi13aXRoaW4nO1xuaW1wb3J0IHtGZWF0dXJlLCBQb2x5Z29ufSBmcm9tICdnZW9qc29uJztcbmltcG9ydCB1bmlxIGZyb20gJ2xvZGFzaC91bmlxJztcbmltcG9ydCB7REFUQV9UWVBFU30gZnJvbSAndHlwZS1hbmFseXplcic7XG5pbXBvcnQgTGF5ZXIsIHtcbiAgY29sb3JNYWtlcixcbiAgZGVmYXVsdEdldEZpZWxkVmFsdWUsXG4gIExheWVyQmFzZUNvbmZpZyxcbiAgTGF5ZXJCYXNlQ29uZmlnUGFydGlhbCxcbiAgTGF5ZXJDb2xvckNvbmZpZyxcbiAgTGF5ZXJIZWlnaHRDb25maWcsXG4gIExheWVyUmFkaXVzQ29uZmlnLFxuICBMYXllclNpemVDb25maWcsXG4gIExheWVyU3Ryb2tlQ29sb3JDb25maWdcbn0gZnJvbSAnLi4vYmFzZS1sYXllcic7XG5pbXBvcnQge0dlb0pzb25MYXllciBhcyBEZWNrR0xHZW9Kc29uTGF5ZXJ9IGZyb20gJ0BkZWNrLmdsL2xheWVycyc7XG5pbXBvcnQge1xuICBnZXRHZW9qc29uTGF5ZXJNZXRhLFxuICBHZW9qc29uRGF0YU1hcHMsXG4gIERlY2tHbEdlb1R5cGVzLFxuICBkZXRlY3RUYWJsZUNvbHVtbnMsXG4gIENPTFVNTl9NT0RFX0dFT0pTT04sXG4gIGFwcGx5RmlsdGVyc1RvVGFibGVDb2x1bW5zLFxuICBmaWVsZElzR2VvQXJyb3dcbn0gZnJvbSAnLi9nZW9qc29uLXV0aWxzJztcbmltcG9ydCB7XG4gIGdldEdlb2pzb25MYXllck1ldGFGcm9tQXJyb3csXG4gIGlzTGF5ZXJIb3ZlcmVkRnJvbUFycm93LFxuICBnZXRIb3ZlcmVkT2JqZWN0RnJvbUFycm93XG59IGZyb20gJy4uL2xheWVyLXV0aWxzJztcbmltcG9ydCBHZW9qc29uTGF5ZXJJY29uIGZyb20gJy4vZ2VvanNvbi1sYXllci1pY29uJztcbmltcG9ydCB7XG4gIEdFT0pTT05fRklFTERTLFxuICBISUdITElHSF9DT0xPUl8zRCxcbiAgQ0hBTk5FTF9TQ0FMRVMsXG4gIExBWUVSX1ZJU19DT05GSUdTLFxuICBERUZBVUxUX0NPTE9SX1VJXG59IGZyb20gJ0BrZXBsZXIuZ2wvY29uc3RhbnRzJztcbmltcG9ydCB7XG4gIENvbG9yUmFuZ2UsXG4gIFZpc0NvbmZpZ051bWJlcixcbiAgVmlzQ29uZmlnQ29sb3JTZWxlY3QsXG4gIFZpc0NvbmZpZ0NvbG9yUmFuZ2UsXG4gIFZpc0NvbmZpZ1JhbmdlLFxuICBWaXNDb25maWdCb29sZWFuLFxuICBNZXJnZSxcbiAgUkdCQ29sb3IsXG4gIFByb3RvRGF0YXNldEZpZWxkLFxuICBMYXllckNvbHVtblxufSBmcm9tICdAa2VwbGVyLmdsL3R5cGVzJztcbmltcG9ydCB7S2VwbGVyVGFibGV9IGZyb20gJ0BrZXBsZXIuZ2wvdGFibGUnO1xuaW1wb3J0IHtEYXRhQ29udGFpbmVySW50ZXJmYWNlLCBBcnJvd0RhdGFDb250YWluZXJ9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuaW1wb3J0IHtGaWx0ZXJBcnJvd0V4dGVuc2lvbn0gZnJvbSAnQGtlcGxlci5nbC9kZWNrZ2wtbGF5ZXJzJztcbmltcG9ydCBHZW9qc29uSW5mb01vZGFsRmFjdG9yeSBmcm9tICcuL2dlb2pzb24taW5mby1tb2RhbCc7XG5cbmNvbnN0IFNVUFBPUlRFRF9BTkFMWVpFUl9UWVBFUyA9IHtcbiAgW0RBVEFfVFlQRVMuR0VPTUVUUlldOiB0cnVlLFxuICBbREFUQV9UWVBFUy5HRU9NRVRSWV9GUk9NX1NUUklOR106IHRydWUsXG4gIFtEQVRBX1RZUEVTLlBBSVJfR0VPTUVUUllfRlJPTV9TVFJJTkddOiB0cnVlXG59O1xuXG5leHBvcnQgY29uc3QgZ2VvanNvblZpc0NvbmZpZ3M6IHtcbiAgb3BhY2l0eTogJ29wYWNpdHknO1xuICBzdHJva2VPcGFjaXR5OiBWaXNDb25maWdOdW1iZXI7XG4gIHRoaWNrbmVzczogVmlzQ29uZmlnTnVtYmVyO1xuICBzdHJva2VDb2xvcjogJ3N0cm9rZUNvbG9yJztcbiAgY29sb3JSYW5nZTogJ2NvbG9yUmFuZ2UnO1xuICBzdHJva2VDb2xvclJhbmdlOiAnc3Ryb2tlQ29sb3JSYW5nZSc7XG4gIHJhZGl1czogJ3JhZGl1cyc7XG5cbiAgc2l6ZVJhbmdlOiAnc3Ryb2tlV2lkdGhSYW5nZSc7XG4gIHJhZGl1c1JhbmdlOiAncmFkaXVzUmFuZ2UnO1xuICBoZWlnaHRSYW5nZTogJ2VsZXZhdGlvblJhbmdlJztcbiAgZWxldmF0aW9uU2NhbGU6ICdlbGV2YXRpb25TY2FsZSc7XG4gIHN0cm9rZWQ6ICdzdHJva2VkJztcbiAgZmlsbGVkOiAnZmlsbGVkJztcbiAgZW5hYmxlM2Q6ICdlbmFibGUzZCc7XG4gIHdpcmVmcmFtZTogJ3dpcmVmcmFtZSc7XG4gIGZpeGVkSGVpZ2h0OiAnZml4ZWRIZWlnaHQnO1xufSA9IHtcbiAgb3BhY2l0eTogJ29wYWNpdHknLFxuICBzdHJva2VPcGFjaXR5OiB7XG4gICAgLi4uTEFZRVJfVklTX0NPTkZJR1Mub3BhY2l0eSxcbiAgICBwcm9wZXJ0eTogJ3N0cm9rZU9wYWNpdHknXG4gIH0sXG4gIHRoaWNrbmVzczoge1xuICAgIC4uLkxBWUVSX1ZJU19DT05GSUdTLnRoaWNrbmVzcyxcbiAgICBkZWZhdWx0VmFsdWU6IDAuNVxuICB9LFxuICBzdHJva2VDb2xvcjogJ3N0cm9rZUNvbG9yJyxcbiAgY29sb3JSYW5nZTogJ2NvbG9yUmFuZ2UnLFxuICBzdHJva2VDb2xvclJhbmdlOiAnc3Ryb2tlQ29sb3JSYW5nZScsXG4gIHJhZGl1czogJ3JhZGl1cycsXG5cbiAgc2l6ZVJhbmdlOiAnc3Ryb2tlV2lkdGhSYW5nZScsXG4gIHJhZGl1c1JhbmdlOiAncmFkaXVzUmFuZ2UnLFxuICBoZWlnaHRSYW5nZTogJ2VsZXZhdGlvblJhbmdlJyxcbiAgZWxldmF0aW9uU2NhbGU6ICdlbGV2YXRpb25TY2FsZScsXG4gIHN0cm9rZWQ6ICdzdHJva2VkJyxcbiAgZmlsbGVkOiAnZmlsbGVkJyxcbiAgZW5hYmxlM2Q6ICdlbmFibGUzZCcsXG4gIHdpcmVmcmFtZTogJ3dpcmVmcmFtZScsXG4gIGZpeGVkSGVpZ2h0OiAnZml4ZWRIZWlnaHQnXG59O1xuXG5leHBvcnQgdHlwZSBHZW9Kc29uVmlzQ29uZmlnU2V0dGluZ3MgPSB7XG4gIG9wYWNpdHk6IFZpc0NvbmZpZ051bWJlcjtcbiAgc3Ryb2tlT3BhY2l0eTogVmlzQ29uZmlnTnVtYmVyO1xuICB0aGlja25lc3M6IFZpc0NvbmZpZ051bWJlcjtcbiAgc3Ryb2tlQ29sb3I6IFZpc0NvbmZpZ0NvbG9yU2VsZWN0O1xuICBjb2xvclJhbmdlOiBWaXNDb25maWdDb2xvclJhbmdlO1xuICBzdHJva2VDb2xvclJhbmdlOiBWaXNDb25maWdDb2xvclJhbmdlO1xuICByYWRpdXM6IFZpc0NvbmZpZ051bWJlcjtcblxuICBzaXplUmFuZ2U6IFZpc0NvbmZpZ1JhbmdlO1xuICByYWRpdXNSYW5nZTogVmlzQ29uZmlnUmFuZ2U7XG4gIGhlaWdodFJhbmdlOiBWaXNDb25maWdSYW5nZTtcbiAgZWxldmF0aW9uU2NhbGU6IFZpc0NvbmZpZ051bWJlcjtcbiAgZml4ZWRIZWlnaHQ6IFZpc0NvbmZpZ0Jvb2xlYW47XG4gIHN0cm9rZWQ6IFZpc0NvbmZpZ0Jvb2xlYW47XG4gIGZpbGxlZDogVmlzQ29uZmlnQm9vbGVhbjtcbiAgZW5hYmxlM2Q6IFZpc0NvbmZpZ0Jvb2xlYW47XG4gIHdpcmVmcmFtZTogVmlzQ29uZmlnQm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIEdlb0pzb25MYXllckNvbHVtbnNDb25maWcgPSB7XG4gIGdlb2pzb246IExheWVyQ29sdW1uO1xufTtcblxuZXhwb3J0IHR5cGUgR2VvSnNvbkxheWVyVmlzQ29uZmlnID0ge1xuICBvcGFjaXR5OiBudW1iZXI7XG4gIHN0cm9rZU9wYWNpdHk6IG51bWJlcjtcbiAgdGhpY2tuZXNzOiBudW1iZXI7XG4gIHN0cm9rZUNvbG9yOiBSR0JDb2xvcjtcbiAgY29sb3JSYW5nZTogQ29sb3JSYW5nZTtcbiAgc3Ryb2tlQ29sb3JSYW5nZTogQ29sb3JSYW5nZTtcbiAgcmFkaXVzOiBudW1iZXI7XG5cbiAgc2l6ZVJhbmdlOiBbbnVtYmVyLCBudW1iZXJdO1xuICByYWRpdXNSYW5nZTogW251bWJlciwgbnVtYmVyXTtcbiAgaGVpZ2h0UmFuZ2U6IFtudW1iZXIsIG51bWJlcl07XG4gIGVsZXZhdGlvblNjYWxlOiBudW1iZXI7XG4gIHN0cm9rZWQ6IGJvb2xlYW47XG4gIGZpbGxlZDogYm9vbGVhbjtcbiAgZW5hYmxlM2Q6IGJvb2xlYW47XG4gIHdpcmVmcmFtZTogYm9vbGVhbjtcbiAgZml4ZWRIZWlnaHQ6IGJvb2xlYW47XG59O1xuXG50eXBlIEdlb0pzb25MYXllclZpc3VhbENoYW5uZWxDb25maWcgPSBMYXllckNvbG9yQ29uZmlnICZcbiAgTGF5ZXJTdHJva2VDb2xvckNvbmZpZyAmXG4gIExheWVyU2l6ZUNvbmZpZyAmXG4gIExheWVySGVpZ2h0Q29uZmlnICZcbiAgTGF5ZXJSYWRpdXNDb25maWc7XG5leHBvcnQgdHlwZSBHZW9Kc29uTGF5ZXJDb25maWcgPSBNZXJnZTxcbiAgTGF5ZXJCYXNlQ29uZmlnLFxuICB7Y29sdW1uczogR2VvSnNvbkxheWVyQ29sdW1uc0NvbmZpZzsgdmlzQ29uZmlnOiBHZW9Kc29uTGF5ZXJWaXNDb25maWd9XG4+ICZcbiAgR2VvSnNvbkxheWVyVmlzdWFsQ2hhbm5lbENvbmZpZztcblxuZXhwb3J0IHR5cGUgR2VvSnNvbkxheWVyTWV0YSA9IHtcbiAgZmVhdHVyZVR5cGVzPzogRGVja0dsR2VvVHlwZXM7XG4gIGZpeGVkUmFkaXVzPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBjb25zdCBnZW9Kc29uUmVxdWlyZWRDb2x1bW5zOiBbJ2dlb2pzb24nXSA9IFsnZ2VvanNvbiddO1xuXG50eXBlIE9iamVjdEluZm8gPSB7XG4gIGluZGV4OiBudW1iZXI7XG4gIG9iamVjdD86IEZlYXR1cmUgfCB1bmRlZmluZWQ7XG4gIHBpY2tlZDogYm9vbGVhbjtcbiAgbGF5ZXI6IExheWVyO1xuICByYWRpdXM/OiBudW1iZXI7XG4gIGlkPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNvbnN0IGZlYXR1cmVBY2Nlc3NvciA9XG4gICh7Z2VvanNvbn06IEdlb0pzb25MYXllckNvbHVtbnNDb25maWcpID0+XG4gIChkYzogRGF0YUNvbnRhaW5lckludGVyZmFjZSkgPT5cbiAgZCA9PlxuICAgIGRjLnZhbHVlQXQoZC5pbmRleCwgZ2VvanNvbi5maWVsZElkeCk7XG5cbmNvbnN0IGdlb0NvbHVtbkFjY2Vzc29yID1cbiAgKHtnZW9qc29ufTogR2VvSnNvbkxheWVyQ29sdW1uc0NvbmZpZykgPT5cbiAgKGRjOiBEYXRhQ29udGFpbmVySW50ZXJmYWNlKTogYXJyb3cuVmVjdG9yIHwgbnVsbCA9PlxuICAgIGRjLmdldENvbHVtbj8uKGdlb2pzb24uZmllbGRJZHgpIGFzIGFycm93LlZlY3RvcjtcblxuY29uc3QgZ2V0VGFibGVNb2RlVmFsdWVBY2Nlc3NvciA9IGZlYXR1cmUgPT4ge1xuICAvLyBDYWxsZWQgZnJvbSBncHUtZmlsdGVyLXV0aWxzLmdldEZpbHRlclZhbHVlQWNjZXNzb3IoKVxuICByZXR1cm4gZmllbGQgPT4gZmVhdHVyZS5wcm9wZXJ0aWVzLnZhbHVlcy5tYXAodiA9PiBmaWVsZC52YWx1ZUFjY2Vzc29yKHYpKTtcbn07XG5cbmNvbnN0IGdldFRhYmxlTW9kZUZpZWxkVmFsdWUgPSAoZmllbGQsIGRhdGEpID0+IHtcbiAgbGV0IHJ2O1xuICBpZiAodHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICBydiA9IGRhdGEoZmllbGQpO1xuICB9IGVsc2Uge1xuICAgIHJ2ID0gZGVmYXVsdEdldEZpZWxkVmFsdWUoZmllbGQsIGRhdGEpO1xuICB9XG4gIHJldHVybiBydjtcbn07XG5cbmNvbnN0IGdlb0ZpZWxkQWNjZXNzb3IgPVxuICAoe2dlb2pzb259OiBHZW9Kc29uTGF5ZXJDb2x1bW5zQ29uZmlnKSA9PlxuICAoZGM6IERhdGFDb250YWluZXJJbnRlcmZhY2UpOiBQcm90b0RhdGFzZXRGaWVsZCB8IG51bGwgPT5cbiAgICBkYy5nZXRGaWVsZCA/IGRjLmdldEZpZWxkKGdlb2pzb24uZmllbGRJZHgpIDogbnVsbDtcblxuLy8gYWNjZXNzIGZlYXR1cmUgcHJvcGVydGllcyBmcm9tIGdlb2pzb24gc3ViIGxheWVyXG5leHBvcnQgY29uc3QgZGVmYXVsdEVsZXZhdGlvbiA9IDUwMDtcbmV4cG9ydCBjb25zdCBkZWZhdWx0TGluZVdpZHRoID0gMTtcbmV4cG9ydCBjb25zdCBkZWZhdWx0UmFkaXVzID0gMTtcblxuLy8gZG9uJ3QgdXNlIHN0cm9rZXMgYnkgZGVmYXVsdCBmb3IgZGF0YXNldHMgd2l0aCBsYXJnZSBudW1iZXIgb2YgcG9seWdvbnNcbmNvbnN0IERFRkFVTFRfUE9MWUdPTl9TVFJPS0VfTElNSVQgPSAxMDAwMDA7XG5cbmV4cG9ydCBjb25zdCBDT0xVTU5fTU9ERV9UQUJMRSA9ICd0YWJsZSc7XG5jb25zdCBTVVBQT1JURURfQ09MVU1OX01PREVTID0gW1xuICB7XG4gICAga2V5OiBDT0xVTU5fTU9ERV9HRU9KU09OLFxuICAgIGxhYmVsOiAnR2VvSlNPTicsXG4gICAgcmVxdWlyZWRDb2x1bW5zOiBbJ2dlb2pzb24nXVxuICB9LFxuICB7XG4gICAga2V5OiBDT0xVTU5fTU9ERV9UQUJMRSxcbiAgICBsYWJlbDogJ1RhYmxlIGNvbHVtbnMnLFxuICAgIHJlcXVpcmVkQ29sdW1uczogWydpZCcsICdsYXQnLCAnbG5nJ10sXG4gICAgb3B0aW9uYWxDb2x1bW5zOiBbJ2FsdGl0dWRlJywgJ3NvcnRCeSddXG4gIH1cbl07XG5jb25zdCBERUZBVUxUX0NPTFVNTl9NT0RFID0gQ09MVU1OX01PREVfR0VPSlNPTjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2VvSnNvbkxheWVyIGV4dGVuZHMgTGF5ZXIge1xuICBkZWNsYXJlIGNvbmZpZzogR2VvSnNvbkxheWVyQ29uZmlnO1xuICBkZWNsYXJlIHZpc0NvbmZpZ1NldHRpbmdzOiBHZW9Kc29uVmlzQ29uZmlnU2V0dGluZ3M7XG4gIGRlY2xhcmUgbWV0YTogR2VvSnNvbkxheWVyTWV0YTtcbiAgZGVjbGFyZSBnZW9BcnJvd01vZGU6IGJvb2xlYW47XG5cbiAgZGF0YVRvRmVhdHVyZTogR2VvanNvbkRhdGFNYXBzID0gW107XG4gIGRhdGFDb250YWluZXI6IERhdGFDb250YWluZXJJbnRlcmZhY2UgfCBudWxsID0gbnVsbDtcbiAgZmlsdGVyZWRJbmRleDogVWludDhDbGFtcGVkQXJyYXkgfCBudWxsID0gbnVsbDtcbiAgZmlsdGVyZWRJbmRleFRyaWdnZXI6IG51bWJlcltdIHwgbnVsbCA9IG51bGw7XG4gIGNlbnRyb2lkczogQXJyYXk8bnVtYmVyW10gfCBudWxsPiA9IFtdO1xuXG4gIF9sYXllckluZm9Nb2RhbDoge1xuICAgIFtDT0xVTU5fTU9ERV9UQUJMRV06ICgpID0+IFJlYWN0LkpTWC5FbGVtZW50O1xuICAgIFtDT0xVTU5fTU9ERV9HRU9KU09OXTogKCkgPT4gUmVhY3QuSlNYLkVsZW1lbnQ7XG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlzQ29uZmlnKGdlb2pzb25WaXNDb25maWdzKTtcbiAgICB0aGlzLmdldFBvc2l0aW9uQWNjZXNzb3IgPSAoZGF0YUNvbnRhaW5lcjogRGF0YUNvbnRhaW5lckludGVyZmFjZSkgPT5cbiAgICAgIGZlYXR1cmVBY2Nlc3Nvcih0aGlzLmNvbmZpZy5jb2x1bW5zKShkYXRhQ29udGFpbmVyKTtcbiAgICB0aGlzLl9sYXllckluZm9Nb2RhbCA9IHtcbiAgICAgIFtDT0xVTU5fTU9ERV9UQUJMRV06IEdlb2pzb25JbmZvTW9kYWxGYWN0b3J5KENPTFVNTl9NT0RFX1RBQkxFKSxcbiAgICAgIFtDT0xVTU5fTU9ERV9HRU9KU09OXTogR2VvanNvbkluZm9Nb2RhbEZhY3RvcnkoQ09MVU1OX01PREVfR0VPSlNPTilcbiAgICB9O1xuICB9XG5cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIEdlb0pzb25MYXllci50eXBlO1xuICB9XG4gIHN0YXRpYyBnZXQgdHlwZSgpOiAnZ2VvanNvbicge1xuICAgIHJldHVybiAnZ2VvanNvbic7XG4gIH1cblxuICBnZXQgbmFtZSgpOiAnUG9seWdvbicge1xuICAgIHJldHVybiAnUG9seWdvbic7XG4gIH1cblxuICBnZXQgbGF5ZXJJY29uKCkge1xuICAgIHJldHVybiBHZW9qc29uTGF5ZXJJY29uO1xuICB9XG5cbiAgZ2V0IGNvbHVtblBhaXJzKCkge1xuICAgIHJldHVybiB0aGlzLmRlZmF1bHRQb2ludENvbHVtblBhaXJzO1xuICB9XG5cbiAgZ2V0IHN1cHBvcnRlZENvbHVtbk1vZGVzKCkge1xuICAgIHJldHVybiBTVVBQT1JURURfQ09MVU1OX01PREVTO1xuICB9XG5cbiAgZ2V0IGxheWVySW5mb01vZGFsKCkge1xuICAgIHJldHVybiB7XG4gICAgICBbQ09MVU1OX01PREVfR0VPSlNPTl06IHtcbiAgICAgICAgaWQ6ICdpY29uSW5mbycsXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLl9sYXllckluZm9Nb2RhbFtDT0xVTU5fTU9ERV9HRU9KU09OXSxcbiAgICAgICAgbW9kYWxQcm9wczoge1xuICAgICAgICAgIHRpdGxlOiAnbW9kYWwucG9seWdvbkluZm8udGl0bGUnXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBbQ09MVU1OX01PREVfVEFCTEVdOiB7XG4gICAgICAgIGlkOiAnaWNvbkluZm8nLFxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5fbGF5ZXJJbmZvTW9kYWxbQ09MVU1OX01PREVfVEFCTEVdLFxuICAgICAgICBtb2RhbFByb3BzOiB7XG4gICAgICAgICAgdGl0bGU6ICdtb2RhbC5wb2x5Z29uSW5mby50aXRsZVRhYmxlJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGFjY2Vzc1ZTRmllbGRWYWx1ZSgpIHtcbiAgICBpZiAodGhpcy5jb25maWcuY29sdW1uTW9kZSA9PT0gQ09MVU1OX01PREVfR0VPSlNPTikge1xuICAgICAgcmV0dXJuIGRlZmF1bHRHZXRGaWVsZFZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0VGFibGVNb2RlRmllbGRWYWx1ZTtcbiAgfVxuXG4gIGdldCB2aXN1YWxDaGFubmVscygpIHtcbiAgICBjb25zdCB2aXN1YWxDaGFubmVscyA9IHN1cGVyLnZpc3VhbENoYW5uZWxzO1xuICAgIHJldHVybiB7XG4gICAgICBjb2xvcjoge1xuICAgICAgICAuLi52aXN1YWxDaGFubmVscy5jb2xvcixcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRGaWxsQ29sb3InLFxuICAgICAgICBjb25kaXRpb246IGNvbmZpZyA9PiBjb25maWcudmlzQ29uZmlnLmZpbGxlZCxcbiAgICAgICAgbnVsbFZhbHVlOiB2aXN1YWxDaGFubmVscy5jb2xvci5udWxsVmFsdWUsXG4gICAgICAgIGdldEF0dHJpYnV0ZVZhbHVlOiBjb25maWcgPT4gZCA9PiBkLnByb3BlcnRpZXMuZmlsbENvbG9yIHx8IGNvbmZpZy5jb2xvcixcbiAgICAgICAgLy8gdXNlZCB0aGlzIHRvIGdldCB1cGRhdGVUcmlnZ2Vyc1xuICAgICAgICBkZWZhdWx0VmFsdWU6IGNvbmZpZyA9PiBjb25maWcuY29sb3JcbiAgICAgIH0sXG4gICAgICBzdHJva2VDb2xvcjoge1xuICAgICAgICBwcm9wZXJ0eTogJ3N0cm9rZUNvbG9yJyxcbiAgICAgICAgZmllbGQ6ICdzdHJva2VDb2xvckZpZWxkJyxcbiAgICAgICAgc2NhbGU6ICdzdHJva2VDb2xvclNjYWxlJyxcbiAgICAgICAgZG9tYWluOiAnc3Ryb2tlQ29sb3JEb21haW4nLFxuICAgICAgICByYW5nZTogJ3N0cm9rZUNvbG9yUmFuZ2UnLFxuICAgICAgICBrZXk6ICdzdHJva2VDb2xvcicsXG4gICAgICAgIGNoYW5uZWxTY2FsZVR5cGU6IENIQU5ORUxfU0NBTEVTLmNvbG9yLFxuICAgICAgICBhY2Nlc3NvcjogJ2dldExpbmVDb2xvcicsXG4gICAgICAgIGNvbmRpdGlvbjogY29uZmlnID0+IGNvbmZpZy52aXNDb25maWcuc3Ryb2tlZCxcbiAgICAgICAgbnVsbFZhbHVlOiB2aXN1YWxDaGFubmVscy5jb2xvci5udWxsVmFsdWUsXG4gICAgICAgIGdldEF0dHJpYnV0ZVZhbHVlOiBjb25maWcgPT4gZCA9PlxuICAgICAgICAgIGQucHJvcGVydGllcy5saW5lQ29sb3IgfHwgY29uZmlnLnZpc0NvbmZpZy5zdHJva2VDb2xvciB8fCBjb25maWcuY29sb3IsXG4gICAgICAgIC8vIHVzZWQgdGhpcyB0byBnZXQgdXBkYXRlVHJpZ2dlcnNcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBjb25maWcgPT4gY29uZmlnLnZpc0NvbmZpZy5zdHJva2VDb2xvciB8fCBjb25maWcuY29sb3JcbiAgICAgIH0sXG4gICAgICBzaXplOiB7XG4gICAgICAgIC4uLnZpc3VhbENoYW5uZWxzLnNpemUsXG4gICAgICAgIHByb3BlcnR5OiAnc3Ryb2tlJyxcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRMaW5lV2lkdGgnLFxuICAgICAgICBjb25kaXRpb246IGNvbmZpZyA9PiBjb25maWcudmlzQ29uZmlnLnN0cm9rZWQsXG4gICAgICAgIG51bGxWYWx1ZTogMCxcbiAgICAgICAgZ2V0QXR0cmlidXRlVmFsdWU6ICgpID0+IGQgPT4gZC5wcm9wZXJ0aWVzLmxpbmVXaWR0aCB8fCBkZWZhdWx0TGluZVdpZHRoXG4gICAgICB9LFxuICAgICAgaGVpZ2h0OiB7XG4gICAgICAgIHByb3BlcnR5OiAnaGVpZ2h0JyxcbiAgICAgICAgZmllbGQ6ICdoZWlnaHRGaWVsZCcsXG4gICAgICAgIHNjYWxlOiAnaGVpZ2h0U2NhbGUnLFxuICAgICAgICBkb21haW46ICdoZWlnaHREb21haW4nLFxuICAgICAgICByYW5nZTogJ2hlaWdodFJhbmdlJyxcbiAgICAgICAga2V5OiAnaGVpZ2h0JyxcbiAgICAgICAgZml4ZWQ6ICdmaXhlZEhlaWdodCcsXG4gICAgICAgIGNoYW5uZWxTY2FsZVR5cGU6IENIQU5ORUxfU0NBTEVTLnNpemUsXG4gICAgICAgIGFjY2Vzc29yOiAnZ2V0RWxldmF0aW9uJyxcbiAgICAgICAgY29uZGl0aW9uOiBjb25maWcgPT4gY29uZmlnLnZpc0NvbmZpZy5lbmFibGUzZCxcbiAgICAgICAgbnVsbFZhbHVlOiAwLFxuICAgICAgICBnZXRBdHRyaWJ1dGVWYWx1ZTogKCkgPT4gZCA9PiBkLnByb3BlcnRpZXMuZWxldmF0aW9uIHx8IGRlZmF1bHRFbGV2YXRpb25cbiAgICAgIH0sXG4gICAgICByYWRpdXM6IHtcbiAgICAgICAgcHJvcGVydHk6ICdyYWRpdXMnLFxuICAgICAgICBmaWVsZDogJ3JhZGl1c0ZpZWxkJyxcbiAgICAgICAgc2NhbGU6ICdyYWRpdXNTY2FsZScsXG4gICAgICAgIGRvbWFpbjogJ3JhZGl1c0RvbWFpbicsXG4gICAgICAgIHJhbmdlOiAncmFkaXVzUmFuZ2UnLFxuICAgICAgICBrZXk6ICdyYWRpdXMnLFxuICAgICAgICBjaGFubmVsU2NhbGVUeXBlOiBDSEFOTkVMX1NDQUxFUy5yYWRpdXMsXG4gICAgICAgIGFjY2Vzc29yOiAnZ2V0UG9pbnRSYWRpdXMnLFxuICAgICAgICBudWxsVmFsdWU6IDAsXG4gICAgICAgIGdldEF0dHJpYnV0ZVZhbHVlOiAoKSA9PiBkID0+IGQucHJvcGVydGllcy5yYWRpdXMgfHwgZGVmYXVsdFJhZGl1c1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgZmluZERlZmF1bHRMYXllclByb3BzKHtsYWJlbCwgZmllbGRzID0gW119OiBLZXBsZXJUYWJsZSkge1xuICAgIGNvbnN0IGdlb2pzb25Db2x1bW5zID0gZmllbGRzXG4gICAgICAuZmlsdGVyKFxuICAgICAgICBmID0+XG4gICAgICAgICAgKGYudHlwZSA9PT0gJ2dlb2pzb24nIHx8IGYudHlwZSA9PT0gJ2dlb2Fycm93JykgJiZcbiAgICAgICAgICBmLmFuYWx5emVyVHlwZSAmJlxuICAgICAgICAgIFNVUFBPUlRFRF9BTkFMWVpFUl9UWVBFU1tmLmFuYWx5emVyVHlwZV1cbiAgICAgIClcbiAgICAgIC5tYXAoZiA9PiBmLm5hbWUpO1xuXG4gICAgY29uc3QgZGVmYXVsdENvbHVtbnMgPSB7XG4gICAgICBnZW9qc29uOiB1bmlxKFsuLi5HRU9KU09OX0ZJRUxEUy5nZW9qc29uLCAuLi5nZW9qc29uQ29sdW1uc10pXG4gICAgfTtcblxuICAgIGNvbnN0IGZvdW5kQ29sdW1ucyA9IHRoaXMuZmluZERlZmF1bHRDb2x1bW5GaWVsZChkZWZhdWx0Q29sdW1ucywgZmllbGRzKTtcbiAgICBpZiAoIWZvdW5kQ29sdW1ucyB8fCAhZm91bmRDb2x1bW5zLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHtwcm9wczogW119O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwcm9wczogZm91bmRDb2x1bW5zLm1hcChjb2x1bW5zID0+ICh7XG4gICAgICAgIGxhYmVsOiAodHlwZW9mIGxhYmVsID09PSAnc3RyaW5nJyAmJiBsYWJlbC5yZXBsYWNlKC9cXC5bXi8uXSskLywgJycpKSB8fCB0aGlzLnR5cGUsXG4gICAgICAgIGNvbHVtbnMsXG4gICAgICAgIGlzVmlzaWJsZTogdHJ1ZVxuICAgICAgfSkpXG4gICAgfTtcbiAgfVxuXG4gIGdldERlZmF1bHRMYXllckNvbmZpZyhwcm9wczogTGF5ZXJCYXNlQ29uZmlnUGFydGlhbCkge1xuICAgIGNvbnN0IGRlZmF1bHRMYXllckNvbmZpZyA9IHN1cGVyLmdldERlZmF1bHRMYXllckNvbmZpZyhwcm9wcyA/PyB7fSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmRlZmF1bHRMYXllckNvbmZpZyxcblxuICAgICAgY29sdW1uTW9kZTogcHJvcHM/LmNvbHVtbk1vZGUgPz8gREVGQVVMVF9DT0xVTU5fTU9ERSxcbiAgICAgIC8vIGFkZCBoZWlnaHQgdmlzdWFsIGNoYW5uZWxcbiAgICAgIGhlaWdodEZpZWxkOiBudWxsLFxuICAgICAgaGVpZ2h0RG9tYWluOiBbMCwgMV0sXG4gICAgICBoZWlnaHRTY2FsZTogJ2xpbmVhcicsXG5cbiAgICAgIC8vIGFkZCByYWRpdXMgdmlzdWFsIGNoYW5uZWxcbiAgICAgIHJhZGl1c0ZpZWxkOiBudWxsLFxuICAgICAgcmFkaXVzRG9tYWluOiBbMCwgMV0sXG4gICAgICByYWRpdXNTY2FsZTogJ2xpbmVhcicsXG5cbiAgICAgIC8vIGFkZCBzdHJva2UgY29sb3IgdmlzdWFsIGNoYW5uZWxcbiAgICAgIHN0cm9rZUNvbG9yRmllbGQ6IG51bGwsXG4gICAgICBzdHJva2VDb2xvckRvbWFpbjogWzAsIDFdLFxuICAgICAgc3Ryb2tlQ29sb3JTY2FsZTogJ3F1YW50aWxlJyxcbiAgICAgIGNvbG9yVUk6IHtcbiAgICAgICAgLi4uZGVmYXVsdExheWVyQ29uZmlnLmNvbG9yVUksXG4gICAgICAgIHN0cm9rZUNvbG9yUmFuZ2U6IERFRkFVTFRfQ09MT1JfVUlcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZ2V0SG92ZXJEYXRhKG9iamVjdCwgZGF0YUNvbnRhaW5lcikge1xuICAgIC8vIGluZGV4IG9mIGRhdGFDb250YWluZXIgaXMgc2F2ZWQgdG8gZmVhdHVyZS5wcm9wZXJ0aWVzXG4gICAgLy8gZm9yIGFycm93IGZvcm1hdCwgYG9iamVjdGAgaXMgdGhlIGluZGV4IG9mIHRoZSByb3cgcmV0dXJuZWQgZnJvbSBkZWNrXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmdlb0Fycm93TW9kZSA/IG9iamVjdCA6IG9iamVjdD8ucHJvcGVydGllcz8uaW5kZXg7XG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgIHJldHVybiBkYXRhQ29udGFpbmVyLnJvdyhpbmRleCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZ2V0RmlsdGVyZWRJdGVtQ291bnQoKSB7XG4gICAgLy8gcmV0dXJuIC1wb2x5Z29ucy1maWxsIG9yIC1wb2x5Z29ucy1zdHJva2VcbiAgICAvLyArIC1saW5lc3RyaW5nc1xuICAgIC8vICsgLXBvaW50cy1jaXJjbGVcbiAgICBpZiAoT2JqZWN0LmtleXModGhpcy5maWx0ZXJlZEl0ZW1Db3VudCkubGVuZ3RoKSB7XG4gICAgICBjb25zdCBwb2x5Z29uQ291bnQgPVxuICAgICAgICB0aGlzLmZpbHRlcmVkSXRlbUNvdW50W2Ake3RoaXMuaWR9LXBvbHlnb25zLWZpbGxgXSB8fFxuICAgICAgICB0aGlzLmZpbHRlcmVkSXRlbUNvdW50W2Ake3RoaXMuaWR9LXBvbHlnb25zLXN0cm9rZWBdIHx8XG4gICAgICAgIDA7XG4gICAgICBjb25zdCBsaW5lc3RyaW5nQ291bnQgPSB0aGlzLmZpbHRlcmVkSXRlbUNvdW50W2Ake3RoaXMuaWR9LWxpbmVzdHJpbmdzYF0gfHwgMDtcbiAgICAgIGNvbnN0IHBvaW50Q291bnQgPSB0aGlzLmZpbHRlcmVkSXRlbUNvdW50W2Ake3RoaXMuaWR9LXBvaW50cy1jaXJjbGVgXSB8fCAwO1xuXG4gICAgICByZXR1cm4gcG9seWdvbkNvdW50ICsgbGluZXN0cmluZ0NvdW50ICsgcG9pbnRDb3VudDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNhbGN1bGF0ZURhdGFBdHRyaWJ1dGUoZGF0YXNldDogS2VwbGVyVGFibGUpIHtcbiAgICB0aGlzLmdlb0Fycm93TW9kZSA9IGZpZWxkSXNHZW9BcnJvdyhcbiAgICAgIGdlb0ZpZWxkQWNjZXNzb3IodGhpcy5jb25maWcuY29sdW1ucykoZGF0YXNldC5kYXRhQ29udGFpbmVyKVxuICAgICk7XG5cbiAgICBjb25zdCB7ZGF0YUNvbnRhaW5lciwgZmlsdGVyZWRJbmRleH0gPSBkYXRhc2V0O1xuICAgIGlmICh0aGlzLmdlb0Fycm93TW9kZSkge1xuICAgICAgLy8gVE9ETyBhZGQgY29sdW1uTW9kZSBsb2dpYyBoZXJlIGZvciBBcnJvd0RhdGFDb250YWluZXI/XG4gICAgICAvLyBmaWx0ZXIgZ2VvanNvbi9hcnJvdyB0YWJsZSBieSB2YWx1ZXMgYW5kIG1ha2UgYSBwYXJ0aWFsIGNvcHkgb2YgdGhlIHJhdyB0YWJsZSBhcmUgZXhwZW5zaXZlXG4gICAgICAvLyBzbyB3ZSB3aWxsIHVzZSBmaWx0ZXJlZEluZGV4IHRvIGNyZWF0ZSBhbiBhdHRyaWJ1dGUgZS5nLiBmaWx0ZXJlZEluZGV4IFswfDFdIGZvciBHUFUgZmlsdGVyaW5nXG4gICAgICAvLyBpbiBkZWNrLmdsIGxheWVyLCBzZWU6IEZpbHRlckFycm93RXh0ZW5zaW9uIGluIEBrZXBsZXIuZ2wvZGVja2dsLWxheWVyc1xuICAgICAgaWYgKCF0aGlzLmZpbHRlcmVkSW5kZXggfHwgdGhpcy5maWx0ZXJlZEluZGV4Lmxlbmd0aCAhPT0gZGF0YUNvbnRhaW5lci5udW1Sb3dzKCkpIHtcbiAgICAgICAgLy8gZm9yIGluY3JlbWVudGFsIGRhdGEgbG9hZGluZywgd2UgbmVlZCB0byB1cGRhdGUgZmlsdGVyZWRJbmRleFxuICAgICAgICB0aGlzLmZpbHRlcmVkSW5kZXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoZGF0YUNvbnRhaW5lci5udW1Sb3dzKCkpO1xuICAgICAgICB0aGlzLmZpbHRlcmVkSW5kZXguZmlsbCgxKTtcbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgaWYgZmlsdGVyZWRJbmRleCBpcyBhIHJhbmdlIGZyb20gMCB0byBudW1Sb3dzIGlmIGl0IGlzLCB3ZSBkb24ndCBuZWVkIHRvIHVwZGF0ZSBpdFxuICAgICAgY29uc3QgaXNSYW5nZSA9IGZpbHRlcmVkSW5kZXggJiYgZmlsdGVyZWRJbmRleC5sZW5ndGggPT09IGRhdGFDb250YWluZXIubnVtUm93cygpO1xuICAgICAgaWYgKCFpc1JhbmdlIHx8IHRoaXMuZmlsdGVyZWRJbmRleFRyaWdnZXIgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5maWx0ZXJlZEluZGV4LmZpbGwoMCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVyZWRJbmRleC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHRoaXMuZmlsdGVyZWRJbmRleFtmaWx0ZXJlZEluZGV4W2ldXSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maWx0ZXJlZEluZGV4VHJpZ2dlciA9IGZpbHRlcmVkSW5kZXg7XG4gICAgICB9XG4gICAgICAvLyBmb3IgYXJyb3csIGFsd2F5cyByZXR1cm4gZnVsbCBkYXRhVG9GZWF0dXJlIGluc3RlYWQgb2YgYSBmaWx0ZXJlZCBvbmUsIHNvIHRoZXJlIGlzIG5vIG5lZWQgdG8gdXBkYXRlIGF0dHJpYnV0ZXMgaW4gR1BVXG4gICAgICByZXR1cm4gdGhpcy5kYXRhVG9GZWF0dXJlO1xuICAgIH1cblxuICAgIC8vIGZvciBnZW9qc29uLCB0aGlzIHNob3VsZCB3b3JrIGFzIHdlbGwgYW5kIG1vcmUgZWZmaWNpZW50LiBCdXQgd2UgbmVlZCB0byB1cGRhdGUgc29tZSB0ZXN0IGNhc2VzIGUuZy4gI0dlb2pzb25MYXllciAtPiBmb3JtYXRMYXllckRhdGFcbiAgICBzd2l0Y2ggKHRoaXMuY29uZmlnLmNvbHVtbk1vZGUpIHtcbiAgICAgIGNhc2UgQ09MVU1OX01PREVfR0VPSlNPTjoge1xuICAgICAgICByZXR1cm4gZmlsdGVyZWRJbmRleC5tYXAoaSA9PiB0aGlzLmRhdGFUb0ZlYXR1cmVbaV0pLmZpbHRlcihkID0+IGQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlIENPTFVNTl9NT0RFX1RBQkxFOlxuICAgICAgICByZXR1cm4gYXBwbHlGaWx0ZXJzVG9UYWJsZUNvbHVtbnMoZGF0YXNldCwgdGhpcy5kYXRhVG9GZWF0dXJlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGZvcm1hdExheWVyRGF0YShkYXRhc2V0cywgb2xkTGF5ZXJEYXRhKSB7XG4gICAgaWYgKHRoaXMuY29uZmlnLmRhdGFJZCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBjb25zdCB7Z3B1RmlsdGVyLCBkYXRhQ29udGFpbmVyfSA9IGRhdGFzZXRzW3RoaXMuY29uZmlnLmRhdGFJZF07XG4gICAgY29uc3Qge2RhdGF9ID0gdGhpcy51cGRhdGVEYXRhKGRhdGFzZXRzLCBvbGRMYXllckRhdGEpO1xuXG4gICAgbGV0IGZpbHRlclZhbHVlQWNjZXNzb3I7XG4gICAgbGV0IGRhdGFBY2Nlc3NvcjtcbiAgICBpZiAodGhpcy5jb25maWcuY29sdW1uTW9kZSA9PT0gQ09MVU1OX01PREVfR0VPSlNPTikge1xuICAgICAgZmlsdGVyVmFsdWVBY2Nlc3NvciA9IChkYywgZCwgZmllbGRJbmRleCkgPT4gZGMudmFsdWVBdChkLnByb3BlcnRpZXMuaW5kZXgsIGZpZWxkSW5kZXgpO1xuICAgICAgZGF0YUFjY2Vzc29yID0gKCkgPT4gZCA9PiAoe2luZGV4OiBkLnByb3BlcnRpZXMuaW5kZXh9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsdGVyVmFsdWVBY2Nlc3NvciA9IGdldFRhYmxlTW9kZVZhbHVlQWNjZXNzb3I7XG4gICAgICBkYXRhQWNjZXNzb3IgPSAoKSA9PiBkID0+ICh7aW5kZXg6IGQucHJvcGVydGllcy5pbmRleH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGluZGV4QWNjZXNzb3IgPSBmID0+IGYucHJvcGVydGllcy5pbmRleDtcbiAgICBjb25zdCBhY2Nlc3NvcnMgPSB0aGlzLmdldEF0dHJpYnV0ZUFjY2Vzc29ycyh7ZGF0YUFjY2Vzc29yLCBkYXRhQ29udGFpbmVyfSk7XG5cbiAgICBjb25zdCBpc0ZpbHRlcmVkQWNjZXNzb3IgPSBkID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlcmVkSW5kZXggPyB0aGlzLmZpbHRlcmVkSW5kZXhbZC5wcm9wZXJ0aWVzLmluZGV4XSA6IDE7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhLFxuICAgICAgZ2V0RmlsdGVyVmFsdWU6IGdwdUZpbHRlci5maWx0ZXJWYWx1ZUFjY2Vzc29yKGRhdGFDb250YWluZXIpKFxuICAgICAgICBpbmRleEFjY2Vzc29yLFxuICAgICAgICBmaWx0ZXJWYWx1ZUFjY2Vzc29yXG4gICAgICApLFxuICAgICAgZ2V0RmlsdGVyZWQ6IGlzRmlsdGVyZWRBY2Nlc3NvcixcbiAgICAgIC4uLmFjY2Vzc29yc1xuICAgIH07XG4gIH1cblxuICBpc0luUG9seWdvbihkYXRhOiBEYXRhQ29udGFpbmVySW50ZXJmYWNlLCBpbmRleDogbnVtYmVyLCBwb2x5Z29uOiBGZWF0dXJlPFBvbHlnb24+KTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuY2VudHJvaWRzLmxlbmd0aCA9PT0gMCB8fCAhdGhpcy5jZW50cm9pZHNbaW5kZXhdKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGlzUmVhY3RhbmdsZVNlYXJjaEJveCA9IHBvbHlnb24ucHJvcGVydGllcz8uc2hhcGUgPT09ICdSZWN0YW5nbGUnO1xuICAgIGNvbnN0IHBvaW50ID0gdGhpcy5jZW50cm9pZHNbaW5kZXhdO1xuICAgIC8vIGlmIG5vIHZhbGlkIGNlbnRyb2lkLCByZXR1cm4gZmFsc2VcbiAgICBpZiAoIXBvaW50KSByZXR1cm4gZmFsc2U7XG4gICAgLy8gcXVpY2sgY2hlY2sgaWYgY2VudHJvaWQgaXMgd2l0aGluIHRoZSBxdWVyeSByZWN0YW5nbGVcbiAgICBpZiAoaXNSZWFjdGFuZ2xlU2VhcmNoQm94ICYmIHBvbHlnb24ucHJvcGVydGllcz8uYmJveCkge1xuICAgICAgY29uc3QgW21pblgsIG1pblksIG1heFgsIG1heFldID0gcG9seWdvbj8ucHJvcGVydGllcz8uYmJveCB8fCBbXTtcbiAgICAgIHJldHVybiBwb2ludFswXSA+PSBtaW5YICYmIHBvaW50WzBdIDw9IG1heFggJiYgcG9pbnRbMV0gPj0gbWluWSAmJiBwb2ludFsxXSA8PSBtYXhZO1xuICAgIH1cbiAgICAvLyB1c2UgdHVyZi5qcyB0byBjaGVjayBpZiBjZW50cm9pZCBpcyB3aXRoaW4gcXVlcnkgcG9seWdvblxuICAgIHJldHVybiBib29sZWFuV2l0aGluKHR1cmZQb2ludChwb2ludCksIHBvbHlnb24pO1xuICB9XG5cbiAgdXBkYXRlTGF5ZXJNZXRhKGRhdGFzZXQ6IEtlcGxlclRhYmxlKSB7XG4gICAgY29uc3Qge2RhdGFDb250YWluZXJ9ID0gZGF0YXNldDtcblxuICAgIHRoaXMuZGF0YUNvbnRhaW5lciA9IGRhdGFDb250YWluZXI7XG5cbiAgICB0aGlzLmdlb0Fycm93TW9kZSA9IGZpZWxkSXNHZW9BcnJvdyhcbiAgICAgIGdlb0ZpZWxkQWNjZXNzb3IodGhpcy5jb25maWcuY29sdW1ucykoZGF0YXNldC5kYXRhQ29udGFpbmVyKVxuICAgICk7XG5cbiAgICBpZiAodGhpcy5nZW9BcnJvd01vZGUgJiYgZGF0YUNvbnRhaW5lciBpbnN0YW5jZW9mIEFycm93RGF0YUNvbnRhaW5lcikge1xuICAgICAgY29uc3QgZ2VvQ29sdW1uID0gZ2VvQ29sdW1uQWNjZXNzb3IodGhpcy5jb25maWcuY29sdW1ucykoZGF0YUNvbnRhaW5lcik7XG4gICAgICBjb25zdCBnZW9GaWVsZCA9IGdlb0ZpZWxkQWNjZXNzb3IodGhpcy5jb25maWcuY29sdW1ucykoZGF0YUNvbnRhaW5lcik7XG5cbiAgICAgIC8vIHVwZGF0ZSB0aGUgbGF0ZXN0IGJhdGNoL2NodW5rIG9mIGdlb2Fycm93IGRhdGEgd2hlbiBsb2FkaW5nIGRhdGEgaW5jcmVtZW50YWxseVxuICAgICAgaWYgKGdlb0NvbHVtbiAmJiBnZW9GaWVsZCAmJiB0aGlzLmRhdGFUb0ZlYXR1cmUubGVuZ3RoIDwgZGF0YUNvbnRhaW5lci5udW1DaHVua3MoKSkge1xuICAgICAgICAvLyBmb3IgaW5jcmVtZW50YWxseSBsb2FkaW5nIGRhdGEsIHdlIG9ubHkgbG9hZCBhbmQgcmVuZGVyIHRoZSBsYXRlc3QgYmF0Y2g7IG90aGVyd2lzZSwgd2Ugd2lsbCBsb2FkIGFuZCByZW5kZXIgYWxsIGJhdGNoZXNcbiAgICAgICAgY29uc3QgaXNJbmNyZW1lbnRhbExvYWQgPSBkYXRhQ29udGFpbmVyLm51bUNodW5rcygpIC0gdGhpcy5kYXRhVG9GZWF0dXJlLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgLy8gVE9ETzogYWRkIHN1cHBvcnQgZm9yIENPTFVNTl9NT0RFX1RBQkxFIGluIGdldEdlb2pzb25MYXllck1ldGFGcm9tQXJyb3dcbiAgICAgICAgY29uc3Qge2RhdGFUb0ZlYXR1cmUsIGJvdW5kcywgZml4ZWRSYWRpdXMsIGZlYXR1cmVUeXBlcywgY2VudHJvaWRzfSA9XG4gICAgICAgICAgZ2V0R2VvanNvbkxheWVyTWV0YUZyb21BcnJvdyh7XG4gICAgICAgICAgICBkYXRhQ29udGFpbmVyLFxuICAgICAgICAgICAgZ2VvQ29sdW1uLFxuICAgICAgICAgICAgZ2VvRmllbGQsXG4gICAgICAgICAgICAuLi4oaXNJbmNyZW1lbnRhbExvYWQgPyB7Y2h1bmtJbmRleDogdGhpcy5kYXRhVG9GZWF0dXJlLmxlbmd0aH0gOiBudWxsKVxuICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoY2VudHJvaWRzKSB0aGlzLmNlbnRyb2lkcyA9IHRoaXMuY2VudHJvaWRzLmNvbmNhdChjZW50cm9pZHMpO1xuICAgICAgICB0aGlzLnVwZGF0ZU1ldGEoe2JvdW5kcywgZml4ZWRSYWRpdXMsIGZlYXR1cmVUeXBlc30pO1xuICAgICAgICB0aGlzLmRhdGFUb0ZlYXR1cmUgPSBbLi4udGhpcy5kYXRhVG9GZWF0dXJlLCAuLi5kYXRhVG9GZWF0dXJlXTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YVRvRmVhdHVyZS5sZW5ndGggPT09IDAgfHwgdGhpcy5jb25maWcuY29sdW1uTW9kZSA9PT0gQ09MVU1OX01PREVfVEFCTEUpIHtcbiAgICAgIGNvbnN0IGdldEZlYXR1cmUgPSB0aGlzLmdldFBvc2l0aW9uQWNjZXNzb3IoZGF0YUNvbnRhaW5lcik7XG5cbiAgICAgIGNvbnN0IHtkYXRhVG9GZWF0dXJlLCBib3VuZHMsIGZpeGVkUmFkaXVzLCBmZWF0dXJlVHlwZXMsIGNlbnRyb2lkc30gPSBnZXRHZW9qc29uTGF5ZXJNZXRhKHtcbiAgICAgICAgZGF0YUNvbnRhaW5lcixcbiAgICAgICAgZ2V0RmVhdHVyZSxcbiAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZ1xuICAgICAgfSk7XG4gICAgICBpZiAoY2VudHJvaWRzKSB0aGlzLmNlbnRyb2lkcyA9IGNlbnRyb2lkcztcbiAgICAgIHRoaXMuZGF0YVRvRmVhdHVyZSA9IGRhdGFUb0ZlYXR1cmU7XG4gICAgICB0aGlzLnVwZGF0ZU1ldGEoe2JvdW5kcywgZml4ZWRSYWRpdXMsIGZlYXR1cmVUeXBlc30pO1xuICAgIH1cbiAgfVxuXG4gIHNldEluaXRpYWxMYXllckNvbmZpZyhkYXRhc2V0OiBLZXBsZXJUYWJsZSkge1xuICAgIGNvbnN0IHtkYXRhQ29udGFpbmVyfSA9IGRhdGFzZXQ7XG4gICAgaWYgKCFkYXRhQ29udGFpbmVyLm51bVJvd3MoKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gZGVmZWZhdWx0TGF5ZXJQcm9wcyB3aWxsIGF1dG9tYXRpY2FsbHkgZmluZCBnZW9qc29uIGNvbHVtblxuICAgIC8vIGlmIG5vdCBmb3VuZCwgd2UgdHJ5IHRvIHNldCBpdCB0byBpZCAvIGxhdCAvbG5nIC90c1xuICAgIGlmICghdGhpcy5jb25maWcuY29sdW1ucy5nZW9qc29uLnZhbHVlKSB7XG4gICAgICAvLyBmaW5kIGNvbHVtbnMgZnJvbSBsYXQsIGxuZywgaWQsIGFuZCB0c1xuICAgICAgY29uc3QgY29sdW1uQ29uZmlnID0gZGV0ZWN0VGFibGVDb2x1bW5zKGRhdGFzZXQsIHRoaXMuY29uZmlnLmNvbHVtbnMsICdzb3J0QnknKTtcbiAgICAgIGlmIChjb2x1bW5Db25maWcpIHtcbiAgICAgICAgdGhpcy51cGRhdGVMYXllckNvbmZpZyh7XG4gICAgICAgICAgLi4uY29sdW1uQ29uZmlnLFxuICAgICAgICAgIGNvbHVtbk1vZGU6IENPTFVNTl9NT0RFX1RBQkxFXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVMYXllck1ldGEoZGF0YXNldCk7XG5cbiAgICBjb25zdCB7ZmVhdHVyZVR5cGVzfSA9IHRoaXMubWV0YTtcbiAgICAvLyBkZWZhdWx0IHNldHRpbmdzIGlzIHN0cm9rZTogdHJ1ZSwgZmlsbGVkOiBmYWxzZVxuICAgIGlmIChmZWF0dXJlVHlwZXMgJiYgZmVhdHVyZVR5cGVzLnBvbHlnb24pIHtcbiAgICAgIC8vIHNldCBib3RoIGZpbGwgYW5kIHN0cm9rZSB0byB0cnVlXG4gICAgICByZXR1cm4gdGhpcy51cGRhdGVMYXllclZpc0NvbmZpZyh7XG4gICAgICAgIGZpbGxlZDogdHJ1ZSxcbiAgICAgICAgc3Ryb2tlZDogZGF0YUNvbnRhaW5lci5udW1Sb3dzKCkgPCBERUZBVUxUX1BPTFlHT05fU1RST0tFX0xJTUlULFxuICAgICAgICBzdHJva2VDb2xvcjogY29sb3JNYWtlci5uZXh0KCkudmFsdWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZmVhdHVyZVR5cGVzICYmIGZlYXR1cmVUeXBlcy5wb2ludCkge1xuICAgICAgLy8gc2V0IGZpbGwgdG8gdHJ1ZSBpZiBkZXRlY3QgcG9pbnRcbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUxheWVyVmlzQ29uZmlnKHtmaWxsZWQ6IHRydWUsIHN0cm9rZWQ6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBpc0xheWVySG92ZXJlZChvYmplY3RJbmZvOiBPYmplY3RJbmZvKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2VvQXJyb3dNb2RlXG4gICAgICA/IGlzTGF5ZXJIb3ZlcmVkRnJvbUFycm93KG9iamVjdEluZm8sIHRoaXMuaWQpXG4gICAgICA6IHN1cGVyLmlzTGF5ZXJIb3ZlcmVkKG9iamVjdEluZm8pO1xuICB9XG5cbiAgaGFzSG92ZXJlZE9iamVjdChvYmplY3RJbmZvOiBPYmplY3RJbmZvKTogRmVhdHVyZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmdlb0Fycm93TW9kZVxuICAgICAgPyBnZXRIb3ZlcmVkT2JqZWN0RnJvbUFycm93KFxuICAgICAgICAgIG9iamVjdEluZm8sXG4gICAgICAgICAgdGhpcy5kYXRhQ29udGFpbmVyLFxuICAgICAgICAgIHRoaXMuaWQsXG4gICAgICAgICAgZ2VvQ29sdW1uQWNjZXNzb3IodGhpcy5jb25maWcuY29sdW1ucyksXG4gICAgICAgICAgZ2VvRmllbGRBY2Nlc3Nvcih0aGlzLmNvbmZpZy5jb2x1bW5zKVxuICAgICAgICApXG4gICAgICA6IHN1cGVyLmhhc0hvdmVyZWRPYmplY3Qob2JqZWN0SW5mbyk7XG4gIH1cblxuICBnZXRFbGV2YXRpb25ab29tRmFjdG9yKHt6b29tLCB6b29tT2Zmc2V0ID0gMH0pIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcudmlzQ29uZmlnLmZpeGVkSGVpZ2h0ID8gMSA6IE1hdGgucG93KDIsIE1hdGgubWF4KDggLSB6b29tICsgem9vbU9mZnNldCwgMCkpO1xuICB9XG5cbiAgcmVuZGVyTGF5ZXIob3B0cykge1xuICAgIGNvbnN0IHtkYXRhOiBkYXRhUHJvcHMsIGdwdUZpbHRlciwgb2JqZWN0SG92ZXJlZCwgbWFwU3RhdGUsIGludGVyYWN0aW9uQ29uZmlnfSA9IG9wdHM7XG5cbiAgICBjb25zdCB7Zml4ZWRSYWRpdXMsIGZlYXR1cmVUeXBlc30gPSB0aGlzLm1ldGE7XG4gICAgY29uc3QgcmFkaXVzU2NhbGUgPSB0aGlzLmdldFJhZGl1c1NjYWxlQnlab29tKG1hcFN0YXRlLCBmaXhlZFJhZGl1cyk7XG4gICAgY29uc3Qgem9vbUZhY3RvciA9IHRoaXMuZ2V0Wm9vbUZhY3RvcihtYXBTdGF0ZSk7XG4gICAgY29uc3QgZWxlWm9vbUZhY3RvciA9IHRoaXMuZ2V0RWxldmF0aW9uWm9vbUZhY3RvcihtYXBTdGF0ZSk7XG5cbiAgICBjb25zdCB7dmlzQ29uZmlnfSA9IHRoaXMuY29uZmlnO1xuXG4gICAgY29uc3QgbGF5ZXJQcm9wcyA9IHtcbiAgICAgIGxpbmVXaWR0aFNjYWxlOiB2aXNDb25maWcudGhpY2tuZXNzICogem9vbUZhY3RvciAqIDgsXG4gICAgICBlbGV2YXRpb25TY2FsZTogdmlzQ29uZmlnLmVsZXZhdGlvblNjYWxlICogZWxlWm9vbUZhY3RvcixcbiAgICAgIHBvaW50UmFkaXVzU2NhbGU6IHJhZGl1c1NjYWxlLFxuICAgICAgbGluZU1pdGVyTGltaXQ6IDRcbiAgICB9O1xuXG4gICAgY29uc3QgdXBkYXRlVHJpZ2dlcnMgPSB7XG4gICAgICAuLi50aGlzLmdldFZpc3VhbENoYW5uZWxVcGRhdGVUcmlnZ2VycygpLFxuICAgICAgZ2V0RmlsdGVyVmFsdWU6IGdwdUZpbHRlci5maWx0ZXJWYWx1ZVVwZGF0ZVRyaWdnZXJzLFxuICAgICAgZ2V0RmlsdGVyZWQ6IHRoaXMuZmlsdGVyZWRJbmRleFRyaWdnZXJcbiAgICB9O1xuXG4gICAgY29uc3QgZGVmYXVsdExheWVyUHJvcHMgPSB0aGlzLmdldERlZmF1bHREZWNrTGF5ZXJQcm9wcyhvcHRzKTtcbiAgICBjb25zdCBvcGFPdmVyd3JpdGUgPSB7XG4gICAgICBvcGFjaXR5OiB2aXNDb25maWcuc3Ryb2tlT3BhY2l0eVxuICAgIH07XG5cbiAgICBjb25zdCBwaWNrYWJsZSA9IGludGVyYWN0aW9uQ29uZmlnLnRvb2x0aXAuZW5hYmxlZDtcbiAgICBjb25zdCBob3ZlcmVkT2JqZWN0ID0gdGhpcy5oYXNIb3ZlcmVkT2JqZWN0KG9iamVjdEhvdmVyZWQpO1xuXG4gICAgY29uc3Qge2RhdGEsIC4uLnByb3BzfSA9IGRhdGFQcm9wcztcblxuICAgIC8vIGFycm93IHRhYmxlIGNhbiBoYXZlIG11bHRpcGxlIGNodW5rcywgYSBkZWNrLmdsIGxheWVyIGlzIGNyZWF0ZWQgZm9yIGVhY2ggY2h1bmtcbiAgICBjb25zdCBkZWNrTGF5ZXJEYXRhID0gdGhpcy5nZW9BcnJvd01vZGUgPyBkYXRhIDogW2RhdGFdO1xuICAgIGNvbnN0IGRlY2tMYXllcnMgPSBkZWNrTGF5ZXJEYXRhLm1hcCgoZCwgaSkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBEZWNrR0xHZW9Kc29uTGF5ZXIoe1xuICAgICAgICAuLi5kZWZhdWx0TGF5ZXJQcm9wcyxcbiAgICAgICAgLi4ubGF5ZXJQcm9wcyxcbiAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgIGRhdGE6IGQsXG4gICAgICAgIGlkOiBkZWNrTGF5ZXJEYXRhLmxlbmd0aCA+IDEgPyBgJHt0aGlzLmlkfS0ke2l9YCA6IHRoaXMuaWQsXG4gICAgICAgIHBpY2thYmxlLFxuICAgICAgICBoaWdobGlnaHRDb2xvcjogSElHSExJR0hfQ09MT1JfM0QsXG4gICAgICAgIGF1dG9IaWdobGlnaHQ6IHZpc0NvbmZpZy5lbmFibGUzZCAmJiBwaWNrYWJsZSxcbiAgICAgICAgc3Ryb2tlZDogdmlzQ29uZmlnLnN0cm9rZWQsXG4gICAgICAgIGZpbGxlZDogdmlzQ29uZmlnLmZpbGxlZCxcbiAgICAgICAgZXh0cnVkZWQ6IHZpc0NvbmZpZy5lbmFibGUzZCxcbiAgICAgICAgd2lyZWZyYW1lOiB2aXNDb25maWcud2lyZWZyYW1lLFxuICAgICAgICB3cmFwTG9uZ2l0dWRlOiBmYWxzZSxcbiAgICAgICAgbGluZU1pdGVyTGltaXQ6IDIsXG4gICAgICAgIGNhcFJvdW5kZWQ6IHRydWUsXG4gICAgICAgIGpvaW50Um91bmRlZDogdHJ1ZSxcbiAgICAgICAgdXBkYXRlVHJpZ2dlcnMsXG4gICAgICAgIGV4dGVuc2lvbnM6IFsuLi5kZWZhdWx0TGF5ZXJQcm9wcy5leHRlbnNpb25zLCBuZXcgRmlsdGVyQXJyb3dFeHRlbnNpb24oKV0sXG4gICAgICAgIF9zdWJMYXllclByb3BzOiB7XG4gICAgICAgICAgLi4uKGZlYXR1cmVUeXBlcz8ucG9seWdvbiA/IHsncG9seWdvbnMtc3Ryb2tlJzogb3BhT3ZlcndyaXRlfSA6IHt9KSxcbiAgICAgICAgICAuLi4oZmVhdHVyZVR5cGVzPy5saW5lID8ge2xpbmVzdHJpbmdzOiBvcGFPdmVyd3JpdGV9IDoge30pLFxuICAgICAgICAgIC4uLihmZWF0dXJlVHlwZXM/LnBvaW50XG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBwb2ludHM6IHtcbiAgICAgICAgICAgICAgICAgIGxpbmVPcGFjaXR5OiB2aXNDb25maWcuc3Ryb2tlT3BhY2l0eVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7fSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgLi4uZGVja0xheWVycyxcbiAgICAgIC8vIGhvdmVyIGxheWVyXG4gICAgICAuLi4oaG92ZXJlZE9iamVjdCAmJiAhdmlzQ29uZmlnLmVuYWJsZTNkXG4gICAgICAgID8gW1xuICAgICAgICAgICAgbmV3IERlY2tHTEdlb0pzb25MYXllcih7XG4gICAgICAgICAgICAgIC4uLnRoaXMuZ2V0RGVmYXVsdEhvdmVyTGF5ZXJQcm9wcygpLFxuICAgICAgICAgICAgICAuLi5sYXllclByb3BzLFxuICAgICAgICAgICAgICB2aXNpYmxlOiBkZWZhdWx0TGF5ZXJQcm9wcy52aXNpYmxlLFxuICAgICAgICAgICAgICB3cmFwTG9uZ2l0dWRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgZGF0YTogW2hvdmVyZWRPYmplY3RdLFxuICAgICAgICAgICAgICBnZXRMaW5lV2lkdGg6IHByb3BzLmdldExpbmVXaWR0aCxcbiAgICAgICAgICAgICAgZ2V0UG9pbnRSYWRpdXM6IHByb3BzLmdldFBvaW50UmFkaXVzLFxuICAgICAgICAgICAgICBnZXRFbGV2YXRpb246IHByb3BzLmdldEVsZXZhdGlvbixcbiAgICAgICAgICAgICAgZ2V0TGluZUNvbG9yOiB0aGlzLmNvbmZpZy5oaWdobGlnaHRDb2xvcixcbiAgICAgICAgICAgICAgZ2V0RmlsbENvbG9yOiB0aGlzLmNvbmZpZy5oaWdobGlnaHRDb2xvcixcbiAgICAgICAgICAgICAgLy8gYWx3YXlzIGRyYXcgb3V0bGluZVxuICAgICAgICAgICAgICBzdHJva2VkOiB0cnVlLFxuICAgICAgICAgICAgICBmaWxsZWQ6IGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIF1cbiAgICAgICAgOiBbXSlcbiAgICBdO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtB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