"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getFieldsFromTile = void 0;
exports.getFilterProps = getFilterProps;
exports.getLoaderOptions = void 0;
exports.getMetaUrl = getMetaUrl;
exports.getTileUrl = getTileUrl;
exports.isTileDataset = isTileDataset;
exports.matchDatasetType = matchDatasetType;
exports.parseVectorMetadata = parseVectorMetadata;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));
var _typeAnalyzer = require("type-analyzer");
var _d3Array = require("d3-array");
var _console = _interopRequireDefault(require("global/console"));
var _lodash = _interopRequireDefault(require("lodash.uniq"));
var _mvt = require("@loaders.gl/mvt");
var _pmtiles = require("@loaders.gl/pmtiles");
var _commonUtils = require("@kepler.gl/common-utils");
var _constants = require("@kepler.gl/constants");
var _utils = require("@kepler.gl/utils");
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
var getLoaderOptions = exports.getLoaderOptions = function getLoaderOptions() {
  return {
    mvt: {
      workerUrl: "https://unpkg.com/@loaders.gl/mvt/dist/mvt-worker.js"
    }
  };
};
function isTileDataset(dataset) {
  return Boolean((dataset === null || dataset === void 0 ? void 0 : dataset.type) === _constants.DatasetType.VECTOR_TILE);
}
// https://github.com/mapbox/tilejson-spec/tree/master/2.2.0
function isLat(num) {
  return Number.isFinite(num) && num <= 90 && num >= -90;
}
function isLng(num) {
  return Number.isFinite(num) && num <= 180 && num >= -180;
}
function isZoom(num) {
  return Number.isFinite(num) && num >= 0 && num <= 22;
}
function fromArrayOrString(data) {
  if (typeof data === 'string') {
    return data.split(',').map(parseFloat);
  } else if (Array.isArray(data)) {
    return data;
  }
  return null;
}
function parseCenter(center) {
  // supported formats
  // string: "-96.657715,40.126127,-90.140061,43.516689",
  // array: [-91.505127,41.615442,14]
  var result = fromArrayOrString(center);
  if (Array.isArray(result) && result.length === 3 && isLng(result[0]) && isLat(result[1]) && isZoom(result[2])) {
    return result;
  }
  return null;
}

/**
 * bounds should be [minLng, minLat, maxLng, maxLat]
 * @param {*} bounds
 */
function parseBounds(bounds) {
  // supported formats
  // string: "-96.657715,40.126127,-90.140061,43.516689",
  // array: [ -180, -85.05112877980659, 180, 85.0511287798066 ]
  var result = fromArrayOrString(bounds);
  // validate bounds
  if (Array.isArray(result) && result.length === 4 && [result[0], result[2]].every(isLng) && [result[1], result[3]].every(isLat)) {
    return result;
  }
  return null;
}
var X_PATT = /\{x\}/;
var Y_PATT = /\{y\}/;
var Z_PATT = /\{z\}/;
function isFullyQualifiedTileUrl(tileUrl) {
  return X_PATT.test(tileUrl) && Y_PATT.test(tileUrl) && Z_PATT.test(tileUrl);
}

/**
 * Normalize tile URL
 * @param  {string} tileUrl Initial tile URL, which may be either the root URL for the
 *                          tileset or a fully qualified template
 * @param  {function} validateUrl function to validate tile URL
 * @return {string|null}    Fully qualified tile URL template, or null if input does not
 *                          appear to be a valid URL
 */
function getTileUrl(tileUrl) {
  var validateUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : isFullyQualifiedTileUrl;
  // Check for a valid URL. Ideally we'd have a simple method here.
  var uriParts = (0, _commonUtils.parseUri)(tileUrl);
  if (!uriParts.protocol || !uriParts.host) {
    return null;
  }
  if (validateUrl(tileUrl)) {
    return tileUrl;
  }
  return "".concat(tileUrl.replace(/\/$/, ''), "/{z}/{x}/{y}.pbf");
}

/**
 * Map of util functions for different tileset types, keyed by host
 */
var TILESET_FUNCTIONS = {
  'api.mapbox.com': {
    getMetaUrl: getMetaUrlMapbox,
    parseMetadata: parseMetadataTileJSON
  },
  "default": {
    getMetaUrl: getMetaUrlTippecanoe,
    parseMetadata: parseMetadataTileJSON
  }
};
function getTilesetFunctions(tileUrl) {
  var host = '';
  try {
    host = new URL(tileUrl || '').hostname;
  } catch (error) {
    // do nothing
  }
  return TILESET_FUNCTIONS[host] || TILESET_FUNCTIONS["default"];
}

/**
 * Get the metadata URL for a given tileset
 */
function getMetaUrl(tileUrl) {
  return getTilesetFunctions(tileUrl).getMetaUrl(tileUrl);
}
/**
 * Parse the metadata for a given tileset
 */
function parseVectorMetadata(
// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
metadata, option) {
  var _ref = option || {},
    _ref$tileUrl = _ref.tileUrl,
    tileUrl = _ref$tileUrl === void 0 ? '' : _ref$tileUrl;
  return getTilesetFunctions(tileUrl).parseMetadata(metadata);
}
var MAPBOX_URL_PATT = /\/\{z\}\/\{x\}\/\{y\}\.mvt/;
function getMetaUrlMapbox() {
  var tileUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  return tileUrl.replace(MAPBOX_URL_PATT, '.json');
}
function parseMetadataTileJSON(metadata) {
  var _parsed$fields;
  var parsed = parseMetadataTippecanoeFromDataSource(metadata);
  if (!parsed) return null;
  // Fields already parsed from `json` property
  if ((_parsed$fields = parsed.fields) !== null && _parsed$fields !== void 0 && _parsed$fields.length) {
    return parsed;
  }
  return parsed;
}
function getMetaUrlTippecanoe(tileUrl) {
  var url = getTileUrl(tileUrl);
  if (!url) return null;
  // assumes the structure <url_base>/{z}...
  var baseUrl = url.split(Z_PATT)[0].replace(/\/$/, '');
  return "".concat(baseUrl, "/metadata.json");
}

/**
 * Special parsing for metadata returned by MVTSource and PMTilesSource.
 * @param metadata Tileset metadata parsed by a DataSouce
 * @returns Metadata in Kepler-friendly format.
 */
function parseMetadataTippecanoeFromDataSource(metadata) {
  var _pmTileMetadata$tilej, _pmTileMetadata$tilej2;
  if (!metadata || (0, _typeof2["default"])(metadata) !== 'object') {
    return null;
  }
  var result = {
    attributions: [],
    metaJson: null,
    bounds: null,
    center: null,
    maxZoom: null,
    minZoom: null,
    fields: []
  };
  var mvtMetadata = metadata;
  var pmTileMetadata = metadata;

  // try to parse metaJson
  if (typeof mvtMetadata.metaJson === 'string') {
    try {
      result.metaJson = JSON.parse(mvtMetadata.metaJson);
    } catch (err) {
      // do nothing
    }
  } else if ((0, _typeof2["default"])(mvtMetadata.metaJson) === 'object') {
    result.metaJson = mvtMetadata.metaJson;
  }
  result.bounds = parseBounds(Array.isArray(metadata.boundingBox) ? metadata.boundingBox.flat() : '');

  // PMTileSource has centerZoom and center [lon, lat], MVTSource - [lon, lat, zoom]
  var center = pmTileMetadata.centerZoom !== undefined && Array.isArray(metadata.center) ? [].concat((0, _toConsumableArray2["default"])(metadata.center), [pmTileMetadata.centerZoom]) : metadata.center;
  result.center = parseCenter(center || '');
  result.maxZoom = safeParseFloat(metadata.maxZoom);
  result.minZoom = safeParseFloat(metadata.minZoom);
  result.name = metadata.name || '';
  result.description = mvtMetadata.description || ((_pmTileMetadata$tilej = pmTileMetadata.tilejson) === null || _pmTileMetadata$tilej === void 0 ? void 0 : _pmTileMetadata$tilej.description) || '';
  if (Array.isArray((_pmTileMetadata$tilej2 = pmTileMetadata.tilejson) === null || _pmTileMetadata$tilej2 === void 0 ? void 0 : _pmTileMetadata$tilej2.layers)) {
    var _pmTileMetadata$tilej3;
    var layers = pmTilesLayerToTippecanoeLayer((_pmTileMetadata$tilej3 = pmTileMetadata.tilejson) === null || _pmTileMetadata$tilej3 === void 0 ? void 0 : _pmTileMetadata$tilej3.layers);
    result.fields = collectAttributes(layers);
  } else if (Array.isArray(mvtMetadata.layers)) {
    var _layers = pmTilesLayerToTippecanoeLayer(mvtMetadata.layers);
    result.fields = collectAttributes(_layers);
  }
  result = _objectSpread(_objectSpread({}, result), {}, {
    attributions: pmTileMetadata.attributions || (mvtMetadata.htmlAttribution ? [mvtMetadata.htmlAttribution] : undefined) || []
  }, parseMetaJson(result.metaJson));
  return result;
}
function safeParseFloat(input) {
  var result = typeof input === 'string' ? parseFloat(input) : typeof input === 'number' ? input : null;
  return result === null || isNaN(result) ? null : result;
}
function parseMetaJson(metaJson) {
  if (!metaJson || (0, _typeof2["default"])(metaJson) !== 'object') {
    return null;
  }
  if (metaJson.tilestats && Array.isArray(metaJson.tilestats.layers)) {
    // we are in luck!
    return {
      fields: collectAttributes(metaJson.tilestats.layers)
    };
  }
  return null;
}
function getTimeAnimationDomain(mappedValue) {
  var timeSteps = (0, _lodash["default"])(mappedValue).sort(_d3Array.ascending).filter(_commonUtils.notNullorUndefined);
  var domain = [timeSteps[0], timeSteps[timeSteps.length - 1]];

  // if taks 10 * 1000 ms to finish the entire animation
  var duration = 10000 / timeSteps.length;
  var clamped = (0, _utils.clamp)([100, 2000], duration);
  return {
    domain: domain,
    timeSteps: timeSteps,
    duration: clamped,
    mappedValue: mappedValue
  };
}
var pmTileTypeToAttrMap = {
  float32: 'number',
  string: 'string',
  utf8: 'string',
  "int": 'int',
  "boolean": 'boolean'
};

/**
 * Transform TileJSON['layers'] back to TippecanoeLayer
 */
function pmTilesLayerToTippecanoeLayer(layers) {
  if (!layers) return [];
  var outLayers = [];
  var _iterator = _createForOfIteratorHelper(layers),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var layer = _step.value;
      var _ref2 = layer || {},
        _ref2$fields = _ref2.fields,
        fields = _ref2$fields === void 0 ? [] : _ref2$fields;
      var _iterator2 = _createForOfIteratorHelper(fields),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _pmField$values;
          var pmField = _step2.value;
          var attribute = {
            attribute: pmField.name,
            type: pmTileTypeToAttrMap[pmField.type],
            count: pmField.uniqueValueCount,
            values: (_pmField$values = pmField.values) !== null && _pmField$values !== void 0 ? _pmField$values : [],
            min: pmField.min,
            max: pmField.max
          };
          outLayers.push({
            attributes: [attribute]
          });
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return outLayers;
}
function collectAttributes() {
  var layers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var fields = {};
  var indexedAttributes = {};
  var _iterator3 = _createForOfIteratorHelper(layers),
    _step3;
  try {
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
      var layer = _step3.value;
      var _ref3 = layer || {},
        _ref3$attributes = _ref3.attributes,
        attributes = _ref3$attributes === void 0 ? [] : _ref3$attributes;
      var _iterator5 = _createForOfIteratorHelper(attributes),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var attr = _step5.value;
          var _name = attr.attribute;
          if (typeof _name === 'string') {
            // eslint-disable-next-line max-depth
            if (_name.split('|').length > 1) {
              // indexed field
              var fname = _name.split('|')[0];
              indexedAttributes[fname] = indexedAttributes[fname] || [];
              indexedAttributes[fname].push(attr);
            } else if (!fields[_name]) {
              fields[_name] = attributeToField(attr);
            } else {
              mergeAttributeDomain(fields[_name], attr);
            }
          }
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
    }

    // parse indexed attribute, and put index key unidentified back as normal field
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }
  for (var _i = 0, _Object$entries = Object.entries(indexedAttributes); _i < _Object$entries.length; _i++) {
    var _Object$entries$_i = (0, _slicedToArray2["default"])(_Object$entries[_i], 2),
      name = _Object$entries$_i[0],
      attrs = _Object$entries$_i[1];
    var _parseIndexedField = parseIndexedField(name, attrs),
      indexedField = _parseIndexedField.indexedField,
      unidentified = _parseIndexedField.unidentified;
    fields[indexedField.name] = indexedField;
    var _iterator4 = _createForOfIteratorHelper(unidentified),
      _step4;
    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
        var unidentifiedAttr = _step4.value;
        if (unidentifiedAttr.attribute) {
          fields[unidentifiedAttr.attribute] = fields[unidentifiedAttr.attribute] || attributeToField(unidentifiedAttr);
          mergeAttributeDomain(fields[unidentifiedAttr.attribute], unidentifiedAttr);
        }
      }
    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }
  }
  return Object.values(fields);
}
function getIndexKeyFromFieldName(name) {
  return name && name.split('|').length > 1 ? name.split('|')[1] : null;
}
function parseIndexedField(name, attrs) {
  var unidentified = [];
  // analyze time format
  var field;
  var _iterator6 = _createForOfIteratorHelper(attrs),
    _step6;
  try {
    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
      var attr = _step6.value;
      var fieldName = attr.attribute;
      var indexKey = getIndexKeyFromFieldName(fieldName || '');
      var analyzedType = indexKey && (0, _commonUtils.containValidTime)([indexKey]);
      if (analyzedType) {
        field = field || _objectSpread(_objectSpread({}, attributeToField(attr)), {}, {
          // overide name and id to truncated name
          name: name,
          id: name,
          indexBy: {
            format: analyzedType.format,
            type: (0, _commonUtils.analyzerTypeToFieldType)(analyzedType.type),
            mappedValue: {}
          }
        });
        mergeAttributeDomain(field, attr);
        // save epoch time in mappedValue
        var fieldTs = indexKey;
        if (analyzedType.format === 'x' || analyzedType.format === 'X') {
          fieldTs = Number(indexKey);
        }
        var epoch = (0, _utils.timeToUnixMilli)(fieldTs, analyzedType.format);
        if (epoch) {
          field.indexBy.mappedValue[epoch] = fieldName;
        }
      } else {
        // key is not valid timestamp
        unidentified.push(attr);
      }
    }
  } catch (err) {
    _iterator6.e(err);
  } finally {
    _iterator6.f();
  }
  if (field.indexBy && field.indexBy.type === _constants.ALL_FIELD_TYPES.timestamp) {
    field.indexBy.timeDomain = getTimeAnimationDomain(Object.keys(field.indexBy.mappedValue).map(Number));
  }
  return {
    unidentified: unidentified,
    indexedField: field
  };
}
function compare(num1, num2, operator) {
  return Number.isFinite(num1) && Number.isFinite(num2) ? Math[operator](num1, num2) : Number.isFinite(num1) ? num1 : Number.isFinite(num2) ? num2 : NaN;
}
function getFilterProps(fieldType, attribute) {
  switch (fieldType) {
    case _constants.ALL_FIELD_TYPES.real:
    case _constants.ALL_FIELD_TYPES.integer:
      {
        var _getAttributeDomain = getAttributeDomain(fieldType, attribute),
          _getAttributeDomain2 = (0, _slicedToArray2["default"])(_getAttributeDomain, 2),
          min = _getAttributeDomain2[0],
          max = _getAttributeDomain2[1];
        var diff = max - min;
        var step = (0, _utils.getNumericStepSize)(diff) || 0.1;
        var domain = [(0, _utils.formatNumberByStep)(min, step, 'floor'), (0, _utils.formatNumberByStep)(max, step, 'ceil')];
        var filterProps = {
          domain: domain,
          value: domain,
          type: _constants.FILTER_TYPES.range,
          typeOptions: [_constants.FILTER_TYPES.range],
          gpu: true,
          step: step
        };
        return filterProps;
      }
    case _constants.ALL_FIELD_TYPES["boolean"]:
      {
        var _filterProps = {
          domain: [true, false],
          value: true,
          type: _constants.FILTER_TYPES.select,
          gpu: true
        };
        return _filterProps;
      }
    default:
      {
        // Assume string for all other fields
        var _filterProps2 = {
          domain: attribute.values,
          value: attribute.values,
          type: _constants.FILTER_TYPES.multiSelect,
          gpu: false
        };
        return _filterProps2;
      }
  }
}
function attributeToField() {
  var attribute = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
    values: []
  };
  // attribute: "_season_peaks_color"
  // count: 1000
  // max: 0.95
  // min: 0.24375
  // type: "number"
  var fieldTypes = attributeTypeToFieldType(attribute.type);
  return _objectSpread({
    name: attribute.attribute,
    id: attribute.attribute,
    format: '',
    filterProps: getFilterProps(fieldTypes.type, attribute)
  }, fieldTypes);
}
function getAttributeDomain(type, attribute) {
  switch (type) {
    case _constants.ALL_FIELD_TYPES.real:
    case _constants.ALL_FIELD_TYPES.integer:
      return [Number.isFinite(attribute.min) ? attribute.min : NaN, Number.isFinite(attribute.max) ? attribute.max : NaN];
    case _constants.ALL_FIELD_TYPES["boolean"]:
      return [0, 1];
    default:
      return [0, 1];
  }
}

/**
 * @param field This function mutates the field parameter
 */
function mergeAttributeDomain(field, attribute) {
  switch (field.type) {
    case _constants.ALL_FIELD_TYPES.real:
    case _constants.ALL_FIELD_TYPES.integer:
      {
        var _field$metadata, _field$filterProps;
        var domain = ((_field$metadata = field.metadata) === null || _field$metadata === void 0 ? void 0 : _field$metadata.domain) || ((_field$filterProps = field.filterProps) === null || _field$filterProps === void 0 ? void 0 : _field$filterProps.domain);
        if (domain) {
          domain.min = compare(attribute.min, domain[0], 'min');
          domain.max = compare(attribute.max, domain[1], 'max');
        }
        return;
      }
    default:
      return;
  }
}

// possible types https://github.com/mapbox/tippecanoe#modifying-feature-attributes
var attrTypeMap = {
  number: {
    type: _constants.ALL_FIELD_TYPES.real,
    analyzerType: _typeAnalyzer.DATA_TYPES.FLOAT
  },
  numeric: {
    type: _constants.ALL_FIELD_TYPES.real,
    analyzerType: _typeAnalyzer.DATA_TYPES.FLOAT
  },
  string: {
    type: _constants.ALL_FIELD_TYPES.string,
    analyzerType: _typeAnalyzer.DATA_TYPES.STRING
  },
  vachar: {
    type: _constants.ALL_FIELD_TYPES.string,
    analyzerType: _typeAnalyzer.DATA_TYPES.STRING
  },
  "float": {
    type: _constants.ALL_FIELD_TYPES.real,
    analyzerType: _typeAnalyzer.DATA_TYPES.FLOAT
  },
  "int": {
    type: _constants.ALL_FIELD_TYPES.integer,
    analyzerType: _typeAnalyzer.DATA_TYPES.INT
  },
  int4: {
    type: _constants.ALL_FIELD_TYPES.integer,
    analyzerType: _typeAnalyzer.DATA_TYPES.INT
  },
  "boolean": {
    type: _constants.ALL_FIELD_TYPES["boolean"],
    analyzerType: _typeAnalyzer.DATA_TYPES.BOOLEAN
  },
  bool: {
    type: _constants.ALL_FIELD_TYPES["boolean"],
    analyzerType: _typeAnalyzer.DATA_TYPES.BOOLEAN
  }
};
function attributeTypeToFieldType(aType) {
  var type = aType === null || aType === void 0 ? void 0 : aType.toLowerCase();
  if (!type || !attrTypeMap[type]) {
    _console["default"].warn("cannot convert attribute type ".concat(type, " to kepler.gl data type, use string by default"));
    return attrTypeMap.string;
  }
  return attrTypeMap[type];
}

/**
 * Returns true if a dataset can be used as source data for a layer.
 * @param dataset A dataset.
 * @param layer A layer.
 * @returns Returns true if a dataset can be used as source data for a layer.
 */
function matchDatasetType(dataset, layer) {
  // allow selection if type is not assigned yet
  if (!layer.type) {
    return true;
  }
  // allow selection if is current selected dataset
  if (layer.config.dataId === dataset.id) {
    return true;
  }
  // allow selection if layer doesn't have supportedDatasetTypes
  if (!layer.supportedDatasetTypes) {
    return true;
  }
  return Array.isArray(layer.supportedDatasetTypes) && layer.supportedDatasetTypes.includes(dataset.type || '');
}
/**
 * Extracts fields from a tile and updates the metadata object with found fields.
 * Note: this function is for tilesets that don't include fields in metadata (most likely saved with older spec.).
 * @param params.remoteTileFormat The format of the remote tile (MVT or PMTiles).
 * @param params.tilesetUrl The URL of the tileset.
 * @param params.metadataUrl The URL of the metadata.
 * @param params.metadata The metadata object containing fields and tile properties.
 */
var getFieldsFromTile = exports.getFieldsFromTile = /*#__PURE__*/function () {
  var _ref5 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(_ref4) {
    var remoteTileFormat, tilesetUrl, metadataUrl, metadata, _metadata$fields, _metadata$bounds, lon, lat, tileIndices, tileSource, tile, updatedFields;
    return _regenerator["default"].wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          remoteTileFormat = _ref4.remoteTileFormat, tilesetUrl = _ref4.tilesetUrl, metadataUrl = _ref4.metadataUrl, metadata = _ref4.metadata;
          _context.prev = 1;
          if (!(tilesetUrl && metadataUrl && metadata && ((_metadata$fields = metadata.fields) === null || _metadata$fields === void 0 ? void 0 : _metadata$fields.length) === 0 && metadata.minZoom && ((_metadata$bounds = metadata.bounds) === null || _metadata$bounds === void 0 ? void 0 : _metadata$bounds.length) === 4)) {
            _context.next = 12;
            break;
          }
          lon = (metadata.bounds[0] + metadata.bounds[2]) / 2;
          lat = (metadata.bounds[1] + metadata.bounds[3]) / 2;
          tileIndices = lonLatToTileIndex(lon, lat, metadata.minZoom);
          tileSource = remoteTileFormat === _constants.RemoteTileFormat.MVT ? _mvt.MVTSource.createDataSource(decodeURIComponent(tilesetUrl), {
            mvt: {
              metadataUrl: decodeURIComponent(metadataUrl)
            }
          }) : _pmtiles.PMTilesSource.createDataSource(tilesetUrl, {});
          _context.next = 9;
          return tileSource.getTileData({
            index: tileIndices
          });
        case 9:
          tile = _context.sent;
          updatedFields = tileToFields(tile).map(function (f) {
            return _objectSpread(_objectSpread({}, f), {}, {
              analyzerType: f.analyzerType || _constants.ALL_FIELD_TYPES.string,
              id: f.id || f.name
            });
          });
          metadata.fields = updatedFields;
        case 12:
          _context.next = 16;
          break;
        case 14:
          _context.prev = 14;
          _context.t0 = _context["catch"](1);
        case 16:
        case "end":
          return _context.stop();
      }
    }, _callee, null, [[1, 14]]);
  }));
  return function getFieldsFromTile(_x) {
    return _ref5.apply(this, arguments);
  };
}();

/**
 * Converts tile features into Kepler fields.
 * @param tile The tile object containing features.
 * @returns An array of Kepler fields derived from the tile's features.
 */
var tileToFields = function tileToFields(tile) {
  var _tile$features;
  if ((tile === null || tile === void 0 || (_tile$features = tile.features) === null || _tile$features === void 0 ? void 0 : _tile$features.length) > 0) {
    var header = Object.keys(tile.features[0].properties);
    var output = tile.features.map(function (f) {
      var obj = {};
      header.forEach(function (columnName) {
        obj[columnName] = f.properties[columnName];
      });
      return obj;
    });
    var fields = (0, _commonUtils.getFieldsFromData)(output, header);
    // extra transformation of strings to numbers for tiles isn't implemented, so use string, not computed types
    return fields.map(function (f) {
      var forceString = (f.type === 'integer' || f.type === 'float') && typeof tile.features[0].properties[f.name] === 'string';
      return _objectSpread(_objectSpread({}, f), {}, {
        analyzerType: forceString ? _typeAnalyzer.DATA_TYPES.STRING : f.analyzerType,
        type: forceString ? 'string' : f.type
      });
    });
  }
  return [];
};

/**
 * Converts longitude, latitude, and zoom level into vector tile indices (x, y, z).
 * @param lon Longitude in degrees, ranging from -180 to 180.
 * @param lat Latitude in degrees, ranging from -90 to 90.
 * @param zoom Zoom level (integer), where higher values provide more detail.
 * @returns Tile indices with x and y coordinates and zoom level z.
 */
function lonLatToTileIndex(lon, lat, zoom) {
  if (lat < -85.0511 || lat > 85.0511) {
    throw new Error('Latitude out of range. Must be between -85.0511 and 85.0511.');
  }
  if (zoom < 0) {
    throw new Error('Zoom level must be a non-negative integer.');
  }

  // 2^zoom (number of tiles per axis at given zoom level)
  var scale = 1 << zoom;
  // Convert longitude to tile X
  var x = Math.floor((lon + 180) / 360 * scale);
  // Convert latitude to tile Y
  var latRad = lat * Math.PI / 180;
  var y = Math.floor((1 - Math.log(Math.tan(latRad) + 1 / Math.cos(latRad)) / Math.PI) / 2 * scale);
  return {
    x: x,
    y: y,
    z: zoom
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdHlwZUFuYWx5emVyIiwicmVxdWlyZSIsIl9kM0FycmF5IiwiX2NvbnNvbGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2xvZGFzaCIsIl9tdnQiLCJfcG10aWxlcyIsIl9jb21tb25VdGlscyIsIl9jb25zdGFudHMiLCJfdXRpbHMiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsInIiLCJlIiwidCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiQXJyYXkiLCJpc0FycmF5IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwibGVuZ3RoIiwiX24iLCJGIiwicyIsIm4iLCJkb25lIiwidmFsdWUiLCJmIiwiVHlwZUVycm9yIiwibyIsImEiLCJ1IiwiY2FsbCIsIm5leHQiLCJfYXJyYXlMaWtlVG9BcnJheSIsInRvU3RyaW5nIiwic2xpY2UiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJmcm9tIiwidGVzdCIsIm93bktleXMiLCJPYmplY3QiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZmlsdGVyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJnZXRMb2FkZXJPcHRpb25zIiwiZXhwb3J0cyIsIm12dCIsIndvcmtlclVybCIsImlzVGlsZURhdGFzZXQiLCJkYXRhc2V0IiwiQm9vbGVhbiIsInR5cGUiLCJEYXRhc2V0VHlwZSIsIlZFQ1RPUl9USUxFIiwiaXNMYXQiLCJudW0iLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImlzTG5nIiwiaXNab29tIiwiZnJvbUFycmF5T3JTdHJpbmciLCJkYXRhIiwic3BsaXQiLCJtYXAiLCJwYXJzZUZsb2F0IiwicGFyc2VDZW50ZXIiLCJjZW50ZXIiLCJyZXN1bHQiLCJwYXJzZUJvdW5kcyIsImJvdW5kcyIsImV2ZXJ5IiwiWF9QQVRUIiwiWV9QQVRUIiwiWl9QQVRUIiwiaXNGdWxseVF1YWxpZmllZFRpbGVVcmwiLCJ0aWxlVXJsIiwiZ2V0VGlsZVVybCIsInZhbGlkYXRlVXJsIiwidW5kZWZpbmVkIiwidXJpUGFydHMiLCJwYXJzZVVyaSIsInByb3RvY29sIiwiaG9zdCIsImNvbmNhdCIsInJlcGxhY2UiLCJUSUxFU0VUX0ZVTkNUSU9OUyIsImdldE1ldGFVcmwiLCJnZXRNZXRhVXJsTWFwYm94IiwicGFyc2VNZXRhZGF0YSIsInBhcnNlTWV0YWRhdGFUaWxlSlNPTiIsImdldE1ldGFVcmxUaXBwZWNhbm9lIiwiZ2V0VGlsZXNldEZ1bmN0aW9ucyIsIlVSTCIsImhvc3RuYW1lIiwiZXJyb3IiLCJwYXJzZVZlY3Rvck1ldGFkYXRhIiwibWV0YWRhdGEiLCJvcHRpb24iLCJfcmVmIiwiX3JlZiR0aWxlVXJsIiwiTUFQQk9YX1VSTF9QQVRUIiwiX3BhcnNlZCRmaWVsZHMiLCJwYXJzZWQiLCJwYXJzZU1ldGFkYXRhVGlwcGVjYW5vZUZyb21EYXRhU291cmNlIiwiZmllbGRzIiwidXJsIiwiYmFzZVVybCIsIl9wbVRpbGVNZXRhZGF0YSR0aWxlaiIsIl9wbVRpbGVNZXRhZGF0YSR0aWxlajIiLCJfdHlwZW9mMiIsImF0dHJpYnV0aW9ucyIsIm1ldGFKc29uIiwibWF4Wm9vbSIsIm1pblpvb20iLCJtdnRNZXRhZGF0YSIsInBtVGlsZU1ldGFkYXRhIiwiSlNPTiIsInBhcnNlIiwiZXJyIiwiYm91bmRpbmdCb3giLCJmbGF0IiwiY2VudGVyWm9vbSIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJzYWZlUGFyc2VGbG9hdCIsImRlc2NyaXB0aW9uIiwidGlsZWpzb24iLCJsYXllcnMiLCJfcG1UaWxlTWV0YWRhdGEkdGlsZWozIiwicG1UaWxlc0xheWVyVG9UaXBwZWNhbm9lTGF5ZXIiLCJjb2xsZWN0QXR0cmlidXRlcyIsImh0bWxBdHRyaWJ1dGlvbiIsInBhcnNlTWV0YUpzb24iLCJpbnB1dCIsImlzTmFOIiwidGlsZXN0YXRzIiwiZ2V0VGltZUFuaW1hdGlvbkRvbWFpbiIsIm1hcHBlZFZhbHVlIiwidGltZVN0ZXBzIiwidW5pcSIsInNvcnQiLCJhc2NlbmRpbmciLCJub3ROdWxsT3JVbmRlZmluZWQiLCJkb21haW4iLCJkdXJhdGlvbiIsImNsYW1wZWQiLCJjbGFtcCIsInBtVGlsZVR5cGVUb0F0dHJNYXAiLCJmbG9hdDMyIiwic3RyaW5nIiwidXRmOCIsIm91dExheWVycyIsIl9pdGVyYXRvciIsIl9zdGVwIiwibGF5ZXIiLCJfcmVmMiIsIl9yZWYyJGZpZWxkcyIsIl9pdGVyYXRvcjIiLCJfc3RlcDIiLCJfcG1GaWVsZCR2YWx1ZXMiLCJwbUZpZWxkIiwiYXR0cmlidXRlIiwiY291bnQiLCJ1bmlxdWVWYWx1ZUNvdW50IiwidmFsdWVzIiwibWluIiwibWF4IiwiYXR0cmlidXRlcyIsImluZGV4ZWRBdHRyaWJ1dGVzIiwiX2l0ZXJhdG9yMyIsIl9zdGVwMyIsIl9yZWYzIiwiX3JlZjMkYXR0cmlidXRlcyIsIl9pdGVyYXRvcjUiLCJfc3RlcDUiLCJhdHRyIiwiZm5hbWUiLCJhdHRyaWJ1dGVUb0ZpZWxkIiwibWVyZ2VBdHRyaWJ1dGVEb21haW4iLCJfaSIsIl9PYmplY3QkZW50cmllcyIsImVudHJpZXMiLCJfT2JqZWN0JGVudHJpZXMkX2kiLCJfc2xpY2VkVG9BcnJheTIiLCJhdHRycyIsIl9wYXJzZUluZGV4ZWRGaWVsZCIsInBhcnNlSW5kZXhlZEZpZWxkIiwiaW5kZXhlZEZpZWxkIiwidW5pZGVudGlmaWVkIiwiX2l0ZXJhdG9yNCIsIl9zdGVwNCIsInVuaWRlbnRpZmllZEF0dHIiLCJnZXRJbmRleEtleUZyb21GaWVsZE5hbWUiLCJmaWVsZCIsIl9pdGVyYXRvcjYiLCJfc3RlcDYiLCJmaWVsZE5hbWUiLCJpbmRleEtleSIsImFuYWx5emVkVHlwZSIsImNvbnRhaW5WYWxpZFRpbWUiLCJpZCIsImluZGV4QnkiLCJmb3JtYXQiLCJhbmFseXplclR5cGVUb0ZpZWxkVHlwZSIsImZpZWxkVHMiLCJlcG9jaCIsInRpbWVUb1VuaXhNaWxsaSIsIkFMTF9GSUVMRF9UWVBFUyIsInRpbWVzdGFtcCIsInRpbWVEb21haW4iLCJjb21wYXJlIiwibnVtMSIsIm51bTIiLCJvcGVyYXRvciIsIk1hdGgiLCJOYU4iLCJnZXRGaWx0ZXJQcm9wcyIsImZpZWxkVHlwZSIsInJlYWwiLCJpbnRlZ2VyIiwiX2dldEF0dHJpYnV0ZURvbWFpbiIsImdldEF0dHJpYnV0ZURvbWFpbiIsIl9nZXRBdHRyaWJ1dGVEb21haW4yIiwiZGlmZiIsInN0ZXAiLCJnZXROdW1lcmljU3RlcFNpemUiLCJmb3JtYXROdW1iZXJCeVN0ZXAiLCJmaWx0ZXJQcm9wcyIsIkZJTFRFUl9UWVBFUyIsInJhbmdlIiwidHlwZU9wdGlvbnMiLCJncHUiLCJzZWxlY3QiLCJtdWx0aVNlbGVjdCIsImZpZWxkVHlwZXMiLCJhdHRyaWJ1dGVUeXBlVG9GaWVsZFR5cGUiLCJfZmllbGQkbWV0YWRhdGEiLCJfZmllbGQkZmlsdGVyUHJvcHMiLCJhdHRyVHlwZU1hcCIsIm51bWJlciIsImFuYWx5emVyVHlwZSIsIkRBVEFfVFlQRVMiLCJGTE9BVCIsIm51bWVyaWMiLCJTVFJJTkciLCJ2YWNoYXIiLCJJTlQiLCJpbnQ0IiwiQk9PTEVBTiIsImJvb2wiLCJhVHlwZSIsInRvTG93ZXJDYXNlIiwiQ29uc29sZSIsIndhcm4iLCJtYXRjaERhdGFzZXRUeXBlIiwiY29uZmlnIiwiZGF0YUlkIiwic3VwcG9ydGVkRGF0YXNldFR5cGVzIiwiaW5jbHVkZXMiLCJnZXRGaWVsZHNGcm9tVGlsZSIsIl9yZWY1IiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3JlZ2VuZXJhdG9yIiwibWFyayIsIl9jYWxsZWUiLCJfcmVmNCIsInJlbW90ZVRpbGVGb3JtYXQiLCJ0aWxlc2V0VXJsIiwibWV0YWRhdGFVcmwiLCJfbWV0YWRhdGEkZmllbGRzIiwiX21ldGFkYXRhJGJvdW5kcyIsImxvbiIsImxhdCIsInRpbGVJbmRpY2VzIiwidGlsZVNvdXJjZSIsInRpbGUiLCJ1cGRhdGVkRmllbGRzIiwid3JhcCIsIl9jYWxsZWUkIiwiX2NvbnRleHQiLCJwcmV2IiwibG9uTGF0VG9UaWxlSW5kZXgiLCJSZW1vdGVUaWxlRm9ybWF0IiwiTVZUIiwiTVZUU291cmNlIiwiY3JlYXRlRGF0YVNvdXJjZSIsImRlY29kZVVSSUNvbXBvbmVudCIsIlBNVGlsZXNTb3VyY2UiLCJnZXRUaWxlRGF0YSIsImluZGV4Iiwic2VudCIsInRpbGVUb0ZpZWxkcyIsInQwIiwic3RvcCIsIl94IiwiX3RpbGUkZmVhdHVyZXMiLCJmZWF0dXJlcyIsImhlYWRlciIsInByb3BlcnRpZXMiLCJvdXRwdXQiLCJvYmoiLCJjb2x1bW5OYW1lIiwiZ2V0RmllbGRzRnJvbURhdGEiLCJmb3JjZVN0cmluZyIsIkFOQUxZWkVSX0RBVEFfVFlQRVMiLCJ6b29tIiwiRXJyb3IiLCJzY2FsZSIsIngiLCJmbG9vciIsImxhdFJhZCIsIlBJIiwieSIsImxvZyIsInRhbiIsImNvcyIsInoiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdGlsZXNldC92ZWN0b3ItdGlsZS11dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQge0RBVEFfVFlQRVMgYXMgQU5BTFlaRVJfREFUQV9UWVBFU30gZnJvbSAndHlwZS1hbmFseXplcic7XG5pbXBvcnQge2FzY2VuZGluZ30gZnJvbSAnZDMtYXJyYXknO1xuaW1wb3J0IENvbnNvbGUgZnJvbSAnZ2xvYmFsL2NvbnNvbGUnO1xuaW1wb3J0IHVuaXEgZnJvbSAnbG9kYXNoLnVuaXEnO1xuaW1wb3J0IHtEQVRBX1RZUEVTfSBmcm9tICd0eXBlLWFuYWx5emVyJztcblxuaW1wb3J0IHtNVlRTb3VyY2UsIFRpbGVKU09OfSBmcm9tICdAbG9hZGVycy5nbC9tdnQnO1xuaW1wb3J0IHtQTVRpbGVzU291cmNlLCBQTVRpbGVzTWV0YWRhdGF9IGZyb20gJ0Bsb2FkZXJzLmdsL3BtdGlsZXMnO1xuXG5pbXBvcnQge1xuICBhbmFseXplclR5cGVUb0ZpZWxkVHlwZSxcbiAgY29udGFpblZhbGlkVGltZSxcbiAgbm90TnVsbG9yVW5kZWZpbmVkIGFzIG5vdE51bGxPclVuZGVmaW5lZCxcbiAgcGFyc2VVcmksXG4gIGdldEZpZWxkc0Zyb21EYXRhXG59IGZyb20gJ0BrZXBsZXIuZ2wvY29tbW9uLXV0aWxzJztcbmltcG9ydCB7RGF0YXNldFR5cGUsIEFMTF9GSUVMRF9UWVBFUywgRklMVEVSX1RZUEVTLCBSZW1vdGVUaWxlRm9ybWF0fSBmcm9tICdAa2VwbGVyLmdsL2NvbnN0YW50cyc7XG5cbmltcG9ydCB7RmVhdHVyZSwgRmllbGQgYXMgS2VwbGVyRmllbGQsIEtlcGxlckxheWVyfSBmcm9tICdAa2VwbGVyLmdsL3R5cGVzJztcbmltcG9ydCB7Y2xhbXAsIGZvcm1hdE51bWJlckJ5U3RlcCwgZ2V0TnVtZXJpY1N0ZXBTaXplLCB0aW1lVG9Vbml4TWlsbGl9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuXG5pbXBvcnQge1xuICBGaWx0ZXJQcm9wcyxcbiAgTnVtZXJpY0ZpZWxkRmlsdGVyUHJvcHMsXG4gIEJvb2xlYW5GaWVsZEZpbHRlclByb3BzLFxuICBTdHJpbmdGaWVsZEZpbHRlclByb3BzLFxuICBkZWZhdWx0IGFzIEtlcGxlckRhdGFzZXRcbn0gZnJvbSAnLi4va2VwbGVyLXRhYmxlJztcblxuZXhwb3J0IGNvbnN0IGdldExvYWRlck9wdGlvbnMgPSAoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgbXZ0OiB7XG4gICAgICB3b3JrZXJVcmw6IGBodHRwczovL3VucGtnLmNvbS9AbG9hZGVycy5nbC9tdnQvZGlzdC9tdnQtd29ya2VyLmpzYFxuICAgIH1cbiAgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RpbGVEYXRhc2V0KGRhdGFzZXQ6IEtlcGxlckRhdGFzZXQgfCB7dHlwZTogc3RyaW5nfSk6IGJvb2xlYW4ge1xuICByZXR1cm4gQm9vbGVhbihkYXRhc2V0Py50eXBlID09PSBEYXRhc2V0VHlwZS5WRUNUT1JfVElMRSk7XG59XG5cbnR5cGUgVmVjdG9yVGlsZUZpZWxkID0ge1xuICBhbmFseXplclR5cGU6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBpZDogc3RyaW5nO1xuICBmb3JtYXQ6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBmaWx0ZXJQcm9wcz86IEZpbHRlclByb3BzO1xufTtcblxuZXhwb3J0IHR5cGUgVmVjdG9yVGlsZU1ldGFkYXRhID0ge1xuICBhdHRyaWJ1dGlvbnM/OiB1bmtub3duW107XG4gIG1ldGFKc29uOiBhbnkgfCBudWxsO1xuICBib3VuZHM6IG51bWJlcltdIHwgbnVsbDtcbiAgY2VudGVyOiBudW1iZXJbXSB8IG51bGw7XG4gIG1heFpvb206IG51bWJlciB8IG51bGw7XG4gIG1pblpvb206IG51bWJlciB8IG51bGw7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBmaWVsZHM6IFZlY3RvclRpbGVGaWVsZFtdO1xufTtcblxudHlwZSBUaWxlc2V0TWV0YWRhdGEgPSBWZWN0b3JUaWxlTWV0YWRhdGE7XG5cbmV4cG9ydCB0eXBlIFRpcHBlY2Fub2VMYXllckF0dHJpYnV0ZSA9IHtcbiAgYXR0cmlidXRlPzogc3RyaW5nO1xuICB0eXBlPzogc3RyaW5nO1xuICBtaW4/OiBudW1iZXI7XG4gIG1heD86IG51bWJlcjtcbiAgdmFsdWVzOiBzdHJpbmdbXSB8IG51bWJlcltdO1xufTtcblxudHlwZSBUaXBwZWNhbm9lTGF5ZXIgPSB7XG4gIGF0dHJpYnV0ZXM/OiBUaXBwZWNhbm9lTGF5ZXJBdHRyaWJ1dGVbXTtcbn07XG50eXBlIFRpbGVzZXRGdW5jdGlvbiA9IHtcbiAgZ2V0TWV0YVVybDogKHM6IHN0cmluZykgPT4gc3RyaW5nIHwgbnVsbDtcbiAgcGFyc2VNZXRhZGF0YTogKGQ6IGFueSwgb3B0aW9ucz86IGFueSkgPT4gVGlsZXNldE1ldGFkYXRhIHwgbnVsbDtcbn07XG4vLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L3RpbGVqc29uLXNwZWMvdHJlZS9tYXN0ZXIvMi4yLjBcbmZ1bmN0aW9uIGlzTGF0KG51bTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobnVtKSAmJiBudW0gPD0gOTAgJiYgbnVtID49IC05MDtcbn1cbmZ1bmN0aW9uIGlzTG5nKG51bTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobnVtKSAmJiBudW0gPD0gMTgwICYmIG51bSA+PSAtMTgwO1xufVxuZnVuY3Rpb24gaXNab29tKG51bTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobnVtKSAmJiBudW0gPj0gMCAmJiBudW0gPD0gMjI7XG59XG5mdW5jdGlvbiBmcm9tQXJyYXlPclN0cmluZyhkYXRhOiBzdHJpbmcgfCBudW1iZXJbXSk6IG51bWJlcltdIHwgbnVsbCB7XG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZGF0YS5zcGxpdCgnLCcpLm1hcChwYXJzZUZsb2F0KTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ2VudGVyKGNlbnRlcjogc3RyaW5nIHwgbnVtYmVyW10pOiBudW1iZXJbXSB8IG51bGwge1xuICAvLyBzdXBwb3J0ZWQgZm9ybWF0c1xuICAvLyBzdHJpbmc6IFwiLTk2LjY1NzcxNSw0MC4xMjYxMjcsLTkwLjE0MDA2MSw0My41MTY2ODlcIixcbiAgLy8gYXJyYXk6IFstOTEuNTA1MTI3LDQxLjYxNTQ0MiwxNF1cbiAgY29uc3QgcmVzdWx0ID0gZnJvbUFycmF5T3JTdHJpbmcoY2VudGVyKTtcbiAgaWYgKFxuICAgIEFycmF5LmlzQXJyYXkocmVzdWx0KSAmJlxuICAgIHJlc3VsdC5sZW5ndGggPT09IDMgJiZcbiAgICBpc0xuZyhyZXN1bHRbMF0pICYmXG4gICAgaXNMYXQocmVzdWx0WzFdKSAmJlxuICAgIGlzWm9vbShyZXN1bHRbMl0pXG4gICkge1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogYm91bmRzIHNob3VsZCBiZSBbbWluTG5nLCBtaW5MYXQsIG1heExuZywgbWF4TGF0XVxuICogQHBhcmFtIHsqfSBib3VuZHNcbiAqL1xuZnVuY3Rpb24gcGFyc2VCb3VuZHMoYm91bmRzOiBzdHJpbmcgfCBudW1iZXJbXSk6IG51bWJlcltdIHwgbnVsbCB7XG4gIC8vIHN1cHBvcnRlZCBmb3JtYXRzXG4gIC8vIHN0cmluZzogXCItOTYuNjU3NzE1LDQwLjEyNjEyNywtOTAuMTQwMDYxLDQzLjUxNjY4OVwiLFxuICAvLyBhcnJheTogWyAtMTgwLCAtODUuMDUxMTI4Nzc5ODA2NTksIDE4MCwgODUuMDUxMTI4Nzc5ODA2NiBdXG4gIGNvbnN0IHJlc3VsdCA9IGZyb21BcnJheU9yU3RyaW5nKGJvdW5kcyk7XG4gIC8vIHZhbGlkYXRlIGJvdW5kc1xuICBpZiAoXG4gICAgQXJyYXkuaXNBcnJheShyZXN1bHQpICYmXG4gICAgcmVzdWx0Lmxlbmd0aCA9PT0gNCAmJlxuICAgIFtyZXN1bHRbMF0sIHJlc3VsdFsyXV0uZXZlcnkoaXNMbmcpICYmXG4gICAgW3Jlc3VsdFsxXSwgcmVzdWx0WzNdXS5ldmVyeShpc0xhdClcbiAgKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuY29uc3QgWF9QQVRUID0gL1xce3hcXH0vO1xuY29uc3QgWV9QQVRUID0gL1xce3lcXH0vO1xuY29uc3QgWl9QQVRUID0gL1xce3pcXH0vO1xuXG5mdW5jdGlvbiBpc0Z1bGx5UXVhbGlmaWVkVGlsZVVybCh0aWxlVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIFhfUEFUVC50ZXN0KHRpbGVVcmwpICYmIFlfUEFUVC50ZXN0KHRpbGVVcmwpICYmIFpfUEFUVC50ZXN0KHRpbGVVcmwpO1xufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSB0aWxlIFVSTFxuICogQHBhcmFtICB7c3RyaW5nfSB0aWxlVXJsIEluaXRpYWwgdGlsZSBVUkwsIHdoaWNoIG1heSBiZSBlaXRoZXIgdGhlIHJvb3QgVVJMIGZvciB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlc2V0IG9yIGEgZnVsbHkgcXVhbGlmaWVkIHRlbXBsYXRlXG4gKiBAcGFyYW0gIHtmdW5jdGlvbn0gdmFsaWRhdGVVcmwgZnVuY3Rpb24gdG8gdmFsaWRhdGUgdGlsZSBVUkxcbiAqIEByZXR1cm4ge3N0cmluZ3xudWxsfSAgICBGdWxseSBxdWFsaWZpZWQgdGlsZSBVUkwgdGVtcGxhdGUsIG9yIG51bGwgaWYgaW5wdXQgZG9lcyBub3RcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlYXIgdG8gYmUgYSB2YWxpZCBVUkxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbGVVcmwoXG4gIHRpbGVVcmw6IHN0cmluZyxcbiAgdmFsaWRhdGVVcmw6IChzOiBzdHJpbmcpID0+IGJvb2xlYW4gPSBpc0Z1bGx5UXVhbGlmaWVkVGlsZVVybFxuKTogc3RyaW5nIHwgbnVsbCB7XG4gIC8vIENoZWNrIGZvciBhIHZhbGlkIFVSTC4gSWRlYWxseSB3ZSdkIGhhdmUgYSBzaW1wbGUgbWV0aG9kIGhlcmUuXG4gIGNvbnN0IHVyaVBhcnRzID0gcGFyc2VVcmkodGlsZVVybCk7XG4gIGlmICghdXJpUGFydHMucHJvdG9jb2wgfHwgIXVyaVBhcnRzLmhvc3QpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAodmFsaWRhdGVVcmwodGlsZVVybCkpIHtcbiAgICByZXR1cm4gdGlsZVVybDtcbiAgfVxuICByZXR1cm4gYCR7dGlsZVVybC5yZXBsYWNlKC9cXC8kLywgJycpfS97en0ve3h9L3t5fS5wYmZgO1xufVxuXG4vKipcbiAqIE1hcCBvZiB1dGlsIGZ1bmN0aW9ucyBmb3IgZGlmZmVyZW50IHRpbGVzZXQgdHlwZXMsIGtleWVkIGJ5IGhvc3RcbiAqL1xuY29uc3QgVElMRVNFVF9GVU5DVElPTlM6IHtba2V5OiBzdHJpbmddOiBUaWxlc2V0RnVuY3Rpb259ID0ge1xuICAnYXBpLm1hcGJveC5jb20nOiB7XG4gICAgZ2V0TWV0YVVybDogZ2V0TWV0YVVybE1hcGJveCxcbiAgICBwYXJzZU1ldGFkYXRhOiBwYXJzZU1ldGFkYXRhVGlsZUpTT05cbiAgfSxcbiAgZGVmYXVsdDoge1xuICAgIGdldE1ldGFVcmw6IGdldE1ldGFVcmxUaXBwZWNhbm9lLFxuICAgIHBhcnNlTWV0YWRhdGE6IHBhcnNlTWV0YWRhdGFUaWxlSlNPTlxuICB9XG59O1xuXG5mdW5jdGlvbiBnZXRUaWxlc2V0RnVuY3Rpb25zKHRpbGVVcmw6IHN0cmluZyB8IG51bGwpOiBUaWxlc2V0RnVuY3Rpb24ge1xuICBsZXQgaG9zdCA9ICcnO1xuICB0cnkge1xuICAgIGhvc3QgPSBuZXcgVVJMKHRpbGVVcmwgfHwgJycpLmhvc3RuYW1lO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIGRvIG5vdGhpbmdcbiAgfVxuXG4gIHJldHVybiBUSUxFU0VUX0ZVTkNUSU9OU1tob3N0XSB8fCBUSUxFU0VUX0ZVTkNUSU9OUy5kZWZhdWx0O1xufVxuXG4vKipcbiAqIEdldCB0aGUgbWV0YWRhdGEgVVJMIGZvciBhIGdpdmVuIHRpbGVzZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1ldGFVcmwodGlsZVVybDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIHJldHVybiBnZXRUaWxlc2V0RnVuY3Rpb25zKHRpbGVVcmwpLmdldE1ldGFVcmwodGlsZVVybCk7XG59XG50eXBlIFBhcnNlTWV0YWRhdGFPcHRpb24gPSB7XG4gIHRpbGVVcmw/OiBzdHJpbmcgfCBudWxsO1xufTtcbi8qKlxuICogUGFyc2UgdGhlIG1ldGFkYXRhIGZvciBhIGdpdmVuIHRpbGVzZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVmVjdG9yTWV0YWRhdGEoXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzXG4gIG1ldGFkYXRhOiBQTVRpbGVzTWV0YWRhdGEgfCBUaWxlSlNPTixcbiAgb3B0aW9uPzogUGFyc2VNZXRhZGF0YU9wdGlvblxuKTogVGlsZXNldE1ldGFkYXRhIHwgbnVsbCB7XG4gIGNvbnN0IHt0aWxlVXJsID0gJyd9ID0gb3B0aW9uIHx8IHt9O1xuICByZXR1cm4gZ2V0VGlsZXNldEZ1bmN0aW9ucyh0aWxlVXJsKS5wYXJzZU1ldGFkYXRhKG1ldGFkYXRhKTtcbn1cblxuY29uc3QgTUFQQk9YX1VSTF9QQVRUID0gL1xcL1xce3pcXH1cXC9cXHt4XFx9XFwvXFx7eVxcfVxcLm12dC87XG5cbmZ1bmN0aW9uIGdldE1ldGFVcmxNYXBib3godGlsZVVybCA9ICcnKTogc3RyaW5nIHtcbiAgcmV0dXJuIHRpbGVVcmwucmVwbGFjZShNQVBCT1hfVVJMX1BBVFQsICcuanNvbicpO1xufVxuXG5mdW5jdGlvbiBwYXJzZU1ldGFkYXRhVGlsZUpTT04obWV0YWRhdGE6IFBNVGlsZXNNZXRhZGF0YSB8IFRpbGVKU09OKTogVGlsZXNldE1ldGFkYXRhIHwgbnVsbCB7XG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlTWV0YWRhdGFUaXBwZWNhbm9lRnJvbURhdGFTb3VyY2UobWV0YWRhdGEpO1xuICBpZiAoIXBhcnNlZCkgcmV0dXJuIG51bGw7XG4gIC8vIEZpZWxkcyBhbHJlYWR5IHBhcnNlZCBmcm9tIGBqc29uYCBwcm9wZXJ0eVxuICBpZiAocGFyc2VkLmZpZWxkcz8ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHBhcnNlZDtcbiAgfVxuXG4gIHJldHVybiBwYXJzZWQ7XG59XG5cbmZ1bmN0aW9uIGdldE1ldGFVcmxUaXBwZWNhbm9lKHRpbGVVcmwpIHtcbiAgY29uc3QgdXJsID0gZ2V0VGlsZVVybCh0aWxlVXJsKTtcbiAgaWYgKCF1cmwpIHJldHVybiBudWxsO1xuICAvLyBhc3N1bWVzIHRoZSBzdHJ1Y3R1cmUgPHVybF9iYXNlPi97en0uLi5cbiAgY29uc3QgYmFzZVVybCA9IHVybC5zcGxpdChaX1BBVFQpWzBdLnJlcGxhY2UoL1xcLyQvLCAnJyk7XG4gIHJldHVybiBgJHtiYXNlVXJsfS9tZXRhZGF0YS5qc29uYDtcbn1cblxuLyoqXG4gKiBTcGVjaWFsIHBhcnNpbmcgZm9yIG1ldGFkYXRhIHJldHVybmVkIGJ5IE1WVFNvdXJjZSBhbmQgUE1UaWxlc1NvdXJjZS5cbiAqIEBwYXJhbSBtZXRhZGF0YSBUaWxlc2V0IG1ldGFkYXRhIHBhcnNlZCBieSBhIERhdGFTb3VjZVxuICogQHJldHVybnMgTWV0YWRhdGEgaW4gS2VwbGVyLWZyaWVuZGx5IGZvcm1hdC5cbiAqL1xuZnVuY3Rpb24gcGFyc2VNZXRhZGF0YVRpcHBlY2Fub2VGcm9tRGF0YVNvdXJjZShcbiAgbWV0YWRhdGE6IFBNVGlsZXNNZXRhZGF0YSB8IFRpbGVKU09OIHwgbnVsbFxuKTogVGlsZXNldE1ldGFkYXRhIHwgbnVsbCB7XG4gIGlmICghbWV0YWRhdGEgfHwgdHlwZW9mIG1ldGFkYXRhICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbGV0IHJlc3VsdDogVGlsZXNldE1ldGFkYXRhID0ge1xuICAgIGF0dHJpYnV0aW9uczogW10sXG4gICAgbWV0YUpzb246IG51bGwsXG4gICAgYm91bmRzOiBudWxsLFxuICAgIGNlbnRlcjogbnVsbCxcbiAgICBtYXhab29tOiBudWxsLFxuICAgIG1pblpvb206IG51bGwsXG4gICAgZmllbGRzOiBbXVxuICB9O1xuXG4gIGNvbnN0IG12dE1ldGFkYXRhID0gbWV0YWRhdGEgYXMgVGlsZUpTT047XG4gIGNvbnN0IHBtVGlsZU1ldGFkYXRhID0gbWV0YWRhdGEgYXMgUE1UaWxlc01ldGFkYXRhO1xuXG4gIC8vIHRyeSB0byBwYXJzZSBtZXRhSnNvblxuICBpZiAodHlwZW9mIG12dE1ldGFkYXRhLm1ldGFKc29uID09PSAnc3RyaW5nJykge1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQubWV0YUpzb24gPSBKU09OLnBhcnNlKG12dE1ldGFkYXRhLm1ldGFKc29uKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIG12dE1ldGFkYXRhLm1ldGFKc29uID09PSAnb2JqZWN0Jykge1xuICAgIHJlc3VsdC5tZXRhSnNvbiA9IG12dE1ldGFkYXRhLm1ldGFKc29uO1xuICB9XG5cbiAgcmVzdWx0LmJvdW5kcyA9IHBhcnNlQm91bmRzKFxuICAgIEFycmF5LmlzQXJyYXkobWV0YWRhdGEuYm91bmRpbmdCb3gpID8gbWV0YWRhdGEuYm91bmRpbmdCb3guZmxhdCgpIDogJydcbiAgKTtcblxuICAvLyBQTVRpbGVTb3VyY2UgaGFzIGNlbnRlclpvb20gYW5kIGNlbnRlciBbbG9uLCBsYXRdLCBNVlRTb3VyY2UgLSBbbG9uLCBsYXQsIHpvb21dXG4gIGNvbnN0IGNlbnRlciA9XG4gICAgcG1UaWxlTWV0YWRhdGEuY2VudGVyWm9vbSAhPT0gdW5kZWZpbmVkICYmIEFycmF5LmlzQXJyYXkobWV0YWRhdGEuY2VudGVyKVxuICAgICAgPyBbLi4ubWV0YWRhdGEuY2VudGVyLCBwbVRpbGVNZXRhZGF0YS5jZW50ZXJab29tXVxuICAgICAgOiBtZXRhZGF0YS5jZW50ZXI7XG4gIHJlc3VsdC5jZW50ZXIgPSBwYXJzZUNlbnRlcihjZW50ZXIgfHwgJycpO1xuXG4gIHJlc3VsdC5tYXhab29tID0gc2FmZVBhcnNlRmxvYXQobWV0YWRhdGEubWF4Wm9vbSk7XG4gIHJlc3VsdC5taW5ab29tID0gc2FmZVBhcnNlRmxvYXQobWV0YWRhdGEubWluWm9vbSk7XG4gIHJlc3VsdC5uYW1lID0gbWV0YWRhdGEubmFtZSB8fCAnJztcbiAgcmVzdWx0LmRlc2NyaXB0aW9uID0gbXZ0TWV0YWRhdGEuZGVzY3JpcHRpb24gfHwgcG1UaWxlTWV0YWRhdGEudGlsZWpzb24/LmRlc2NyaXB0aW9uIHx8ICcnO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KHBtVGlsZU1ldGFkYXRhLnRpbGVqc29uPy5sYXllcnMpKSB7XG4gICAgY29uc3QgbGF5ZXJzID0gcG1UaWxlc0xheWVyVG9UaXBwZWNhbm9lTGF5ZXIocG1UaWxlTWV0YWRhdGEudGlsZWpzb24/LmxheWVycyk7XG4gICAgcmVzdWx0LmZpZWxkcyA9IGNvbGxlY3RBdHRyaWJ1dGVzKGxheWVycyk7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtdnRNZXRhZGF0YS5sYXllcnMpKSB7XG4gICAgY29uc3QgbGF5ZXJzID0gcG1UaWxlc0xheWVyVG9UaXBwZWNhbm9lTGF5ZXIobXZ0TWV0YWRhdGEubGF5ZXJzKTtcbiAgICByZXN1bHQuZmllbGRzID0gY29sbGVjdEF0dHJpYnV0ZXMobGF5ZXJzKTtcbiAgfVxuXG4gIHJlc3VsdCA9IHtcbiAgICAuLi5yZXN1bHQsXG4gICAgYXR0cmlidXRpb25zOlxuICAgICAgcG1UaWxlTWV0YWRhdGEuYXR0cmlidXRpb25zIHx8XG4gICAgICAobXZ0TWV0YWRhdGEuaHRtbEF0dHJpYnV0aW9uID8gW212dE1ldGFkYXRhLmh0bWxBdHRyaWJ1dGlvbl0gOiB1bmRlZmluZWQpIHx8XG4gICAgICBbXSxcbiAgICAuLi5wYXJzZU1ldGFKc29uKHJlc3VsdC5tZXRhSnNvbilcbiAgfTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBzYWZlUGFyc2VGbG9hdChpbnB1dDogdW5rbm93bik6IG51bWJlciB8IG51bGwge1xuICBjb25zdCByZXN1bHQgPVxuICAgIHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgPyBwYXJzZUZsb2F0KGlucHV0KSA6IHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgPyBpbnB1dCA6IG51bGw7XG4gIHJldHVybiByZXN1bHQgPT09IG51bGwgfHwgaXNOYU4ocmVzdWx0KSA/IG51bGwgOiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTWV0YUpzb24obWV0YUpzb246IGFueSk6IHtmaWVsZHM6IFZlY3RvclRpbGVGaWVsZFtdfSB8IG51bGwge1xuICBpZiAoIW1ldGFKc29uIHx8IHR5cGVvZiBtZXRhSnNvbiAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChtZXRhSnNvbi50aWxlc3RhdHMgJiYgQXJyYXkuaXNBcnJheShtZXRhSnNvbi50aWxlc3RhdHMubGF5ZXJzKSkge1xuICAgIC8vIHdlIGFyZSBpbiBsdWNrIVxuICAgIHJldHVybiB7ZmllbGRzOiBjb2xsZWN0QXR0cmlidXRlcyhtZXRhSnNvbi50aWxlc3RhdHMubGF5ZXJzKX07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldFRpbWVBbmltYXRpb25Eb21haW4obWFwcGVkVmFsdWU6IG51bWJlcltdKToge1xuICBkb21haW46IG51bWJlcltdO1xuICB0aW1lU3RlcHM6IG51bWJlcltdO1xuICBtYXBwZWRWYWx1ZTogbnVtYmVyW107XG4gIGR1cmF0aW9uOiBudW1iZXI7XG59IHtcbiAgY29uc3QgdGltZVN0ZXBzID0gdW5pcShtYXBwZWRWYWx1ZSkuc29ydChhc2NlbmRpbmcpLmZpbHRlcihub3ROdWxsT3JVbmRlZmluZWQpO1xuXG4gIGNvbnN0IGRvbWFpbiA9IFt0aW1lU3RlcHNbMF0sIHRpbWVTdGVwc1t0aW1lU3RlcHMubGVuZ3RoIC0gMV1dO1xuXG4gIC8vIGlmIHRha3MgMTAgKiAxMDAwIG1zIHRvIGZpbmlzaCB0aGUgZW50aXJlIGFuaW1hdGlvblxuICBjb25zdCBkdXJhdGlvbiA9IDEwMDAwIC8gdGltZVN0ZXBzLmxlbmd0aDtcbiAgY29uc3QgY2xhbXBlZCA9IGNsYW1wKFsxMDAsIDIwMDBdLCBkdXJhdGlvbik7XG5cbiAgcmV0dXJuIHtkb21haW4sIHRpbWVTdGVwcywgZHVyYXRpb246IGNsYW1wZWQsIG1hcHBlZFZhbHVlfTtcbn1cblxuY29uc3QgcG1UaWxlVHlwZVRvQXR0ck1hcCA9IHtcbiAgZmxvYXQzMjogJ251bWJlcicsXG4gIHN0cmluZzogJ3N0cmluZycsXG4gIHV0Zjg6ICdzdHJpbmcnLFxuICBpbnQ6ICdpbnQnLFxuICBib29sZWFuOiAnYm9vbGVhbidcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtIFRpbGVKU09OWydsYXllcnMnXSBiYWNrIHRvIFRpcHBlY2Fub2VMYXllclxuICovXG5mdW5jdGlvbiBwbVRpbGVzTGF5ZXJUb1RpcHBlY2Fub2VMYXllcihsYXllcnM6IFRpbGVKU09OWydsYXllcnMnXSk6IFRpcHBlY2Fub2VMYXllcltdIHtcbiAgaWYgKCFsYXllcnMpIHJldHVybiBbXTtcblxuICBjb25zdCBvdXRMYXllcnM6IFRpcHBlY2Fub2VMYXllcltdID0gW107XG4gIGZvciAoY29uc3QgbGF5ZXIgb2YgbGF5ZXJzKSB7XG4gICAgY29uc3Qge2ZpZWxkcyA9IFtdfSA9IGxheWVyIHx8IHt9O1xuICAgIGZvciAoY29uc3QgcG1GaWVsZCBvZiBmaWVsZHMpIHtcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IHtcbiAgICAgICAgYXR0cmlidXRlOiBwbUZpZWxkLm5hbWUsXG4gICAgICAgIHR5cGU6IHBtVGlsZVR5cGVUb0F0dHJNYXBbcG1GaWVsZC50eXBlXSxcbiAgICAgICAgY291bnQ6IHBtRmllbGQudW5pcXVlVmFsdWVDb3VudCxcbiAgICAgICAgdmFsdWVzOiAocG1GaWVsZC52YWx1ZXMgPz8gW10pIGFzIG51bWJlcltdIHwgc3RyaW5nW10sXG4gICAgICAgIG1pbjogcG1GaWVsZC5taW4sXG4gICAgICAgIG1heDogcG1GaWVsZC5tYXhcbiAgICAgIH07XG5cbiAgICAgIG91dExheWVycy5wdXNoKHtcbiAgICAgICAgYXR0cmlidXRlczogW2F0dHJpYnV0ZV1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0TGF5ZXJzO1xufVxuXG5mdW5jdGlvbiBjb2xsZWN0QXR0cmlidXRlcyhsYXllcnM6IFRpcHBlY2Fub2VMYXllcltdID0gW10pOiBWZWN0b3JUaWxlRmllbGRbXSB7XG4gIGNvbnN0IGZpZWxkcyA9IHt9O1xuICBjb25zdCBpbmRleGVkQXR0cmlidXRlczoge1trZXk6IHN0cmluZ106IFRpcHBlY2Fub2VMYXllckF0dHJpYnV0ZVtdfSA9IHt9O1xuXG4gIGZvciAoY29uc3QgbGF5ZXIgb2YgbGF5ZXJzKSB7XG4gICAgY29uc3Qge2F0dHJpYnV0ZXMgPSBbXX0gPSBsYXllciB8fCB7fTtcbiAgICBmb3IgKGNvbnN0IGF0dHIgb2YgYXR0cmlidXRlcykge1xuICAgICAgY29uc3QgbmFtZSA9IGF0dHIuYXR0cmlidXRlO1xuICAgICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWRlcHRoXG4gICAgICAgIGlmIChuYW1lLnNwbGl0KCd8JykubGVuZ3RoID4gMSkge1xuICAgICAgICAgIC8vIGluZGV4ZWQgZmllbGRcbiAgICAgICAgICBjb25zdCBmbmFtZSA9IG5hbWUuc3BsaXQoJ3wnKVswXTtcbiAgICAgICAgICBpbmRleGVkQXR0cmlidXRlc1tmbmFtZV0gPSBpbmRleGVkQXR0cmlidXRlc1tmbmFtZV0gfHwgW107XG4gICAgICAgICAgaW5kZXhlZEF0dHJpYnV0ZXNbZm5hbWVdLnB1c2goYXR0cik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWZpZWxkc1tuYW1lXSkge1xuICAgICAgICAgIGZpZWxkc1tuYW1lXSA9IGF0dHJpYnV0ZVRvRmllbGQoYXR0cik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWVyZ2VBdHRyaWJ1dGVEb21haW4oZmllbGRzW25hbWVdLCBhdHRyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIHBhcnNlIGluZGV4ZWQgYXR0cmlidXRlLCBhbmQgcHV0IGluZGV4IGtleSB1bmlkZW50aWZpZWQgYmFjayBhcyBub3JtYWwgZmllbGRcbiAgZm9yIChjb25zdCBbbmFtZSwgYXR0cnNdIG9mIE9iamVjdC5lbnRyaWVzKGluZGV4ZWRBdHRyaWJ1dGVzKSkge1xuICAgIGNvbnN0IHtpbmRleGVkRmllbGQsIHVuaWRlbnRpZmllZH0gPSBwYXJzZUluZGV4ZWRGaWVsZChuYW1lLCBhdHRycyk7XG4gICAgZmllbGRzW2luZGV4ZWRGaWVsZC5uYW1lXSA9IGluZGV4ZWRGaWVsZDtcbiAgICBmb3IgKGNvbnN0IHVuaWRlbnRpZmllZEF0dHIgb2YgdW5pZGVudGlmaWVkKSB7XG4gICAgICBpZiAodW5pZGVudGlmaWVkQXR0ci5hdHRyaWJ1dGUpIHtcbiAgICAgICAgZmllbGRzW3VuaWRlbnRpZmllZEF0dHIuYXR0cmlidXRlXSA9XG4gICAgICAgICAgZmllbGRzW3VuaWRlbnRpZmllZEF0dHIuYXR0cmlidXRlXSB8fCBhdHRyaWJ1dGVUb0ZpZWxkKHVuaWRlbnRpZmllZEF0dHIpO1xuICAgICAgICBtZXJnZUF0dHJpYnV0ZURvbWFpbihmaWVsZHNbdW5pZGVudGlmaWVkQXR0ci5hdHRyaWJ1dGVdLCB1bmlkZW50aWZpZWRBdHRyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhmaWVsZHMpO1xufVxuXG5mdW5jdGlvbiBnZXRJbmRleEtleUZyb21GaWVsZE5hbWUobmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIHJldHVybiBuYW1lICYmIG5hbWUuc3BsaXQoJ3wnKS5sZW5ndGggPiAxID8gbmFtZS5zcGxpdCgnfCcpWzFdIDogbnVsbDtcbn1cblxuZXhwb3J0IHR5cGUgRmllbGRJbmRleEJ5ID0ge1xuICBmb3JtYXQ6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBtYXBwZWRWYWx1ZToge1xuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIHBhcnNlSW5kZXhlZEZpZWxkKFxuICBuYW1lOiBzdHJpbmcsXG4gIGF0dHJzOiBUaXBwZWNhbm9lTGF5ZXJBdHRyaWJ1dGVbXVxuKToge1xuICB1bmlkZW50aWZpZWQ6IFRpcHBlY2Fub2VMYXllckF0dHJpYnV0ZVtdO1xuICBpbmRleGVkRmllbGQ6IFZlY3RvclRpbGVGaWVsZDtcbn0ge1xuICBjb25zdCB1bmlkZW50aWZpZWQ6IFRpcHBlY2Fub2VMYXllckF0dHJpYnV0ZVtdID0gW107XG4gIC8vIGFuYWx5emUgdGltZSBmb3JtYXRcbiAgbGV0IGZpZWxkO1xuXG4gIGZvciAoY29uc3QgYXR0ciBvZiBhdHRycykge1xuICAgIGNvbnN0IGZpZWxkTmFtZSA9IGF0dHIuYXR0cmlidXRlO1xuICAgIGNvbnN0IGluZGV4S2V5ID0gZ2V0SW5kZXhLZXlGcm9tRmllbGROYW1lKGZpZWxkTmFtZSB8fCAnJyk7XG4gICAgY29uc3QgYW5hbHl6ZWRUeXBlID0gaW5kZXhLZXkgJiYgY29udGFpblZhbGlkVGltZShbaW5kZXhLZXldKTtcbiAgICBpZiAoYW5hbHl6ZWRUeXBlKSB7XG4gICAgICBmaWVsZCA9IGZpZWxkIHx8IHtcbiAgICAgICAgLi4uYXR0cmlidXRlVG9GaWVsZChhdHRyKSxcbiAgICAgICAgLy8gb3ZlcmlkZSBuYW1lIGFuZCBpZCB0byB0cnVuY2F0ZWQgbmFtZVxuICAgICAgICBuYW1lLFxuICAgICAgICBpZDogbmFtZSxcbiAgICAgICAgaW5kZXhCeToge1xuICAgICAgICAgIGZvcm1hdDogYW5hbHl6ZWRUeXBlLmZvcm1hdCxcbiAgICAgICAgICB0eXBlOiBhbmFseXplclR5cGVUb0ZpZWxkVHlwZShhbmFseXplZFR5cGUudHlwZSksXG4gICAgICAgICAgbWFwcGVkVmFsdWU6IHt9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBtZXJnZUF0dHJpYnV0ZURvbWFpbihmaWVsZCwgYXR0cik7XG4gICAgICAvLyBzYXZlIGVwb2NoIHRpbWUgaW4gbWFwcGVkVmFsdWVcbiAgICAgIGxldCBmaWVsZFRzOiBzdHJpbmcgfCBudW1iZXIgfCBudWxsID0gaW5kZXhLZXk7XG4gICAgICBpZiAoYW5hbHl6ZWRUeXBlLmZvcm1hdCA9PT0gJ3gnIHx8IGFuYWx5emVkVHlwZS5mb3JtYXQgPT09ICdYJykge1xuICAgICAgICBmaWVsZFRzID0gTnVtYmVyKGluZGV4S2V5KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVwb2NoID0gdGltZVRvVW5peE1pbGxpKGZpZWxkVHMsIGFuYWx5emVkVHlwZS5mb3JtYXQpO1xuICAgICAgaWYgKGVwb2NoKSB7XG4gICAgICAgIGZpZWxkLmluZGV4QnkubWFwcGVkVmFsdWVbZXBvY2hdID0gZmllbGROYW1lO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBrZXkgaXMgbm90IHZhbGlkIHRpbWVzdGFtcFxuICAgICAgdW5pZGVudGlmaWVkLnB1c2goYXR0cik7XG4gICAgfVxuICB9XG5cbiAgaWYgKGZpZWxkLmluZGV4QnkgJiYgZmllbGQuaW5kZXhCeS50eXBlID09PSBBTExfRklFTERfVFlQRVMudGltZXN0YW1wKSB7XG4gICAgZmllbGQuaW5kZXhCeS50aW1lRG9tYWluID0gZ2V0VGltZUFuaW1hdGlvbkRvbWFpbihcbiAgICAgIE9iamVjdC5rZXlzKGZpZWxkLmluZGV4QnkubWFwcGVkVmFsdWUpLm1hcChOdW1iZXIpXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiB7dW5pZGVudGlmaWVkLCBpbmRleGVkRmllbGQ6IGZpZWxkfTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZShudW0xOiBudW1iZXIgfCB1bmRlZmluZWQsIG51bTI6IG51bWJlciB8IHVuZGVmaW5lZCwgb3BlcmF0b3I6IHN0cmluZyk6IG51bWJlciB7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobnVtMSkgJiYgTnVtYmVyLmlzRmluaXRlKG51bTIpXG4gICAgPyBNYXRoW29wZXJhdG9yXShudW0xIGFzIG51bWJlciwgbnVtMiBhcyBudW1iZXIpXG4gICAgOiBOdW1iZXIuaXNGaW5pdGUobnVtMSlcbiAgICA/IG51bTFcbiAgICA6IE51bWJlci5pc0Zpbml0ZShudW0yKVxuICAgID8gbnVtMlxuICAgIDogTmFOO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsdGVyUHJvcHMoXG4gIGZpZWxkVHlwZTogc3RyaW5nLFxuICBhdHRyaWJ1dGU6IFRpcHBlY2Fub2VMYXllckF0dHJpYnV0ZVxuKTogRmlsdGVyUHJvcHMge1xuICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLnJlYWw6XG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMuaW50ZWdlcjoge1xuICAgICAgY29uc3QgW21pbiwgbWF4XSA9IGdldEF0dHJpYnV0ZURvbWFpbihmaWVsZFR5cGUsIGF0dHJpYnV0ZSk7XG4gICAgICBjb25zdCBkaWZmID0gbWF4IC0gbWluO1xuICAgICAgY29uc3Qgc3RlcCA9IGdldE51bWVyaWNTdGVwU2l6ZShkaWZmKSB8fCAwLjE7XG4gICAgICBjb25zdCBkb21haW4gPSBbXG4gICAgICAgIGZvcm1hdE51bWJlckJ5U3RlcChtaW4sIHN0ZXAsICdmbG9vcicpLFxuICAgICAgICBmb3JtYXROdW1iZXJCeVN0ZXAobWF4LCBzdGVwLCAnY2VpbCcpXG4gICAgICBdO1xuICAgICAgY29uc3QgZmlsdGVyUHJvcHM6IE51bWVyaWNGaWVsZEZpbHRlclByb3BzID0ge1xuICAgICAgICBkb21haW4sXG4gICAgICAgIHZhbHVlOiBkb21haW4gYXMgW251bWJlciwgbnVtYmVyXSxcbiAgICAgICAgdHlwZTogRklMVEVSX1RZUEVTLnJhbmdlLFxuICAgICAgICB0eXBlT3B0aW9uczogW0ZJTFRFUl9UWVBFUy5yYW5nZV0sXG4gICAgICAgIGdwdTogdHJ1ZSxcbiAgICAgICAgc3RlcFxuICAgICAgfTtcbiAgICAgIHJldHVybiBmaWx0ZXJQcm9wcztcbiAgICB9XG5cbiAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5ib29sZWFuOiB7XG4gICAgICBjb25zdCBmaWx0ZXJQcm9wczogQm9vbGVhbkZpZWxkRmlsdGVyUHJvcHMgPSB7XG4gICAgICAgIGRvbWFpbjogW3RydWUsIGZhbHNlXSxcbiAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgIHR5cGU6IEZJTFRFUl9UWVBFUy5zZWxlY3QsXG4gICAgICAgIGdwdTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIHJldHVybiBmaWx0ZXJQcm9wcztcbiAgICB9XG5cbiAgICBkZWZhdWx0OiB7XG4gICAgICAvLyBBc3N1bWUgc3RyaW5nIGZvciBhbGwgb3RoZXIgZmllbGRzXG4gICAgICBjb25zdCBmaWx0ZXJQcm9wczogU3RyaW5nRmllbGRGaWx0ZXJQcm9wcyA9IHtcbiAgICAgICAgZG9tYWluOiBhdHRyaWJ1dGUudmFsdWVzIGFzIHN0cmluZ1tdLFxuICAgICAgICB2YWx1ZTogYXR0cmlidXRlLnZhbHVlcyBhcyBzdHJpbmdbXSxcbiAgICAgICAgdHlwZTogRklMVEVSX1RZUEVTLm11bHRpU2VsZWN0LFxuICAgICAgICBncHU6IGZhbHNlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGZpbHRlclByb3BzO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhdHRyaWJ1dGVUb0ZpZWxkKGF0dHJpYnV0ZTogVGlwcGVjYW5vZUxheWVyQXR0cmlidXRlID0ge3ZhbHVlczogW119KTogVmVjdG9yVGlsZUZpZWxkIHtcbiAgLy8gYXR0cmlidXRlOiBcIl9zZWFzb25fcGVha3NfY29sb3JcIlxuICAvLyBjb3VudDogMTAwMFxuICAvLyBtYXg6IDAuOTVcbiAgLy8gbWluOiAwLjI0Mzc1XG4gIC8vIHR5cGU6IFwibnVtYmVyXCJcbiAgY29uc3QgZmllbGRUeXBlcyA9IGF0dHJpYnV0ZVR5cGVUb0ZpZWxkVHlwZShhdHRyaWJ1dGUudHlwZSk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogYXR0cmlidXRlLmF0dHJpYnV0ZSBhcyBzdHJpbmcsXG4gICAgaWQ6IGF0dHJpYnV0ZS5hdHRyaWJ1dGUgYXMgc3RyaW5nLFxuICAgIGZvcm1hdDogJycsXG4gICAgZmlsdGVyUHJvcHM6IGdldEZpbHRlclByb3BzKGZpZWxkVHlwZXMudHlwZSwgYXR0cmlidXRlKSxcbiAgICAuLi5maWVsZFR5cGVzXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldEF0dHJpYnV0ZURvbWFpbih0eXBlOiBzdHJpbmcgfCBudWxsLCBhdHRyaWJ1dGU6IFRpcHBlY2Fub2VMYXllckF0dHJpYnV0ZSk6IG51bWJlcltdIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMucmVhbDpcbiAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5pbnRlZ2VyOlxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgTnVtYmVyLmlzRmluaXRlKGF0dHJpYnV0ZS5taW4pID8gKGF0dHJpYnV0ZS5taW4gYXMgbnVtYmVyKSA6IE5hTixcbiAgICAgICAgTnVtYmVyLmlzRmluaXRlKGF0dHJpYnV0ZS5tYXgpID8gKGF0dHJpYnV0ZS5tYXggYXMgbnVtYmVyKSA6IE5hTlxuICAgICAgXTtcblxuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLmJvb2xlYW46XG4gICAgICByZXR1cm4gWzAsIDFdO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gWzAsIDFdO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIGZpZWxkIFRoaXMgZnVuY3Rpb24gbXV0YXRlcyB0aGUgZmllbGQgcGFyYW1ldGVyXG4gKi9cbmZ1bmN0aW9uIG1lcmdlQXR0cmlidXRlRG9tYWluKGZpZWxkOiBLZXBsZXJGaWVsZCwgYXR0cmlidXRlOiBUaXBwZWNhbm9lTGF5ZXJBdHRyaWJ1dGUpOiB2b2lkIHtcbiAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMucmVhbDpcbiAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5pbnRlZ2VyOiB7XG4gICAgICBjb25zdCBkb21haW4gPSBmaWVsZC5tZXRhZGF0YT8uZG9tYWluIHx8IGZpZWxkLmZpbHRlclByb3BzPy5kb21haW47XG4gICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgIGRvbWFpbi5taW4gPSBjb21wYXJlKGF0dHJpYnV0ZS5taW4sIGRvbWFpblswXSwgJ21pbicpO1xuICAgICAgICBkb21haW4ubWF4ID0gY29tcGFyZShhdHRyaWJ1dGUubWF4LCBkb21haW5bMV0sICdtYXgnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybjtcbiAgfVxufVxuXG4vLyBwb3NzaWJsZSB0eXBlcyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L3RpcHBlY2Fub2UjbW9kaWZ5aW5nLWZlYXR1cmUtYXR0cmlidXRlc1xuY29uc3QgYXR0clR5cGVNYXAgPSB7XG4gIG51bWJlcjoge1xuICAgIHR5cGU6IEFMTF9GSUVMRF9UWVBFUy5yZWFsLFxuICAgIGFuYWx5emVyVHlwZTogREFUQV9UWVBFUy5GTE9BVFxuICB9LFxuICBudW1lcmljOiB7XG4gICAgdHlwZTogQUxMX0ZJRUxEX1RZUEVTLnJlYWwsXG4gICAgYW5hbHl6ZXJUeXBlOiBEQVRBX1RZUEVTLkZMT0FUXG4gIH0sXG4gIHN0cmluZzoge1xuICAgIHR5cGU6IEFMTF9GSUVMRF9UWVBFUy5zdHJpbmcsXG4gICAgYW5hbHl6ZXJUeXBlOiBEQVRBX1RZUEVTLlNUUklOR1xuICB9LFxuICB2YWNoYXI6IHtcbiAgICB0eXBlOiBBTExfRklFTERfVFlQRVMuc3RyaW5nLFxuICAgIGFuYWx5emVyVHlwZTogREFUQV9UWVBFUy5TVFJJTkdcbiAgfSxcbiAgZmxvYXQ6IHtcbiAgICB0eXBlOiBBTExfRklFTERfVFlQRVMucmVhbCxcbiAgICBhbmFseXplclR5cGU6IERBVEFfVFlQRVMuRkxPQVRcbiAgfSxcbiAgaW50OiB7XG4gICAgdHlwZTogQUxMX0ZJRUxEX1RZUEVTLmludGVnZXIsXG4gICAgYW5hbHl6ZXJUeXBlOiBEQVRBX1RZUEVTLklOVFxuICB9LFxuICBpbnQ0OiB7XG4gICAgdHlwZTogQUxMX0ZJRUxEX1RZUEVTLmludGVnZXIsXG4gICAgYW5hbHl6ZXJUeXBlOiBEQVRBX1RZUEVTLklOVFxuICB9LFxuICBib29sZWFuOiB7XG4gICAgdHlwZTogQUxMX0ZJRUxEX1RZUEVTLmJvb2xlYW4sXG4gICAgYW5hbHl6ZXJUeXBlOiBEQVRBX1RZUEVTLkJPT0xFQU5cbiAgfSxcbiAgYm9vbDoge1xuICAgIHR5cGU6IEFMTF9GSUVMRF9UWVBFUy5ib29sZWFuLFxuICAgIGFuYWx5emVyVHlwZTogREFUQV9UWVBFUy5CT09MRUFOXG4gIH1cbn07XG5cbmZ1bmN0aW9uIGF0dHJpYnV0ZVR5cGVUb0ZpZWxkVHlwZShhVHlwZT86IHN0cmluZyk6IHt0eXBlOiBzdHJpbmc7IGFuYWx5emVyVHlwZTogc3RyaW5nfSB7XG4gIGNvbnN0IHR5cGUgPSBhVHlwZT8udG9Mb3dlckNhc2UoKTtcbiAgaWYgKCF0eXBlIHx8ICFhdHRyVHlwZU1hcFt0eXBlXSkge1xuICAgIENvbnNvbGUud2FybihcbiAgICAgIGBjYW5ub3QgY29udmVydCBhdHRyaWJ1dGUgdHlwZSAke3R5cGV9IHRvIGtlcGxlci5nbCBkYXRhIHR5cGUsIHVzZSBzdHJpbmcgYnkgZGVmYXVsdGBcbiAgICApO1xuICAgIHJldHVybiBhdHRyVHlwZU1hcC5zdHJpbmc7XG4gIH1cblxuICByZXR1cm4gYXR0clR5cGVNYXBbdHlwZV07XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZGF0YXNldCBjYW4gYmUgdXNlZCBhcyBzb3VyY2UgZGF0YSBmb3IgYSBsYXllci5cbiAqIEBwYXJhbSBkYXRhc2V0IEEgZGF0YXNldC5cbiAqIEBwYXJhbSBsYXllciBBIGxheWVyLlxuICogQHJldHVybnMgUmV0dXJucyB0cnVlIGlmIGEgZGF0YXNldCBjYW4gYmUgdXNlZCBhcyBzb3VyY2UgZGF0YSBmb3IgYSBsYXllci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRGF0YXNldFR5cGUoZGF0YXNldDogS2VwbGVyRGF0YXNldCwgbGF5ZXI6IEtlcGxlckxheWVyKTogYm9vbGVhbiB7XG4gIC8vIGFsbG93IHNlbGVjdGlvbiBpZiB0eXBlIGlzIG5vdCBhc3NpZ25lZCB5ZXRcbiAgaWYgKCFsYXllci50eXBlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gYWxsb3cgc2VsZWN0aW9uIGlmIGlzIGN1cnJlbnQgc2VsZWN0ZWQgZGF0YXNldFxuICBpZiAobGF5ZXIuY29uZmlnLmRhdGFJZCA9PT0gZGF0YXNldC5pZCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vIGFsbG93IHNlbGVjdGlvbiBpZiBsYXllciBkb2Vzbid0IGhhdmUgc3VwcG9ydGVkRGF0YXNldFR5cGVzXG4gIGlmICghbGF5ZXIuc3VwcG9ydGVkRGF0YXNldFR5cGVzKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIEFycmF5LmlzQXJyYXkobGF5ZXIuc3VwcG9ydGVkRGF0YXNldFR5cGVzKSAmJlxuICAgIGxheWVyLnN1cHBvcnRlZERhdGFzZXRUeXBlcy5pbmNsdWRlcyhkYXRhc2V0LnR5cGUgfHwgJycpXG4gICk7XG59XG5cbnR5cGUgR2V0RmllbGRzRnJvbVRpbGVQcm9wcyA9IHtcbiAgcmVtb3RlVGlsZUZvcm1hdDogUmVtb3RlVGlsZUZvcm1hdDtcbiAgdGlsZXNldFVybDogc3RyaW5nIHwgbnVsbDtcbiAgbWV0YWRhdGFVcmw6IHN0cmluZyB8IG51bGw7XG4gIG1ldGFkYXRhOiBWZWN0b3JUaWxlTWV0YWRhdGEgfCBudWxsO1xufTtcblxuLyoqXG4gKiBFeHRyYWN0cyBmaWVsZHMgZnJvbSBhIHRpbGUgYW5kIHVwZGF0ZXMgdGhlIG1ldGFkYXRhIG9iamVjdCB3aXRoIGZvdW5kIGZpZWxkcy5cbiAqIE5vdGU6IHRoaXMgZnVuY3Rpb24gaXMgZm9yIHRpbGVzZXRzIHRoYXQgZG9uJ3QgaW5jbHVkZSBmaWVsZHMgaW4gbWV0YWRhdGEgKG1vc3QgbGlrZWx5IHNhdmVkIHdpdGggb2xkZXIgc3BlYy4pLlxuICogQHBhcmFtIHBhcmFtcy5yZW1vdGVUaWxlRm9ybWF0IFRoZSBmb3JtYXQgb2YgdGhlIHJlbW90ZSB0aWxlIChNVlQgb3IgUE1UaWxlcykuXG4gKiBAcGFyYW0gcGFyYW1zLnRpbGVzZXRVcmwgVGhlIFVSTCBvZiB0aGUgdGlsZXNldC5cbiAqIEBwYXJhbSBwYXJhbXMubWV0YWRhdGFVcmwgVGhlIFVSTCBvZiB0aGUgbWV0YWRhdGEuXG4gKiBAcGFyYW0gcGFyYW1zLm1ldGFkYXRhIFRoZSBtZXRhZGF0YSBvYmplY3QgY29udGFpbmluZyBmaWVsZHMgYW5kIHRpbGUgcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEZpZWxkc0Zyb21UaWxlID0gYXN5bmMgKHtcbiAgcmVtb3RlVGlsZUZvcm1hdCxcbiAgdGlsZXNldFVybCxcbiAgbWV0YWRhdGFVcmwsXG4gIG1ldGFkYXRhXG59OiBHZXRGaWVsZHNGcm9tVGlsZVByb3BzKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKFxuICAgICAgdGlsZXNldFVybCAmJlxuICAgICAgbWV0YWRhdGFVcmwgJiZcbiAgICAgIG1ldGFkYXRhICYmXG4gICAgICBtZXRhZGF0YS5maWVsZHM/Lmxlbmd0aCA9PT0gMCAmJlxuICAgICAgbWV0YWRhdGEubWluWm9vbSAmJlxuICAgICAgbWV0YWRhdGEuYm91bmRzPy5sZW5ndGggPT09IDRcbiAgICApIHtcbiAgICAgIGNvbnN0IGxvbiA9IChtZXRhZGF0YS5ib3VuZHNbMF0gKyBtZXRhZGF0YS5ib3VuZHNbMl0pIC8gMjtcbiAgICAgIGNvbnN0IGxhdCA9IChtZXRhZGF0YS5ib3VuZHNbMV0gKyBtZXRhZGF0YS5ib3VuZHNbM10pIC8gMjtcbiAgICAgIGNvbnN0IHRpbGVJbmRpY2VzID0gbG9uTGF0VG9UaWxlSW5kZXgobG9uLCBsYXQsIG1ldGFkYXRhLm1pblpvb20pO1xuXG4gICAgICBjb25zdCB0aWxlU291cmNlID1cbiAgICAgICAgcmVtb3RlVGlsZUZvcm1hdCA9PT0gUmVtb3RlVGlsZUZvcm1hdC5NVlRcbiAgICAgICAgICA/IE1WVFNvdXJjZS5jcmVhdGVEYXRhU291cmNlKGRlY29kZVVSSUNvbXBvbmVudCh0aWxlc2V0VXJsKSwge1xuICAgICAgICAgICAgICBtdnQ6IHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YVVybDogZGVjb2RlVVJJQ29tcG9uZW50KG1ldGFkYXRhVXJsKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogUE1UaWxlc1NvdXJjZS5jcmVhdGVEYXRhU291cmNlKHRpbGVzZXRVcmwsIHt9KTtcbiAgICAgIGNvbnN0IHRpbGUgPSBhd2FpdCB0aWxlU291cmNlLmdldFRpbGVEYXRhKHtpbmRleDogdGlsZUluZGljZXN9IGFzIGFueSk7XG4gICAgICBjb25zdCB1cGRhdGVkRmllbGRzID0gdGlsZVRvRmllbGRzKHRpbGUpLm1hcChmID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5mLFxuICAgICAgICAgIGFuYWx5emVyVHlwZTogZi5hbmFseXplclR5cGUgfHwgQUxMX0ZJRUxEX1RZUEVTLnN0cmluZyxcbiAgICAgICAgICBpZDogZi5pZCB8fCBmLm5hbWVcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICBtZXRhZGF0YS5maWVsZHMgPSB1cGRhdGVkRmllbGRzO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlLCBhcyB0aGlzIGlzIGV4cGVyaW1lbnRhbCBmYWxsYmFja1xuICB9XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRpbGUgZmVhdHVyZXMgaW50byBLZXBsZXIgZmllbGRzLlxuICogQHBhcmFtIHRpbGUgVGhlIHRpbGUgb2JqZWN0IGNvbnRhaW5pbmcgZmVhdHVyZXMuXG4gKiBAcmV0dXJucyBBbiBhcnJheSBvZiBLZXBsZXIgZmllbGRzIGRlcml2ZWQgZnJvbSB0aGUgdGlsZSdzIGZlYXR1cmVzLlxuICovXG5jb25zdCB0aWxlVG9GaWVsZHMgPSAodGlsZToge2ZlYXR1cmVzOiBGZWF0dXJlW119KTogS2VwbGVyRmllbGRbXSA9PiB7XG4gIGlmICh0aWxlPy5mZWF0dXJlcz8ubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGhlYWRlciA9IE9iamVjdC5rZXlzKHRpbGUuZmVhdHVyZXNbMF0ucHJvcGVydGllcyk7XG4gICAgY29uc3Qgb3V0cHV0ID0gdGlsZS5mZWF0dXJlcy5tYXAoZiA9PiB7XG4gICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgIGhlYWRlci5mb3JFYWNoKGNvbHVtbk5hbWUgPT4ge1xuICAgICAgICBvYmpbY29sdW1uTmFtZV0gPSBmLnByb3BlcnRpZXNbY29sdW1uTmFtZV07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSk7XG5cbiAgICBjb25zdCBmaWVsZHMgPSBnZXRGaWVsZHNGcm9tRGF0YShvdXRwdXQsIGhlYWRlcik7XG4gICAgLy8gZXh0cmEgdHJhbnNmb3JtYXRpb24gb2Ygc3RyaW5ncyB0byBudW1iZXJzIGZvciB0aWxlcyBpc24ndCBpbXBsZW1lbnRlZCwgc28gdXNlIHN0cmluZywgbm90IGNvbXB1dGVkIHR5cGVzXG4gICAgcmV0dXJuIGZpZWxkcy5tYXAoZiA9PiB7XG4gICAgICBjb25zdCBmb3JjZVN0cmluZyA9XG4gICAgICAgIChmLnR5cGUgPT09ICdpbnRlZ2VyJyB8fCBmLnR5cGUgPT09ICdmbG9hdCcpICYmXG4gICAgICAgIHR5cGVvZiB0aWxlLmZlYXR1cmVzWzBdLnByb3BlcnRpZXNbZi5uYW1lXSA9PT0gJ3N0cmluZyc7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmYsXG4gICAgICAgIGFuYWx5emVyVHlwZTogZm9yY2VTdHJpbmcgPyBBTkFMWVpFUl9EQVRBX1RZUEVTLlNUUklORyA6IGYuYW5hbHl6ZXJUeXBlLFxuICAgICAgICB0eXBlOiBmb3JjZVN0cmluZyA/ICdzdHJpbmcnIDogZi50eXBlXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBbXTtcbn07XG5cbi8qKlxuICogQ29udmVydHMgbG9uZ2l0dWRlLCBsYXRpdHVkZSwgYW5kIHpvb20gbGV2ZWwgaW50byB2ZWN0b3IgdGlsZSBpbmRpY2VzICh4LCB5LCB6KS5cbiAqIEBwYXJhbSBsb24gTG9uZ2l0dWRlIGluIGRlZ3JlZXMsIHJhbmdpbmcgZnJvbSAtMTgwIHRvIDE4MC5cbiAqIEBwYXJhbSBsYXQgTGF0aXR1ZGUgaW4gZGVncmVlcywgcmFuZ2luZyBmcm9tIC05MCB0byA5MC5cbiAqIEBwYXJhbSB6b29tIFpvb20gbGV2ZWwgKGludGVnZXIpLCB3aGVyZSBoaWdoZXIgdmFsdWVzIHByb3ZpZGUgbW9yZSBkZXRhaWwuXG4gKiBAcmV0dXJucyBUaWxlIGluZGljZXMgd2l0aCB4IGFuZCB5IGNvb3JkaW5hdGVzIGFuZCB6b29tIGxldmVsIHouXG4gKi9cbmZ1bmN0aW9uIGxvbkxhdFRvVGlsZUluZGV4KGxvbjogbnVtYmVyLCBsYXQ6IG51bWJlciwgem9vbTogbnVtYmVyKSB7XG4gIGlmIChsYXQgPCAtODUuMDUxMSB8fCBsYXQgPiA4NS4wNTExKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdMYXRpdHVkZSBvdXQgb2YgcmFuZ2UuIE11c3QgYmUgYmV0d2VlbiAtODUuMDUxMSBhbmQgODUuMDUxMS4nKTtcbiAgfVxuICBpZiAoem9vbSA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1pvb20gbGV2ZWwgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyLicpO1xuICB9XG5cbiAgLy8gMl56b29tIChudW1iZXIgb2YgdGlsZXMgcGVyIGF4aXMgYXQgZ2l2ZW4gem9vbSBsZXZlbClcbiAgY29uc3Qgc2NhbGUgPSAxIDw8IHpvb207XG4gIC8vIENvbnZlcnQgbG9uZ2l0dWRlIHRvIHRpbGUgWFxuICBjb25zdCB4ID0gTWF0aC5mbG9vcigoKGxvbiArIDE4MCkgLyAzNjApICogc2NhbGUpO1xuICAvLyBDb252ZXJ0IGxhdGl0dWRlIHRvIHRpbGUgWVxuICBjb25zdCBsYXRSYWQgPSAobGF0ICogTWF0aC5QSSkgLyAxODA7XG4gIGNvbnN0IHkgPSBNYXRoLmZsb29yKFxuICAgICgoMSAtIE1hdGgubG9nKE1hdGgudGFuKGxhdFJhZCkgKyAxIC8gTWF0aC5jb3MobGF0UmFkKSkgLyBNYXRoLlBJKSAvIDIpICogc2NhbGVcbiAgKTtcblxuICByZXR1cm4ge3gsIHksIHo6IHpvb219O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBLElBQUFBLGFBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUQsc0JBQUEsQ0FBQUgsT0FBQTtBQUdBLElBQUFLLElBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLFFBQUEsR0FBQU4sT0FBQTtBQUVBLElBQUFPLFlBQUEsR0FBQVAsT0FBQTtBQU9BLElBQUFRLFVBQUEsR0FBQVIsT0FBQTtBQUdBLElBQUFTLE1BQUEsR0FBQVQsT0FBQTtBQUFnRyxTQUFBVSwyQkFBQUMsQ0FBQSxFQUFBQyxDQUFBLFFBQUFDLENBQUEseUJBQUFDLE1BQUEsSUFBQUgsQ0FBQSxDQUFBRyxNQUFBLENBQUFDLFFBQUEsS0FBQUosQ0FBQSxxQkFBQUUsQ0FBQSxRQUFBRyxLQUFBLENBQUFDLE9BQUEsQ0FBQU4sQ0FBQSxNQUFBRSxDQUFBLEdBQUFLLDJCQUFBLENBQUFQLENBQUEsTUFBQUMsQ0FBQSxJQUFBRCxDQUFBLHVCQUFBQSxDQUFBLENBQUFRLE1BQUEsSUFBQU4sQ0FBQSxLQUFBRixDQUFBLEdBQUFFLENBQUEsT0FBQU8sRUFBQSxNQUFBQyxDQUFBLFlBQUFBLEVBQUEsZUFBQUMsQ0FBQSxFQUFBRCxDQUFBLEVBQUFFLENBQUEsV0FBQUEsRUFBQSxXQUFBSCxFQUFBLElBQUFULENBQUEsQ0FBQVEsTUFBQSxLQUFBSyxJQUFBLFdBQUFBLElBQUEsTUFBQUMsS0FBQSxFQUFBZCxDQUFBLENBQUFTLEVBQUEsVUFBQVIsQ0FBQSxXQUFBQSxFQUFBRCxDQUFBLFVBQUFBLENBQUEsS0FBQWUsQ0FBQSxFQUFBTCxDQUFBLGdCQUFBTSxTQUFBLGlKQUFBQyxDQUFBLEVBQUFDLENBQUEsT0FBQUMsQ0FBQSxnQkFBQVIsQ0FBQSxXQUFBQSxFQUFBLElBQUFULENBQUEsR0FBQUEsQ0FBQSxDQUFBa0IsSUFBQSxDQUFBcEIsQ0FBQSxNQUFBWSxDQUFBLFdBQUFBLEVBQUEsUUFBQVosQ0FBQSxHQUFBRSxDQUFBLENBQUFtQixJQUFBLFdBQUFILENBQUEsR0FBQWxCLENBQUEsQ0FBQWEsSUFBQSxFQUFBYixDQUFBLEtBQUFDLENBQUEsV0FBQUEsRUFBQUQsQ0FBQSxJQUFBbUIsQ0FBQSxPQUFBRixDQUFBLEdBQUFqQixDQUFBLEtBQUFlLENBQUEsV0FBQUEsRUFBQSxVQUFBRyxDQUFBLFlBQUFoQixDQUFBLGNBQUFBLENBQUEsOEJBQUFpQixDQUFBLFFBQUFGLENBQUE7QUFBQSxTQUFBViw0QkFBQVAsQ0FBQSxFQUFBa0IsQ0FBQSxRQUFBbEIsQ0FBQSwyQkFBQUEsQ0FBQSxTQUFBc0IsaUJBQUEsQ0FBQXRCLENBQUEsRUFBQWtCLENBQUEsT0FBQWhCLENBQUEsTUFBQXFCLFFBQUEsQ0FBQUgsSUFBQSxDQUFBcEIsQ0FBQSxFQUFBd0IsS0FBQSw2QkFBQXRCLENBQUEsSUFBQUYsQ0FBQSxDQUFBeUIsV0FBQSxLQUFBdkIsQ0FBQSxHQUFBRixDQUFBLENBQUF5QixXQUFBLENBQUFDLElBQUEsYUFBQXhCLENBQUEsY0FBQUEsQ0FBQSxHQUFBRyxLQUFBLENBQUFzQixJQUFBLENBQUEzQixDQUFBLG9CQUFBRSxDQUFBLCtDQUFBMEIsSUFBQSxDQUFBMUIsQ0FBQSxJQUFBb0IsaUJBQUEsQ0FBQXRCLENBQUEsRUFBQWtCLENBQUE7QUFBQSxTQUFBSSxrQkFBQXRCLENBQUEsRUFBQWtCLENBQUEsYUFBQUEsQ0FBQSxJQUFBQSxDQUFBLEdBQUFsQixDQUFBLENBQUFRLE1BQUEsTUFBQVUsQ0FBQSxHQUFBbEIsQ0FBQSxDQUFBUSxNQUFBLFlBQUFQLENBQUEsTUFBQVcsQ0FBQSxHQUFBUCxLQUFBLENBQUFhLENBQUEsR0FBQWpCLENBQUEsR0FBQWlCLENBQUEsRUFBQWpCLENBQUEsSUFBQVcsQ0FBQSxDQUFBWCxDQUFBLElBQUFELENBQUEsQ0FBQUMsQ0FBQSxVQUFBVyxDQUFBO0FBQUEsU0FBQWlCLFFBQUE1QixDQUFBLEVBQUFELENBQUEsUUFBQUUsQ0FBQSxHQUFBNEIsTUFBQSxDQUFBQyxJQUFBLENBQUE5QixDQUFBLE9BQUE2QixNQUFBLENBQUFFLHFCQUFBLFFBQUFmLENBQUEsR0FBQWEsTUFBQSxDQUFBRSxxQkFBQSxDQUFBL0IsQ0FBQSxHQUFBRCxDQUFBLEtBQUFpQixDQUFBLEdBQUFBLENBQUEsQ0FBQWdCLE1BQUEsV0FBQWpDLENBQUEsV0FBQThCLE1BQUEsQ0FBQUksd0JBQUEsQ0FBQWpDLENBQUEsRUFBQUQsQ0FBQSxFQUFBbUMsVUFBQSxPQUFBakMsQ0FBQSxDQUFBa0MsSUFBQSxDQUFBQyxLQUFBLENBQUFuQyxDQUFBLEVBQUFlLENBQUEsWUFBQWYsQ0FBQTtBQUFBLFNBQUFvQyxjQUFBckMsQ0FBQSxhQUFBRCxDQUFBLE1BQUFBLENBQUEsR0FBQXVDLFNBQUEsQ0FBQS9CLE1BQUEsRUFBQVIsQ0FBQSxVQUFBRSxDQUFBLFdBQUFxQyxTQUFBLENBQUF2QyxDQUFBLElBQUF1QyxTQUFBLENBQUF2QyxDQUFBLFFBQUFBLENBQUEsT0FBQTZCLE9BQUEsQ0FBQUMsTUFBQSxDQUFBNUIsQ0FBQSxPQUFBc0MsT0FBQSxXQUFBeEMsQ0FBQSxRQUFBeUMsZ0JBQUEsYUFBQXhDLENBQUEsRUFBQUQsQ0FBQSxFQUFBRSxDQUFBLENBQUFGLENBQUEsU0FBQThCLE1BQUEsQ0FBQVkseUJBQUEsR0FBQVosTUFBQSxDQUFBYSxnQkFBQSxDQUFBMUMsQ0FBQSxFQUFBNkIsTUFBQSxDQUFBWSx5QkFBQSxDQUFBeEMsQ0FBQSxLQUFBMkIsT0FBQSxDQUFBQyxNQUFBLENBQUE1QixDQUFBLEdBQUFzQyxPQUFBLFdBQUF4QyxDQUFBLElBQUE4QixNQUFBLENBQUFjLGNBQUEsQ0FBQTNDLENBQUEsRUFBQUQsQ0FBQSxFQUFBOEIsTUFBQSxDQUFBSSx3QkFBQSxDQUFBaEMsQ0FBQSxFQUFBRixDQUFBLGlCQUFBQyxDQUFBLElBdEJoRztBQUNBO0FBK0JPLElBQU00QyxnQkFBZ0IsR0FBQUMsT0FBQSxDQUFBRCxnQkFBQSxHQUFHLFNBQW5CQSxnQkFBZ0JBLENBQUEsRUFBUztFQUNwQyxPQUFPO0lBQ0xFLEdBQUcsRUFBRTtNQUNIQyxTQUFTO0lBQ1g7RUFDRixDQUFDO0FBQ0gsQ0FBQztBQUVNLFNBQVNDLGFBQWFBLENBQUNDLE9BQXVDLEVBQVc7RUFDOUUsT0FBT0MsT0FBTyxDQUFDLENBQUFELE9BQU8sYUFBUEEsT0FBTyx1QkFBUEEsT0FBTyxDQUFFRSxJQUFJLE1BQUtDLHNCQUFXLENBQUNDLFdBQVcsQ0FBQztBQUMzRDtBQXdDQTtBQUNBLFNBQVNDLEtBQUtBLENBQUNDLEdBQVEsRUFBVztFQUNoQyxPQUFPQyxNQUFNLENBQUNDLFFBQVEsQ0FBQ0YsR0FBRyxDQUFDLElBQUlBLEdBQUcsSUFBSSxFQUFFLElBQUlBLEdBQUcsSUFBSSxDQUFDLEVBQUU7QUFDeEQ7QUFDQSxTQUFTRyxLQUFLQSxDQUFDSCxHQUFRLEVBQVc7RUFDaEMsT0FBT0MsTUFBTSxDQUFDQyxRQUFRLENBQUNGLEdBQUcsQ0FBQyxJQUFJQSxHQUFHLElBQUksR0FBRyxJQUFJQSxHQUFHLElBQUksQ0FBQyxHQUFHO0FBQzFEO0FBQ0EsU0FBU0ksTUFBTUEsQ0FBQ0osR0FBUSxFQUFXO0VBQ2pDLE9BQU9DLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDRixHQUFHLENBQUMsSUFBSUEsR0FBRyxJQUFJLENBQUMsSUFBSUEsR0FBRyxJQUFJLEVBQUU7QUFDdEQ7QUFDQSxTQUFTSyxpQkFBaUJBLENBQUNDLElBQXVCLEVBQW1CO0VBQ25FLElBQUksT0FBT0EsSUFBSSxLQUFLLFFBQVEsRUFBRTtJQUM1QixPQUFPQSxJQUFJLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLENBQUM7RUFDeEMsQ0FBQyxNQUFNLElBQUk1RCxLQUFLLENBQUNDLE9BQU8sQ0FBQ3dELElBQUksQ0FBQyxFQUFFO0lBQzlCLE9BQU9BLElBQUk7RUFDYjtFQUNBLE9BQU8sSUFBSTtBQUNiO0FBRUEsU0FBU0ksV0FBV0EsQ0FBQ0MsTUFBeUIsRUFBbUI7RUFDL0Q7RUFDQTtFQUNBO0VBQ0EsSUFBTUMsTUFBTSxHQUFHUCxpQkFBaUIsQ0FBQ00sTUFBTSxDQUFDO0VBQ3hDLElBQ0U5RCxLQUFLLENBQUNDLE9BQU8sQ0FBQzhELE1BQU0sQ0FBQyxJQUNyQkEsTUFBTSxDQUFDNUQsTUFBTSxLQUFLLENBQUMsSUFDbkJtRCxLQUFLLENBQUNTLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUNoQmIsS0FBSyxDQUFDYSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFDaEJSLE1BQU0sQ0FBQ1EsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ2pCO0lBQ0EsT0FBT0EsTUFBTTtFQUNmO0VBQ0EsT0FBTyxJQUFJO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQyxXQUFXQSxDQUFDQyxNQUF5QixFQUFtQjtFQUMvRDtFQUNBO0VBQ0E7RUFDQSxJQUFNRixNQUFNLEdBQUdQLGlCQUFpQixDQUFDUyxNQUFNLENBQUM7RUFDeEM7RUFDQSxJQUNFakUsS0FBSyxDQUFDQyxPQUFPLENBQUM4RCxNQUFNLENBQUMsSUFDckJBLE1BQU0sQ0FBQzVELE1BQU0sS0FBSyxDQUFDLElBQ25CLENBQUM0RCxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUVBLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDRyxLQUFLLENBQUNaLEtBQUssQ0FBQyxJQUNuQyxDQUFDUyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUVBLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDRyxLQUFLLENBQUNoQixLQUFLLENBQUMsRUFDbkM7SUFDQSxPQUFPYSxNQUFNO0VBQ2Y7RUFDQSxPQUFPLElBQUk7QUFDYjtBQUVBLElBQU1JLE1BQU0sR0FBRyxPQUFPO0FBQ3RCLElBQU1DLE1BQU0sR0FBRyxPQUFPO0FBQ3RCLElBQU1DLE1BQU0sR0FBRyxPQUFPO0FBRXRCLFNBQVNDLHVCQUF1QkEsQ0FBQ0MsT0FBZSxFQUFXO0VBQ3pELE9BQU9KLE1BQU0sQ0FBQzVDLElBQUksQ0FBQ2dELE9BQU8sQ0FBQyxJQUFJSCxNQUFNLENBQUM3QyxJQUFJLENBQUNnRCxPQUFPLENBQUMsSUFBSUYsTUFBTSxDQUFDOUMsSUFBSSxDQUFDZ0QsT0FBTyxDQUFDO0FBQzdFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQyxVQUFVQSxDQUN4QkQsT0FBZSxFQUVBO0VBQUEsSUFEZkUsV0FBbUMsR0FBQXZDLFNBQUEsQ0FBQS9CLE1BQUEsUUFBQStCLFNBQUEsUUFBQXdDLFNBQUEsR0FBQXhDLFNBQUEsTUFBR29DLHVCQUF1QjtFQUU3RDtFQUNBLElBQU1LLFFBQVEsR0FBRyxJQUFBQyxxQkFBUSxFQUFDTCxPQUFPLENBQUM7RUFDbEMsSUFBSSxDQUFDSSxRQUFRLENBQUNFLFFBQVEsSUFBSSxDQUFDRixRQUFRLENBQUNHLElBQUksRUFBRTtJQUN4QyxPQUFPLElBQUk7RUFDYjtFQUNBLElBQUlMLFdBQVcsQ0FBQ0YsT0FBTyxDQUFDLEVBQUU7SUFDeEIsT0FBT0EsT0FBTztFQUNoQjtFQUNBLFVBQUFRLE1BQUEsQ0FBVVIsT0FBTyxDQUFDUyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQztBQUN0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFNQyxpQkFBbUQsR0FBRztFQUMxRCxnQkFBZ0IsRUFBRTtJQUNoQkMsVUFBVSxFQUFFQyxnQkFBZ0I7SUFDNUJDLGFBQWEsRUFBRUM7RUFDakIsQ0FBQztFQUNELFdBQVM7SUFDUEgsVUFBVSxFQUFFSSxvQkFBb0I7SUFDaENGLGFBQWEsRUFBRUM7RUFDakI7QUFDRixDQUFDO0FBRUQsU0FBU0UsbUJBQW1CQSxDQUFDaEIsT0FBc0IsRUFBbUI7RUFDcEUsSUFBSU8sSUFBSSxHQUFHLEVBQUU7RUFDYixJQUFJO0lBQ0ZBLElBQUksR0FBRyxJQUFJVSxHQUFHLENBQUNqQixPQUFPLElBQUksRUFBRSxDQUFDLENBQUNrQixRQUFRO0VBQ3hDLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZDtFQUFBO0VBR0YsT0FBT1QsaUJBQWlCLENBQUNILElBQUksQ0FBQyxJQUFJRyxpQkFBaUIsV0FBUTtBQUM3RDs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQyxVQUFVQSxDQUFDWCxPQUFlLEVBQWlCO0VBQ3pELE9BQU9nQixtQkFBbUIsQ0FBQ2hCLE9BQU8sQ0FBQyxDQUFDVyxVQUFVLENBQUNYLE9BQU8sQ0FBQztBQUN6RDtBQUlBO0FBQ0E7QUFDQTtBQUNPLFNBQVNvQixtQkFBbUJBO0FBQ2pDO0FBQ0FDLFFBQW9DLEVBQ3BDQyxNQUE0QixFQUNKO0VBQ3hCLElBQUFDLElBQUEsR0FBdUJELE1BQU0sSUFBSSxDQUFDLENBQUM7SUFBQUUsWUFBQSxHQUFBRCxJQUFBLENBQTVCdkIsT0FBTztJQUFQQSxPQUFPLEdBQUF3QixZQUFBLGNBQUcsRUFBRSxHQUFBQSxZQUFBO0VBQ25CLE9BQU9SLG1CQUFtQixDQUFDaEIsT0FBTyxDQUFDLENBQUNhLGFBQWEsQ0FBQ1EsUUFBUSxDQUFDO0FBQzdEO0FBRUEsSUFBTUksZUFBZSxHQUFHLDRCQUE0QjtBQUVwRCxTQUFTYixnQkFBZ0JBLENBQUEsRUFBdUI7RUFBQSxJQUF0QlosT0FBTyxHQUFBckMsU0FBQSxDQUFBL0IsTUFBQSxRQUFBK0IsU0FBQSxRQUFBd0MsU0FBQSxHQUFBeEMsU0FBQSxNQUFHLEVBQUU7RUFDcEMsT0FBT3FDLE9BQU8sQ0FBQ1MsT0FBTyxDQUFDZ0IsZUFBZSxFQUFFLE9BQU8sQ0FBQztBQUNsRDtBQUVBLFNBQVNYLHFCQUFxQkEsQ0FBQ08sUUFBb0MsRUFBMEI7RUFBQSxJQUFBSyxjQUFBO0VBQzNGLElBQU1DLE1BQU0sR0FBR0MscUNBQXFDLENBQUNQLFFBQVEsQ0FBQztFQUM5RCxJQUFJLENBQUNNLE1BQU0sRUFBRSxPQUFPLElBQUk7RUFDeEI7RUFDQSxLQUFBRCxjQUFBLEdBQUlDLE1BQU0sQ0FBQ0UsTUFBTSxjQUFBSCxjQUFBLGVBQWJBLGNBQUEsQ0FBZTlGLE1BQU0sRUFBRTtJQUN6QixPQUFPK0YsTUFBTTtFQUNmO0VBRUEsT0FBT0EsTUFBTTtBQUNmO0FBRUEsU0FBU1osb0JBQW9CQSxDQUFDZixPQUFPLEVBQUU7RUFDckMsSUFBTThCLEdBQUcsR0FBRzdCLFVBQVUsQ0FBQ0QsT0FBTyxDQUFDO0VBQy9CLElBQUksQ0FBQzhCLEdBQUcsRUFBRSxPQUFPLElBQUk7RUFDckI7RUFDQSxJQUFNQyxPQUFPLEdBQUdELEdBQUcsQ0FBQzNDLEtBQUssQ0FBQ1csTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUNXLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDO0VBQ3ZELFVBQUFELE1BQUEsQ0FBVXVCLE9BQU87QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNILHFDQUFxQ0EsQ0FDNUNQLFFBQTJDLEVBQ25CO0VBQUEsSUFBQVcscUJBQUEsRUFBQUMsc0JBQUE7RUFDeEIsSUFBSSxDQUFDWixRQUFRLElBQUksSUFBQWEsUUFBQSxhQUFPYixRQUFRLE1BQUssUUFBUSxFQUFFO0lBQzdDLE9BQU8sSUFBSTtFQUNiO0VBRUEsSUFBSTdCLE1BQXVCLEdBQUc7SUFDNUIyQyxZQUFZLEVBQUUsRUFBRTtJQUNoQkMsUUFBUSxFQUFFLElBQUk7SUFDZDFDLE1BQU0sRUFBRSxJQUFJO0lBQ1pILE1BQU0sRUFBRSxJQUFJO0lBQ1o4QyxPQUFPLEVBQUUsSUFBSTtJQUNiQyxPQUFPLEVBQUUsSUFBSTtJQUNiVCxNQUFNLEVBQUU7RUFDVixDQUFDO0VBRUQsSUFBTVUsV0FBVyxHQUFHbEIsUUFBb0I7RUFDeEMsSUFBTW1CLGNBQWMsR0FBR25CLFFBQTJCOztFQUVsRDtFQUNBLElBQUksT0FBT2tCLFdBQVcsQ0FBQ0gsUUFBUSxLQUFLLFFBQVEsRUFBRTtJQUM1QyxJQUFJO01BQ0Y1QyxNQUFNLENBQUM0QyxRQUFRLEdBQUdLLElBQUksQ0FBQ0MsS0FBSyxDQUFDSCxXQUFXLENBQUNILFFBQVEsQ0FBQztJQUNwRCxDQUFDLENBQUMsT0FBT08sR0FBRyxFQUFFO01BQ1o7SUFBQTtFQUVKLENBQUMsTUFBTSxJQUFJLElBQUFULFFBQUEsYUFBT0ssV0FBVyxDQUFDSCxRQUFRLE1BQUssUUFBUSxFQUFFO0lBQ25ENUMsTUFBTSxDQUFDNEMsUUFBUSxHQUFHRyxXQUFXLENBQUNILFFBQVE7RUFDeEM7RUFFQTVDLE1BQU0sQ0FBQ0UsTUFBTSxHQUFHRCxXQUFXLENBQ3pCaEUsS0FBSyxDQUFDQyxPQUFPLENBQUMyRixRQUFRLENBQUN1QixXQUFXLENBQUMsR0FBR3ZCLFFBQVEsQ0FBQ3VCLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUN0RSxDQUFDOztFQUVEO0VBQ0EsSUFBTXRELE1BQU0sR0FDVmlELGNBQWMsQ0FBQ00sVUFBVSxLQUFLM0MsU0FBUyxJQUFJMUUsS0FBSyxDQUFDQyxPQUFPLENBQUMyRixRQUFRLENBQUM5QixNQUFNLENBQUMsTUFBQWlCLE1BQUEsS0FBQXVDLG1CQUFBLGFBQ2pFMUIsUUFBUSxDQUFDOUIsTUFBTSxJQUFFaUQsY0FBYyxDQUFDTSxVQUFVLEtBQzlDekIsUUFBUSxDQUFDOUIsTUFBTTtFQUNyQkMsTUFBTSxDQUFDRCxNQUFNLEdBQUdELFdBQVcsQ0FBQ0MsTUFBTSxJQUFJLEVBQUUsQ0FBQztFQUV6Q0MsTUFBTSxDQUFDNkMsT0FBTyxHQUFHVyxjQUFjLENBQUMzQixRQUFRLENBQUNnQixPQUFPLENBQUM7RUFDakQ3QyxNQUFNLENBQUM4QyxPQUFPLEdBQUdVLGNBQWMsQ0FBQzNCLFFBQVEsQ0FBQ2lCLE9BQU8sQ0FBQztFQUNqRDlDLE1BQU0sQ0FBQzFDLElBQUksR0FBR3VFLFFBQVEsQ0FBQ3ZFLElBQUksSUFBSSxFQUFFO0VBQ2pDMEMsTUFBTSxDQUFDeUQsV0FBVyxHQUFHVixXQUFXLENBQUNVLFdBQVcsTUFBQWpCLHFCQUFBLEdBQUlRLGNBQWMsQ0FBQ1UsUUFBUSxjQUFBbEIscUJBQUEsdUJBQXZCQSxxQkFBQSxDQUF5QmlCLFdBQVcsS0FBSSxFQUFFO0VBRTFGLElBQUl4SCxLQUFLLENBQUNDLE9BQU8sRUFBQXVHLHNCQUFBLEdBQUNPLGNBQWMsQ0FBQ1UsUUFBUSxjQUFBakIsc0JBQUEsdUJBQXZCQSxzQkFBQSxDQUF5QmtCLE1BQU0sQ0FBQyxFQUFFO0lBQUEsSUFBQUMsc0JBQUE7SUFDbEQsSUFBTUQsTUFBTSxHQUFHRSw2QkFBNkIsRUFBQUQsc0JBQUEsR0FBQ1osY0FBYyxDQUFDVSxRQUFRLGNBQUFFLHNCQUFBLHVCQUF2QkEsc0JBQUEsQ0FBeUJELE1BQU0sQ0FBQztJQUM3RTNELE1BQU0sQ0FBQ3FDLE1BQU0sR0FBR3lCLGlCQUFpQixDQUFDSCxNQUFNLENBQUM7RUFDM0MsQ0FBQyxNQUFNLElBQUkxSCxLQUFLLENBQUNDLE9BQU8sQ0FBQzZHLFdBQVcsQ0FBQ1ksTUFBTSxDQUFDLEVBQUU7SUFDNUMsSUFBTUEsT0FBTSxHQUFHRSw2QkFBNkIsQ0FBQ2QsV0FBVyxDQUFDWSxNQUFNLENBQUM7SUFDaEUzRCxNQUFNLENBQUNxQyxNQUFNLEdBQUd5QixpQkFBaUIsQ0FBQ0gsT0FBTSxDQUFDO0VBQzNDO0VBRUEzRCxNQUFNLEdBQUE5QixhQUFBLENBQUFBLGFBQUEsS0FDRDhCLE1BQU07SUFDVDJDLFlBQVksRUFDVkssY0FBYyxDQUFDTCxZQUFZLEtBQzFCSSxXQUFXLENBQUNnQixlQUFlLEdBQUcsQ0FBQ2hCLFdBQVcsQ0FBQ2dCLGVBQWUsQ0FBQyxHQUFHcEQsU0FBUyxDQUFDLElBQ3pFO0VBQUUsR0FDRHFELGFBQWEsQ0FBQ2hFLE1BQU0sQ0FBQzRDLFFBQVEsQ0FBQyxDQUNsQztFQUVELE9BQU81QyxNQUFNO0FBQ2Y7QUFFQSxTQUFTd0QsY0FBY0EsQ0FBQ1MsS0FBYyxFQUFpQjtFQUNyRCxJQUFNakUsTUFBTSxHQUNWLE9BQU9pRSxLQUFLLEtBQUssUUFBUSxHQUFHcEUsVUFBVSxDQUFDb0UsS0FBSyxDQUFDLEdBQUcsT0FBT0EsS0FBSyxLQUFLLFFBQVEsR0FBR0EsS0FBSyxHQUFHLElBQUk7RUFDMUYsT0FBT2pFLE1BQU0sS0FBSyxJQUFJLElBQUlrRSxLQUFLLENBQUNsRSxNQUFNLENBQUMsR0FBRyxJQUFJLEdBQUdBLE1BQU07QUFDekQ7QUFFQSxTQUFTZ0UsYUFBYUEsQ0FBQ3BCLFFBQWEsRUFBc0M7RUFDeEUsSUFBSSxDQUFDQSxRQUFRLElBQUksSUFBQUYsUUFBQSxhQUFPRSxRQUFRLE1BQUssUUFBUSxFQUFFO0lBQzdDLE9BQU8sSUFBSTtFQUNiO0VBRUEsSUFBSUEsUUFBUSxDQUFDdUIsU0FBUyxJQUFJbEksS0FBSyxDQUFDQyxPQUFPLENBQUMwRyxRQUFRLENBQUN1QixTQUFTLENBQUNSLE1BQU0sQ0FBQyxFQUFFO0lBQ2xFO0lBQ0EsT0FBTztNQUFDdEIsTUFBTSxFQUFFeUIsaUJBQWlCLENBQUNsQixRQUFRLENBQUN1QixTQUFTLENBQUNSLE1BQU07SUFBQyxDQUFDO0VBQy9EO0VBQ0EsT0FBTyxJQUFJO0FBQ2I7QUFFQSxTQUFTUyxzQkFBc0JBLENBQUNDLFdBQXFCLEVBS25EO0VBQ0EsSUFBTUMsU0FBUyxHQUFHLElBQUFDLGtCQUFJLEVBQUNGLFdBQVcsQ0FBQyxDQUFDRyxJQUFJLENBQUNDLGtCQUFTLENBQUMsQ0FBQzVHLE1BQU0sQ0FBQzZHLCtCQUFrQixDQUFDO0VBRTlFLElBQU1DLE1BQU0sR0FBRyxDQUFDTCxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUVBLFNBQVMsQ0FBQ0EsU0FBUyxDQUFDbEksTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDOztFQUU5RDtFQUNBLElBQU13SSxRQUFRLEdBQUcsS0FBSyxHQUFHTixTQUFTLENBQUNsSSxNQUFNO0VBQ3pDLElBQU15SSxPQUFPLEdBQUcsSUFBQUMsWUFBSyxFQUFDLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFRixRQUFRLENBQUM7RUFFNUMsT0FBTztJQUFDRCxNQUFNLEVBQU5BLE1BQU07SUFBRUwsU0FBUyxFQUFUQSxTQUFTO0lBQUVNLFFBQVEsRUFBRUMsT0FBTztJQUFFUixXQUFXLEVBQVhBO0VBQVcsQ0FBQztBQUM1RDtBQUVBLElBQU1VLG1CQUFtQixHQUFHO0VBQzFCQyxPQUFPLEVBQUUsUUFBUTtFQUNqQkMsTUFBTSxFQUFFLFFBQVE7RUFDaEJDLElBQUksRUFBRSxRQUFRO0VBQ2QsT0FBSyxLQUFLO0VBQ1YsV0FBUztBQUNYLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsU0FBU3JCLDZCQUE2QkEsQ0FBQ0YsTUFBMEIsRUFBcUI7RUFDcEYsSUFBSSxDQUFDQSxNQUFNLEVBQUUsT0FBTyxFQUFFO0VBRXRCLElBQU13QixTQUE0QixHQUFHLEVBQUU7RUFBQyxJQUFBQyxTQUFBLEdBQUF6SiwwQkFBQSxDQUNwQmdJLE1BQU07SUFBQTBCLEtBQUE7RUFBQTtJQUExQixLQUFBRCxTQUFBLENBQUE3SSxDQUFBLE1BQUE4SSxLQUFBLEdBQUFELFNBQUEsQ0FBQTVJLENBQUEsSUFBQUMsSUFBQSxHQUE0QjtNQUFBLElBQWpCNkksS0FBSyxHQUFBRCxLQUFBLENBQUEzSSxLQUFBO01BQ2QsSUFBQTZJLEtBQUEsR0FBc0JELEtBQUssSUFBSSxDQUFDLENBQUM7UUFBQUUsWUFBQSxHQUFBRCxLQUFBLENBQTFCbEQsTUFBTTtRQUFOQSxNQUFNLEdBQUFtRCxZQUFBLGNBQUcsRUFBRSxHQUFBQSxZQUFBO01BQWdCLElBQUFDLFVBQUEsR0FBQTlKLDBCQUFBLENBQ1owRyxNQUFNO1FBQUFxRCxNQUFBO01BQUE7UUFBNUIsS0FBQUQsVUFBQSxDQUFBbEosQ0FBQSxNQUFBbUosTUFBQSxHQUFBRCxVQUFBLENBQUFqSixDQUFBLElBQUFDLElBQUEsR0FBOEI7VUFBQSxJQUFBa0osZUFBQTtVQUFBLElBQW5CQyxPQUFPLEdBQUFGLE1BQUEsQ0FBQWhKLEtBQUE7VUFDaEIsSUFBTW1KLFNBQVMsR0FBRztZQUNoQkEsU0FBUyxFQUFFRCxPQUFPLENBQUN0SSxJQUFJO1lBQ3ZCMEIsSUFBSSxFQUFFK0YsbUJBQW1CLENBQUNhLE9BQU8sQ0FBQzVHLElBQUksQ0FBQztZQUN2QzhHLEtBQUssRUFBRUYsT0FBTyxDQUFDRyxnQkFBZ0I7WUFDL0JDLE1BQU0sR0FBQUwsZUFBQSxHQUFHQyxPQUFPLENBQUNJLE1BQU0sY0FBQUwsZUFBQSxjQUFBQSxlQUFBLEdBQUksRUFBMEI7WUFDckRNLEdBQUcsRUFBRUwsT0FBTyxDQUFDSyxHQUFHO1lBQ2hCQyxHQUFHLEVBQUVOLE9BQU8sQ0FBQ007VUFDZixDQUFDO1VBRURmLFNBQVMsQ0FBQ25ILElBQUksQ0FBQztZQUNibUksVUFBVSxFQUFFLENBQUNOLFNBQVM7VUFDeEIsQ0FBQyxDQUFDO1FBQ0o7TUFBQyxTQUFBMUMsR0FBQTtRQUFBc0MsVUFBQSxDQUFBNUosQ0FBQSxDQUFBc0gsR0FBQTtNQUFBO1FBQUFzQyxVQUFBLENBQUE5SSxDQUFBO01BQUE7SUFDSDtFQUFDLFNBQUF3RyxHQUFBO0lBQUFpQyxTQUFBLENBQUF2SixDQUFBLENBQUFzSCxHQUFBO0VBQUE7SUFBQWlDLFNBQUEsQ0FBQXpJLENBQUE7RUFBQTtFQUNELE9BQU93SSxTQUFTO0FBQ2xCO0FBRUEsU0FBU3JCLGlCQUFpQkEsQ0FBQSxFQUFvRDtFQUFBLElBQW5ESCxNQUF5QixHQUFBeEYsU0FBQSxDQUFBL0IsTUFBQSxRQUFBK0IsU0FBQSxRQUFBd0MsU0FBQSxHQUFBeEMsU0FBQSxNQUFHLEVBQUU7RUFDdkQsSUFBTWtFLE1BQU0sR0FBRyxDQUFDLENBQUM7RUFDakIsSUFBTStELGlCQUE4RCxHQUFHLENBQUMsQ0FBQztFQUFDLElBQUFDLFVBQUEsR0FBQTFLLDBCQUFBLENBRXREZ0ksTUFBTTtJQUFBMkMsTUFBQTtFQUFBO0lBQTFCLEtBQUFELFVBQUEsQ0FBQTlKLENBQUEsTUFBQStKLE1BQUEsR0FBQUQsVUFBQSxDQUFBN0osQ0FBQSxJQUFBQyxJQUFBLEdBQTRCO01BQUEsSUFBakI2SSxLQUFLLEdBQUFnQixNQUFBLENBQUE1SixLQUFBO01BQ2QsSUFBQTZKLEtBQUEsR0FBMEJqQixLQUFLLElBQUksQ0FBQyxDQUFDO1FBQUFrQixnQkFBQSxHQUFBRCxLQUFBLENBQTlCSixVQUFVO1FBQVZBLFVBQVUsR0FBQUssZ0JBQUEsY0FBRyxFQUFFLEdBQUFBLGdCQUFBO01BQWdCLElBQUFDLFVBQUEsR0FBQTlLLDBCQUFBLENBQ25Cd0ssVUFBVTtRQUFBTyxNQUFBO01BQUE7UUFBN0IsS0FBQUQsVUFBQSxDQUFBbEssQ0FBQSxNQUFBbUssTUFBQSxHQUFBRCxVQUFBLENBQUFqSyxDQUFBLElBQUFDLElBQUEsR0FBK0I7VUFBQSxJQUFwQmtLLElBQUksR0FBQUQsTUFBQSxDQUFBaEssS0FBQTtVQUNiLElBQU1ZLEtBQUksR0FBR3FKLElBQUksQ0FBQ2QsU0FBUztVQUMzQixJQUFJLE9BQU92SSxLQUFJLEtBQUssUUFBUSxFQUFFO1lBQzVCO1lBQ0EsSUFBSUEsS0FBSSxDQUFDcUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDdkQsTUFBTSxHQUFHLENBQUMsRUFBRTtjQUM5QjtjQUNBLElBQU13SyxLQUFLLEdBQUd0SixLQUFJLENBQUNxQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2NBQ2hDeUcsaUJBQWlCLENBQUNRLEtBQUssQ0FBQyxHQUFHUixpQkFBaUIsQ0FBQ1EsS0FBSyxDQUFDLElBQUksRUFBRTtjQUN6RFIsaUJBQWlCLENBQUNRLEtBQUssQ0FBQyxDQUFDNUksSUFBSSxDQUFDMkksSUFBSSxDQUFDO1lBQ3JDLENBQUMsTUFBTSxJQUFJLENBQUN0RSxNQUFNLENBQUMvRSxLQUFJLENBQUMsRUFBRTtjQUN4QitFLE1BQU0sQ0FBQy9FLEtBQUksQ0FBQyxHQUFHdUosZ0JBQWdCLENBQUNGLElBQUksQ0FBQztZQUN2QyxDQUFDLE1BQU07Y0FDTEcsb0JBQW9CLENBQUN6RSxNQUFNLENBQUMvRSxLQUFJLENBQUMsRUFBRXFKLElBQUksQ0FBQztZQUMxQztVQUNGO1FBQ0Y7TUFBQyxTQUFBeEQsR0FBQTtRQUFBc0QsVUFBQSxDQUFBNUssQ0FBQSxDQUFBc0gsR0FBQTtNQUFBO1FBQUFzRCxVQUFBLENBQUE5SixDQUFBO01BQUE7SUFDSDs7SUFFQTtFQUFBLFNBQUF3RyxHQUFBO0lBQUFrRCxVQUFBLENBQUF4SyxDQUFBLENBQUFzSCxHQUFBO0VBQUE7SUFBQWtELFVBQUEsQ0FBQTFKLENBQUE7RUFBQTtFQUNBLFNBQUFvSyxFQUFBLE1BQUFDLGVBQUEsR0FBNEJ0SixNQUFNLENBQUN1SixPQUFPLENBQUNiLGlCQUFpQixDQUFDLEVBQUFXLEVBQUEsR0FBQUMsZUFBQSxDQUFBNUssTUFBQSxFQUFBMkssRUFBQSxJQUFFO0lBQTFELElBQUFHLGtCQUFBLE9BQUFDLGVBQUEsYUFBQUgsZUFBQSxDQUFBRCxFQUFBO01BQU96SixJQUFJLEdBQUE0SixrQkFBQTtNQUFFRSxLQUFLLEdBQUFGLGtCQUFBO0lBQ3JCLElBQUFHLGtCQUFBLEdBQXFDQyxpQkFBaUIsQ0FBQ2hLLElBQUksRUFBRThKLEtBQUssQ0FBQztNQUE1REcsWUFBWSxHQUFBRixrQkFBQSxDQUFaRSxZQUFZO01BQUVDLFlBQVksR0FBQUgsa0JBQUEsQ0FBWkcsWUFBWTtJQUNqQ25GLE1BQU0sQ0FBQ2tGLFlBQVksQ0FBQ2pLLElBQUksQ0FBQyxHQUFHaUssWUFBWTtJQUFDLElBQUFFLFVBQUEsR0FBQTlMLDBCQUFBLENBQ1Y2TCxZQUFZO01BQUFFLE1BQUE7SUFBQTtNQUEzQyxLQUFBRCxVQUFBLENBQUFsTCxDQUFBLE1BQUFtTCxNQUFBLEdBQUFELFVBQUEsQ0FBQWpMLENBQUEsSUFBQUMsSUFBQSxHQUE2QztRQUFBLElBQWxDa0wsZ0JBQWdCLEdBQUFELE1BQUEsQ0FBQWhMLEtBQUE7UUFDekIsSUFBSWlMLGdCQUFnQixDQUFDOUIsU0FBUyxFQUFFO1VBQzlCeEQsTUFBTSxDQUFDc0YsZ0JBQWdCLENBQUM5QixTQUFTLENBQUMsR0FDaEN4RCxNQUFNLENBQUNzRixnQkFBZ0IsQ0FBQzlCLFNBQVMsQ0FBQyxJQUFJZ0IsZ0JBQWdCLENBQUNjLGdCQUFnQixDQUFDO1VBQzFFYixvQkFBb0IsQ0FBQ3pFLE1BQU0sQ0FBQ3NGLGdCQUFnQixDQUFDOUIsU0FBUyxDQUFDLEVBQUU4QixnQkFBZ0IsQ0FBQztRQUM1RTtNQUNGO0lBQUMsU0FBQXhFLEdBQUE7TUFBQXNFLFVBQUEsQ0FBQTVMLENBQUEsQ0FBQXNILEdBQUE7SUFBQTtNQUFBc0UsVUFBQSxDQUFBOUssQ0FBQTtJQUFBO0VBQ0g7RUFFQSxPQUFPZSxNQUFNLENBQUNzSSxNQUFNLENBQUMzRCxNQUFNLENBQUM7QUFDOUI7QUFFQSxTQUFTdUYsd0JBQXdCQSxDQUFDdEssSUFBWSxFQUFpQjtFQUM3RCxPQUFPQSxJQUFJLElBQUlBLElBQUksQ0FBQ3FDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQ3ZELE1BQU0sR0FBRyxDQUFDLEdBQUdrQixJQUFJLENBQUNxQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSTtBQUN2RTtBQVVBLFNBQVMySCxpQkFBaUJBLENBQ3hCaEssSUFBWSxFQUNaOEosS0FBaUMsRUFJakM7RUFDQSxJQUFNSSxZQUF3QyxHQUFHLEVBQUU7RUFDbkQ7RUFDQSxJQUFJSyxLQUFLO0VBQUMsSUFBQUMsVUFBQSxHQUFBbk0sMEJBQUEsQ0FFU3lMLEtBQUs7SUFBQVcsTUFBQTtFQUFBO0lBQXhCLEtBQUFELFVBQUEsQ0FBQXZMLENBQUEsTUFBQXdMLE1BQUEsR0FBQUQsVUFBQSxDQUFBdEwsQ0FBQSxJQUFBQyxJQUFBLEdBQTBCO01BQUEsSUFBZmtLLElBQUksR0FBQW9CLE1BQUEsQ0FBQXJMLEtBQUE7TUFDYixJQUFNc0wsU0FBUyxHQUFHckIsSUFBSSxDQUFDZCxTQUFTO01BQ2hDLElBQU1vQyxRQUFRLEdBQUdMLHdCQUF3QixDQUFDSSxTQUFTLElBQUksRUFBRSxDQUFDO01BQzFELElBQU1FLFlBQVksR0FBR0QsUUFBUSxJQUFJLElBQUFFLDZCQUFnQixFQUFDLENBQUNGLFFBQVEsQ0FBQyxDQUFDO01BQzdELElBQUlDLFlBQVksRUFBRTtRQUNoQkwsS0FBSyxHQUFHQSxLQUFLLElBQUEzSixhQUFBLENBQUFBLGFBQUEsS0FDUjJJLGdCQUFnQixDQUFDRixJQUFJLENBQUM7VUFDekI7VUFDQXJKLElBQUksRUFBSkEsSUFBSTtVQUNKOEssRUFBRSxFQUFFOUssSUFBSTtVQUNSK0ssT0FBTyxFQUFFO1lBQ1BDLE1BQU0sRUFBRUosWUFBWSxDQUFDSSxNQUFNO1lBQzNCdEosSUFBSSxFQUFFLElBQUF1SixvQ0FBdUIsRUFBQ0wsWUFBWSxDQUFDbEosSUFBSSxDQUFDO1lBQ2hEcUYsV0FBVyxFQUFFLENBQUM7VUFDaEI7UUFBQyxFQUNGO1FBQ0R5QyxvQkFBb0IsQ0FBQ2UsS0FBSyxFQUFFbEIsSUFBSSxDQUFDO1FBQ2pDO1FBQ0EsSUFBSTZCLE9BQStCLEdBQUdQLFFBQVE7UUFDOUMsSUFBSUMsWUFBWSxDQUFDSSxNQUFNLEtBQUssR0FBRyxJQUFJSixZQUFZLENBQUNJLE1BQU0sS0FBSyxHQUFHLEVBQUU7VUFDOURFLE9BQU8sR0FBR25KLE1BQU0sQ0FBQzRJLFFBQVEsQ0FBQztRQUM1QjtRQUNBLElBQU1RLEtBQUssR0FBRyxJQUFBQyxzQkFBZSxFQUFDRixPQUFPLEVBQUVOLFlBQVksQ0FBQ0ksTUFBTSxDQUFDO1FBQzNELElBQUlHLEtBQUssRUFBRTtVQUNUWixLQUFLLENBQUNRLE9BQU8sQ0FBQ2hFLFdBQVcsQ0FBQ29FLEtBQUssQ0FBQyxHQUFHVCxTQUFTO1FBQzlDO01BQ0YsQ0FBQyxNQUFNO1FBQ0w7UUFDQVIsWUFBWSxDQUFDeEosSUFBSSxDQUFDMkksSUFBSSxDQUFDO01BQ3pCO0lBQ0Y7RUFBQyxTQUFBeEQsR0FBQTtJQUFBMkUsVUFBQSxDQUFBak0sQ0FBQSxDQUFBc0gsR0FBQTtFQUFBO0lBQUEyRSxVQUFBLENBQUFuTCxDQUFBO0VBQUE7RUFFRCxJQUFJa0wsS0FBSyxDQUFDUSxPQUFPLElBQUlSLEtBQUssQ0FBQ1EsT0FBTyxDQUFDckosSUFBSSxLQUFLMkosMEJBQWUsQ0FBQ0MsU0FBUyxFQUFFO0lBQ3JFZixLQUFLLENBQUNRLE9BQU8sQ0FBQ1EsVUFBVSxHQUFHekUsc0JBQXNCLENBQy9DMUcsTUFBTSxDQUFDQyxJQUFJLENBQUNrSyxLQUFLLENBQUNRLE9BQU8sQ0FBQ2hFLFdBQVcsQ0FBQyxDQUFDekUsR0FBRyxDQUFDUCxNQUFNLENBQ25ELENBQUM7RUFDSDtFQUVBLE9BQU87SUFBQ21JLFlBQVksRUFBWkEsWUFBWTtJQUFFRCxZQUFZLEVBQUVNO0VBQUssQ0FBQztBQUM1QztBQUVBLFNBQVNpQixPQUFPQSxDQUFDQyxJQUF3QixFQUFFQyxJQUF3QixFQUFFQyxRQUFnQixFQUFVO0VBQzdGLE9BQU81SixNQUFNLENBQUNDLFFBQVEsQ0FBQ3lKLElBQUksQ0FBQyxJQUFJMUosTUFBTSxDQUFDQyxRQUFRLENBQUMwSixJQUFJLENBQUMsR0FDakRFLElBQUksQ0FBQ0QsUUFBUSxDQUFDLENBQUNGLElBQUksRUFBWUMsSUFBYyxDQUFDLEdBQzlDM0osTUFBTSxDQUFDQyxRQUFRLENBQUN5SixJQUFJLENBQUMsR0FDckJBLElBQUksR0FDSjFKLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDMEosSUFBSSxDQUFDLEdBQ3JCQSxJQUFJLEdBQ0pHLEdBQUc7QUFDVDtBQUVPLFNBQVNDLGNBQWNBLENBQzVCQyxTQUFpQixFQUNqQnhELFNBQW1DLEVBQ3RCO0VBQ2IsUUFBUXdELFNBQVM7SUFDZixLQUFLViwwQkFBZSxDQUFDVyxJQUFJO0lBQ3pCLEtBQUtYLDBCQUFlLENBQUNZLE9BQU87TUFBRTtRQUM1QixJQUFBQyxtQkFBQSxHQUFtQkMsa0JBQWtCLENBQUNKLFNBQVMsRUFBRXhELFNBQVMsQ0FBQztVQUFBNkQsb0JBQUEsT0FBQXZDLGVBQUEsYUFBQXFDLG1CQUFBO1VBQXBEdkQsR0FBRyxHQUFBeUQsb0JBQUE7VUFBRXhELEdBQUcsR0FBQXdELG9CQUFBO1FBQ2YsSUFBTUMsSUFBSSxHQUFHekQsR0FBRyxHQUFHRCxHQUFHO1FBQ3RCLElBQU0yRCxJQUFJLEdBQUcsSUFBQUMseUJBQWtCLEVBQUNGLElBQUksQ0FBQyxJQUFJLEdBQUc7UUFDNUMsSUFBTWhGLE1BQU0sR0FBRyxDQUNiLElBQUFtRix5QkFBa0IsRUFBQzdELEdBQUcsRUFBRTJELElBQUksRUFBRSxPQUFPLENBQUMsRUFDdEMsSUFBQUUseUJBQWtCLEVBQUM1RCxHQUFHLEVBQUUwRCxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQ3RDO1FBQ0QsSUFBTUcsV0FBb0MsR0FBRztVQUMzQ3BGLE1BQU0sRUFBTkEsTUFBTTtVQUNOakksS0FBSyxFQUFFaUksTUFBMEI7VUFDakMzRixJQUFJLEVBQUVnTCx1QkFBWSxDQUFDQyxLQUFLO1VBQ3hCQyxXQUFXLEVBQUUsQ0FBQ0YsdUJBQVksQ0FBQ0MsS0FBSyxDQUFDO1VBQ2pDRSxHQUFHLEVBQUUsSUFBSTtVQUNUUCxJQUFJLEVBQUpBO1FBQ0YsQ0FBQztRQUNELE9BQU9HLFdBQVc7TUFDcEI7SUFFQSxLQUFLcEIsMEJBQWUsV0FBUTtNQUFFO1FBQzVCLElBQU1vQixZQUFvQyxHQUFHO1VBQzNDcEYsTUFBTSxFQUFFLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQztVQUNyQmpJLEtBQUssRUFBRSxJQUFJO1VBQ1hzQyxJQUFJLEVBQUVnTCx1QkFBWSxDQUFDSSxNQUFNO1VBQ3pCRCxHQUFHLEVBQUU7UUFDUCxDQUFDO1FBQ0QsT0FBT0osWUFBVztNQUNwQjtJQUVBO01BQVM7UUFDUDtRQUNBLElBQU1BLGFBQW1DLEdBQUc7VUFDMUNwRixNQUFNLEVBQUVrQixTQUFTLENBQUNHLE1BQWtCO1VBQ3BDdEosS0FBSyxFQUFFbUosU0FBUyxDQUFDRyxNQUFrQjtVQUNuQ2hILElBQUksRUFBRWdMLHVCQUFZLENBQUNLLFdBQVc7VUFDOUJGLEdBQUcsRUFBRTtRQUNQLENBQUM7UUFDRCxPQUFPSixhQUFXO01BQ3BCO0VBQ0Y7QUFDRjtBQUVBLFNBQVNsRCxnQkFBZ0JBLENBQUEsRUFBc0U7RUFBQSxJQUFyRWhCLFNBQW1DLEdBQUExSCxTQUFBLENBQUEvQixNQUFBLFFBQUErQixTQUFBLFFBQUF3QyxTQUFBLEdBQUF4QyxTQUFBLE1BQUc7SUFBQzZILE1BQU0sRUFBRTtFQUFFLENBQUM7RUFDMUU7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLElBQU1zRSxVQUFVLEdBQUdDLHdCQUF3QixDQUFDMUUsU0FBUyxDQUFDN0csSUFBSSxDQUFDO0VBQzNELE9BQUFkLGFBQUE7SUFDRVosSUFBSSxFQUFFdUksU0FBUyxDQUFDQSxTQUFtQjtJQUNuQ3VDLEVBQUUsRUFBRXZDLFNBQVMsQ0FBQ0EsU0FBbUI7SUFDakN5QyxNQUFNLEVBQUUsRUFBRTtJQUNWeUIsV0FBVyxFQUFFWCxjQUFjLENBQUNrQixVQUFVLENBQUN0TCxJQUFJLEVBQUU2RyxTQUFTO0VBQUMsR0FDcER5RSxVQUFVO0FBRWpCO0FBRUEsU0FBU2Isa0JBQWtCQSxDQUFDekssSUFBbUIsRUFBRTZHLFNBQW1DLEVBQVk7RUFDOUYsUUFBUTdHLElBQUk7SUFDVixLQUFLMkosMEJBQWUsQ0FBQ1csSUFBSTtJQUN6QixLQUFLWCwwQkFBZSxDQUFDWSxPQUFPO01BQzFCLE9BQU8sQ0FDTGxLLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDdUcsU0FBUyxDQUFDSSxHQUFHLENBQUMsR0FBSUosU0FBUyxDQUFDSSxHQUFHLEdBQWNrRCxHQUFHLEVBQ2hFOUosTUFBTSxDQUFDQyxRQUFRLENBQUN1RyxTQUFTLENBQUNLLEdBQUcsQ0FBQyxHQUFJTCxTQUFTLENBQUNLLEdBQUcsR0FBY2lELEdBQUcsQ0FDakU7SUFFSCxLQUFLUiwwQkFBZSxXQUFRO01BQzFCLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2Y7TUFDRSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUNqQjtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM3QixvQkFBb0JBLENBQUNlLEtBQWtCLEVBQUVoQyxTQUFtQyxFQUFRO0VBQzNGLFFBQVFnQyxLQUFLLENBQUM3SSxJQUFJO0lBQ2hCLEtBQUsySiwwQkFBZSxDQUFDVyxJQUFJO0lBQ3pCLEtBQUtYLDBCQUFlLENBQUNZLE9BQU87TUFBRTtRQUFBLElBQUFpQixlQUFBLEVBQUFDLGtCQUFBO1FBQzVCLElBQU05RixNQUFNLEdBQUcsRUFBQTZGLGVBQUEsR0FBQTNDLEtBQUssQ0FBQ2hHLFFBQVEsY0FBQTJJLGVBQUEsdUJBQWRBLGVBQUEsQ0FBZ0I3RixNQUFNLE9BQUE4RixrQkFBQSxHQUFJNUMsS0FBSyxDQUFDa0MsV0FBVyxjQUFBVSxrQkFBQSx1QkFBakJBLGtCQUFBLENBQW1COUYsTUFBTTtRQUNsRSxJQUFJQSxNQUFNLEVBQUU7VUFDVkEsTUFBTSxDQUFDc0IsR0FBRyxHQUFHNkMsT0FBTyxDQUFDakQsU0FBUyxDQUFDSSxHQUFHLEVBQUV0QixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDO1VBQ3JEQSxNQUFNLENBQUN1QixHQUFHLEdBQUc0QyxPQUFPLENBQUNqRCxTQUFTLENBQUNLLEdBQUcsRUFBRXZCLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUM7UUFDdkQ7UUFDQTtNQUNGO0lBQ0E7TUFDRTtFQUNKO0FBQ0Y7O0FBRUE7QUFDQSxJQUFNK0YsV0FBVyxHQUFHO0VBQ2xCQyxNQUFNLEVBQUU7SUFDTjNMLElBQUksRUFBRTJKLDBCQUFlLENBQUNXLElBQUk7SUFDMUJzQixZQUFZLEVBQUVDLHdCQUFVLENBQUNDO0VBQzNCLENBQUM7RUFDREMsT0FBTyxFQUFFO0lBQ1AvTCxJQUFJLEVBQUUySiwwQkFBZSxDQUFDVyxJQUFJO0lBQzFCc0IsWUFBWSxFQUFFQyx3QkFBVSxDQUFDQztFQUMzQixDQUFDO0VBQ0Q3RixNQUFNLEVBQUU7SUFDTmpHLElBQUksRUFBRTJKLDBCQUFlLENBQUMxRCxNQUFNO0lBQzVCMkYsWUFBWSxFQUFFQyx3QkFBVSxDQUFDRztFQUMzQixDQUFDO0VBQ0RDLE1BQU0sRUFBRTtJQUNOak0sSUFBSSxFQUFFMkosMEJBQWUsQ0FBQzFELE1BQU07SUFDNUIyRixZQUFZLEVBQUVDLHdCQUFVLENBQUNHO0VBQzNCLENBQUM7RUFDRCxTQUFPO0lBQ0xoTSxJQUFJLEVBQUUySiwwQkFBZSxDQUFDVyxJQUFJO0lBQzFCc0IsWUFBWSxFQUFFQyx3QkFBVSxDQUFDQztFQUMzQixDQUFDO0VBQ0QsT0FBSztJQUNIOUwsSUFBSSxFQUFFMkosMEJBQWUsQ0FBQ1ksT0FBTztJQUM3QnFCLFlBQVksRUFBRUMsd0JBQVUsQ0FBQ0s7RUFDM0IsQ0FBQztFQUNEQyxJQUFJLEVBQUU7SUFDSm5NLElBQUksRUFBRTJKLDBCQUFlLENBQUNZLE9BQU87SUFDN0JxQixZQUFZLEVBQUVDLHdCQUFVLENBQUNLO0VBQzNCLENBQUM7RUFDRCxXQUFTO0lBQ1BsTSxJQUFJLEVBQUUySiwwQkFBZSxXQUFRO0lBQzdCaUMsWUFBWSxFQUFFQyx3QkFBVSxDQUFDTztFQUMzQixDQUFDO0VBQ0RDLElBQUksRUFBRTtJQUNKck0sSUFBSSxFQUFFMkosMEJBQWUsV0FBUTtJQUM3QmlDLFlBQVksRUFBRUMsd0JBQVUsQ0FBQ087RUFDM0I7QUFDRixDQUFDO0FBRUQsU0FBU2Isd0JBQXdCQSxDQUFDZSxLQUFjLEVBQXdDO0VBQ3RGLElBQU10TSxJQUFJLEdBQUdzTSxLQUFLLGFBQUxBLEtBQUssdUJBQUxBLEtBQUssQ0FBRUMsV0FBVyxDQUFDLENBQUM7RUFDakMsSUFBSSxDQUFDdk0sSUFBSSxJQUFJLENBQUMwTCxXQUFXLENBQUMxTCxJQUFJLENBQUMsRUFBRTtJQUMvQndNLG1CQUFPLENBQUNDLElBQUksa0NBQUF6SyxNQUFBLENBQ3VCaEMsSUFBSSxtREFDdkMsQ0FBQztJQUNELE9BQU8wTCxXQUFXLENBQUN6RixNQUFNO0VBQzNCO0VBRUEsT0FBT3lGLFdBQVcsQ0FBQzFMLElBQUksQ0FBQztBQUMxQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTME0sZ0JBQWdCQSxDQUFDNU0sT0FBc0IsRUFBRXdHLEtBQWtCLEVBQVc7RUFDcEY7RUFDQSxJQUFJLENBQUNBLEtBQUssQ0FBQ3RHLElBQUksRUFBRTtJQUNmLE9BQU8sSUFBSTtFQUNiO0VBQ0E7RUFDQSxJQUFJc0csS0FBSyxDQUFDcUcsTUFBTSxDQUFDQyxNQUFNLEtBQUs5TSxPQUFPLENBQUNzSixFQUFFLEVBQUU7SUFDdEMsT0FBTyxJQUFJO0VBQ2I7RUFDQTtFQUNBLElBQUksQ0FBQzlDLEtBQUssQ0FBQ3VHLHFCQUFxQixFQUFFO0lBQ2hDLE9BQU8sSUFBSTtFQUNiO0VBRUEsT0FDRTVQLEtBQUssQ0FBQ0MsT0FBTyxDQUFDb0osS0FBSyxDQUFDdUcscUJBQXFCLENBQUMsSUFDMUN2RyxLQUFLLENBQUN1RyxxQkFBcUIsQ0FBQ0MsUUFBUSxDQUFDaE4sT0FBTyxDQUFDRSxJQUFJLElBQUksRUFBRSxDQUFDO0FBRTVEO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLElBQU0rTSxpQkFBaUIsR0FBQXJOLE9BQUEsQ0FBQXFOLGlCQUFBO0VBQUEsSUFBQUMsS0FBQSxPQUFBQyxrQkFBQSwyQkFBQUMsWUFBQSxZQUFBQyxJQUFBLENBQUcsU0FBQUMsUUFBQUMsS0FBQTtJQUFBLElBQUFDLGdCQUFBLEVBQUFDLFVBQUEsRUFBQUMsV0FBQSxFQUFBM0ssUUFBQSxFQUFBNEssZ0JBQUEsRUFBQUMsZ0JBQUEsRUFBQUMsR0FBQSxFQUFBQyxHQUFBLEVBQUFDLFdBQUEsRUFBQUMsVUFBQSxFQUFBQyxJQUFBLEVBQUFDLGFBQUE7SUFBQSxPQUFBZCxZQUFBLFlBQUFlLElBQUEsVUFBQUMsU0FBQUMsUUFBQTtNQUFBLGtCQUFBQSxRQUFBLENBQUFDLElBQUEsR0FBQUQsUUFBQSxDQUFBbFEsSUFBQTtRQUFBO1VBQy9CcVAsZ0JBQWdCLEdBQUFELEtBQUEsQ0FBaEJDLGdCQUFnQixFQUNoQkMsVUFBVSxHQUFBRixLQUFBLENBQVZFLFVBQVUsRUFDVkMsV0FBVyxHQUFBSCxLQUFBLENBQVhHLFdBQVcsRUFDWDNLLFFBQVEsR0FBQXdLLEtBQUEsQ0FBUnhLLFFBQVE7VUFBQXNMLFFBQUEsQ0FBQUMsSUFBQTtVQUFBLE1BSUpiLFVBQVUsSUFDVkMsV0FBVyxJQUNYM0ssUUFBUSxJQUNSLEVBQUE0SyxnQkFBQSxHQUFBNUssUUFBUSxDQUFDUSxNQUFNLGNBQUFvSyxnQkFBQSx1QkFBZkEsZ0JBQUEsQ0FBaUJyUSxNQUFNLE1BQUssQ0FBQyxJQUM3QnlGLFFBQVEsQ0FBQ2lCLE9BQU8sSUFDaEIsRUFBQTRKLGdCQUFBLEdBQUE3SyxRQUFRLENBQUMzQixNQUFNLGNBQUF3TSxnQkFBQSx1QkFBZkEsZ0JBQUEsQ0FBaUJ0USxNQUFNLE1BQUssQ0FBQztZQUFBK1EsUUFBQSxDQUFBbFEsSUFBQTtZQUFBO1VBQUE7VUFFdkIwUCxHQUFHLEdBQUcsQ0FBQzlLLFFBQVEsQ0FBQzNCLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRzJCLFFBQVEsQ0FBQzNCLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1VBQ25EME0sR0FBRyxHQUFHLENBQUMvSyxRQUFRLENBQUMzQixNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcyQixRQUFRLENBQUMzQixNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztVQUNuRDJNLFdBQVcsR0FBR1EsaUJBQWlCLENBQUNWLEdBQUcsRUFBRUMsR0FBRyxFQUFFL0ssUUFBUSxDQUFDaUIsT0FBTyxDQUFDO1VBRTNEZ0ssVUFBVSxHQUNkUixnQkFBZ0IsS0FBS2dCLDJCQUFnQixDQUFDQyxHQUFHLEdBQ3JDQyxjQUFTLENBQUNDLGdCQUFnQixDQUFDQyxrQkFBa0IsQ0FBQ25CLFVBQVUsQ0FBQyxFQUFFO1lBQ3pENU4sR0FBRyxFQUFFO2NBQ0g2TixXQUFXLEVBQUVrQixrQkFBa0IsQ0FBQ2xCLFdBQVc7WUFDN0M7VUFDRixDQUFDLENBQUMsR0FDRm1CLHNCQUFhLENBQUNGLGdCQUFnQixDQUFDbEIsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDO1VBQUFZLFFBQUEsQ0FBQWxRLElBQUE7VUFBQSxPQUNqQzZQLFVBQVUsQ0FBQ2MsV0FBVyxDQUFDO1lBQUNDLEtBQUssRUFBRWhCO1VBQVcsQ0FBUSxDQUFDO1FBQUE7VUFBaEVFLElBQUksR0FBQUksUUFBQSxDQUFBVyxJQUFBO1VBQ0pkLGFBQWEsR0FBR2UsWUFBWSxDQUFDaEIsSUFBSSxDQUFDLENBQUNuTixHQUFHLENBQUMsVUFBQWpELENBQUMsRUFBSTtZQUNoRCxPQUFBdUIsYUFBQSxDQUFBQSxhQUFBLEtBQ0t2QixDQUFDO2NBQ0ppTyxZQUFZLEVBQUVqTyxDQUFDLENBQUNpTyxZQUFZLElBQUlqQywwQkFBZSxDQUFDMUQsTUFBTTtjQUN0RG1ELEVBQUUsRUFBRXpMLENBQUMsQ0FBQ3lMLEVBQUUsSUFBSXpMLENBQUMsQ0FBQ1c7WUFBSTtVQUV0QixDQUFDLENBQUM7VUFFRnVFLFFBQVEsQ0FBQ1EsTUFBTSxHQUFHMkssYUFBYTtRQUFDO1VBQUFHLFFBQUEsQ0FBQWxRLElBQUE7VUFBQTtRQUFBO1VBQUFrUSxRQUFBLENBQUFDLElBQUE7VUFBQUQsUUFBQSxDQUFBYSxFQUFBLEdBQUFiLFFBQUE7UUFBQTtRQUFBO1VBQUEsT0FBQUEsUUFBQSxDQUFBYyxJQUFBO01BQUE7SUFBQSxHQUFBN0IsT0FBQTtFQUFBLENBS3JDO0VBQUEsZ0JBekNZTCxpQkFBaUJBLENBQUFtQyxFQUFBO0lBQUEsT0FBQWxDLEtBQUEsQ0FBQS9OLEtBQUEsT0FBQUUsU0FBQTtFQUFBO0FBQUEsR0F5QzdCOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFNNFAsWUFBWSxHQUFHLFNBQWZBLFlBQVlBLENBQUloQixJQUEyQixFQUFvQjtFQUFBLElBQUFvQixjQUFBO0VBQ25FLElBQUksQ0FBQXBCLElBQUksYUFBSkEsSUFBSSxnQkFBQW9CLGNBQUEsR0FBSnBCLElBQUksQ0FBRXFCLFFBQVEsY0FBQUQsY0FBQSx1QkFBZEEsY0FBQSxDQUFnQi9SLE1BQU0sSUFBRyxDQUFDLEVBQUU7SUFDOUIsSUFBTWlTLE1BQU0sR0FBRzNRLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDb1AsSUFBSSxDQUFDcUIsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxVQUFVLENBQUM7SUFDdkQsSUFBTUMsTUFBTSxHQUFHeEIsSUFBSSxDQUFDcUIsUUFBUSxDQUFDeE8sR0FBRyxDQUFDLFVBQUFqRCxDQUFDLEVBQUk7TUFDcEMsSUFBTTZSLEdBQUcsR0FBRyxDQUFDLENBQUM7TUFDZEgsTUFBTSxDQUFDalEsT0FBTyxDQUFDLFVBQUFxUSxVQUFVLEVBQUk7UUFDM0JELEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLEdBQUc5UixDQUFDLENBQUMyUixVQUFVLENBQUNHLFVBQVUsQ0FBQztNQUM1QyxDQUFDLENBQUM7TUFDRixPQUFPRCxHQUFHO0lBQ1osQ0FBQyxDQUFDO0lBRUYsSUFBTW5NLE1BQU0sR0FBRyxJQUFBcU0sOEJBQWlCLEVBQUNILE1BQU0sRUFBRUYsTUFBTSxDQUFDO0lBQ2hEO0lBQ0EsT0FBT2hNLE1BQU0sQ0FBQ3pDLEdBQUcsQ0FBQyxVQUFBakQsQ0FBQyxFQUFJO01BQ3JCLElBQU1nUyxXQUFXLEdBQ2YsQ0FBQ2hTLENBQUMsQ0FBQ3FDLElBQUksS0FBSyxTQUFTLElBQUlyQyxDQUFDLENBQUNxQyxJQUFJLEtBQUssT0FBTyxLQUMzQyxPQUFPK04sSUFBSSxDQUFDcUIsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxVQUFVLENBQUMzUixDQUFDLENBQUNXLElBQUksQ0FBQyxLQUFLLFFBQVE7TUFFekQsT0FBQVksYUFBQSxDQUFBQSxhQUFBLEtBQ0t2QixDQUFDO1FBQ0ppTyxZQUFZLEVBQUUrRCxXQUFXLEdBQUdDLHdCQUFtQixDQUFDNUQsTUFBTSxHQUFHck8sQ0FBQyxDQUFDaU8sWUFBWTtRQUN2RTVMLElBQUksRUFBRTJQLFdBQVcsR0FBRyxRQUFRLEdBQUdoUyxDQUFDLENBQUNxQztNQUFJO0lBRXpDLENBQUMsQ0FBQztFQUNKO0VBQ0EsT0FBTyxFQUFFO0FBQ1gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNxTyxpQkFBaUJBLENBQUNWLEdBQVcsRUFBRUMsR0FBVyxFQUFFaUMsSUFBWSxFQUFFO0VBQ2pFLElBQUlqQyxHQUFHLEdBQUcsQ0FBQyxPQUFPLElBQUlBLEdBQUcsR0FBRyxPQUFPLEVBQUU7SUFDbkMsTUFBTSxJQUFJa0MsS0FBSyxDQUFDLDhEQUE4RCxDQUFDO0VBQ2pGO0VBQ0EsSUFBSUQsSUFBSSxHQUFHLENBQUMsRUFBRTtJQUNaLE1BQU0sSUFBSUMsS0FBSyxDQUFDLDRDQUE0QyxDQUFDO0VBQy9EOztFQUVBO0VBQ0EsSUFBTUMsS0FBSyxHQUFHLENBQUMsSUFBSUYsSUFBSTtFQUN2QjtFQUNBLElBQU1HLENBQUMsR0FBRzlGLElBQUksQ0FBQytGLEtBQUssQ0FBRSxDQUFDdEMsR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUlvQyxLQUFLLENBQUM7RUFDakQ7RUFDQSxJQUFNRyxNQUFNLEdBQUl0QyxHQUFHLEdBQUcxRCxJQUFJLENBQUNpRyxFQUFFLEdBQUksR0FBRztFQUNwQyxJQUFNQyxDQUFDLEdBQUdsRyxJQUFJLENBQUMrRixLQUFLLENBQ2pCLENBQUMsQ0FBQyxHQUFHL0YsSUFBSSxDQUFDbUcsR0FBRyxDQUFDbkcsSUFBSSxDQUFDb0csR0FBRyxDQUFDSixNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUdoRyxJQUFJLENBQUNxRyxHQUFHLENBQUNMLE1BQU0sQ0FBQyxDQUFDLEdBQUdoRyxJQUFJLENBQUNpRyxFQUFFLElBQUksQ0FBQyxHQUFJSixLQUM1RSxDQUFDO0VBRUQsT0FBTztJQUFDQyxDQUFDLEVBQURBLENBQUM7SUFBRUksQ0FBQyxFQUFEQSxDQUFDO0lBQUVJLENBQUMsRUFBRVg7RUFBSSxDQUFDO0FBQ3hCIiwiaWdub3JlTGlzdCI6W119