"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("react"));
var _styledComponents = _interopRequireDefault(require("styled-components"));
var _localization = require("@kepler.gl/localization");
var _styledComponents2 = require("../../common/styled-components");
var _fieldSelector = _interopRequireDefault(require("../../common/field-selector"));
var _reducers = require("@kepler.gl/reducers");
var _templateObject, _templateObject2, _templateObject3, _templateObject4; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
var ColumnRow = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  margin-bottom: 8px;\n  align-items: center;\n"])));
var ColumnName = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  width: 32%;\n  line-height: 1.2;\n  padding-right: 6px;\n"])));
var ColumnSelect = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  width: 68%;\n"])));
ColumnSelectorFactory.deps = [_fieldSelector["default"]];
var ColumnPanelLabel = (0, _styledComponents["default"])(_styledComponents2.PanelLabel).attrs({
  className: 'side-panel-subpanel__label'
})(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2["default"])(["\n  font-size: 10px;\n"])));
function ColumnSelectorFactory(FieldSelector) {
  var ColumnSelector = function ColumnSelector(_ref) {
    var column = _ref.column,
      columns = _ref.columns,
      label = _ref.label,
      allFields = _ref.allFields,
      onSelect = _ref.onSelect,
      fieldPairs = _ref.fieldPairs,
      _ref$isActive = _ref.isActive,
      isActive = _ref$isActive === void 0 ? true : _ref$isActive;
    var isError = (0, _react.useMemo)(function () {
      return isActive && !(0, _reducers.validateColumn)(column, columns, allFields);
    }, [isActive, column, columns, allFields]);
    return /*#__PURE__*/_react["default"].createElement(ColumnRow, {
      className: "layer-config__column__selector"
    }, /*#__PURE__*/_react["default"].createElement(ColumnName, {
      className: "layer-config__column__name"
    }, /*#__PURE__*/_react["default"].createElement(ColumnPanelLabel, null, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
      id: "columns.".concat(label)
    }), !column.optional ? "  *" : null)), /*#__PURE__*/_react["default"].createElement(ColumnSelect, {
      className: "layer-config__column__select"
    }, /*#__PURE__*/_react["default"].createElement(FieldSelector, {
      suggested: fieldPairs,
      error: isError,
      fields: allFields,
      value: column.value,
      erasable: true,
      onSelect: onSelect
    })));
  };
  return ColumnSelector;
}
var _default = exports["default"] = ColumnSelectorFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfbG9jYWxpemF0aW9uIiwiX3N0eWxlZENvbXBvbmVudHMyIiwiX2ZpZWxkU2VsZWN0b3IiLCJfcmVkdWNlcnMiLCJfdGVtcGxhdGVPYmplY3QiLCJfdGVtcGxhdGVPYmplY3QyIiwiX3RlbXBsYXRlT2JqZWN0MyIsIl90ZW1wbGF0ZU9iamVjdDQiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJDb2x1bW5Sb3ciLCJzdHlsZWQiLCJkaXYiLCJfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsMiIsIkNvbHVtbk5hbWUiLCJDb2x1bW5TZWxlY3QiLCJDb2x1bW5TZWxlY3RvckZhY3RvcnkiLCJkZXBzIiwiRmllbGRTZWxlY3RvckZhY3RvcnkiLCJDb2x1bW5QYW5lbExhYmVsIiwiUGFuZWxMYWJlbCIsImF0dHJzIiwiY2xhc3NOYW1lIiwiRmllbGRTZWxlY3RvciIsIkNvbHVtblNlbGVjdG9yIiwiX3JlZiIsImNvbHVtbiIsImNvbHVtbnMiLCJsYWJlbCIsImFsbEZpZWxkcyIsIm9uU2VsZWN0IiwiZmllbGRQYWlycyIsIl9yZWYkaXNBY3RpdmUiLCJpc0FjdGl2ZSIsImlzRXJyb3IiLCJ1c2VNZW1vIiwidmFsaWRhdGVDb2x1bW4iLCJjcmVhdGVFbGVtZW50IiwiRm9ybWF0dGVkTWVzc2FnZSIsImlkIiwiY29uY2F0Iiwib3B0aW9uYWwiLCJzdWdnZXN0ZWQiLCJlcnJvciIsImZpZWxkcyIsInZhbHVlIiwiZXJhc2FibGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2lkZS1wYW5lbC9sYXllci1wYW5lbC9jb2x1bW4tc2VsZWN0b3IudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBSZWFjdCwge3VzZU1lbW8sIFJlYWN0Tm9kZX0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ0BrZXBsZXIuZ2wvbG9jYWxpemF0aW9uJztcbmltcG9ydCB7UGFuZWxMYWJlbH0gZnJvbSAnLi4vLi4vY29tbW9uL3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBGaWVsZFNlbGVjdG9yRmFjdG9yeSBmcm9tICcuLi8uLi9jb21tb24vZmllbGQtc2VsZWN0b3InO1xuaW1wb3J0IHt2YWxpZGF0ZUNvbHVtbn0gZnJvbSAnQGtlcGxlci5nbC9yZWR1Y2Vycyc7XG5pbXBvcnQge0xheWVyQ29sdW1uLCBMYXllckNvbHVtbnMsIEVuaGFuY2VkRmllbGRQYWlyfSBmcm9tICdAa2VwbGVyLmdsL3R5cGVzJztcbmltcG9ydCB7TWluaW1hbEZpZWxkfSBmcm9tICcuLi8uLi9jb21tb24vZmllbGQtc2VsZWN0b3InO1xuXG5leHBvcnQgdHlwZSBDb2x1bW5TZWxlY3RvclByb3BzPEZpZWxkT3B0aW9uIGV4dGVuZHMgTWluaW1hbEZpZWxkPiA9IHtcbiAgY29sdW1uOiBMYXllckNvbHVtbjtcbiAgY29sdW1uczogTGF5ZXJDb2x1bW5zO1xuICBsYWJlbDogc3RyaW5nO1xuICBhbGxGaWVsZHM6IEZpZWxkT3B0aW9uW107XG4gIG9uU2VsZWN0OiAoXG4gICAgaXRlbXM6XG4gICAgICB8IFJlYWRvbmx5QXJyYXk8c3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IG9iamVjdD5cbiAgICAgIHwgc3RyaW5nXG4gICAgICB8IG51bWJlclxuICAgICAgfCBib29sZWFuXG4gICAgICB8IG9iamVjdFxuICAgICAgfCBudWxsXG4gICkgPT4gdm9pZDtcbiAgZmllbGRQYWlyczogRW5oYW5jZWRGaWVsZFBhaXJbXSB8IG51bGw7XG4gIGlzQWN0aXZlPzogYm9vbGVhbjtcbn07XG5cbmNvbnN0IENvbHVtblJvdyA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIG1hcmdpbi1ib3R0b206IDhweDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbmA7XG5cbmNvbnN0IENvbHVtbk5hbWUgPSBzdHlsZWQuZGl2YFxuICB3aWR0aDogMzIlO1xuICBsaW5lLWhlaWdodDogMS4yO1xuICBwYWRkaW5nLXJpZ2h0OiA2cHg7XG5gO1xuXG5jb25zdCBDb2x1bW5TZWxlY3QgPSBzdHlsZWQuZGl2YFxuICB3aWR0aDogNjglO1xuYDtcblxuQ29sdW1uU2VsZWN0b3JGYWN0b3J5LmRlcHMgPSBbRmllbGRTZWxlY3RvckZhY3RvcnldO1xuXG5jb25zdCBDb2x1bW5QYW5lbExhYmVsID0gc3R5bGVkKFBhbmVsTGFiZWwpLmF0dHJzPHtjaGlsZHJlbjogUmVhY3ROb2RlfT4oe1xuICBjbGFzc05hbWU6ICdzaWRlLXBhbmVsLXN1YnBhbmVsX19sYWJlbCdcbn0pYFxuICBmb250LXNpemU6IDEwcHg7XG5gO1xuXG5mdW5jdGlvbiBDb2x1bW5TZWxlY3RvckZhY3RvcnkoRmllbGRTZWxlY3RvcjogUmV0dXJuVHlwZTx0eXBlb2YgRmllbGRTZWxlY3RvckZhY3Rvcnk+KSB7XG4gIGNvbnN0IENvbHVtblNlbGVjdG9yOiBSZWFjdC5GQzxDb2x1bW5TZWxlY3RvclByb3BzPGFueT4+ID0gKHtcbiAgICBjb2x1bW4sXG4gICAgY29sdW1ucyxcbiAgICBsYWJlbCxcbiAgICBhbGxGaWVsZHMsXG4gICAgb25TZWxlY3QsXG4gICAgZmllbGRQYWlycyxcbiAgICBpc0FjdGl2ZSA9IHRydWVcbiAgfSkgPT4ge1xuICAgIGNvbnN0IGlzRXJyb3IgPSB1c2VNZW1vKFxuICAgICAgKCkgPT4gaXNBY3RpdmUgJiYgIXZhbGlkYXRlQ29sdW1uKGNvbHVtbiwgY29sdW1ucywgYWxsRmllbGRzKSxcbiAgICAgIFtpc0FjdGl2ZSwgY29sdW1uLCBjb2x1bW5zLCBhbGxGaWVsZHNdXG4gICAgKTtcbiAgICByZXR1cm4gKFxuICAgICAgPENvbHVtblJvdyBjbGFzc05hbWU9XCJsYXllci1jb25maWdfX2NvbHVtbl9fc2VsZWN0b3JcIj5cbiAgICAgICAgPENvbHVtbk5hbWUgY2xhc3NOYW1lPVwibGF5ZXItY29uZmlnX19jb2x1bW5fX25hbWVcIj5cbiAgICAgICAgICA8Q29sdW1uUGFuZWxMYWJlbD5cbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPXtgY29sdW1ucy4ke2xhYmVsfWB9IC8+XG4gICAgICAgICAgICB7IWNvbHVtbi5vcHRpb25hbCA/IGAgICpgIDogbnVsbH1cbiAgICAgICAgICA8L0NvbHVtblBhbmVsTGFiZWw+XG4gICAgICAgIDwvQ29sdW1uTmFtZT5cbiAgICAgICAgPENvbHVtblNlbGVjdCBjbGFzc05hbWU9XCJsYXllci1jb25maWdfX2NvbHVtbl9fc2VsZWN0XCI+XG4gICAgICAgICAgPEZpZWxkU2VsZWN0b3JcbiAgICAgICAgICAgIHN1Z2dlc3RlZD17ZmllbGRQYWlycyBhcyBhbnl9XG4gICAgICAgICAgICBlcnJvcj17aXNFcnJvcn1cbiAgICAgICAgICAgIGZpZWxkcz17YWxsRmllbGRzfVxuICAgICAgICAgICAgdmFsdWU9e2NvbHVtbi52YWx1ZX1cbiAgICAgICAgICAgIGVyYXNhYmxlXG4gICAgICAgICAgICBvblNlbGVjdD17b25TZWxlY3R9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Db2x1bW5TZWxlY3Q+XG4gICAgICA8L0NvbHVtblJvdz5cbiAgICApO1xuICB9O1xuICByZXR1cm4gQ29sdW1uU2VsZWN0b3I7XG59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QUFBLENBQVBFLE9BQU87TUFDUEMsS0FBSyxHQUFBSCxJQUFBLENBQUxHLEtBQUs7TUFDTEMsU0FBUyxHQUFBSixJQUFBLENBQVRJLFNBQVM7TUFDVEMsUUFBUSxHQUFBTCxJQUFBLENBQVJLLFFBQVE7TUFDUkMsVUFBVSxHQUFBTixJQUFBLENBQVZNLFVBQVU7TUFBQUMsYUFBQSxHQUFBUCxJQUFBLENBQ1ZRLFFBQVE7TUFBUkEsUUFBUSxHQUFBRCxhQUFBLGNBQUcsSUFBSSxHQUFBQSxhQUFBO0lBRWYsSUFBTUUsT0FBTyxHQUFHLElBQUFDLGNBQU8sRUFDckI7TUFBQSxPQUFNRixRQUFRLElBQUksQ0FBQyxJQUFBRyx3QkFBYyxFQUFDVixNQUFNLEVBQUVDLE9BQU8sRUFBRUUsU0FBUyxDQUFDO0lBQUEsR0FDN0QsQ0FBQ0ksUUFBUSxFQUFFUCxNQUFNLEVBQUVDLE9BQU8sRUFBRUUsU0FBUyxDQUN2QyxDQUFDO0lBQ0Qsb0JBQ0VwRCxNQUFBLFlBQUE0RCxhQUFBLENBQUMzQixTQUFTO01BQUNZLFNBQVMsRUFBQztJQUFnQyxnQkFDbkQ3QyxNQUFBLFlBQUE0RCxhQUFBLENBQUN2QixVQUFVO01BQUNRLFNBQVMsRUFBQztJQUE0QixnQkFDaEQ3QyxNQUFBLFlBQUE0RCxhQUFBLENBQUNsQixnQkFBZ0IscUJBQ2YxQyxNQUFBLFlBQUE0RCxhQUFBLENBQUN2RCxhQUFBLENBQUF3RCxnQkFBZ0I7TUFBQ0MsRUFBRSxhQUFBQyxNQUFBLENBQWFaLEtBQUs7SUFBRyxDQUFFLENBQUMsRUFDM0MsQ0FBQ0YsTUFBTSxDQUFDZSxRQUFRLFdBQVcsSUFDWixDQUNSLENBQUMsZUFDYmhFLE1BQUEsWUFBQTRELGFBQUEsQ0FBQ3RCLFlBQVk7TUFBQ08sU0FBUyxFQUFDO0lBQThCLGdCQUNwRDdDLE1BQUEsWUFBQTRELGFBQUEsQ0FBQ2QsYUFBYTtNQUNabUIsU0FBUyxFQUFFWCxVQUFrQjtNQUM3QlksS0FBSyxFQUFFVCxPQUFRO01BQ2ZVLE1BQU0sRUFBRWYsU0FBVTtNQUNsQmdCLEtBQUssRUFBRW5CLE1BQU0sQ0FBQ21CLEtBQU07TUFDcEJDLFFBQVE7TUFDUmhCLFFBQVEsRUFBRUE7SUFBUyxDQUNwQixDQUNXLENBQ0wsQ0FBQztFQUVoQixDQUFDO0VBQ0QsT0FBT04sY0FBYztBQUN2QjtBQUFDLElBQUF1QixRQUFBLEdBQUFDLE9BQUEsY0FFY2hDLHFCQUFxQiIsImlnbm9yZUxpc3QiOltdfQ==