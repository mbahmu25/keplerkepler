"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _react = _interopRequireWildcard(require("react"));
var _datasetLayerSection = _interopRequireDefault(require("./dataset-layer-section"));
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
// SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project

DatasetLayerGroupFactory.deps = [_datasetLayerSection["default"]];
function DatasetLayerGroupFactory(DatasetLayerSection) {
  var DatasetLayerGroup = function DatasetLayerGroup(props) {
    var datasets = props.datasets,
      showDatasetTable = props.showDatasetTable,
      layers = props.layers,
      updateTableColor = props.updateTableColor,
      showDeleteDataset = props.showDeleteDataset,
      removeDataset = props.removeDataset,
      layerOrder = props.layerOrder,
      layerClasses = props.layerClasses,
      uiStateActions = props.uiStateActions,
      visStateActions = props.visStateActions,
      mapStateActions = props.mapStateActions;
    var datasetLayerSectionData = (0, _react.useMemo)(function () {
      return Object.values(datasets).map(function (dataset) {
        // Global layer order will contain the correct order of layers
        // We just empty the positions in layers array (for each dataset)
        // where the layer doesn't belong to a dataset and set it to null
        var datasetLayers = layers.map(function (layer) {
          return layer.config.dataId === dataset.id ? layer : null;
        }).filter(function (layer) {
          return Boolean(layer);
        });
        return {
          dataset: dataset,
          datasetLayers: datasetLayers
        };
      });
    }, [datasets, layers]);
    return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, datasetLayerSectionData.map(function (dlsData) {
      return /*#__PURE__*/_react["default"].createElement(DatasetLayerSection, {
        key: dlsData.dataset.id,
        dataset: dlsData.dataset,
        layers: dlsData.datasetLayers,
        datasets: datasets,
        showDatasetTable: showDatasetTable,
        updateTableColor: updateTableColor,
        showDeleteDataset: showDeleteDataset,
        removeDataset: removeDataset,
        layerOrder: layerOrder,
        layerClasses: layerClasses,
        uiStateActions: uiStateActions,
        visStateActions: visStateActions,
        mapStateActions: mapStateActions
      });
    }));
  };
  return DatasetLayerGroup;
}
var _default = exports["default"] = DatasetLayerGroupFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfZGF0YXNldExheWVyU2VjdGlvbiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJEYXRhc2V0TGF5ZXJHcm91cEZhY3RvcnkiLCJkZXBzIiwiRGF0YXNldExheWVyU2VjdGlvbkZhY3RvcnkiLCJEYXRhc2V0TGF5ZXJTZWN0aW9uIiwiRGF0YXNldExheWVyR3JvdXAiLCJwcm9wcyIsImRhdGFzZXRzIiwic2hvd0RhdGFzZXRUYWJsZSIsImxheWVycyIsInVwZGF0ZVRhYmxlQ29sb3IiLCJzaG93RGVsZXRlRGF0YXNldCIsInJlbW92ZURhdGFzZXQiLCJsYXllck9yZGVyIiwibGF5ZXJDbGFzc2VzIiwidWlTdGF0ZUFjdGlvbnMiLCJ2aXNTdGF0ZUFjdGlvbnMiLCJtYXBTdGF0ZUFjdGlvbnMiLCJkYXRhc2V0TGF5ZXJTZWN0aW9uRGF0YSIsInVzZU1lbW8iLCJ2YWx1ZXMiLCJtYXAiLCJkYXRhc2V0IiwiZGF0YXNldExheWVycyIsImxheWVyIiwiY29uZmlnIiwiZGF0YUlkIiwiaWQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiY3JlYXRlRWxlbWVudCIsIkZyYWdtZW50IiwiZGxzRGF0YSIsImtleSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zaWRlLXBhbmVsL2xheWVyLXBhbmVsL2RhdGFzZXQtbGF5ZXItZ3JvdXAudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBSZWFjdCwge3VzZU1lbW99IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IERhdGFzZXRMYXllclNlY3Rpb25GYWN0b3J5IGZyb20gJy4vZGF0YXNldC1sYXllci1zZWN0aW9uJztcbmltcG9ydCB7TGF5ZXIsIExheWVyQ2xhc3Nlc1R5cGV9IGZyb20gJ0BrZXBsZXIuZ2wvbGF5ZXJzJztcbmltcG9ydCB7VUlTdGF0ZUFjdGlvbnMsIFZpc1N0YXRlQWN0aW9ucywgQWN0aW9uSGFuZGxlciwgTWFwU3RhdGVBY3Rpb25zfSBmcm9tICdAa2VwbGVyLmdsL2FjdGlvbnMnO1xuaW1wb3J0IHtLZXBsZXJUYWJsZSwgRGF0YXNldHN9IGZyb20gJ0BrZXBsZXIuZ2wvdGFibGUnO1xuXG50eXBlIERhdGFzZXRMYXllckdyb3VwUHJvcHMgPSB7XG4gIGRhdGFzZXRzOiBEYXRhc2V0cztcbiAgbGF5ZXJzOiBMYXllcltdO1xuICBsYXllck9yZGVyOiBzdHJpbmdbXTtcbiAgbGF5ZXJDbGFzc2VzOiBMYXllckNsYXNzZXNUeXBlO1xuICBzaG93RGVsZXRlRGF0YXNldDogYm9vbGVhbjtcbiAgcmVtb3ZlRGF0YXNldDogQWN0aW9uSGFuZGxlcjx0eXBlb2YgVUlTdGF0ZUFjdGlvbnMub3BlbkRlbGV0ZU1vZGFsPjtcbiAgc2hvd0RhdGFzZXRUYWJsZTogQWN0aW9uSGFuZGxlcjx0eXBlb2YgVmlzU3RhdGVBY3Rpb25zLnNob3dEYXRhc2V0VGFibGU+O1xuICB1cGRhdGVUYWJsZUNvbG9yOiBBY3Rpb25IYW5kbGVyPHR5cGVvZiBWaXNTdGF0ZUFjdGlvbnMudXBkYXRlVGFibGVDb2xvcj47XG4gIHVpU3RhdGVBY3Rpb25zOiB0eXBlb2YgVUlTdGF0ZUFjdGlvbnM7XG4gIHZpc1N0YXRlQWN0aW9uczogdHlwZW9mIFZpc1N0YXRlQWN0aW9ucztcbiAgbWFwU3RhdGVBY3Rpb25zOiB0eXBlb2YgTWFwU3RhdGVBY3Rpb25zO1xufTtcblxuRGF0YXNldExheWVyR3JvdXBGYWN0b3J5LmRlcHMgPSBbRGF0YXNldExheWVyU2VjdGlvbkZhY3RvcnldO1xuXG5mdW5jdGlvbiBEYXRhc2V0TGF5ZXJHcm91cEZhY3RvcnkoXG4gIERhdGFzZXRMYXllclNlY3Rpb246IFJldHVyblR5cGU8dHlwZW9mIERhdGFzZXRMYXllclNlY3Rpb25GYWN0b3J5PlxuKSB7XG4gIGNvbnN0IERhdGFzZXRMYXllckdyb3VwOiBSZWFjdC5GQzxEYXRhc2V0TGF5ZXJHcm91cFByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhc2V0cyxcbiAgICAgIHNob3dEYXRhc2V0VGFibGUsXG4gICAgICBsYXllcnMsXG4gICAgICB1cGRhdGVUYWJsZUNvbG9yLFxuICAgICAgc2hvd0RlbGV0ZURhdGFzZXQsXG4gICAgICByZW1vdmVEYXRhc2V0LFxuICAgICAgbGF5ZXJPcmRlcixcbiAgICAgIGxheWVyQ2xhc3NlcyxcbiAgICAgIHVpU3RhdGVBY3Rpb25zLFxuICAgICAgdmlzU3RhdGVBY3Rpb25zLFxuICAgICAgbWFwU3RhdGVBY3Rpb25zXG4gICAgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgZGF0YXNldExheWVyU2VjdGlvbkRhdGEgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKGRhdGFzZXRzKS5tYXAoKGRhdGFzZXQ6IEtlcGxlclRhYmxlKSA9PiB7XG4gICAgICAgIC8vIEdsb2JhbCBsYXllciBvcmRlciB3aWxsIGNvbnRhaW4gdGhlIGNvcnJlY3Qgb3JkZXIgb2YgbGF5ZXJzXG4gICAgICAgIC8vIFdlIGp1c3QgZW1wdHkgdGhlIHBvc2l0aW9ucyBpbiBsYXllcnMgYXJyYXkgKGZvciBlYWNoIGRhdGFzZXQpXG4gICAgICAgIC8vIHdoZXJlIHRoZSBsYXllciBkb2Vzbid0IGJlbG9uZyB0byBhIGRhdGFzZXQgYW5kIHNldCBpdCB0byBudWxsXG4gICAgICAgIGNvbnN0IGRhdGFzZXRMYXllcnMgPSBsYXllcnNcbiAgICAgICAgICAubWFwKGxheWVyID0+IChsYXllci5jb25maWcuZGF0YUlkID09PSBkYXRhc2V0LmlkID8gbGF5ZXIgOiBudWxsKSlcbiAgICAgICAgICAuZmlsdGVyKGxheWVyID0+IEJvb2xlYW4obGF5ZXIpKTtcblxuICAgICAgICByZXR1cm4ge2RhdGFzZXQsIGRhdGFzZXRMYXllcnN9O1xuICAgICAgfSk7XG4gICAgfSwgW2RhdGFzZXRzLCBsYXllcnNdKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICB7ZGF0YXNldExheWVyU2VjdGlvbkRhdGEubWFwKGRsc0RhdGEgPT4gKFxuICAgICAgICAgIDxEYXRhc2V0TGF5ZXJTZWN0aW9uXG4gICAgICAgICAgICBrZXk9e2Rsc0RhdGEuZGF0YXNldC5pZH1cbiAgICAgICAgICAgIGRhdGFzZXQ9e2Rsc0RhdGEuZGF0YXNldH1cbiAgICAgICAgICAgIGxheWVycz17ZGxzRGF0YS5kYXRhc2V0TGF5ZXJzIGFzIExheWVyW119XG4gICAgICAgICAgICBkYXRhc2V0cz17ZGF0YXNldHN9XG4gICAgICAgICAgICBzaG93RGF0YXNldFRhYmxlPXtzaG93RGF0YXNldFRhYmxlfVxuICAgICAgICAgICAgdXBkYXRlVGFibGVDb2xvcj17dXBkYXRlVGFibGVDb2xvcn1cbiAgICAgICAgICAgIHNob3dEZWxldGVEYXRhc2V0PXtzaG93RGVsZXRlRGF0YXNldH1cbiAgICAgICAgICAgIHJlbW92ZURhdGFzZXQ9e3JlbW92ZURhdGFzZXR9XG4gICAgICAgICAgICBsYXllck9yZGVyPXtsYXllck9yZGVyfVxuICAgICAgICAgICAgbGF5ZXJDbGFzc2VzPXtsYXllckNsYXNzZXN9XG4gICAgICAgICAgICB1aVN0YXRlQWN0aW9ucz17dWlTdGF0ZUFjdGlvbnN9XG4gICAgICAgICAgICB2aXNTdGF0ZUFjdGlvbnM9e3Zpc1N0YXRlQWN0aW9uc31cbiAgICAgICAgICAgIG1hcFN0YXRlQWN0aW9ucz17bWFwU3RhdGVBY3Rpb25zfVxuICAgICAgICAgIC8+XG4gICAgICAgICkpfVxuICAgICAgPC8+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gRGF0YXNldExheWVyR3JvdXA7XG59XG5cbmV4cG9ydCBkZWZhdWx0IERhdGFzZXRMYXllckdyb3VwRmFjdG9yeTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFHQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBQyxvQkFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQWlFLFNBQUFHLHlCQUFBQyxDQUFBLDZCQUFBQyxPQUFBLG1CQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFGLHdCQUFBLFlBQUFBLHlCQUFBQyxDQUFBLFdBQUFBLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLEtBQUFGLENBQUE7QUFBQSxTQUFBTCx3QkFBQUssQ0FBQSxFQUFBRSxDQUFBLFNBQUFBLENBQUEsSUFBQUYsQ0FBQSxJQUFBQSxDQUFBLENBQUFJLFVBQUEsU0FBQUosQ0FBQSxlQUFBQSxDQUFBLGdCQUFBSyxPQUFBLENBQUFMLENBQUEsMEJBQUFBLENBQUEsc0JBQUFBLENBQUEsUUFBQUcsQ0FBQSxHQUFBSix3QkFBQSxDQUFBRyxDQUFBLE9BQUFDLENBQUEsSUFBQUEsQ0FBQSxDQUFBRyxHQUFBLENBQUFOLENBQUEsVUFBQUcsQ0FBQSxDQUFBSSxHQUFBLENBQUFQLENBQUEsT0FBQVEsQ0FBQSxLQUFBQyxTQUFBLFVBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxjQUFBLElBQUFELE1BQUEsQ0FBQUUsd0JBQUEsV0FBQUMsQ0FBQSxJQUFBZCxDQUFBLG9CQUFBYyxDQUFBLE9BQUFDLGNBQUEsQ0FBQUMsSUFBQSxDQUFBaEIsQ0FBQSxFQUFBYyxDQUFBLFNBQUFHLENBQUEsR0FBQVAsQ0FBQSxHQUFBQyxNQUFBLENBQUFFLHdCQUFBLENBQUFiLENBQUEsRUFBQWMsQ0FBQSxVQUFBRyxDQUFBLEtBQUFBLENBQUEsQ0FBQVYsR0FBQSxJQUFBVSxDQUFBLENBQUFDLEdBQUEsSUFBQVAsTUFBQSxDQUFBQyxjQUFBLENBQUFKLENBQUEsRUFBQU0sQ0FBQSxFQUFBRyxDQUFBLElBQUFULENBQUEsQ0FBQU0sQ0FBQSxJQUFBZCxDQUFBLENBQUFjLENBQUEsWUFBQU4sQ0FBQSxjQUFBUixDQUFBLEVBQUFHLENBQUEsSUFBQUEsQ0FBQSxDQUFBZSxHQUFBLENBQUFsQixDQUFBLEVBQUFRLENBQUEsR0FBQUEsQ0FBQTtBQUxqRTtBQUNBOztBQXVCQVcsd0JBQXdCLENBQUNDLElBQUksR0FBRyxDQUFDQywrQkFBMEIsQ0FBQztBQUU1RCxTQUFTRix3QkFBd0JBLENBQy9CRyxtQkFBa0UsRUFDbEU7RUFDQSxJQUFNQyxpQkFBbUQsR0FBRyxTQUF0REEsaUJBQW1EQSxDQUFHQyxLQUFLLEVBQUk7SUFDbkUsSUFDRUMsUUFBUSxHQVdORCxLQUFLLENBWFBDLFFBQVE7TUFDUkMsZ0JBQWdCLEdBVWRGLEtBQUssQ0FWUEUsZ0JBQWdCO01BQ2hCQyxNQUFNLEdBU0pILEtBQUssQ0FUUEcsTUFBTTtNQUNOQyxnQkFBZ0IsR0FRZEosS0FBSyxDQVJQSSxnQkFBZ0I7TUFDaEJDLGlCQUFpQixHQU9mTCxLQUFLLENBUFBLLGlCQUFpQjtNQUNqQkMsYUFBYSxHQU1YTixLQUFLLENBTlBNLGFBQWE7TUFDYkMsVUFBVSxHQUtSUCxLQUFLLENBTFBPLFVBQVU7TUFDVkMsWUFBWSxHQUlWUixLQUFLLENBSlBRLFlBQVk7TUFDWkMsY0FBYyxHQUdaVCxLQUFLLENBSFBTLGNBQWM7TUFDZEMsZUFBZSxHQUViVixLQUFLLENBRlBVLGVBQWU7TUFDZkMsZUFBZSxHQUNiWCxLQUFLLENBRFBXLGVBQWU7SUFHakIsSUFBTUMsdUJBQXVCLEdBQUcsSUFBQUMsY0FBTyxFQUFDLFlBQU07TUFDNUMsT0FBTzFCLE1BQU0sQ0FBQzJCLE1BQU0sQ0FBQ2IsUUFBUSxDQUFDLENBQUNjLEdBQUcsQ0FBQyxVQUFDQyxPQUFvQixFQUFLO1FBQzNEO1FBQ0E7UUFDQTtRQUNBLElBQU1DLGFBQWEsR0FBR2QsTUFBTSxDQUN6QlksR0FBRyxDQUFDLFVBQUFHLEtBQUs7VUFBQSxPQUFLQSxLQUFLLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTSxLQUFLSixPQUFPLENBQUNLLEVBQUUsR0FBR0gsS0FBSyxHQUFHLElBQUk7UUFBQSxDQUFDLENBQUMsQ0FDakVJLE1BQU0sQ0FBQyxVQUFBSixLQUFLO1VBQUEsT0FBSUssT0FBTyxDQUFDTCxLQUFLLENBQUM7UUFBQSxFQUFDO1FBRWxDLE9BQU87VUFBQ0YsT0FBTyxFQUFQQSxPQUFPO1VBQUVDLGFBQWEsRUFBYkE7UUFBYSxDQUFDO01BQ2pDLENBQUMsQ0FBQztJQUNKLENBQUMsRUFBRSxDQUFDaEIsUUFBUSxFQUFFRSxNQUFNLENBQUMsQ0FBQztJQUV0QixvQkFDRWpDLE1BQUEsWUFBQXNELGFBQUEsQ0FBQXRELE1BQUEsWUFBQXVELFFBQUEsUUFDR2IsdUJBQXVCLENBQUNHLEdBQUcsQ0FBQyxVQUFBVyxPQUFPO01BQUEsb0JBQ2xDeEQsTUFBQSxZQUFBc0QsYUFBQSxDQUFDMUIsbUJBQW1CO1FBQ2xCNkIsR0FBRyxFQUFFRCxPQUFPLENBQUNWLE9BQU8sQ0FBQ0ssRUFBRztRQUN4QkwsT0FBTyxFQUFFVSxPQUFPLENBQUNWLE9BQVE7UUFDekJiLE1BQU0sRUFBRXVCLE9BQU8sQ0FBQ1QsYUFBeUI7UUFDekNoQixRQUFRLEVBQUVBLFFBQVM7UUFDbkJDLGdCQUFnQixFQUFFQSxnQkFBaUI7UUFDbkNFLGdCQUFnQixFQUFFQSxnQkFBaUI7UUFDbkNDLGlCQUFpQixFQUFFQSxpQkFBa0I7UUFDckNDLGFBQWEsRUFBRUEsYUFBYztRQUM3QkMsVUFBVSxFQUFFQSxVQUFXO1FBQ3ZCQyxZQUFZLEVBQUVBLFlBQWE7UUFDM0JDLGNBQWMsRUFBRUEsY0FBZTtRQUMvQkMsZUFBZSxFQUFFQSxlQUFnQjtRQUNqQ0MsZUFBZSxFQUFFQTtNQUFnQixDQUNsQyxDQUFDO0lBQUEsQ0FDSCxDQUNELENBQUM7RUFFUCxDQUFDO0VBRUQsT0FBT1osaUJBQWlCO0FBQzFCO0FBQUMsSUFBQTZCLFFBQUEsR0FBQUMsT0FBQSxjQUVjbEMsd0JBQXdCIiwiaWdub3JlTGlzdCI6W119