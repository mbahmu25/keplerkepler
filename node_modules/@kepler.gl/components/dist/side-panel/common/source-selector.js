"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("react"));
var _styledComponents = _interopRequireDefault(require("styled-components"));
var _sourceDataSelectorContent = _interopRequireDefault(require("./source-data-selector-content"));
var _fieldSelector = _interopRequireDefault(require("../../common/field-selector"));
var _templateObject, _templateObject2, _templateObject3; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
var StyledSourceContainer = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  background-color: #1c2233;\n"])));
SourceSelectorFactory.deps = [_sourceDataSelectorContent["default"], _fieldSelector["default"]];
function SourceSelectorFactory(SourceDataSelectorContent, FieldSelector) {
  var StyledSourceDataSelectorContent = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n    margin-bottom: 2px;\n\n    .item-selector__dropdown {\n      border-top-left-radius: 2px;\n      border-top-right-radius: 2px;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  "])));
  var StyledFieldSelector = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n    .item-selector__dropdown {\n      border-top-left-radius: 0;\n      border-top-right-radius: 0;\n      border-bottom-left-radius: 2px;\n      border-bottom-right-radius: 2px;\n    }\n  "])));
  var SourceSelector = function SourceSelector(_ref) {
    var className = _ref.className,
      datasets = _ref.datasets,
      dataId = _ref.dataId,
      disabled = _ref.disabled,
      onSelectDataset = _ref.onSelectDataset,
      fields = _ref.fields,
      fieldValue = _ref.fieldValue,
      onFieldSelector = _ref.onFieldSelector,
      inputTheme = _ref.inputTheme;
    var datasetFields = (0, _react.useMemo)(function () {
      var _datasets$dataId;
      return fields || ((_datasets$dataId = datasets[dataId]) === null || _datasets$dataId === void 0 ? void 0 : _datasets$dataId.fields);
    }, [dataId, datasets, fields]);
    return /*#__PURE__*/_react["default"].createElement(StyledSourceContainer, {
      className: className
    }, /*#__PURE__*/_react["default"].createElement(StyledSourceDataSelectorContent, null, /*#__PURE__*/_react["default"].createElement(SourceDataSelectorContent, {
      inputTheme: inputTheme,
      datasets: datasets,
      disabled: disabled,
      dataId: dataId,
      onSelect: onSelectDataset
    })), dataId && /*#__PURE__*/_react["default"].createElement(StyledFieldSelector, null, /*#__PURE__*/_react["default"].createElement(FieldSelector, {
      inputTheme: inputTheme,
      fields: datasetFields,
      value: fieldValue,
      erasable: false,
      onSelect: onFieldSelector
    })));
  };
  SourceSelector.displayName = 'SourceSelector';
  return SourceSelector;
}
var _default = exports["default"] = SourceSelectorFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfc291cmNlRGF0YVNlbGVjdG9yQ29udGVudCIsIl9maWVsZFNlbGVjdG9yIiwiX3RlbXBsYXRlT2JqZWN0IiwiX3RlbXBsYXRlT2JqZWN0MiIsIl90ZW1wbGF0ZU9iamVjdDMiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJTdHlsZWRTb3VyY2VDb250YWluZXIiLCJzdHlsZWQiLCJkaXYiLCJfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsMiIsIlNvdXJjZVNlbGVjdG9yRmFjdG9yeSIsImRlcHMiLCJTb3VyY2VEYXRhU2VsZWN0b3JDb250ZW50RmFjdG9yeSIsIkZpZWxkU2VsZWN0b3JGYWN0b3J5IiwiU291cmNlRGF0YVNlbGVjdG9yQ29udGVudCIsIkZpZWxkU2VsZWN0b3IiLCJTdHlsZWRTb3VyY2VEYXRhU2VsZWN0b3JDb250ZW50IiwiU3R5bGVkRmllbGRTZWxlY3RvciIsIlNvdXJjZVNlbGVjdG9yIiwiX3JlZiIsImNsYXNzTmFtZSIsImRhdGFzZXRzIiwiZGF0YUlkIiwiZGlzYWJsZWQiLCJvblNlbGVjdERhdGFzZXQiLCJmaWVsZHMiLCJmaWVsZFZhbHVlIiwib25GaWVsZFNlbGVjdG9yIiwiaW5wdXRUaGVtZSIsImRhdGFzZXRGaWVsZHMiLCJ1c2VNZW1vIiwiX2RhdGFzZXRzJGRhdGFJZCIsImNyZWF0ZUVsZW1lbnQiLCJvblNlbGVjdCIsInZhbHVlIiwiZXJhc2FibGUiLCJkaXNwbGF5TmFtZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zaWRlLXBhbmVsL2NvbW1vbi9zb3VyY2Utc2VsZWN0b3IudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBSZWFjdCwge3VzZU1lbW99IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgU291cmNlRGF0YVNlbGVjdG9yQ29udGVudEZhY3RvcnkgZnJvbSAnLi9zb3VyY2UtZGF0YS1zZWxlY3Rvci1jb250ZW50JztcbmltcG9ydCBGaWVsZFNlbGVjdG9yRmFjdG9yeSBmcm9tICcuLi8uLi9jb21tb24vZmllbGQtc2VsZWN0b3InO1xuXG5jb25zdCBTdHlsZWRTb3VyY2VDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWMyMjMzO1xuYDtcblxuU291cmNlU2VsZWN0b3JGYWN0b3J5LmRlcHMgPSBbU291cmNlRGF0YVNlbGVjdG9yQ29udGVudEZhY3RvcnksIEZpZWxkU2VsZWN0b3JGYWN0b3J5XTtcblxuZnVuY3Rpb24gU291cmNlU2VsZWN0b3JGYWN0b3J5KFNvdXJjZURhdGFTZWxlY3RvckNvbnRlbnQsIEZpZWxkU2VsZWN0b3IpIHtcbiAgY29uc3QgU3R5bGVkU291cmNlRGF0YVNlbGVjdG9yQ29udGVudCA9IHN0eWxlZC5kaXZgXG4gICAgbWFyZ2luLWJvdHRvbTogMnB4O1xuXG4gICAgLml0ZW0tc2VsZWN0b3JfX2Ryb3Bkb3duIHtcbiAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDJweDtcbiAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAycHg7XG4gICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwO1xuICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XG4gICAgfVxuICBgO1xuXG4gIGNvbnN0IFN0eWxlZEZpZWxkU2VsZWN0b3IgPSBzdHlsZWQuZGl2YFxuICAgIC5pdGVtLXNlbGVjdG9yX19kcm9wZG93biB7XG4gICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwO1xuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDA7XG4gICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAycHg7XG4gICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMnB4O1xuICAgIH1cbiAgYDtcblxuICBjb25zdCBTb3VyY2VTZWxlY3RvciA9ICh7XG4gICAgY2xhc3NOYW1lLFxuICAgIGRhdGFzZXRzLFxuICAgIGRhdGFJZCxcbiAgICBkaXNhYmxlZCxcbiAgICBvblNlbGVjdERhdGFzZXQsXG4gICAgZmllbGRzLFxuICAgIGZpZWxkVmFsdWUsXG4gICAgb25GaWVsZFNlbGVjdG9yLFxuICAgIGlucHV0VGhlbWVcbiAgfSkgPT4ge1xuICAgIGNvbnN0IGRhdGFzZXRGaWVsZHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBmaWVsZHMgfHwgZGF0YXNldHNbZGF0YUlkXT8uZmllbGRzO1xuICAgIH0sIFtkYXRhSWQsIGRhdGFzZXRzLCBmaWVsZHNdKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U3R5bGVkU291cmNlQ29udGFpbmVyIGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgPFN0eWxlZFNvdXJjZURhdGFTZWxlY3RvckNvbnRlbnQ+XG4gICAgICAgICAgPFNvdXJjZURhdGFTZWxlY3RvckNvbnRlbnRcbiAgICAgICAgICAgIGlucHV0VGhlbWU9e2lucHV0VGhlbWV9XG4gICAgICAgICAgICBkYXRhc2V0cz17ZGF0YXNldHN9XG4gICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICBkYXRhSWQ9e2RhdGFJZH1cbiAgICAgICAgICAgIG9uU2VsZWN0PXtvblNlbGVjdERhdGFzZXR9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9TdHlsZWRTb3VyY2VEYXRhU2VsZWN0b3JDb250ZW50PlxuICAgICAgICB7ZGF0YUlkICYmIChcbiAgICAgICAgICA8U3R5bGVkRmllbGRTZWxlY3Rvcj5cbiAgICAgICAgICAgIDxGaWVsZFNlbGVjdG9yXG4gICAgICAgICAgICAgIGlucHV0VGhlbWU9e2lucHV0VGhlbWV9XG4gICAgICAgICAgICAgIGZpZWxkcz17ZGF0YXNldEZpZWxkc31cbiAgICAgICAgICAgICAgdmFsdWU9e2ZpZWxkVmFsdWV9XG4gICAgICAgICAgICAgIGVyYXNhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgb25TZWxlY3Q9e29uRmllbGRTZWxlY3Rvcn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9TdHlsZWRGaWVsZFNlbGVjdG9yPlxuICAgICAgICApfVxuICAgICAgPC9TdHlsZWRTb3VyY2VDb250YWluZXI+XG4gICAgKTtcbiAgfTtcblxuICBTb3VyY2VTZWxlY3Rvci5kaXNwbGF5TmFtZSA9ICdTb3VyY2VTZWxlY3Rvcic7XG5cbiAgcmV0dXJuIFNvdXJjZVNlbGVjdG9yO1xufVxuXG5leHBvcnQgZGVmYXVsdCBTb3VyY2VTZWxlY3RvckZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUdBLElBQUFBLE1BQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGlCQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFFQSxJQUFBRywwQkFBQSxHQUFBRCxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUksY0FBQSxHQUFBRixzQkFBQSxDQUFBRixPQUFBO0FBQStELElBQUFLLGVBQUEsRUFBQUMsZ0JBQUEsRUFBQUMsZ0JBQUEsRUFQL0Q7QUFDQTtBQUFBLFNBQUFDLHlCQUFBQyxDQUFBLDZCQUFBQyxPQUFBLG1CQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFB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