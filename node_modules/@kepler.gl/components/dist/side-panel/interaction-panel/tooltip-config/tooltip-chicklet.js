"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof3 = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("react"));
var _styledComponents = _interopRequireDefault(require("styled-components"));
var _classnames = _interopRequireDefault(require("classnames"));
var _utilities = require("@dnd-kit/utilities");
var _chickletedInput = require("../../../common/item-selector/chickleted-input");
var _icons = require("../../../common/icons");
var _dropdownList = _interopRequireDefault(require("../../../common/item-selector/dropdown-list"));
var _localization = require("@kepler.gl/localization");
var _utils = require("@kepler.gl/utils");
var _tippyTooltip = _interopRequireDefault(require("../../../common/tippy-tooltip"));
var _useOnClickOutside = _interopRequireDefault(require("../../../hooks/use-on-click-outside"));
var _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof3(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var ChickletAddonWrapper = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  position: relative;\n"])));
var ChickletAddon = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  margin-right: 4px;\n"])));
var StyledPopover = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  margin-left: -64px;\n  position: absolute;\n  top: 20px;\n  width: 140px;\n  z-index: 101;\n"])));
var hashStyles = {
  SHOW: 'SHOW',
  ACTIVE: 'ACTIVE'
};
var IconDiv = _styledComponents["default"].div.attrs({
  className: 'tooltip-chicklet__icon'
})(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2["default"])(["\n  color: ", ";\n"])), function (props) {
  return props.status === hashStyles.SHOW ? props.theme.subtextColorActive : props.status === hashStyles.ACTIVE ? props.theme.activeColor : props.theme.textColor;
});
var SortableStyledItem = _styledComponents["default"].div(_templateObject5 || (_templateObject5 = (0, _taggedTemplateLiteral2["default"])(["\n  transition: ", ";\n  transform: ", ";\n  &.sorting {\n    opacity: 0.3;\n    pointer-events: none;\n  }\n  &:hover {\n    .tooltip-chicklet__drag-handler {\n      opacity: 1;\n    }\n  }\n"])), function (props) {
  return props.transition;
}, function (props) {
  return props.transform;
});
var StyledDragHandle = _styledComponents["default"].div.attrs({
  className: 'tooltip-chicklet__drag-handler'
})(_templateObject6 || (_templateObject6 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  align-items: center;\n  z-index: 1000;\n  opacity: 0;\n  margin-left: -5px;\n  &:hover {\n    cursor: move;\n    color: ", ";\n  }\n"])), function (props) {
  return props.theme.tooltipVerticalLineColor;
});
var StyledTag = _styledComponents["default"].span(_templateObject7 || (_templateObject7 = (0, _taggedTemplateLiteral2["default"])(["\n  margin-right: 5px;\n  text-overflow: ellipsis;\n  width: 100%;\n  overflow: hidden;\n  max-width: 160px;\n"])));
function getFormatTooltip(formatLabels, format) {
  if (!format) {
    return null;
  }
  var formatLabel = formatLabels.find(function (fl) {
    return (0, _utils.getFormatValue)(fl) === format;
  });
  if (formatLabel) {
    return formatLabel.label;
  }
  return (0, _typeof2["default"])(format) === 'object' ? JSON.stringify(format, null, 2) : String(format);
}

// TODO: a factory should take other factories as input
function TooltipChickletFactory(dataId, config, onChange, fields, onDisplayFormatChange) {
  var TooltipChicklet = function TooltipChicklet(props) {
    var disabled = props.disabled,
      item = props.item,
      displayOption = props.displayOption,
      remove = props.remove,
      attributes = props.attributes,
      listeners = props.listeners,
      setNodeRef = props.setNodeRef,
      transform = props.transform,
      transition = props.transition,
      isDragging = props.isDragging;
    var _useState = (0, _react.useState)(false),
      _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
      show = _useState2[0],
      setShow = _useState2[1];
    var ref = (0, _useOnClickOutside["default"])(function () {
      return setShow(false);
    });
    // const {show} = this.state;
    var tooltipField = config.fieldsToShow[dataId].find(function (fieldToShow) {
      return fieldToShow.name === item.name;
    });
    if (!tooltipField) {
      return null;
    }
    var field = fields.find(function (f) {
      return f.name === tooltipField.name;
    });
    if (!field) {
      return null;
    }
    var formatLabels = (0, _utils.getFormatLabels)(fields, tooltipField.name);
    var hasFormat = Boolean(field.displayFormat);
    var selectionIndex = formatLabels.findIndex(function (fl) {
      return (0, _utils.getFormatValue)(fl) === field.displayFormat;
    });
    var hashStyle = show ? hashStyles.SHOW : hasFormat ? hashStyles.ACTIVE : null;
    return /*#__PURE__*/_react["default"].createElement(SortableStyledItem, (0, _extends2["default"])({
      ref: setNodeRef,
      className: (0, _classnames["default"])('sortable-layer-items', {
        sorting: isDragging
      }),
      transform: _utilities.CSS.Translate.toString(transform),
      transition: transition || ''
    }, attributes), /*#__PURE__*/_react["default"].createElement(_chickletedInput.ChickletButton, null, /*#__PURE__*/_react["default"].createElement(StyledDragHandle, listeners, /*#__PURE__*/_react["default"].createElement(_icons.VertDots, {
      height: "12px"
    })), /*#__PURE__*/_react["default"].createElement(StyledTag, {
      title: displayOption(item)
    }, displayOption(item)), formatLabels.length > 1 && /*#__PURE__*/_react["default"].createElement(ChickletAddonWrapper, null, /*#__PURE__*/_react["default"].createElement(_tippyTooltip["default"], {
      placement: "top",
      render: function render() {
        return /*#__PURE__*/_react["default"].createElement("span", null, hasFormat ? getFormatTooltip(formatLabels, field.displayName) : /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
          id: 'fieldSelector.formatting'
        }));
      }
    }, /*#__PURE__*/_react["default"].createElement(ChickletAddon, null, /*#__PURE__*/_react["default"].createElement(IconDiv, {
      status: hashStyle
    }, /*#__PURE__*/_react["default"].createElement(_icons.Hash, {
      height: "8px",
      onClick: function onClick(e) {
        e.stopPropagation();
        setShow(Boolean(!show));
      }
    })))), show && /*#__PURE__*/_react["default"].createElement(StyledPopover, {
      ref: ref
    }, /*#__PURE__*/_react["default"].createElement(_dropdownList["default"], {
      options: formatLabels,
      selectionIndex: selectionIndex,
      displayOption: function displayOption(option) {
        return option.label;
      },
      onOptionSelected: function onOptionSelected(result, e) {
        e.stopPropagation();
        setShow(false);
        var displayFormat = (0, _utils.getFormatValue)(result);
        var oldFieldsToShow = config.fieldsToShow[dataId];
        var fieldsToShow = oldFieldsToShow.map(function (fieldToShow) {
          return fieldToShow.name === tooltipField.name ? {
            name: tooltipField.name,
            format: displayFormat
          } : fieldToShow;
        });
        var newConfig = _objectSpread(_objectSpread({}, config), {}, {
          fieldsToShow: _objectSpread(_objectSpread({}, config.fieldsToShow), {}, (0, _defineProperty2["default"])({}, dataId, fieldsToShow))
        });
        onChange(newConfig);
        onDisplayFormatChange(dataId, field.name, displayFormat);
      }
    }))), /*#__PURE__*/_react["default"].createElement(_icons.Delete, {
      onClick: disabled ? null : remove
    })));
  };
  return TooltipChicklet;
}
var _default = exports["default"] = TooltipChickletFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY2xhc3NuYW1lcyIsIl91dGlsaXRpZXMiLCJfY2hpY2tsZXRlZElucHV0IiwiX2ljb25zIiwiX2Ryb3Bkb3duTGlzdCIsIl9sb2NhbGl6YXRpb24iLCJfdXRpbHMiLCJfdGlwcHlUb29sdGlwIiwiX3VzZU9uQ2xpY2tPdXRzaWRlIiwiX3RlbXBsYXRlT2JqZWN0IiwiX3RlbXBsYXRlT2JqZWN0MiIsIl90ZW1wbGF0ZU9iamVjdDMiLCJfdGVtcGxhdGVPYmplY3Q0IiwiX3RlbXBsYXRlT2JqZWN0NSIsIl90ZW1wbGF0ZU9iamVjdDYiLCJfdGVtcGxhdGVPYmplY3Q3IiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsIl9fZXNNb2R1bGUiLCJfdHlwZW9mMyIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsIkNoaWNrbGV0QWRkb25XcmFwcGVyIiwic3R5bGVkIiwiZGl2IiwiX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbDIiLCJDaGlja2xldEFkZG9uIiwiU3R5bGVkUG9wb3ZlciIsImhhc2hTdHlsZXMiLCJTSE9XIiwiQUNUSVZFIiwiSWNvbkRpdiIsImF0dHJzIiwiY2xhc3NOYW1lIiwicHJvcHMiLCJzdGF0dXMiLCJ0aGVtZSIsInN1YnRleHRDb2xvckFjdGl2ZSIsImFjdGl2ZUNvbG9yIiwidGV4dENvbG9yIiwiU29ydGFibGVTdHlsZWRJdGVtIiwidHJhbnNpdGlvbiIsInRyYW5zZm9ybSIsIlN0eWxlZERyYWdIYW5kbGUiLCJ0b29sdGlwVmVydGljYWxMaW5lQ29sb3IiLCJTdHlsZWRUYWciLCJzcGFuIiwiZ2V0Rm9ybWF0VG9vbHRpcCIsImZvcm1hdExhYmVscyIsImZvcm1hdCIsImZvcm1hdExhYmVsIiwiZmluZCIsImZsIiwiZ2V0Rm9ybWF0VmFsdWUiLCJsYWJlbCIsIl90eXBlb2YyIiwiSlNPTiIsInN0cmluZ2lmeSIsIlN0cmluZyIsIlRvb2x0aXBDaGlja2xldEZhY3RvcnkiLCJkYXRhSWQiLCJjb25maWciLCJvbkNoYW5nZSIsImZpZWxkcyIsIm9uRGlzcGxheUZvcm1hdENoYW5nZSIsIlRvb2x0aXBDaGlja2xldCIsImRpc2FibGVkIiwiaXRlbSIsImRpc3BsYXlPcHRpb24iLCJyZW1vdmUiLCJhdHRyaWJ1dGVzIiwibGlzdGVuZXJzIiwic2V0Tm9kZVJlZiIsImlzRHJhZ2dpbmciLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsIl91c2VTdGF0ZTIiLCJfc2xpY2VkVG9BcnJheTIiLCJzaG93Iiwic2V0U2hvdyIsInJlZiIsInVzZU9uQ2xpY2tPdXRzaWRlIiwidG9vbHRpcEZpZWxkIiwiZmllbGRzVG9TaG93IiwiZmllbGRUb1Nob3ciLCJuYW1lIiwiZmllbGQiLCJmIiwiZ2V0Rm9ybWF0TGFiZWxzIiwiaGFzRm9ybWF0IiwiQm9vbGVhbiIsImRpc3BsYXlGb3JtYXQiLCJzZWxlY3Rpb25JbmRleCIsImZpbmRJbmRleCIsImhhc2hTdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJfZXh0ZW5kczIiLCJjbGFzc25hbWVzIiwic29ydGluZyIsIkNTUyIsIlRyYW5zbGF0ZSIsInRvU3RyaW5nIiwiQ2hpY2tsZXRCdXR0b24iLCJWZXJ0RG90cyIsImhlaWdodCIsInRpdGxlIiwicGxhY2VtZW50IiwicmVuZGVyIiwiZGlzcGxheU5hbWUiLCJGb3JtYXR0ZWRNZXNzYWdlIiwiaWQiLCJIYXNoIiwib25DbGljayIsInN0b3BQcm9wYWdhdGlvbiIsIm9wdGlvbnMiLCJvcHRpb24iLCJvbk9wdGlvblNlbGVjdGVkIiwicmVzdWx0Iiwib2xkRmllbGRzVG9TaG93IiwibWFwIiwibmV3Q29uZmlnIiwiRGVsZXRlIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3NpZGUtcGFuZWwvaW50ZXJhY3Rpb24tcGFuZWwvdG9vbHRpcC1jb25maWcvdG9vbHRpcC1jaGlja2xldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IFJlYWN0LCB7dXNlU3RhdGUsIENTU1Byb3BlcnRpZXN9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQsIHtJU3R5bGVkQ29tcG9uZW50fSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7RHJhZ2dhYmxlQXR0cmlidXRlc30gZnJvbSAnQGRuZC1raXQvY29yZSc7XG5pbXBvcnQge0NTUywgVHJhbnNmb3JtfSBmcm9tICdAZG5kLWtpdC91dGlsaXRpZXMnO1xuaW1wb3J0IHtDaGlja2xldEJ1dHRvbn0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2l0ZW0tc2VsZWN0b3IvY2hpY2tsZXRlZC1pbnB1dCc7XG5pbXBvcnQge0hhc2gsIERlbGV0ZSwgVmVydERvdHN9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9pY29ucyc7XG5pbXBvcnQgRHJvcGRvd25MaXN0IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9pdGVtLXNlbGVjdG9yL2Ryb3Bkb3duLWxpc3QnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdAa2VwbGVyLmdsL2xvY2FsaXphdGlvbic7XG5pbXBvcnQge1RpbWVMYWJlbEZvcm1hdCwgVG9vbHRpcEZpZWxkc30gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5pbXBvcnQge2dldEZvcm1hdFZhbHVlLCBnZXRGb3JtYXRMYWJlbHN9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuaW1wb3J0IFRpcHB5VG9vbHRpcCBmcm9tICcuLi8uLi8uLi9jb21tb24vdGlwcHktdG9vbHRpcCc7XG5pbXBvcnQge1Rvb2x0aXBGb3JtYXR9IGZyb20gJ0BrZXBsZXIuZ2wvY29uc3RhbnRzJztcbmltcG9ydCB1c2VPbkNsaWNrT3V0c2lkZSBmcm9tICcuLi8uLi8uLi9ob29rcy91c2Utb24tY2xpY2stb3V0c2lkZSc7XG5pbXBvcnQge0Jhc2VDb21wb25lbnRQcm9wc30gZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xuXG5pbnRlcmZhY2UgVG9vbHRpcENoaWNrbGV0UHJvcHMge1xuICBkaXNhYmxlZDogYm9vbGVhbjtcbiAgaXRlbToge25hbWU6IHN0cmluZ307XG4gIGRpc3BsYXlPcHRpb246IChpdGVtOiBhbnkpID0+IHN0cmluZztcbiAgcmVtb3ZlOiBhbnk7XG5cbiAgYXR0cmlidXRlczogRHJhZ2dhYmxlQXR0cmlidXRlcztcbiAgbGlzdGVuZXJzOiBhbnk7XG4gIHNldE5vZGVSZWY6IChub2RlOiBIVE1MRWxlbWVudCB8IG51bGwpID0+IHZvaWQ7XG4gIHRyYW5zZm9ybTogVHJhbnNmb3JtIHwgbnVsbDtcbiAgdHJhbnNpdGlvbj86IHN0cmluZztcbiAgaXNEcmFnZ2luZzogYm9vbGVhbjtcbn1cblxudHlwZSBUb29sdGlwQ29uZmlnID0ge1xuICBmaWVsZHNUb1Nob3c6IHtcbiAgICBba2V5OiBzdHJpbmddOiB7bmFtZTogc3RyaW5nOyBmb3JtYXQ6IHN0cmluZyB8IG51bGx9W107XG4gIH07XG4gIGNvbXBhcmVNb2RlOiBib29sZWFuO1xuICBjb21wYXJlVHlwZTogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmNvbnN0IENoaWNrbGV0QWRkb25XcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuYDtcblxuY29uc3QgQ2hpY2tsZXRBZGRvbiA9IHN0eWxlZC5kaXZgXG4gIG1hcmdpbi1yaWdodDogNHB4O1xuYDtcblxuY29uc3QgU3R5bGVkUG9wb3ZlciA9IHN0eWxlZC5kaXZgXG4gIG1hcmdpbi1sZWZ0OiAtNjRweDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDIwcHg7XG4gIHdpZHRoOiAxNDBweDtcbiAgei1pbmRleDogMTAxO1xuYDtcblxuY29uc3QgaGFzaFN0eWxlcyA9IHtcbiAgU0hPVzogJ1NIT1cnIGFzIGNvbnN0LFxuICBBQ1RJVkU6ICdBQ1RJVkUnIGFzIGNvbnN0XG59O1xuXG5leHBvcnQgdHlwZSBJY29uRGl2UHJvcHMgPSBCYXNlQ29tcG9uZW50UHJvcHMgJiB7XG4gIHN0YXR1cz86ICdTSE9XJyB8ICdBQ1RJVkUnIHwgbnVsbDtcbn07XG5cbmNvbnN0IEljb25EaXY6IElTdHlsZWRDb21wb25lbnQ8J3dlYicsIEljb25EaXZQcm9wcz4gPSBzdHlsZWQuZGl2LmF0dHJzKHtcbiAgY2xhc3NOYW1lOiAndG9vbHRpcC1jaGlja2xldF9faWNvbidcbn0pPEljb25EaXZQcm9wcz5gXG4gIGNvbG9yOiAke3Byb3BzID0+XG4gICAgcHJvcHMuc3RhdHVzID09PSBoYXNoU3R5bGVzLlNIT1dcbiAgICAgID8gcHJvcHMudGhlbWUuc3VidGV4dENvbG9yQWN0aXZlXG4gICAgICA6IHByb3BzLnN0YXR1cyA9PT0gaGFzaFN0eWxlcy5BQ1RJVkVcbiAgICAgID8gcHJvcHMudGhlbWUuYWN0aXZlQ29sb3JcbiAgICAgIDogcHJvcHMudGhlbWUudGV4dENvbG9yfTtcbmA7XG5cbmV4cG9ydCB0eXBlIFNvcnRhYmxlU3R5bGVkSXRlbVByb3BzID0gQmFzZUNvbXBvbmVudFByb3BzICYge1xuICB0cmFuc2l0aW9uPzogQ1NTUHJvcGVydGllc1sndHJhbnNpdGlvbiddO1xuICB0cmFuc2Zvcm0/OiBDU1NQcm9wZXJ0aWVzWyd0cmFuc2Zvcm0nXTtcbiAgcmVmOiAobm9kZTogSFRNTEVsZW1lbnQgfCBudWxsKSA9PiB2b2lkO1xufTtcbmNvbnN0IFNvcnRhYmxlU3R5bGVkSXRlbTogSVN0eWxlZENvbXBvbmVudDxcbiAgJ3dlYicsXG4gIFNvcnRhYmxlU3R5bGVkSXRlbVByb3BzXG4+ID0gc3R5bGVkLmRpdjxTb3J0YWJsZVN0eWxlZEl0ZW1Qcm9wcz5gXG4gIHRyYW5zaXRpb246ICR7cHJvcHMgPT4gcHJvcHMudHJhbnNpdGlvbn07XG4gIHRyYW5zZm9ybTogJHtwcm9wcyA9PiBwcm9wcy50cmFuc2Zvcm19O1xuICAmLnNvcnRpbmcge1xuICAgIG9wYWNpdHk6IDAuMztcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxuICAmOmhvdmVyIHtcbiAgICAudG9vbHRpcC1jaGlja2xldF9fZHJhZy1oYW5kbGVyIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICB9XG5gO1xuXG5jb25zdCBTdHlsZWREcmFnSGFuZGxlID0gc3R5bGVkLmRpdi5hdHRycyh7XG4gIGNsYXNzTmFtZTogJ3Rvb2x0aXAtY2hpY2tsZXRfX2RyYWctaGFuZGxlcidcbn0pYFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB6LWluZGV4OiAxMDAwO1xuICBvcGFjaXR5OiAwO1xuICBtYXJnaW4tbGVmdDogLTVweDtcbiAgJjpob3ZlciB7XG4gICAgY3Vyc29yOiBtb3ZlO1xuICAgIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnRvb2x0aXBWZXJ0aWNhbExpbmVDb2xvcn07XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZFRhZyA9IHN0eWxlZC5zcGFuYFxuICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIHdpZHRoOiAxMDAlO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBtYXgtd2lkdGg6IDE2MHB4O1xuYDtcblxuZnVuY3Rpb24gZ2V0Rm9ybWF0VG9vbHRpcChmb3JtYXRMYWJlbHM6IFRpbWVMYWJlbEZvcm1hdFtdLCBmb3JtYXQ6IHN0cmluZyB8IG51bGwpIHtcbiAgaWYgKCFmb3JtYXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBmb3JtYXRMYWJlbCA9IGZvcm1hdExhYmVscy5maW5kKGZsID0+IGdldEZvcm1hdFZhbHVlKGZsKSA9PT0gZm9ybWF0KTtcbiAgaWYgKGZvcm1hdExhYmVsKSB7XG4gICAgcmV0dXJuIGZvcm1hdExhYmVsLmxhYmVsO1xuICB9XG4gIHJldHVybiB0eXBlb2YgZm9ybWF0ID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KGZvcm1hdCwgbnVsbCwgMikgOiBTdHJpbmcoZm9ybWF0KTtcbn1cblxuLy8gVE9ETzogYSBmYWN0b3J5IHNob3VsZCB0YWtlIG90aGVyIGZhY3RvcmllcyBhcyBpbnB1dFxuZnVuY3Rpb24gVG9vbHRpcENoaWNrbGV0RmFjdG9yeShcbiAgZGF0YUlkOiBzdHJpbmcsXG4gIGNvbmZpZzogVG9vbHRpcENvbmZpZyxcbiAgb25DaGFuZ2U6IChjZmc6IFRvb2x0aXBDb25maWcpID0+IHZvaWQsXG4gIGZpZWxkczogVG9vbHRpcEZpZWxkc1tdLFxuICBvbkRpc3BsYXlGb3JtYXRDaGFuZ2Vcbik6IFJlYWN0LkZDPFRvb2x0aXBDaGlja2xldFByb3BzPiB7XG4gIGNvbnN0IFRvb2x0aXBDaGlja2xldDogUmVhY3QuRkM8VG9vbHRpcENoaWNrbGV0UHJvcHM+ID0gKHByb3BzOiBUb29sdGlwQ2hpY2tsZXRQcm9wcykgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGRpc2FibGVkLFxuICAgICAgaXRlbSxcbiAgICAgIGRpc3BsYXlPcHRpb24sXG4gICAgICByZW1vdmUsXG4gICAgICBhdHRyaWJ1dGVzLFxuICAgICAgbGlzdGVuZXJzLFxuICAgICAgc2V0Tm9kZVJlZixcbiAgICAgIHRyYW5zZm9ybSxcbiAgICAgIHRyYW5zaXRpb24sXG4gICAgICBpc0RyYWdnaW5nXG4gICAgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgW3Nob3csIHNldFNob3ddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IHJlZiA9IHVzZU9uQ2xpY2tPdXRzaWRlPEhUTUxEaXZFbGVtZW50PigoKSA9PiBzZXRTaG93KGZhbHNlKSk7XG4gICAgLy8gY29uc3Qge3Nob3d9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB0b29sdGlwRmllbGQgPSBjb25maWcuZmllbGRzVG9TaG93W2RhdGFJZF0uZmluZChcbiAgICAgIGZpZWxkVG9TaG93ID0+IGZpZWxkVG9TaG93Lm5hbWUgPT09IGl0ZW0ubmFtZVxuICAgICk7XG4gICAgaWYgKCF0b29sdGlwRmllbGQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBmaWVsZCA9IGZpZWxkcy5maW5kKGYgPT4gZi5uYW1lID09PSB0b29sdGlwRmllbGQubmFtZSk7XG4gICAgaWYgKCFmaWVsZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGZvcm1hdExhYmVscyA9IGdldEZvcm1hdExhYmVscyhmaWVsZHMsIHRvb2x0aXBGaWVsZC5uYW1lKTtcbiAgICBjb25zdCBoYXNGb3JtYXQgPSBCb29sZWFuKGZpZWxkLmRpc3BsYXlGb3JtYXQpO1xuICAgIGNvbnN0IHNlbGVjdGlvbkluZGV4ID0gZm9ybWF0TGFiZWxzLmZpbmRJbmRleChmbCA9PiBnZXRGb3JtYXRWYWx1ZShmbCkgPT09IGZpZWxkLmRpc3BsYXlGb3JtYXQpO1xuICAgIGNvbnN0IGhhc2hTdHlsZSA9IHNob3cgPyBoYXNoU3R5bGVzLlNIT1cgOiBoYXNGb3JtYXQgPyBoYXNoU3R5bGVzLkFDVElWRSA6IG51bGw7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFNvcnRhYmxlU3R5bGVkSXRlbVxuICAgICAgICByZWY9e3NldE5vZGVSZWZ9XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnc29ydGFibGUtbGF5ZXItaXRlbXMnLCB7c29ydGluZzogaXNEcmFnZ2luZ30pfVxuICAgICAgICB0cmFuc2Zvcm09e0NTUy5UcmFuc2xhdGUudG9TdHJpbmcodHJhbnNmb3JtKX1cbiAgICAgICAgdHJhbnNpdGlvbj17dHJhbnNpdGlvbiB8fCAnJ31cbiAgICAgICAgey4uLmF0dHJpYnV0ZXN9XG4gICAgICA+XG4gICAgICAgIDxDaGlja2xldEJ1dHRvbj5cbiAgICAgICAgICA8U3R5bGVkRHJhZ0hhbmRsZSB7Li4ubGlzdGVuZXJzfT5cbiAgICAgICAgICAgIDxWZXJ0RG90cyBoZWlnaHQ9XCIxMnB4XCIgLz5cbiAgICAgICAgICA8L1N0eWxlZERyYWdIYW5kbGU+XG4gICAgICAgICAgPFN0eWxlZFRhZyB0aXRsZT17ZGlzcGxheU9wdGlvbihpdGVtKX0+e2Rpc3BsYXlPcHRpb24oaXRlbSl9PC9TdHlsZWRUYWc+XG4gICAgICAgICAge2Zvcm1hdExhYmVscy5sZW5ndGggPiAxICYmIChcbiAgICAgICAgICAgIDxDaGlja2xldEFkZG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgPFRpcHB5VG9vbHRpcFxuICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInRvcFwiXG4gICAgICAgICAgICAgICAgcmVuZGVyPXsoKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAge2hhc0Zvcm1hdCA/IChcbiAgICAgICAgICAgICAgICAgICAgICBnZXRGb3JtYXRUb29sdGlwKGZvcm1hdExhYmVscywgZmllbGQuZGlzcGxheU5hbWUpXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9eydmaWVsZFNlbGVjdG9yLmZvcm1hdHRpbmcnfSAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8Q2hpY2tsZXRBZGRvbj5cbiAgICAgICAgICAgICAgICAgIDxJY29uRGl2IHN0YXR1cz17aGFzaFN0eWxlfT5cbiAgICAgICAgICAgICAgICAgICAgPEhhc2hcbiAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCI4cHhcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3coQm9vbGVhbighc2hvdykpO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0ljb25EaXY+XG4gICAgICAgICAgICAgICAgPC9DaGlja2xldEFkZG9uPlxuICAgICAgICAgICAgICA8L1RpcHB5VG9vbHRpcD5cbiAgICAgICAgICAgICAge3Nob3cgJiYgKFxuICAgICAgICAgICAgICAgIDxTdHlsZWRQb3BvdmVyIHJlZj17cmVmfT5cbiAgICAgICAgICAgICAgICAgIDxEcm9wZG93bkxpc3RcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17Zm9ybWF0TGFiZWxzfVxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25JbmRleD17c2VsZWN0aW9uSW5kZXh9XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlPcHRpb249e29wdGlvbiA9PiAob3B0aW9uIGFzIFRvb2x0aXBGb3JtYXQpLmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICBvbk9wdGlvblNlbGVjdGVkPXsocmVzdWx0LCBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRTaG93KGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlGb3JtYXQgPSBnZXRGb3JtYXRWYWx1ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEZpZWxkc1RvU2hvdyA9IGNvbmZpZy5maWVsZHNUb1Nob3dbZGF0YUlkXTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHNUb1Nob3cgPSBvbGRGaWVsZHNUb1Nob3cubWFwKGZpZWxkVG9TaG93ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZFRvU2hvdy5uYW1lID09PSB0b29sdGlwRmllbGQubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2x0aXBGaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBkaXNwbGF5Rm9ybWF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZpZWxkVG9TaG93O1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1RvU2hvdzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcuZmllbGRzVG9TaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBbZGF0YUlkXTogZmllbGRzVG9TaG93XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZShuZXdDb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgIG9uRGlzcGxheUZvcm1hdENoYW5nZShkYXRhSWQsIGZpZWxkLm5hbWUsIGRpc3BsYXlGb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L1N0eWxlZFBvcG92ZXI+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0NoaWNrbGV0QWRkb25XcmFwcGVyPlxuICAgICAgICAgICl9XG4gICAgICAgICAgPERlbGV0ZSBvbkNsaWNrPXtkaXNhYmxlZCA/IG51bGwgOiByZW1vdmV9IC8+XG4gICAgICAgIDwvQ2hpY2tsZXRCdXR0b24+XG4gICAgICA8L1NvcnRhYmxlU3R5bGVkSXRlbT5cbiAgICApO1xuICB9O1xuXG4gIHJldHVybiBUb29sdGlwQ2hpY2tsZXQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2x0aXBDaGlja2xldEZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFHQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxpQkFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsV0FBQSxHQUFBRCxzQkFBQSxDQUFBRixPQUFBO0FBRUEsSUFBQUksVUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssZ0JBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLE1BQUEsR0FBQU4sT0FBQTtBQUNBLElBQUFPLGFBQUEsR0FBQUwsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFRLGFBQUEsR0FBQVIsT0FBQTtBQUVBLElBQUFTLE1BQUEsR0FBQVQsT0FBQTtBQUNBLElBQUFVLGFBQUEsR0FBQVIsc0JBQUEsQ0FBQUYsT0FBQTtBQUVBLElBQUFXLGtCQUFBLEdBQUFULHNCQUFBLENBQUFGLE9BQUE7QUFBb0UsSUFBQVksZUFBQSxFQUFBQyxnQkFBQSxFQUFBQyxnQkFBQSxFQUFBQyxnQkFBQSxFQUFBQyxnQkFBQSxFQUFBQyxnQkFBQSxFQUFBQyxnQkFBQSxFQWhCcEU7QUFDQTtBQUFBLFNBQUFDLHlCQUFBQyxDQUFBLDZCQUFBQyxPQUFBLG1CQUFBQyxD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