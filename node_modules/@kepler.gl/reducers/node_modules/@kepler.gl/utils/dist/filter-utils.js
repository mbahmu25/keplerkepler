"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TimestampStepMap = exports.LAYER_FILTERS = exports.FILTER_UPDATER_PROPS = exports.FILTER_ID_LENGTH = exports.FILTER_COMPONENTS = exports.DEFAULT_FILTER_STRUCTURE = void 0;
exports.adjustValueToFilterDomain = adjustValueToFilterDomain;
exports.applyFilterFieldName = applyFilterFieldName;
exports.applyFiltersToDatasets = applyFiltersToDatasets;
exports.canApplyFeatureFilter = canApplyFeatureFilter;
exports.diffFilters = diffFilters;
exports.featureToFilterValue = exports.durationYear = exports.durationWeek = exports.durationSecond = exports.durationMinute = exports.durationHour = exports.durationDay = void 0;
exports.filterDataByFilterTypes = filterDataByFilterTypes;
exports.filterDatasetCPU = filterDatasetCPU;
exports.formatNumberByStep = formatNumberByStep;
exports.generatePolygonFilter = generatePolygonFilter;
exports.getAnimatableVisibleLayers = getAnimatableVisibleLayers;
exports.getAnimatableVisibleLayersByType = getAnimatableVisibleLayersByType;
exports.getColumnFilterProps = getColumnFilterProps;
exports.getDefaultFilter = getDefaultFilter;
exports.getFilterFunction = getFilterFunction;
exports.getFilterIdInFeature = void 0;
exports.getFilterProps = getFilterProps;
exports.getFilterRecord = getFilterRecord;
exports.getFilterScaledTimeline = getFilterScaledTimeline;
exports.getIntervalBasedAnimationLayers = getIntervalBasedAnimationLayers;
exports.getNumericFieldDomain = getNumericFieldDomain;
exports.getNumericStepSize = getNumericStepSize;
exports.getPolygonFilterFunctor = void 0;
exports.getTimeWidgetHintFormatter = getTimeWidgetHintFormatter;
exports.getTimeWidgetTitleFormatter = getTimeWidgetTitleFormatter;
exports.getTimestampFieldDomain = getTimestampFieldDomain;
exports.isFilterValidToSave = isFilterValidToSave;
exports.isInPolygon = isInPolygon;
exports.isInRange = isInRange;
exports.isLayerAnimatable = isLayerAnimatable;
exports.isSideFilter = isSideFilter;
exports.isValidFilterValue = isValidFilterValue;
exports.isValidTimeDomain = isValidTimeDomain;
exports.mergeFilterDomain = mergeFilterDomain;
exports.mergeFilterDomainStep = mergeFilterDomainStep;
exports.mergeFilterWithTimeline = mergeFilterWithTimeline;
exports.mergeTimeDomains = mergeTimeDomains;
exports.removeFilterPlot = removeFilterPlot;
exports.scaleSourceDomainToDestination = scaleSourceDomainToDestination;
exports.shouldApplyFilter = shouldApplyFilter;
exports.updateFilterDataId = updateFilterDataId;
exports.updateFilterPlot = updateFilterPlot;
exports.validateFilter = validateFilter;
exports.validateFilterWithData = validateFilterWithData;
exports.validateFiltersUpdateDatasets = validateFiltersUpdateDatasets;
exports.validatePolygonFilter = validatePolygonFilter;
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _keymirror = _interopRequireDefault(require("keymirror"));
var _lodash = _interopRequireDefault(require("lodash.get"));
var _lodash2 = _interopRequireDefault(require("lodash.isequal"));
var _d3Array = require("d3-array");
var _booleanWithin = _interopRequireDefault(require("@turf/boolean-within"));
var _helpers = require("@turf/helpers");
var _decimal = require("decimal.js");
var _constants = require("@kepler.gl/constants");
var ScaleUtils = _interopRequireWildcard(require("./data-scale-utils"));
var _h3Js = require("h3-js");
var _commonUtils = require("@kepler.gl/common-utils");
var _utils = require("./utils");
var _dataUtils = require("./data-utils");
var _plot = require("./plot");
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
// import {VisState} from '@kepler.gl/schemas';
var durationSecond = exports.durationSecond = 1000;
var durationMinute = exports.durationMinute = durationSecond * 60;
var durationHour = exports.durationHour = durationMinute * 60;
var durationDay = exports.durationDay = durationHour * 24;
var durationWeek = exports.durationWeek = durationDay * 7;
var durationYear = exports.durationYear = durationDay * 365;

// TODO isolate types - depends on @kepler.gl/schemas

var TimestampStepMap = exports.TimestampStepMap = [{
  max: 1,
  step: 0.05
}, {
  max: 10,
  step: 0.1
}, {
  max: 100,
  step: 1
}, {
  max: 500,
  step: 5
}, {
  max: 1000,
  step: 10
}, {
  max: 5000,
  step: 50
}, {
  max: Number.POSITIVE_INFINITY,
  step: 1000
}];
var FILTER_UPDATER_PROPS = exports.FILTER_UPDATER_PROPS = (0, _keymirror["default"])({
  dataId: null,
  name: null,
  layerId: null
});
var FILTER_COMPONENTS = exports.FILTER_COMPONENTS = (0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])({}, _constants.FILTER_TYPES.select, 'SingleSelectFilter'), _constants.FILTER_TYPES.multiSelect, 'MultiSelectFilter'), _constants.FILTER_TYPES.timeRange, 'TimeRangeFilter'), _constants.FILTER_TYPES.range, 'RangeFilter'), _constants.FILTER_TYPES.polygon, 'PolygonFilter');
var DEFAULT_FILTER_STRUCTURE = exports.DEFAULT_FILTER_STRUCTURE = {
  dataId: [],
  // [string]
  id: null,
  enabled: true,
  // time range filter specific
  fixedDomain: false,
  view: _constants.FILTER_VIEW_TYPES.side,
  isAnimating: false,
  animationWindow: _constants.ANIMATION_WINDOW.free,
  speed: 1,
  // field specific
  name: [],
  // string
  type: null,
  fieldIdx: [],
  // [integer]
  domain: null,
  value: null,
  // plot
  plotType: {
    type: _constants.PLOT_TYPES.histogram
  },
  yAxis: null,
  // mode
  gpu: false
};
var FILTER_ID_LENGTH = exports.FILTER_ID_LENGTH = 4;
var LAYER_FILTERS = exports.LAYER_FILTERS = [_constants.FILTER_TYPES.polygon];

/**
 * Generates a filter with a dataset id as dataId
 */
function getDefaultFilter() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    dataId = _ref.dataId,
    id = _ref.id;
  return _objectSpread(_objectSpread({}, DEFAULT_FILTER_STRUCTURE), {}, {
    // store it as dataId and it could be one or many
    dataId: dataId ? (0, _commonUtils.toArray)(dataId) : [],
    id: id || (0, _commonUtils.generateHashId)(FILTER_ID_LENGTH)
  });
}

/**
 * Check if a filter is valid based on the given dataId
 * @param  filter to validate
 * @param  datasetId id to validate filter against
 * @return true if a filter is valid, false otherwise
 */
function shouldApplyFilter(filter, datasetId) {
  var dataIds = (0, _commonUtils.toArray)(filter.dataId);
  return dataIds.includes(datasetId) && filter.value !== null;
}

/**
 * Validates and modifies polygon filter structure
 * @param dataset
 * @param filter
 * @param layers
 * @return - {filter, dataset}
 */
function validatePolygonFilter(dataset, filter, layers) {
  var failed = {
    dataset: dataset,
    filter: null
  };
  var value = filter.value,
    layerId = filter.layerId,
    type = filter.type,
    dataId = filter.dataId;
  if (!layerId || !isValidFilterValue(type, value)) {
    return failed;
  }
  var isValidDataset = dataId.includes(dataset.id);
  if (!isValidDataset) {
    return failed;
  }
  var layer = layers.find(function (l) {
    return layerId.includes(l.id);
  });
  if (!layer) {
    return failed;
  }
  return {
    filter: _objectSpread(_objectSpread({}, filter), {}, {
      fieldIdx: []
    }),
    dataset: dataset
  };
}

/**
 * Custom filter validators
 */
var filterValidators = (0, _defineProperty2["default"])({}, _constants.FILTER_TYPES.polygon, validatePolygonFilter);

/**
 * Default validate filter function
 * @param datasets
 * @param datasetId
 * @param filter
 * @return - {filter, dataset}
 */
function validateFilter(datasets, datasetId, filter) {
  var _filter$view;
  var dataset = datasets[datasetId];
  // match filter.dataId
  var failed = {
    dataset: dataset,
    filter: null
  };
  var filterDataId = (0, _commonUtils.toArray)(filter.dataId);
  var filterDatasetIndex = filterDataId.indexOf(dataset.id);
  if (filterDatasetIndex < 0 || !(0, _commonUtils.toArray)(filter.name)[filterDatasetIndex]) {
    // the current filter is not mapped against the current dataset
    return failed;
  }
  var initializeFilter = _objectSpread(_objectSpread(_objectSpread({}, getDefaultFilter({
    dataId: filter.dataId
  })), filter), {}, {
    dataId: filterDataId,
    name: (0, _commonUtils.toArray)(filter.name)
  });
  var fieldName = initializeFilter.name[filterDatasetIndex];
  var _applyFilterFieldName = applyFilterFieldName(initializeFilter, datasets, datasetId, fieldName, filterDatasetIndex, {
      mergeDomain: true
    }),
    updatedFilter = _applyFilterFieldName.filter,
    updatedDataset = _applyFilterFieldName.dataset;
  if (!updatedFilter) {
    return failed;
  }

  // don't adjust value yet before all datasets are loaded
  updatedFilter.view = (_filter$view = filter.view) !== null && _filter$view !== void 0 ? _filter$view : updatedFilter.view;
  if (updatedFilter.value === null) {
    // cannot adjust saved value to filter
    return failed;
  }
  return {
    filter: validateFilterYAxis(updatedFilter, updatedDataset),
    dataset: updatedDataset
  };
}

/**
 * Validate saved filter config with new data
 *
 * @param datasets
 * @param datasetId
 * @param filter - filter to be validate
 * @param layers - layers
 * @return validated filter
 */
function validateFilterWithData(datasets, datasetId, filter, layers) {
  return filter.type && Object.prototype.hasOwnProperty.call(filterValidators, filter.type) ? filterValidators[filter.type](datasets[datasetId], filter, layers) : validateFilter(datasets, datasetId, filter);
}

/**
 * Validate YAxis
 * @param filter
 * @param dataset
 * @return {*}
 */
function validateFilterYAxis(filter, dataset) {
  // TODO: validate yAxis against other datasets

  var fields = dataset.fields;
  var _filter = filter,
    yAxis = _filter.yAxis;
  // TODO: validate yAxis against other datasets
  if (yAxis) {
    var matchedAxis = fields.find(function (_ref2) {
      var name = _ref2.name,
        type = _ref2.type;
      return name === yAxis.name && type === yAxis.type;
    });
    filter = matchedAxis ? _objectSpread(_objectSpread({}, filter), {}, {
      yAxis: matchedAxis
    }) : filter;
  }
  return filter;
}

/**
 * Get default filter prop based on field type
 *
 * @param field
 * @param fieldDomain
 * @returns default filter
 */
function getFilterProps(field, fieldDomain) {
  var filterProps = _objectSpread(_objectSpread({}, fieldDomain), {}, {
    fieldType: field.type,
    view: _constants.FILTER_VIEW_TYPES.side
  });
  switch (field.type) {
    case _constants.ALL_FIELD_TYPES.real:
    case _constants.ALL_FIELD_TYPES.integer:
      return _objectSpread(_objectSpread({}, filterProps), {}, {
        value: fieldDomain.domain,
        type: _constants.FILTER_TYPES.range,
        // @ts-expect-error
        typeOptions: [_constants.FILTER_TYPES.range],
        gpu: true
      });
    case _constants.ALL_FIELD_TYPES["boolean"]:
      // @ts-expect-error
      return _objectSpread(_objectSpread({}, filterProps), {}, {
        type: _constants.FILTER_TYPES.select,
        value: true,
        gpu: false
      });
    case _constants.ALL_FIELD_TYPES.string:
    case _constants.ALL_FIELD_TYPES.h3:
    case _constants.ALL_FIELD_TYPES.date:
      // @ts-expect-error
      return _objectSpread(_objectSpread({}, filterProps), {}, {
        type: _constants.FILTER_TYPES.multiSelect,
        value: [],
        gpu: false
      });
    case _constants.ALL_FIELD_TYPES.timestamp:
      // @ts-expect-error
      return _objectSpread(_objectSpread({}, filterProps), {}, {
        type: _constants.FILTER_TYPES.timeRange,
        view: _constants.FILTER_VIEW_TYPES.enlarged,
        fixedDomain: true,
        value: filterProps.domain,
        gpu: true,
        plotType: {}
      });
    default:
      // @ts-expect-error
      return {};
  }
}
var getPolygonFilterFunctor = exports.getPolygonFilterFunctor = function getPolygonFilterFunctor(layer, filter, dataContainer) {
  var getPosition = layer.getPositionAccessor(dataContainer);
  switch (layer.type) {
    case _constants.LAYER_TYPES.point:
    case _constants.LAYER_TYPES.icon:
      return function (data) {
        var pos = getPosition(data);
        return pos.every(Number.isFinite) && isInPolygon(pos, filter.value);
      };
    case _constants.LAYER_TYPES.arc:
    case _constants.LAYER_TYPES.line:
      return function (data) {
        var pos = getPosition(data);
        return pos.every(Number.isFinite) && [[pos[0], pos[1]], [pos[3], pos[4]]].every(function (point) {
          return isInPolygon(point, filter.value);
        });
      };
    case _constants.LAYER_TYPES.hexagonId:
      if (layer.dataToFeature && layer.dataToFeature.centroids) {
        return function (data) {
          // null or getCentroid({id})
          var centroid = layer.dataToFeature.centroids[data.index];
          return centroid && isInPolygon(centroid, filter.value);
        };
      }
      return function (data) {
        var id = getPosition(data);
        if (!(0, _h3Js.h3IsValid)(id)) {
          return false;
        }
        var pos = (0, _commonUtils.getCentroid)({
          id: id
        });
        return pos.every(Number.isFinite) && isInPolygon(pos, filter.value);
      };
    case _constants.LAYER_TYPES.geojson:
      return function (data) {
        return layer.isInPolygon(data, data.index, filter.value);
      };
    default:
      return function () {
        return true;
      };
  }
};

/**
 * Check if a GeoJSON feature filter can be applied to a layer
 */
function canApplyFeatureFilter(feature) {
  return Boolean((feature === null || feature === void 0 ? void 0 : feature.geometry) && ['Polygon', 'MultiPolygon'].includes(feature.geometry.type));
}

/**
 * @param param An object that represents a row record.
 * @param param.index Index of the row in data container.
 * @returns Returns true to keep the element, or false otherwise.
 */

/**
 * @param field dataset Field
 * @param dataId Dataset id
 * @param filter Filter object
 * @param layers list of layers to filter upon
 * @param dataContainer Data container
 * @return filterFunction
 */
/* eslint-disable complexity */
function getFilterFunction(field, dataId, filter, layers, dataContainer) {
  // field could be null in polygon filter
  var valueAccessor = field ? field.valueAccessor : function () {
    return null;
  };
  var defaultFunc = function defaultFunc() {
    return true;
  };
  if (filter.enabled === false) {
    return defaultFunc;
  }
  switch (filter.type) {
    case _constants.FILTER_TYPES.range:
      return function (data) {
        return isInRange(valueAccessor(data), filter.value);
      };
    case _constants.FILTER_TYPES.multiSelect:
      return function (data) {
        return filter.value.includes(valueAccessor(data));
      };
    case _constants.FILTER_TYPES.select:
      return function (data) {
        return valueAccessor(data) === filter.value;
      };
    case _constants.FILTER_TYPES.timeRange:
      {
        if (!field) {
          return defaultFunc;
        }
        var mappedValue = (0, _lodash["default"])(field, ['filterProps', 'mappedValue']);
        var accessor = Array.isArray(mappedValue) ? function (data) {
          return mappedValue[data.index];
        } : function (data) {
          return (0, _dataUtils.timeToUnixMilli)(valueAccessor(data), field.format);
        };
        return function (data) {
          return isInRange(accessor(data), filter.value);
        };
      }
    case _constants.FILTER_TYPES.polygon:
      {
        if (!layers || !layers.length || !filter.layerId) {
          return defaultFunc;
        }
        var layerFilterFunctions = filter.layerId.map(function (id) {
          return layers.find(function (l) {
            return l.id === id;
          });
        }).filter(function (l) {
          return l && l.config.dataId === dataId;
        }).map(function (layer) {
          return getPolygonFilterFunctor(layer, filter, dataContainer);
        });
        return function (data) {
          return layerFilterFunctions.every(function (filterFunc) {
            return filterFunc(data);
          });
        };
      }
    default:
      return defaultFunc;
  }
}
function updateFilterDataId(dataId) {
  return getDefaultFilter({
    dataId: dataId
  });
}
function filterDataByFilterTypes(_ref3, dataContainer) {
  var dynamicDomainFilters = _ref3.dynamicDomainFilters,
    cpuFilters = _ref3.cpuFilters,
    filterFuncs = _ref3.filterFuncs;
  var filteredIndexForDomain = [];
  var filteredIndex = [];
  var filterContext = {
    index: -1,
    dataContainer: dataContainer
  };
  var filterFuncCaller = function filterFuncCaller(filter) {
    return filterFuncs[filter.id](filterContext);
  };
  var numRows = dataContainer.numRows();
  for (var i = 0; i < numRows; ++i) {
    filterContext.index = i;
    var matchForDomain = dynamicDomainFilters && dynamicDomainFilters.every(filterFuncCaller);
    if (matchForDomain) {
      filteredIndexForDomain.push(filterContext.index);
    }
    var matchForRender = cpuFilters && cpuFilters.every(filterFuncCaller);
    if (matchForRender) {
      filteredIndex.push(filterContext.index);
    }
  }
  return _objectSpread(_objectSpread({}, dynamicDomainFilters ? {
    filteredIndexForDomain: filteredIndexForDomain
  } : {}), cpuFilters ? {
    filteredIndex: filteredIndex
  } : {});
}

/**
 * Get a record of filters based on domain type and gpu / cpu
 */
function getFilterRecord(dataId, filters) {
  var opt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var filterRecord = {
    dynamicDomain: [],
    fixedDomain: [],
    cpu: [],
    gpu: []
  };
  filters.forEach(function (f) {
    if (isValidFilterValue(f.type, f.value) && (0, _commonUtils.toArray)(f.dataId).includes(dataId)) {
      (f.fixedDomain || opt.ignoreDomain ? filterRecord.fixedDomain : filterRecord.dynamicDomain).push(f);
      (f.gpu && !opt.cpuOnly ? filterRecord.gpu : filterRecord.cpu).push(f);
    }
  });
  return filterRecord;
}

/**
 * Compare filter records to get what has changed
 */
function diffFilters(filterRecord) {
  var oldFilterRecord = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var filterChanged = {};
  Object.entries(filterRecord).forEach(function (_ref4) {
    var _ref5 = (0, _slicedToArray2["default"])(_ref4, 2),
      record = _ref5[0],
      items = _ref5[1];
    items.forEach(function (filter) {
      var oldFilter = (oldFilterRecord[record] || []).find(function (f) {
        return f.id === filter.id;
      });
      if (!oldFilter) {
        // added
        filterChanged = (0, _utils.set)([record, filter.id], 'added', filterChanged);
      } else {
        // check  what has changed
        ['name', 'value', 'dataId'].forEach(function (prop) {
          if (filter[prop] !== oldFilter[prop]) {
            filterChanged = (0, _utils.set)([record, filter.id], "".concat(prop, "_changed"), filterChanged);
          }
        });
      }
    });
    (oldFilterRecord[record] || []).forEach(function (oldFilter) {
      // deleted
      if (!items.find(function (f) {
        return f.id === oldFilter.id;
      })) {
        filterChanged = (0, _utils.set)([record, oldFilter.id], 'deleted', filterChanged);
      }
    });
  });
  return _objectSpread(_objectSpread({}, {
    dynamicDomain: null,
    fixedDomain: null,
    cpu: null,
    gpu: null
  }), filterChanged);
}

/**
 * Call by parsing filters from URL
 * Check if value of filter within filter domain, if not adjust it to match
 * filter domain
 *
 * @returns value - adjusted value to match filter or null to remove filter
 */
// eslint-disable-next-line complexity
function adjustValueToFilterDomain(value, _ref6) {
  var domain = _ref6.domain,
    type = _ref6.type;
  if (!type) {
    return false;
  }
  // if the current filter is a polygon it will not have any domain
  // all other filter types require domain
  if (type !== _constants.FILTER_TYPES.polygon && !domain) {
    return false;
  }
  switch (type) {
    case _constants.FILTER_TYPES.range:
    case _constants.FILTER_TYPES.timeRange:
      if (!Array.isArray(value) || value.length !== 2) {
        return domain.map(function (d) {
          return d;
        });
      }
      return value.map(function (d, i) {
        return (0, _commonUtils.notNullorUndefined)(d) && isInRange(d, domain) ? d : domain[i];
      });
    case _constants.FILTER_TYPES.multiSelect:
      {
        if (!Array.isArray(value)) {
          return [];
        }
        var filteredValue = value.filter(function (d) {
          return domain.includes(d);
        });
        return filteredValue.length ? filteredValue : [];
      }
    case _constants.FILTER_TYPES.select:
      return domain.includes(value) ? value : true;
    case _constants.FILTER_TYPES.polygon:
      return value;
    default:
      return null;
  }
}

/**
 * Calculate numeric domain and suitable step
 */
function getNumericFieldDomain(dataContainer, valueAccessor) {
  var domain = [0, 1];
  var step = 0.1;
  var mappedValue = dataContainer.mapIndex(valueAccessor);
  if (dataContainer.numRows() > 1) {
    domain = ScaleUtils.getLinearDomain(mappedValue);
    var diff = domain[1] - domain[0];

    // in case equal domain, [96, 96], which will break quantize scale
    if (!diff) {
      domain[1] = domain[0] + 1;
    }
    step = getNumericStepSize(diff) || step;
    domain[0] = formatNumberByStep(domain[0], step, 'floor');
    domain[1] = formatNumberByStep(domain[1], step, 'ceil');
  }
  return {
    domain: domain,
    step: step
  };
}

/**
 * Calculate step size for range and timerange filter
 */
function getNumericStepSize(diff) {
  diff = Math.abs(diff);
  if (diff > 100) {
    return 1;
  } else if (diff > 3) {
    return 0.01;
  } else if (diff > 1) {
    return 0.001;
  }
  // Try to get at least 1000 steps - and keep the step size below that of
  // the (diff > 1) case.
  var x = diff / 1000;
  // Find the exponent and truncate to 10 to the power of that exponent

  var exponentialForm = x.toExponential();
  var exponent = parseFloat(exponentialForm.split('e')[1]);

  // Getting ready for node 12
  // this is why we need decimal.js
  // Math.pow(10, -5) = 0.000009999999999999999
  // the above result shows in browser and node 10
  // node 12 behaves correctly
  return new _decimal.Decimal(10).pow(exponent).toNumber();
}

/**
 * Calculate timestamp domain and suitable step
 */
function getTimestampFieldDomain(dataContainer, valueAccessor) {
  // to avoid converting string format time to epoch
  // every time we compare we store a value mapped to int in filter domain
  var mappedValue = dataContainer.mapIndex(valueAccessor);
  var domain = ScaleUtils.getLinearDomain(mappedValue);
  var defaultTimeFormat = getTimeWidgetTitleFormatter(domain);
  var step = 0.01;
  var diff = domain[1] - domain[0];
  // in case equal timestamp add 1 second padding to prevent break
  if (!diff) {
    domain[1] = domain[0] + 1000;
  }
  var entry = TimestampStepMap.find(function (f) {
    return f.max >= diff;
  });
  if (entry) {
    step = entry.step;
  }
  return {
    domain: domain,
    step: step,
    mappedValue: mappedValue,
    defaultTimeFormat: defaultTimeFormat
  };
}

/**
 * round number based on step
 *
 * @param {Number} val
 * @param {Number} step
 * @param {string} bound
 * @returns {Number} rounded number
 */
function formatNumberByStep(val, step, bound) {
  if (bound === 'floor') {
    return Math.floor(val * (1 / step)) / (1 / step);
  }
  return Math.ceil(val * (1 / step)) / (1 / step);
}
function isInRange(val, domain) {
  if (!Array.isArray(domain)) {
    return false;
  }
  if (Array.isArray(val)) {
    return domain[0] <= val[0] && val[1] <= domain[1];
  }
  return val >= domain[0] && val <= domain[1];
}

/**
 * Determines whether a point is within the provided polygon
 *
 * @param point as input search [lat, lng]
 * @param polygon Points must be within these (Multi)Polygon(s)
 * @return {boolean}
 */
function isInPolygon(point, polygon) {
  return (0, _booleanWithin["default"])((0, _helpers.point)(point), polygon);
}
function getTimeWidgetTitleFormatter(domain) {
  if (!isValidTimeDomain(domain)) {
    return null;
  }
  var diff = domain[1] - domain[0];

  // Local aware formats
  // https://momentjs.com/docs/#/parsing/string-format
  return diff > durationYear ? 'L' : diff > durationDay ? 'L LT' : 'L LTS';
}

/**
 * Sanity check on filters to prepare for save
 * @type {typeof import('./filter-utils').isFilterValidToSave}
 */
function isFilterValidToSave(filter) {
  return (filter === null || filter === void 0 ? void 0 : filter.type) && Array.isArray(filter === null || filter === void 0 ? void 0 : filter.name) && ((filter === null || filter === void 0 ? void 0 : filter.name.length) || (filter === null || filter === void 0 ? void 0 : filter.layerId.length));
}

/**
 * Sanity check on filters to prepare for save
 * @type {typeof import('./filter-utils').isValidFilterValue}
 */
/* eslint-disable complexity */
function isValidFilterValue(type, value) {
  if (!type) {
    return false;
  }
  switch (type) {
    case _constants.FILTER_TYPES.select:
      return value === true || value === false;
    case _constants.FILTER_TYPES.range:
    case _constants.FILTER_TYPES.timeRange:
      return Array.isArray(value) && value.every(function (v) {
        return v !== null && !isNaN(v);
      });
    case _constants.FILTER_TYPES.multiSelect:
      return Array.isArray(value) && Boolean(value.length);
    case _constants.FILTER_TYPES.input:
      return Boolean(value.length);
    case _constants.FILTER_TYPES.polygon:
      {
        var coordinates = (0, _lodash["default"])(value, ['geometry', 'coordinates']);
        return Boolean(value && value.id && coordinates);
      }
    default:
      return true;
  }
}
function getColumnFilterProps(filter, dataset) {
  var _filter$plotType;
  if (((_filter$plotType = filter.plotType) === null || _filter$plotType === void 0 ? void 0 : _filter$plotType.type) === _constants.PLOT_TYPES.histogram || !filter.yAxis) {
    // histogram should be calculated when create filter
    return {};
  }
  var _filter$mappedValue = filter.mappedValue,
    mappedValue = _filter$mappedValue === void 0 ? [] : _filter$mappedValue;
  var yAxis = filter.yAxis;
  var fieldIdx = dataset.getColumnFieldIdx(yAxis.name);
  if (fieldIdx < 0) {
    // Console.warn(`yAxis ${yAxis.name} does not exist in dataset`);
    return {
      lineChart: {},
      yAxis: yAxis
    };
  }

  // return lineChart
  var series = dataset.dataContainer.map(function (row, rowIndex) {
    return {
      x: mappedValue[rowIndex],
      y: row.valueAt(fieldIdx)
    };
  }, true).filter(function (_ref7) {
    var x = _ref7.x,
      y = _ref7.y;
    return Number.isFinite(x) && Number.isFinite(y);
  }).sort(function (a, b) {
    return (0, _d3Array.ascending)(a.x, b.x);
  });
  var yDomain = (0, _d3Array.extent)(series, function (d) {
    return d.y;
  });
  var xDomain = [series[0].x, series[series.length - 1].x];
  return {
    lineChart: {
      series: series,
      yDomain: yDomain,
      xDomain: xDomain
    },
    yAxis: yAxis
  };
}
function updateFilterPlot(datasets, filter) {
  var dataId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;
  if (dataId) {
    filter = removeFilterPlot(filter, dataId);
  }
  if (filter.type === _constants.FILTER_TYPES.timeRange) {
    return (0, _plot.updateTimeFilterPlotType)(filter, filter.plotType, datasets);
  } else if (filter.type === _constants.FILTER_TYPES.range) {
    return (0, _plot.updateRangeFilterPlotType)(filter, filter.plotType, datasets);
  }
  return filter;
}

/**
 *
 * @param datasetIds list of dataset ids to be filtered
 * @param datasets all datasets
 * @param filters all filters to be applied to datasets
 * @return datasets - new updated datasets
 */
function applyFiltersToDatasets(datasetIds, datasets, filters, layers) {
  var dataIds = (0, _commonUtils.toArray)(datasetIds);
  return dataIds.reduce(function (acc, dataId) {
    var layersToFilter = (layers || []).filter(function (l) {
      return l.config.dataId === dataId;
    });
    var appliedFilters = filters.filter(function (d) {
      return shouldApplyFilter(d, dataId);
    });
    var table = datasets[dataId];
    return _objectSpread(_objectSpread({}, acc), {}, (0, _defineProperty2["default"])({}, dataId, table.filterTable(appliedFilters, layersToFilter, {})));
  }, datasets);
}

/**
 * Applies a new field name value to filter and update both filter and dataset
 * @param filter - to be applied the new field name on
 * @param datasets - All datasets
 * @param datasetId - Id of the dataset the field belongs to
 * @param fieldName - field.name
 * @param filterDatasetIndex - field.name
 * @param option
 * @return - {filter, datasets}
 */
function applyFilterFieldName(filter, datasets, datasetId, fieldName) {
  var filterDatasetIndex = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;
  var option = arguments.length > 5 ? arguments[5] : undefined;
  // using filterDatasetIndex we can filter only the specified dataset
  var mergeDomain = option && Object.prototype.hasOwnProperty.call(option, 'mergeDomain') ? option.mergeDomain : false;
  var dataset = datasets[datasetId];
  var fieldIndex = dataset === null || dataset === void 0 ? void 0 : dataset.getColumnFieldIdx(fieldName);
  // if no field with same name is found, move to the next datasets
  if (!dataset || fieldIndex === -1) {
    // throw new Error(`fieldIndex not found. Dataset must contain a property with name: ${fieldName}`);
    return {
      filter: null,
      dataset: dataset
    };
  }

  // TODO: validate field type
  var filterProps = dataset.getColumnFilterProps(fieldName);
  var newFilter = _objectSpread(_objectSpread(_objectSpread({}, filter), filterProps), {}, {
    name: Object.assign((0, _toConsumableArray2["default"])((0, _commonUtils.toArray)(filter.name)), (0, _defineProperty2["default"])({}, filterDatasetIndex, fieldName)),
    fieldIdx: Object.assign((0, _toConsumableArray2["default"])((0, _commonUtils.toArray)(filter.fieldIdx)), (0, _defineProperty2["default"])({}, filterDatasetIndex, fieldIndex))
  }, filter.plotType ? {
    plotType: filter.plotType
  } : {});
  if (mergeDomain) {
    var _mergeFilterDomain;
    var domainSteps = (_mergeFilterDomain = mergeFilterDomain(newFilter, datasets)) !== null && _mergeFilterDomain !== void 0 ? _mergeFilterDomain : {};
    if (domainSteps) {
      var domain = domainSteps.domain,
        step = domainSteps.step;
      newFilter.domain = domain;
      if (newFilter.step !== step) {
        newFilter.step = step;
      }
    }
  }

  // TODO: if we don't set filter value in filterProps, we don't need to do this
  if (filterDatasetIndex > 0) {
    // don't reset the filter value if we are just adding a synced dataset
    newFilter = _objectSpread(_objectSpread({}, newFilter), {}, {
      value: filter.value
    });
  }
  return {
    filter: newFilter,
    dataset: dataset
  };
}

/**
 * Merge the domains of a filter in case it applies to multiple datasets
 */
function mergeFilterDomain(filter, datasets) {
  var _filter$dataId;
  var domainSteps = null;
  if (!(filter !== null && filter !== void 0 && (_filter$dataId = filter.dataId) !== null && _filter$dataId !== void 0 && _filter$dataId.length)) {
    return filter;
  }
  filter.dataId.forEach(function (filterDataId, idx) {
    var _domainSteps;
    var dataset = datasets[filterDataId];
    var filterProps = dataset.getColumnFilterProps(filter.name[idx]);
    domainSteps = mergeFilterDomainStep((_domainSteps = domainSteps) !== null && _domainSteps !== void 0 ? _domainSteps : {}, filterProps);
  });
  return domainSteps;
}

/**
 * Merge one filter with other filter prop domain
 */
/* eslint-disable complexity */
function mergeFilterDomainStep(filter, filterProps) {
  if (!filter) {
    return null;
  }
  if (!filterProps) {
    return filter;
  }
  if (filter.fieldType && filter.fieldType !== filterProps.fieldType || !filterProps.domain) {
    return filter;
  }
  var sortedDomain = !filter.domain ? filterProps.domain : [].concat((0, _toConsumableArray2["default"])(filter.domain || []), (0, _toConsumableArray2["default"])(filterProps.domain || [])).sort(function (a, b) {
    return a - b;
  });
  var newFilter = _objectSpread(_objectSpread(_objectSpread({}, filter), filterProps), {}, {
    // use min max as default domain
    domain: [sortedDomain[0], sortedDomain[sortedDomain.length - 1]]
  });
  switch (filterProps.fieldType) {
    case _constants.ALL_FIELD_TYPES.string:
    case _constants.ALL_FIELD_TYPES.h3:
    case _constants.ALL_FIELD_TYPES.date:
      return _objectSpread(_objectSpread({}, newFilter), {}, {
        domain: (0, _dataUtils.unique)(sortedDomain)
      });
    case _constants.ALL_FIELD_TYPES.timestamp:
      {
        var step = filter.step < filterProps.step ? filter.step : filterProps.step;
        return _objectSpread(_objectSpread({}, newFilter), {}, {
          step: step
        });
      }
    case _constants.ALL_FIELD_TYPES.real:
    case _constants.ALL_FIELD_TYPES.integer:
    default:
      return newFilter;
  }
}
/* eslint-enable complexity */

/**
 * Generates polygon filter
 */
var featureToFilterValue = exports.featureToFilterValue = function featureToFilterValue(feature, filterId, properties) {
  return _objectSpread(_objectSpread({}, feature), {}, {
    id: feature.id,
    properties: _objectSpread(_objectSpread(_objectSpread({}, feature.properties), properties), {}, {
      filterId: filterId
    })
  });
};
var getFilterIdInFeature = exports.getFilterIdInFeature = function getFilterIdInFeature(f) {
  return (0, _lodash["default"])(f, ['properties', 'filterId']);
};

/**
 * Generates polygon filter
 */
function generatePolygonFilter(layers, feature) {
  var dataId = layers.map(function (l) {
    return l.config.dataId;
  }).filter(_commonUtils.notNullorUndefined);
  var layerId = layers.map(function (l) {
    return l.id;
  });
  var name = layers.map(function (l) {
    return l.config.label;
  });
  var filter = getDefaultFilter({
    dataId: dataId
  });
  return _objectSpread(_objectSpread({}, filter), {}, {
    fixedDomain: true,
    type: _constants.FILTER_TYPES.polygon,
    name: name,
    layerId: layerId,
    value: featureToFilterValue(feature, filter.id, {
      isVisible: true
    })
  });
}

/**
 * Run filter entirely on CPU
 */

function filterDatasetCPU(state, dataId) {
  var datasetFilters = state.filters.filter(function (f) {
    return f.dataId.includes(dataId);
  });
  var dataset = state.datasets[dataId];
  if (!dataset) {
    return state;
  }
  var cpuFilteredDataset = dataset.filterTableCPU(datasetFilters, state.layers);
  return (0, _utils.set)(['datasets', dataId], cpuFilteredDataset, state);
}

/**
 * Validate parsed filters with datasets and add filterProps to field
 */

function validateFiltersUpdateDatasets(state) {
  var filtersToValidate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  // TODO Better Typings here
  var validated = [];
  var failed = [];
  var datasets = state.datasets,
    layers = state.layers;
  var updatedDatasets = datasets;

  // merge filters
  filtersToValidate.forEach(function (filterToValidate) {
    // we can only look for datasets define in the filter dataId
    var datasetIds = (0, _commonUtils.toArray)(filterToValidate.dataId);

    // we can merge a filter only if all datasets in filter.dataId are loaded
    if (datasetIds.every(function (d) {
      return datasets[d] && !state.isMergingDatasets[d];
    })) {
      // all datasetIds in filter must be present the state datasets
      var _datasetIds$reduce = datasetIds.reduce(function (acc, datasetId) {
          var dataset = updatedDatasets[datasetId];
          var datasetLayers = layers.filter(function (l) {
            return l.config.dataId === dataset.id;
          });
          var toValidate = acc.validatedFilter || filterToValidate;
          var _validateFilterWithDa = validateFilterWithData(_objectSpread(_objectSpread(_objectSpread({}, updatedDatasets), acc.augmentedDatasets), {}, (0, _defineProperty2["default"])({}, datasetId, acc.augmentedDatasets[datasetId] || dataset)), datasetId, toValidate, datasetLayers),
            updatedFilter = _validateFilterWithDa.filter,
            updatedDataset = _validateFilterWithDa.dataset;
          if (updatedFilter) {
            // merge filter domain step
            return {
              validatedFilter: updatedFilter,
              applyToDatasets: [].concat((0, _toConsumableArray2["default"])(acc.applyToDatasets), [datasetId]),
              augmentedDatasets: _objectSpread(_objectSpread({}, acc.augmentedDatasets), {}, (0, _defineProperty2["default"])({}, datasetId, updatedDataset))
            };
          }
          return acc;
        }, {
          validatedFilter: null,
          applyToDatasets: [],
          augmentedDatasets: {}
        }),
        validatedFilter = _datasetIds$reduce.validatedFilter,
        applyToDatasets = _datasetIds$reduce.applyToDatasets,
        augmentedDatasets = _datasetIds$reduce.augmentedDatasets;
      if (validatedFilter && (0, _lodash2["default"])(datasetIds, applyToDatasets)) {
        var domain = validatedFilter.domain;
        if (validatedFilter.syncedWithLayerTimeline) {
          var animatableLayers = getAnimatableVisibleLayers(layers);
          domain = mergeTimeDomains([].concat((0, _toConsumableArray2["default"])(animatableLayers.map(function (l) {
            return l.config.animation.domain || [0, 0];
          })), [validatedFilter.domain]));
        }
        validatedFilter.value = adjustValueToFilterDomain(filterToValidate.value, _objectSpread(_objectSpread({}, validatedFilter), {}, {
          domain: domain
        }));
        validated.push(updateFilterPlot(datasets, validatedFilter));
        updatedDatasets = _objectSpread(_objectSpread({}, updatedDatasets), augmentedDatasets);
      } else {
        failed.push(filterToValidate);
      }
    } else {
      failed.push(filterToValidate);
    }
  });
  return {
    validated: validated,
    failed: failed,
    updatedDatasets: updatedDatasets
  };
}
function removeFilterPlot(filter, dataId) {
  var nextFilter = filter;
  var rangeFilter = filter;
  if (rangeFilter.bins && rangeFilter.bins[dataId]) {
    var _rangeFilter$bins = rangeFilter.bins,
      _delete = _rangeFilter$bins[dataId],
      nextBins = (0, _objectWithoutProperties2["default"])(_rangeFilter$bins, [dataId].map(_toPropertyKey));
    nextFilter = _objectSpread(_objectSpread({}, rangeFilter), {}, {
      bins: nextBins
    });
  }
  var timeFilter = filter;
  if (timeFilter.timeBins && timeFilter.timeBins[dataId]) {
    var _timeFilter$timeBins = timeFilter.timeBins,
      __delete = _timeFilter$timeBins[dataId],
      nextTimeBins = (0, _objectWithoutProperties2["default"])(_timeFilter$timeBins, [dataId].map(_toPropertyKey));
    nextFilter = _objectSpread(_objectSpread({}, nextFilter), {}, {
      timeBins: nextTimeBins
    });
  }
  return nextFilter;
}
function isValidTimeDomain(domain) {
  return Array.isArray(domain) && domain.every(Number.isFinite);
}
function getTimeWidgetHintFormatter(domain) {
  if (!isValidTimeDomain(domain)) {
    return undefined;
  }
  var diff = domain[1] - domain[0];
  return diff > durationWeek ? 'L' : diff > durationDay ? 'L LT' : diff > durationHour ? 'LT' : 'LTS';
}
function isSideFilter(filter) {
  return filter.view === _constants.FILTER_VIEW_TYPES.side;
}
function mergeTimeDomains(domains) {
  return domains.reduce(function (acc, domain) {
    var _domain$, _domain$2;
    return [Math.min(acc[0], (_domain$ = domain === null || domain === void 0 ? void 0 : domain[0]) !== null && _domain$ !== void 0 ? _domain$ : Infinity), Math.max(acc[1], (_domain$2 = domain === null || domain === void 0 ? void 0 : domain[1]) !== null && _domain$2 !== void 0 ? _domain$2 : -Infinity)];
  }, [Number(Infinity), -Infinity]);
}

/**
 * @param {Layer} layer
 */
function isLayerAnimatable(layer) {
  var _layer$config$animati;
  return ((_layer$config$animati = layer.config.animation) === null || _layer$config$animati === void 0 ? void 0 : _layer$config$animati.enabled) && Array.isArray(layer.config.animation.domain);
}

/**
 * @param {Layer[]} layers
 * @returns {Layer[]}
 */
function getAnimatableVisibleLayers(layers) {
  return layers.filter(function (l) {
    return isLayerAnimatable(l) && l.config.isVisible;
  });
}

/**
 * @param {Layer[]} layers
 * @param {string} type
 * @returns {Layer[]}
 */
function getAnimatableVisibleLayersByType(layers, type) {
  return getAnimatableVisibleLayers(layers).filter(function (l) {
    return l.type === type;
  });
}

/**
 * @param {Layer[]} layers
 * @returns {Layer[]}
 */
function getIntervalBasedAnimationLayers(layers) {
  // @ts-ignore
  return getAnimatableVisibleLayers(layers).filter(function (l) {
    var _l$config$animation;
    return (_l$config$animation = l.config.animation) === null || _l$config$animation === void 0 ? void 0 : _l$config$animation.timeSteps;
  });
}
function mergeFilterWithTimeline(filter, animationConfig) {
  if ((filter === null || filter === void 0 ? void 0 : filter.type) === _constants.FILTER_TYPES.timeRange && filter.syncedWithLayerTimeline && animationConfig && Array.isArray(animationConfig.domain)) {
    var domain = mergeTimeDomains([filter.domain, animationConfig.domain]);
    return {
      filter: _objectSpread(_objectSpread({}, filter), {}, {
        domain: domain
      }),
      animationConfig: _objectSpread(_objectSpread({}, animationConfig), {}, {
        domain: domain
      })
    };
  }
  return {
    filter: filter,
    animationConfig: animationConfig
  };
}
function scaleSourceDomainToDestination(sourceDomain, destinationDomain) {
  // 0 -> 100: merged domains t1 - t0 === 100% filter may already have this info which is good
  var sourceDomainSize = sourceDomain[1] - sourceDomain[0];
  // 10 -> 20: animationConfig domain d1 - d0 === animationConfig size
  var destinationDomainSize = destinationDomain[1] - destinationDomain[0];
  // scale animationConfig size using domain size
  var scaledSourceDomainSize = sourceDomainSize / destinationDomainSize * 100;
  // scale d0 - t0 using domain size to find starting point
  var offset = sourceDomain[0] - destinationDomain[0];
  var scaledOffset = offset / destinationDomainSize * 100;
  return [scaledOffset, scaledSourceDomainSize + scaledOffset];
}
function getFilterScaledTimeline(filter, animationConfig) {
  if (!(filter.syncedWithLayerTimeline && animationConfig !== null && animationConfig !== void 0 && animationConfig.domain)) {
    return [];
  }
  return scaleSourceDomainToDestination(animationConfig.domain, filter.domain);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfa2V5bWlycm9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbG9kYXNoIiwiX2xvZGFzaDIiLCJfZDNBcnJheSIsIl9ib29sZWFuV2l0aGluIiwiX2hlbHBlcnMiLCJfZGVjaW1hbCIsIl9jb25zdGFudHMiLCJTY2FsZVV0aWxzIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfaDNKcyIsIl9jb21tb25VdGlscyIsIl91dGlscyIsIl9kYXRhVXRpbHMiLCJfcGxvdCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiX3R5cGVvZiIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIl90b1Byb3BlcnR5S2V5IiwiX3RvUHJpbWl0aXZlIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJvd25LZXlzIiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm8iLCJmaWx0ZXIiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkdXJhdGlvblNlY29uZCIsImV4cG9ydHMiLCJkdXJhdGlvbk1pbnV0ZSIsImR1cmF0aW9uSG91ciIsImR1cmF0aW9uRGF5IiwiZHVyYXRpb25XZWVrIiwiZHVyYXRpb25ZZWFyIiwiVGltZXN0YW1wU3RlcE1hcCIsIm1heCIsInN0ZXAiLCJQT1NJVElWRV9JTkZJTklUWSIsIkZJTFRFUl9VUERBVEVSX1BST1BTIiwia2V5TWlycm9yIiwiZGF0YUlkIiwibmFtZSIsImxheWVySWQiLCJGSUxURVJfQ09NUE9ORU5UUyIsIkZJTFRFUl9UWVBFUyIsInNlbGVjdCIsIm11bHRpU2VsZWN0IiwidGltZVJhbmdlIiwicmFuZ2UiLCJwb2x5Z29uIiwiREVGQVVMVF9GSUxURVJfU1RSVUNUVVJFIiwiaWQiLCJlbmFibGVkIiwiZml4ZWREb21haW4iLCJ2aWV3IiwiRklMVEVSX1ZJRVdfVFlQRVMiLCJzaWRlIiwiaXNBbmltYXRpbmciLCJhbmltYXRpb25XaW5kb3ciLCJBTklNQVRJT05fV0lORE9XIiwiZnJlZSIsInNwZWVkIiwidHlwZSIsImZpZWxkSWR4IiwiZG9tYWluIiwidmFsdWUiLCJwbG90VHlwZSIsIlBMT1RfVFlQRVMiLCJoaXN0b2dyYW0iLCJ5QXhpcyIsImdwdSIsIkZJTFRFUl9JRF9MRU5HVEgiLCJMQVlFUl9GSUxURVJTIiwiZ2V0RGVmYXVsdEZpbHRlciIsIl9yZWYiLCJ1bmRlZmluZWQiLCJ0b0FycmF5IiwiZ2VuZXJhdGVIYXNoSWQiLCJzaG91bGRBcHBseUZpbHRlciIsImRhdGFzZXRJZCIsImRhdGFJZHMiLCJpbmNsdWRlcyIsInZhbGlkYXRlUG9seWdvbkZpbHRlciIsImRhdGFzZXQiLCJsYXllcnMiLCJmYWlsZWQiLCJpc1ZhbGlkRmlsdGVyVmFsdWUiLCJpc1ZhbGlkRGF0YXNldCIsImxheWVyIiwiZmluZCIsImwiLCJmaWx0ZXJWYWxpZGF0b3JzIiwidmFsaWRhdGVGaWx0ZXIiLCJkYXRhc2V0cyIsIl9maWx0ZXIkdmlldyIsImZpbHRlckRhdGFJZCIsImZpbHRlckRhdGFzZXRJbmRleCIsImluZGV4T2YiLCJpbml0aWFsaXplRmlsdGVyIiwiZmllbGROYW1lIiwiX2FwcGx5RmlsdGVyRmllbGROYW1lIiwiYXBwbHlGaWx0ZXJGaWVsZE5hbWUiLCJtZXJnZURvbWFpbiIsInVwZGF0ZWRGaWx0ZXIiLCJ1cGRhdGVkRGF0YXNldCIsInZhbGlkYXRlRmlsdGVyWUF4aXMiLCJ2YWxpZGF0ZUZpbHRlcldpdGhEYXRhIiwicHJvdG90eXBlIiwiZmllbGRzIiwiX2ZpbHRlciIsIm1hdGNoZWRBeGlzIiwiX3JlZjIiLCJnZXRGaWx0ZXJQcm9wcyIsImZpZWxkIiwiZmllbGREb21haW4iLCJmaWx0ZXJQcm9wcyIsImZpZWxkVHlwZSIsIkFMTF9GSUVMRF9UWVBFUyIsInJlYWwiLCJpbnRlZ2VyIiwidHlwZU9wdGlvbnMiLCJzdHJpbmciLCJoMyIsImRhdGUiLCJ0aW1lc3RhbXAiLCJlbmxhcmdlZCIsImdldFBvbHlnb25GaWx0ZXJGdW5jdG9yIiwiZGF0YUNvbnRhaW5lciIsImdldFBvc2l0aW9uIiwiZ2V0UG9zaXRpb25BY2Nlc3NvciIsIkxBWUVSX1RZUEVTIiwicG9pbnQiLCJpY29uIiwiZGF0YSIsInBvcyIsImV2ZXJ5IiwiaXNGaW5pdGUiLCJpc0luUG9seWdvbiIsImFyYyIsImxpbmUiLCJoZXhhZ29uSWQiLCJkYXRhVG9GZWF0dXJlIiwiY2VudHJvaWRzIiwiY2VudHJvaWQiLCJpbmRleCIsImgzSXNWYWxpZCIsImdldENlbnRyb2lkIiwiZ2VvanNvbiIsImNhbkFwcGx5RmVhdHVyZUZpbHRlciIsImZlYXR1cmUiLCJCb29sZWFuIiwiZ2VvbWV0cnkiLCJnZXRGaWx0ZXJGdW5jdGlvbiIsInZhbHVlQWNjZXNzb3IiLCJkZWZhdWx0RnVuYyIsImlzSW5SYW5nZSIsIm1hcHBlZFZhbHVlIiwiYWNjZXNzb3IiLCJBcnJheSIsImlzQXJyYXkiLCJ0aW1lVG9Vbml4TWlsbGkiLCJmb3JtYXQiLCJsYXllckZpbHRlckZ1bmN0aW9ucyIsIm1hcCIsImNvbmZpZyIsImZpbHRlckZ1bmMiLCJ1cGRhdGVGaWx0ZXJEYXRhSWQiLCJmaWx0ZXJEYXRhQnlGaWx0ZXJUeXBlcyIsIl9yZWYzIiwiZHluYW1pY0RvbWFpbkZpbHRlcnMiLCJjcHVGaWx0ZXJzIiwiZmlsdGVyRnVuY3MiLCJmaWx0ZXJlZEluZGV4Rm9yRG9tYWluIiwiZmlsdGVyZWRJbmRleCIsImZpbHRlckNvbnRleHQiLCJmaWx0ZXJGdW5jQ2FsbGVyIiwibnVtUm93cyIsIm1hdGNoRm9yRG9tYWluIiwibWF0Y2hGb3JSZW5kZXIiLCJnZXRGaWx0ZXJSZWNvcmQiLCJmaWx0ZXJzIiwib3B0IiwiZmlsdGVyUmVjb3JkIiwiZHluYW1pY0RvbWFpbiIsImNwdSIsImYiLCJpZ25vcmVEb21haW4iLCJjcHVPbmx5IiwiZGlmZkZpbHRlcnMiLCJvbGRGaWx0ZXJSZWNvcmQiLCJmaWx0ZXJDaGFuZ2VkIiwiZW50cmllcyIsIl9yZWY0IiwiX3JlZjUiLCJfc2xpY2VkVG9BcnJheTIiLCJyZWNvcmQiLCJpdGVtcyIsIm9sZEZpbHRlciIsInByb3AiLCJjb25jYXQiLCJhZGp1c3RWYWx1ZVRvRmlsdGVyRG9tYWluIiwiX3JlZjYiLCJkIiwibm90TnVsbG9yVW5kZWZpbmVkIiwiZmlsdGVyZWRWYWx1ZSIsImdldE51bWVyaWNGaWVsZERvbWFpbiIsIm1hcEluZGV4IiwiZ2V0TGluZWFyRG9tYWluIiwiZGlmZiIsImdldE51bWVyaWNTdGVwU2l6ZSIsImZvcm1hdE51bWJlckJ5U3RlcCIsIk1hdGgiLCJhYnMiLCJ4IiwiZXhwb25lbnRpYWxGb3JtIiwidG9FeHBvbmVudGlhbCIsImV4cG9uZW50IiwicGFyc2VGbG9hdCIsInNwbGl0IiwiRGVjaW1hbCIsInBvdyIsInRvTnVtYmVyIiwiZ2V0VGltZXN0YW1wRmllbGREb21haW4iLCJkZWZhdWx0VGltZUZvcm1hdCIsImdldFRpbWVXaWRnZXRUaXRsZUZvcm1hdHRlciIsImVudHJ5IiwidmFsIiwiYm91bmQiLCJmbG9vciIsImNlaWwiLCJib29sZWFuV2l0aGluIiwidHVyZlBvaW50IiwiaXNWYWxpZFRpbWVEb21haW4iLCJpc0ZpbHRlclZhbGlkVG9TYXZlIiwidiIsImlzTmFOIiwiaW5wdXQiLCJjb29yZGluYXRlcyIsImdldENvbHVtbkZpbHRlclByb3BzIiwiX2ZpbHRlciRwbG90VHlwZSIsIl9maWx0ZXIkbWFwcGVkVmFsdWUiLCJnZXRDb2x1bW5GaWVsZElkeCIsImxpbmVDaGFydCIsInNlcmllcyIsInJvdyIsInJvd0luZGV4IiwieSIsInZhbHVlQXQiLCJfcmVmNyIsInNvcnQiLCJiIiwiYXNjZW5kaW5nIiwieURvbWFpbiIsImV4dGVudCIsInhEb21haW4iLCJ1cGRhdGVGaWx0ZXJQbG90IiwicmVtb3ZlRmlsdGVyUGxvdCIsInVwZGF0ZVRpbWVGaWx0ZXJQbG90VHlwZSIsInVwZGF0ZVJhbmdlRmlsdGVyUGxvdFR5cGUiLCJhcHBseUZpbHRlcnNUb0RhdGFzZXRzIiwiZGF0YXNldElkcyIsInJlZHVjZSIsImFjYyIsImxheWVyc1RvRmlsdGVyIiwiYXBwbGllZEZpbHRlcnMiLCJ0YWJsZSIsImZpbHRlclRhYmxlIiwib3B0aW9uIiwiZmllbGRJbmRleCIsIm5ld0ZpbHRlciIsImFzc2lnbiIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJfbWVyZ2VGaWx0ZXJEb21haW4iLCJkb21haW5TdGVwcyIsIm1lcmdlRmlsdGVyRG9tYWluIiwiX2ZpbHRlciRkYXRhSWQiLCJpZHgiLCJfZG9tYWluU3RlcHMiLCJtZXJnZUZpbHRlckRvbWFpblN0ZXAiLCJzb3J0ZWREb21haW4iLCJ1bmlxdWUiLCJmZWF0dXJlVG9GaWx0ZXJWYWx1ZSIsImZpbHRlcklkIiwicHJvcGVydGllcyIsImdldEZpbHRlcklkSW5GZWF0dXJlIiwiZ2VuZXJhdGVQb2x5Z29uRmlsdGVyIiwibGFiZWwiLCJpc1Zpc2libGUiLCJmaWx0ZXJEYXRhc2V0Q1BVIiwic3RhdGUiLCJkYXRhc2V0RmlsdGVycyIsImNwdUZpbHRlcmVkRGF0YXNldCIsImZpbHRlclRhYmxlQ1BVIiwidmFsaWRhdGVGaWx0ZXJzVXBkYXRlRGF0YXNldHMiLCJmaWx0ZXJzVG9WYWxpZGF0ZSIsInZhbGlkYXRlZCIsInVwZGF0ZWREYXRhc2V0cyIsImZpbHRlclRvVmFsaWRhdGUiLCJpc01lcmdpbmdEYXRhc2V0cyIsIl9kYXRhc2V0SWRzJHJlZHVjZSIsImRhdGFzZXRMYXllcnMiLCJ0b1ZhbGlkYXRlIiwidmFsaWRhdGVkRmlsdGVyIiwiX3ZhbGlkYXRlRmlsdGVyV2l0aERhIiwiYXVnbWVudGVkRGF0YXNldHMiLCJhcHBseVRvRGF0YXNldHMiLCJpc0VxdWFsIiwic3luY2VkV2l0aExheWVyVGltZWxpbmUiLCJhbmltYXRhYmxlTGF5ZXJzIiwiZ2V0QW5pbWF0YWJsZVZpc2libGVMYXllcnMiLCJtZXJnZVRpbWVEb21haW5zIiwiYW5pbWF0aW9uIiwibmV4dEZpbHRlciIsInJhbmdlRmlsdGVyIiwiYmlucyIsIl9yYW5nZUZpbHRlciRiaW5zIiwiX2RlbGV0ZSIsIm5leHRCaW5zIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiIsInRpbWVGaWx0ZXIiLCJ0aW1lQmlucyIsIl90aW1lRmlsdGVyJHRpbWVCaW5zIiwiX19kZWxldGUiLCJuZXh0VGltZUJpbnMiLCJnZXRUaW1lV2lkZ2V0SGludEZvcm1hdHRlciIsImlzU2lkZUZpbHRlciIsImRvbWFpbnMiLCJfZG9tYWluJCIsIl9kb21haW4kMiIsIm1pbiIsIkluZmluaXR5IiwiaXNMYXllckFuaW1hdGFibGUiLCJfbGF5ZXIkY29uZmlnJGFuaW1hdGkiLCJnZXRBbmltYXRhYmxlVmlzaWJsZUxheWVyc0J5VHlwZSIsImdldEludGVydmFsQmFzZWRBbmltYXRpb25MYXllcnMiLCJfbCRjb25maWckYW5pbWF0aW9uIiwidGltZVN0ZXBzIiwibWVyZ2VGaWx0ZXJXaXRoVGltZWxpbmUiLCJhbmltYXRpb25Db25maWciLCJzY2FsZVNvdXJjZURvbWFpblRvRGVzdGluYXRpb24iLCJzb3VyY2VEb21haW4iLCJkZXN0aW5hdGlvbkRvbWFpbiIsInNvdXJjZURvbWFpblNpemUiLCJkZXN0aW5hdGlvbkRvbWFpblNpemUiLCJzY2FsZWRTb3VyY2VEb21haW5TaXplIiwib2Zmc2V0Iiwic2NhbGVkT2Zmc2V0IiwiZ2V0RmlsdGVyU2NhbGVkVGltZWxpbmUiXSwic291cmNlcyI6WyIuLi9zcmMvZmlsdGVyLXV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBrZXlNaXJyb3IgZnJvbSAna2V5bWlycm9yJztcbmltcG9ydCBnZXQgZnJvbSAnbG9kYXNoLmdldCc7XG5pbXBvcnQgaXNFcXVhbCBmcm9tICdsb2Rhc2guaXNlcXVhbCc7XG5pbXBvcnQge2FzY2VuZGluZywgZXh0ZW50fSBmcm9tICdkMy1hcnJheSc7XG5cbmltcG9ydCBib29sZWFuV2l0aGluIGZyb20gJ0B0dXJmL2Jvb2xlYW4td2l0aGluJztcbmltcG9ydCB7cG9pbnQgYXMgdHVyZlBvaW50fSBmcm9tICdAdHVyZi9oZWxwZXJzJztcbmltcG9ydCB7RGVjaW1hbH0gZnJvbSAnZGVjaW1hbC5qcyc7XG5pbXBvcnQge1xuICBBTExfRklFTERfVFlQRVMsXG4gIEZJTFRFUl9UWVBFUyxcbiAgQU5JTUFUSU9OX1dJTkRPVyxcbiAgUExPVF9UWVBFUyxcbiAgTEFZRVJfVFlQRVMsXG4gIEZJTFRFUl9WSUVXX1RZUEVTXG59IGZyb20gJ0BrZXBsZXIuZ2wvY29uc3RhbnRzJztcbi8vIGltcG9ydCB7VmlzU3RhdGV9IGZyb20gJ0BrZXBsZXIuZ2wvc2NoZW1hcyc7XG5pbXBvcnQgKiBhcyBTY2FsZVV0aWxzIGZyb20gJy4vZGF0YS1zY2FsZS11dGlscyc7XG5pbXBvcnQge2gzSXNWYWxpZH0gZnJvbSAnaDMtanMnO1xuXG5pbXBvcnQge1xuICBFbnRyaWVzLFxuICBGaWVsZCxcbiAgUGFyc2VkRmlsdGVyLFxuICBGaWx0ZXIsXG4gIEZpbHRlckJhc2UsXG4gIFBvbHlnb25GaWx0ZXIsXG4gIEZpZWxkRG9tYWluLFxuICBUaW1lUmFuZ2VGaWVsZERvbWFpbixcbiAgRmVhdHVyZSxcbiAgRmVhdHVyZVZhbHVlLFxuICBMaW5lQ2hhcnQsXG4gIFJhbmdlRmlsdGVyLFxuICBUaW1lUmFuZ2VGaWx0ZXIsXG4gIFJhbmdlRmllbGREb21haW4sXG4gIEZpbHRlckRhdGFzZXRPcHQsXG4gIEZpbHRlclJlY29yZCxcbiAgQW5pbWF0aW9uQ29uZmlnXG59IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuXG5pbXBvcnQge2dlbmVyYXRlSGFzaElkLCB0b0FycmF5LCBub3ROdWxsb3JVbmRlZmluZWQsIGdldENlbnRyb2lkfSBmcm9tICdAa2VwbGVyLmdsL2NvbW1vbi11dGlscyc7XG5pbXBvcnQge0RhdGFDb250YWluZXJJbnRlcmZhY2V9IGZyb20gJy4vZGF0YS1jb250YWluZXItaW50ZXJmYWNlJztcbmltcG9ydCB7c2V0fSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7dGltZVRvVW5peE1pbGxpLCB1bmlxdWV9IGZyb20gJy4vZGF0YS11dGlscyc7XG5pbXBvcnQge3VwZGF0ZVRpbWVGaWx0ZXJQbG90VHlwZSwgdXBkYXRlUmFuZ2VGaWx0ZXJQbG90VHlwZX0gZnJvbSAnLi9wbG90JztcbmltcG9ydCB7S2VwbGVyVGFibGVNb2RlbH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBkdXJhdGlvblNlY29uZCA9IDEwMDA7XG5leHBvcnQgY29uc3QgZHVyYXRpb25NaW51dGUgPSBkdXJhdGlvblNlY29uZCAqIDYwO1xuZXhwb3J0IGNvbnN0IGR1cmF0aW9uSG91ciA9IGR1cmF0aW9uTWludXRlICogNjA7XG5leHBvcnQgY29uc3QgZHVyYXRpb25EYXkgPSBkdXJhdGlvbkhvdXIgKiAyNDtcbmV4cG9ydCBjb25zdCBkdXJhdGlvbldlZWsgPSBkdXJhdGlvbkRheSAqIDc7XG5leHBvcnQgY29uc3QgZHVyYXRpb25ZZWFyID0gZHVyYXRpb25EYXkgKiAzNjU7XG5cbi8vIFRPRE8gaXNvbGF0ZSB0eXBlcyAtIGRlcGVuZHMgb24gQGtlcGxlci5nbC9zY2hlbWFzXG50eXBlIFZpc1N0YXRlID0gYW55O1xuXG5leHBvcnQgdHlwZSBGaWx0ZXJSZXN1bHQgPSB7XG4gIGZpbHRlcmVkSW5kZXhGb3JEb21haW4/OiBudW1iZXJbXTtcbiAgZmlsdGVyZWRJbmRleD86IG51bWJlcltdO1xufTtcblxuZXhwb3J0IHR5cGUgRmlsdGVyQ2hhbmdlZCA9IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIFtrZXkgaW4ga2V5b2YgRmlsdGVyUmVjb3JkXToge1xuICAgIFtrZXk6IHN0cmluZ106ICdhZGRlZCcgfCAnZGVsZXRlZCcgfCAnbmFtZV9jaGFuZ2VkJyB8ICd2YWx1ZV9jaGFuZ2VkJyB8ICdkYXRhSWRfY2hhbmdlZCc7XG4gIH0gfCBudWxsO1xufTtcblxuZXhwb3J0IHR5cGUgZGF0YVZhbHVlQWNjZXNzb3IgPSAoZGF0YToge2luZGV4OiBudW1iZXJ9KSA9PiBudW1iZXIgfCBudWxsO1xuXG5leHBvcnQgY29uc3QgVGltZXN0YW1wU3RlcE1hcCA9IFtcbiAge21heDogMSwgc3RlcDogMC4wNX0sXG4gIHttYXg6IDEwLCBzdGVwOiAwLjF9LFxuICB7bWF4OiAxMDAsIHN0ZXA6IDF9LFxuICB7bWF4OiA1MDAsIHN0ZXA6IDV9LFxuICB7bWF4OiAxMDAwLCBzdGVwOiAxMH0sXG4gIHttYXg6IDUwMDAsIHN0ZXA6IDUwfSxcbiAge21heDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBzdGVwOiAxMDAwfVxuXTtcblxuZXhwb3J0IGNvbnN0IEZJTFRFUl9VUERBVEVSX1BST1BTID0ga2V5TWlycm9yKHtcbiAgZGF0YUlkOiBudWxsLFxuICBuYW1lOiBudWxsLFxuICBsYXllcklkOiBudWxsXG59KTtcblxuZXhwb3J0IGNvbnN0IEZJTFRFUl9DT01QT05FTlRTID0ge1xuICBbRklMVEVSX1RZUEVTLnNlbGVjdF06ICdTaW5nbGVTZWxlY3RGaWx0ZXInLFxuICBbRklMVEVSX1RZUEVTLm11bHRpU2VsZWN0XTogJ011bHRpU2VsZWN0RmlsdGVyJyxcbiAgW0ZJTFRFUl9UWVBFUy50aW1lUmFuZ2VdOiAnVGltZVJhbmdlRmlsdGVyJyxcbiAgW0ZJTFRFUl9UWVBFUy5yYW5nZV06ICdSYW5nZUZpbHRlcicsXG4gIFtGSUxURVJfVFlQRVMucG9seWdvbl06ICdQb2x5Z29uRmlsdGVyJ1xufTtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfRklMVEVSX1NUUlVDVFVSRSA9IHtcbiAgZGF0YUlkOiBbXSwgLy8gW3N0cmluZ11cbiAgaWQ6IG51bGwsXG4gIGVuYWJsZWQ6IHRydWUsXG5cbiAgLy8gdGltZSByYW5nZSBmaWx0ZXIgc3BlY2lmaWNcbiAgZml4ZWREb21haW46IGZhbHNlLFxuICB2aWV3OiBGSUxURVJfVklFV19UWVBFUy5zaWRlLFxuICBpc0FuaW1hdGluZzogZmFsc2UsXG4gIGFuaW1hdGlvbldpbmRvdzogQU5JTUFUSU9OX1dJTkRPVy5mcmVlLFxuICBzcGVlZDogMSxcblxuICAvLyBmaWVsZCBzcGVjaWZpY1xuICBuYW1lOiBbXSwgLy8gc3RyaW5nXG4gIHR5cGU6IG51bGwsXG4gIGZpZWxkSWR4OiBbXSwgLy8gW2ludGVnZXJdXG4gIGRvbWFpbjogbnVsbCxcbiAgdmFsdWU6IG51bGwsXG5cbiAgLy8gcGxvdFxuICBwbG90VHlwZToge1xuICAgIHR5cGU6IFBMT1RfVFlQRVMuaGlzdG9ncmFtXG4gIH0sXG4gIHlBeGlzOiBudWxsLFxuXG4gIC8vIG1vZGVcbiAgZ3B1OiBmYWxzZVxufTtcblxuZXhwb3J0IGNvbnN0IEZJTFRFUl9JRF9MRU5HVEggPSA0O1xuXG5leHBvcnQgY29uc3QgTEFZRVJfRklMVEVSUyA9IFtGSUxURVJfVFlQRVMucG9seWdvbl07XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgZmlsdGVyIHdpdGggYSBkYXRhc2V0IGlkIGFzIGRhdGFJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEZpbHRlcih7XG4gIGRhdGFJZCxcbiAgaWRcbn06IHtcbiAgZGF0YUlkPzogc3RyaW5nIHwgbnVsbCB8IHN0cmluZ1tdO1xuICBpZD86IHN0cmluZztcbn0gPSB7fSk6IEZpbHRlckJhc2U8TGluZUNoYXJ0PiB7XG4gIHJldHVybiB7XG4gICAgLi4uREVGQVVMVF9GSUxURVJfU1RSVUNUVVJFLFxuICAgIC8vIHN0b3JlIGl0IGFzIGRhdGFJZCBhbmQgaXQgY291bGQgYmUgb25lIG9yIG1hbnlcbiAgICBkYXRhSWQ6IGRhdGFJZCA/IHRvQXJyYXkoZGF0YUlkKSA6IFtdLFxuICAgIGlkOiBpZCB8fCBnZW5lcmF0ZUhhc2hJZChGSUxURVJfSURfTEVOR1RIKVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgZmlsdGVyIGlzIHZhbGlkIGJhc2VkIG9uIHRoZSBnaXZlbiBkYXRhSWRcbiAqIEBwYXJhbSAgZmlsdGVyIHRvIHZhbGlkYXRlXG4gKiBAcGFyYW0gIGRhdGFzZXRJZCBpZCB0byB2YWxpZGF0ZSBmaWx0ZXIgYWdhaW5zdFxuICogQHJldHVybiB0cnVlIGlmIGEgZmlsdGVyIGlzIHZhbGlkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEFwcGx5RmlsdGVyKGZpbHRlcjogRmlsdGVyLCBkYXRhc2V0SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBkYXRhSWRzID0gdG9BcnJheShmaWx0ZXIuZGF0YUlkKTtcbiAgcmV0dXJuIGRhdGFJZHMuaW5jbHVkZXMoZGF0YXNldElkKSAmJiBmaWx0ZXIudmFsdWUgIT09IG51bGw7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIGFuZCBtb2RpZmllcyBwb2x5Z29uIGZpbHRlciBzdHJ1Y3R1cmVcbiAqIEBwYXJhbSBkYXRhc2V0XG4gKiBAcGFyYW0gZmlsdGVyXG4gKiBAcGFyYW0gbGF5ZXJzXG4gKiBAcmV0dXJuIC0ge2ZpbHRlciwgZGF0YXNldH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUG9seWdvbkZpbHRlcjxLIGV4dGVuZHMgS2VwbGVyVGFibGVNb2RlbDxLLCBMPiwgTCBleHRlbmRzIHtpZDogc3RyaW5nfT4oXG4gIGRhdGFzZXQ6IEssXG4gIGZpbHRlcjogUG9seWdvbkZpbHRlcixcbiAgbGF5ZXJzOiBMW11cbik6IHtmaWx0ZXI6IFBvbHlnb25GaWx0ZXIgfCBudWxsOyBkYXRhc2V0OiBLfSB7XG4gIGNvbnN0IGZhaWxlZCA9IHtkYXRhc2V0LCBmaWx0ZXI6IG51bGx9O1xuICBjb25zdCB7dmFsdWUsIGxheWVySWQsIHR5cGUsIGRhdGFJZH0gPSBmaWx0ZXI7XG5cbiAgaWYgKCFsYXllcklkIHx8ICFpc1ZhbGlkRmlsdGVyVmFsdWUodHlwZSwgdmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhaWxlZDtcbiAgfVxuXG4gIGNvbnN0IGlzVmFsaWREYXRhc2V0ID0gZGF0YUlkLmluY2x1ZGVzKGRhdGFzZXQuaWQpO1xuXG4gIGlmICghaXNWYWxpZERhdGFzZXQpIHtcbiAgICByZXR1cm4gZmFpbGVkO1xuICB9XG5cbiAgY29uc3QgbGF5ZXIgPSBsYXllcnMuZmluZChsID0+IGxheWVySWQuaW5jbHVkZXMobC5pZCkpO1xuXG4gIGlmICghbGF5ZXIpIHtcbiAgICByZXR1cm4gZmFpbGVkO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmaWx0ZXI6IHtcbiAgICAgIC4uLmZpbHRlcixcbiAgICAgIGZpZWxkSWR4OiBbXVxuICAgIH0sXG4gICAgZGF0YXNldFxuICB9O1xufVxuXG4vKipcbiAqIEN1c3RvbSBmaWx0ZXIgdmFsaWRhdG9yc1xuICovXG5jb25zdCBmaWx0ZXJWYWxpZGF0b3JzID0ge1xuICBbRklMVEVSX1RZUEVTLnBvbHlnb25dOiB2YWxpZGF0ZVBvbHlnb25GaWx0ZXJcbn07XG5cbi8qKlxuICogRGVmYXVsdCB2YWxpZGF0ZSBmaWx0ZXIgZnVuY3Rpb25cbiAqIEBwYXJhbSBkYXRhc2V0c1xuICogQHBhcmFtIGRhdGFzZXRJZFxuICogQHBhcmFtIGZpbHRlclxuICogQHJldHVybiAtIHtmaWx0ZXIsIGRhdGFzZXR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUZpbHRlcjxLIGV4dGVuZHMgS2VwbGVyVGFibGVNb2RlbDxLLCBMPiwgTD4oXG4gIGRhdGFzZXRzOiBSZWNvcmQ8c3RyaW5nLCBLPixcbiAgZGF0YXNldElkOiBzdHJpbmcsXG4gIGZpbHRlcjogUGFyc2VkRmlsdGVyXG4pOiB7ZmlsdGVyOiBGaWx0ZXIgfCBudWxsOyBkYXRhc2V0OiBLfSB7XG4gIGNvbnN0IGRhdGFzZXQgPSBkYXRhc2V0c1tkYXRhc2V0SWRdO1xuICAvLyBtYXRjaCBmaWx0ZXIuZGF0YUlkXG4gIGNvbnN0IGZhaWxlZCA9IHtkYXRhc2V0LCBmaWx0ZXI6IG51bGx9O1xuICBjb25zdCBmaWx0ZXJEYXRhSWQgPSB0b0FycmF5KGZpbHRlci5kYXRhSWQpO1xuXG4gIGNvbnN0IGZpbHRlckRhdGFzZXRJbmRleCA9IGZpbHRlckRhdGFJZC5pbmRleE9mKGRhdGFzZXQuaWQpO1xuICBpZiAoZmlsdGVyRGF0YXNldEluZGV4IDwgMCB8fCAhdG9BcnJheShmaWx0ZXIubmFtZSlbZmlsdGVyRGF0YXNldEluZGV4XSkge1xuICAgIC8vIHRoZSBjdXJyZW50IGZpbHRlciBpcyBub3QgbWFwcGVkIGFnYWluc3QgdGhlIGN1cnJlbnQgZGF0YXNldFxuICAgIHJldHVybiBmYWlsZWQ7XG4gIH1cblxuICBjb25zdCBpbml0aWFsaXplRmlsdGVyOiBGaWx0ZXIgPSB7XG4gICAgLi4uZ2V0RGVmYXVsdEZpbHRlcih7ZGF0YUlkOiBmaWx0ZXIuZGF0YUlkfSksXG4gICAgLi4uZmlsdGVyLFxuICAgIGRhdGFJZDogZmlsdGVyRGF0YUlkLFxuICAgIG5hbWU6IHRvQXJyYXkoZmlsdGVyLm5hbWUpXG4gIH07XG5cbiAgY29uc3QgZmllbGROYW1lID0gaW5pdGlhbGl6ZUZpbHRlci5uYW1lW2ZpbHRlckRhdGFzZXRJbmRleF07XG4gIGNvbnN0IHtmaWx0ZXI6IHVwZGF0ZWRGaWx0ZXIsIGRhdGFzZXQ6IHVwZGF0ZWREYXRhc2V0fSA9IGFwcGx5RmlsdGVyRmllbGROYW1lKFxuICAgIGluaXRpYWxpemVGaWx0ZXIsXG4gICAgZGF0YXNldHMsXG4gICAgZGF0YXNldElkLFxuICAgIGZpZWxkTmFtZSxcbiAgICBmaWx0ZXJEYXRhc2V0SW5kZXgsXG4gICAge21lcmdlRG9tYWluOiB0cnVlfVxuICApO1xuXG4gIGlmICghdXBkYXRlZEZpbHRlcikge1xuICAgIHJldHVybiBmYWlsZWQ7XG4gIH1cblxuICAvLyBkb24ndCBhZGp1c3QgdmFsdWUgeWV0IGJlZm9yZSBhbGwgZGF0YXNldHMgYXJlIGxvYWRlZFxuICB1cGRhdGVkRmlsdGVyLnZpZXcgPSBmaWx0ZXIudmlldyA/PyB1cGRhdGVkRmlsdGVyLnZpZXc7XG5cbiAgaWYgKHVwZGF0ZWRGaWx0ZXIudmFsdWUgPT09IG51bGwpIHtcbiAgICAvLyBjYW5ub3QgYWRqdXN0IHNhdmVkIHZhbHVlIHRvIGZpbHRlclxuICAgIHJldHVybiBmYWlsZWQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZpbHRlcjogdmFsaWRhdGVGaWx0ZXJZQXhpcyh1cGRhdGVkRmlsdGVyLCB1cGRhdGVkRGF0YXNldCksXG4gICAgZGF0YXNldDogdXBkYXRlZERhdGFzZXRcbiAgfTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBzYXZlZCBmaWx0ZXIgY29uZmlnIHdpdGggbmV3IGRhdGFcbiAqXG4gKiBAcGFyYW0gZGF0YXNldHNcbiAqIEBwYXJhbSBkYXRhc2V0SWRcbiAqIEBwYXJhbSBmaWx0ZXIgLSBmaWx0ZXIgdG8gYmUgdmFsaWRhdGVcbiAqIEBwYXJhbSBsYXllcnMgLSBsYXllcnNcbiAqIEByZXR1cm4gdmFsaWRhdGVkIGZpbHRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVGaWx0ZXJXaXRoRGF0YTxLIGV4dGVuZHMgS2VwbGVyVGFibGVNb2RlbDxLLCBMPiwgTD4oXG4gIGRhdGFzZXRzOiBSZWNvcmQ8c3RyaW5nLCBLPixcbiAgZGF0YXNldElkOiBzdHJpbmcsXG4gIGZpbHRlcjogUGFyc2VkRmlsdGVyLFxuICBsYXllcnM6IExbXVxuKToge2ZpbHRlcjogRmlsdGVyOyBkYXRhc2V0OiBLfSB7XG4gIHJldHVybiBmaWx0ZXIudHlwZSAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZmlsdGVyVmFsaWRhdG9ycywgZmlsdGVyLnR5cGUpXG4gICAgPyBmaWx0ZXJWYWxpZGF0b3JzW2ZpbHRlci50eXBlXShkYXRhc2V0c1tkYXRhc2V0SWRdLCBmaWx0ZXIsIGxheWVycylcbiAgICA6IHZhbGlkYXRlRmlsdGVyKGRhdGFzZXRzLCBkYXRhc2V0SWQsIGZpbHRlcik7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgWUF4aXNcbiAqIEBwYXJhbSBmaWx0ZXJcbiAqIEBwYXJhbSBkYXRhc2V0XG4gKiBAcmV0dXJuIHsqfVxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUZpbHRlcllBeGlzKGZpbHRlciwgZGF0YXNldCkge1xuICAvLyBUT0RPOiB2YWxpZGF0ZSB5QXhpcyBhZ2FpbnN0IG90aGVyIGRhdGFzZXRzXG5cbiAgY29uc3Qge2ZpZWxkc30gPSBkYXRhc2V0O1xuICBjb25zdCB7eUF4aXN9ID0gZmlsdGVyO1xuICAvLyBUT0RPOiB2YWxpZGF0ZSB5QXhpcyBhZ2FpbnN0IG90aGVyIGRhdGFzZXRzXG4gIGlmICh5QXhpcykge1xuICAgIGNvbnN0IG1hdGNoZWRBeGlzID0gZmllbGRzLmZpbmQoKHtuYW1lLCB0eXBlfSkgPT4gbmFtZSA9PT0geUF4aXMubmFtZSAmJiB0eXBlID09PSB5QXhpcy50eXBlKTtcblxuICAgIGZpbHRlciA9IG1hdGNoZWRBeGlzXG4gICAgICA/IHtcbiAgICAgICAgICAuLi5maWx0ZXIsXG4gICAgICAgICAgeUF4aXM6IG1hdGNoZWRBeGlzXG4gICAgICAgIH1cbiAgICAgIDogZmlsdGVyO1xuICB9XG5cbiAgcmV0dXJuIGZpbHRlcjtcbn1cblxuLyoqXG4gKiBHZXQgZGVmYXVsdCBmaWx0ZXIgcHJvcCBiYXNlZCBvbiBmaWVsZCB0eXBlXG4gKlxuICogQHBhcmFtIGZpZWxkXG4gKiBAcGFyYW0gZmllbGREb21haW5cbiAqIEByZXR1cm5zIGRlZmF1bHQgZmlsdGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJQcm9wcyhcbiAgZmllbGQ6IEZpZWxkLFxuICBmaWVsZERvbWFpbjogRmllbGREb21haW5cbik6IFBhcnRpYWw8RmlsdGVyPiAmIHtmaWVsZFR5cGU6IHN0cmluZ30ge1xuICBjb25zdCBmaWx0ZXJQcm9wcyA9IHtcbiAgICAuLi5maWVsZERvbWFpbixcbiAgICBmaWVsZFR5cGU6IGZpZWxkLnR5cGUsXG4gICAgdmlldzogRklMVEVSX1ZJRVdfVFlQRVMuc2lkZVxuICB9O1xuXG4gIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLnJlYWw6XG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMuaW50ZWdlcjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmZpbHRlclByb3BzLFxuICAgICAgICB2YWx1ZTogZmllbGREb21haW4uZG9tYWluLFxuICAgICAgICB0eXBlOiBGSUxURVJfVFlQRVMucmFuZ2UsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgdHlwZU9wdGlvbnM6IFtGSUxURVJfVFlQRVMucmFuZ2VdLFxuICAgICAgICBncHU6IHRydWVcbiAgICAgIH07XG5cbiAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5ib29sZWFuOlxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZmlsdGVyUHJvcHMsXG4gICAgICAgIHR5cGU6IEZJTFRFUl9UWVBFUy5zZWxlY3QsXG4gICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICBncHU6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMuc3RyaW5nOlxuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLmgzOlxuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLmRhdGU6XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5maWx0ZXJQcm9wcyxcbiAgICAgICAgdHlwZTogRklMVEVSX1RZUEVTLm11bHRpU2VsZWN0LFxuICAgICAgICB2YWx1ZTogW10sXG4gICAgICAgIGdwdTogZmFsc2VcbiAgICAgIH07XG5cbiAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy50aW1lc3RhbXA6XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5maWx0ZXJQcm9wcyxcbiAgICAgICAgdHlwZTogRklMVEVSX1RZUEVTLnRpbWVSYW5nZSxcbiAgICAgICAgdmlldzogRklMVEVSX1ZJRVdfVFlQRVMuZW5sYXJnZWQsXG4gICAgICAgIGZpeGVkRG9tYWluOiB0cnVlLFxuICAgICAgICB2YWx1ZTogZmlsdGVyUHJvcHMuZG9tYWluLFxuICAgICAgICBncHU6IHRydWUsXG4gICAgICAgIHBsb3RUeXBlOiB7fVxuICAgICAgfTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICByZXR1cm4ge307XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdldFBvbHlnb25GaWx0ZXJGdW5jdG9yID0gKGxheWVyLCBmaWx0ZXIsIGRhdGFDb250YWluZXIpID0+IHtcbiAgY29uc3QgZ2V0UG9zaXRpb24gPSBsYXllci5nZXRQb3NpdGlvbkFjY2Vzc29yKGRhdGFDb250YWluZXIpO1xuXG4gIHN3aXRjaCAobGF5ZXIudHlwZSkge1xuICAgIGNhc2UgTEFZRVJfVFlQRVMucG9pbnQ6XG4gICAgY2FzZSBMQVlFUl9UWVBFUy5pY29uOlxuICAgICAgcmV0dXJuIGRhdGEgPT4ge1xuICAgICAgICBjb25zdCBwb3MgPSBnZXRQb3NpdGlvbihkYXRhKTtcbiAgICAgICAgcmV0dXJuIHBvcy5ldmVyeShOdW1iZXIuaXNGaW5pdGUpICYmIGlzSW5Qb2x5Z29uKHBvcywgZmlsdGVyLnZhbHVlKTtcbiAgICAgIH07XG4gICAgY2FzZSBMQVlFUl9UWVBFUy5hcmM6XG4gICAgY2FzZSBMQVlFUl9UWVBFUy5saW5lOlxuICAgICAgcmV0dXJuIGRhdGEgPT4ge1xuICAgICAgICBjb25zdCBwb3MgPSBnZXRQb3NpdGlvbihkYXRhKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBwb3MuZXZlcnkoTnVtYmVyLmlzRmluaXRlKSAmJlxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFtwb3NbMF0sIHBvc1sxXV0sXG4gICAgICAgICAgICBbcG9zWzNdLCBwb3NbNF1dXG4gICAgICAgICAgXS5ldmVyeShwb2ludCA9PiBpc0luUG9seWdvbihwb2ludCwgZmlsdGVyLnZhbHVlKSlcbiAgICAgICAgKTtcbiAgICAgIH07XG4gICAgY2FzZSBMQVlFUl9UWVBFUy5oZXhhZ29uSWQ6XG4gICAgICBpZiAobGF5ZXIuZGF0YVRvRmVhdHVyZSAmJiBsYXllci5kYXRhVG9GZWF0dXJlLmNlbnRyb2lkcykge1xuICAgICAgICByZXR1cm4gZGF0YSA9PiB7XG4gICAgICAgICAgLy8gbnVsbCBvciBnZXRDZW50cm9pZCh7aWR9KVxuICAgICAgICAgIGNvbnN0IGNlbnRyb2lkID0gbGF5ZXIuZGF0YVRvRmVhdHVyZS5jZW50cm9pZHNbZGF0YS5pbmRleF07XG4gICAgICAgICAgcmV0dXJuIGNlbnRyb2lkICYmIGlzSW5Qb2x5Z29uKGNlbnRyb2lkLCBmaWx0ZXIudmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGEgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGdldFBvc2l0aW9uKGRhdGEpO1xuICAgICAgICBpZiAoIWgzSXNWYWxpZChpZCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9zID0gZ2V0Q2VudHJvaWQoe2lkfSk7XG4gICAgICAgIHJldHVybiBwb3MuZXZlcnkoTnVtYmVyLmlzRmluaXRlKSAmJiBpc0luUG9seWdvbihwb3MsIGZpbHRlci52YWx1ZSk7XG4gICAgICB9O1xuICAgIGNhc2UgTEFZRVJfVFlQRVMuZ2VvanNvbjpcbiAgICAgIHJldHVybiBkYXRhID0+IHtcbiAgICAgICAgcmV0dXJuIGxheWVyLmlzSW5Qb2x5Z29uKGRhdGEsIGRhdGEuaW5kZXgsIGZpbHRlci52YWx1ZSk7XG4gICAgICB9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gKCkgPT4gdHJ1ZTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIEdlb0pTT04gZmVhdHVyZSBmaWx0ZXIgY2FuIGJlIGFwcGxpZWQgdG8gYSBsYXllclxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FuQXBwbHlGZWF0dXJlRmlsdGVyKGZlYXR1cmU6IEZlYXR1cmUgfCBudWxsKTogYm9vbGVhbiB7XG4gIHJldHVybiBCb29sZWFuKGZlYXR1cmU/Lmdlb21ldHJ5ICYmIFsnUG9seWdvbicsICdNdWx0aVBvbHlnb24nXS5pbmNsdWRlcyhmZWF0dXJlLmdlb21ldHJ5LnR5cGUpKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gcGFyYW0gQW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhIHJvdyByZWNvcmQuXG4gKiBAcGFyYW0gcGFyYW0uaW5kZXggSW5kZXggb2YgdGhlIHJvdyBpbiBkYXRhIGNvbnRhaW5lci5cbiAqIEByZXR1cm5zIFJldHVybnMgdHJ1ZSB0byBrZWVwIHRoZSBlbGVtZW50LCBvciBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbnR5cGUgZmlsdGVyRnVuY3Rpb24gPSAoZGF0YToge2luZGV4OiBudW1iZXJ9KSA9PiBib29sZWFuO1xuXG4vKipcbiAqIEBwYXJhbSBmaWVsZCBkYXRhc2V0IEZpZWxkXG4gKiBAcGFyYW0gZGF0YUlkIERhdGFzZXQgaWRcbiAqIEBwYXJhbSBmaWx0ZXIgRmlsdGVyIG9iamVjdFxuICogQHBhcmFtIGxheWVycyBsaXN0IG9mIGxheWVycyB0byBmaWx0ZXIgdXBvblxuICogQHBhcmFtIGRhdGFDb250YWluZXIgRGF0YSBjb250YWluZXJcbiAqIEByZXR1cm4gZmlsdGVyRnVuY3Rpb25cbiAqL1xuLyogZXNsaW50LWRpc2FibGUgY29tcGxleGl0eSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbHRlckZ1bmN0aW9uPEwgZXh0ZW5kcyB7Y29uZmlnOiB7ZGF0YUlkOiBzdHJpbmcgfCBudWxsfTsgaWQ6IHN0cmluZ30+KFxuICBmaWVsZDogRmllbGQgfCBudWxsLFxuICBkYXRhSWQ6IHN0cmluZyxcbiAgZmlsdGVyOiBGaWx0ZXIsXG4gIGxheWVyczogTFtdLFxuICBkYXRhQ29udGFpbmVyOiBEYXRhQ29udGFpbmVySW50ZXJmYWNlXG4pOiBmaWx0ZXJGdW5jdGlvbiB7XG4gIC8vIGZpZWxkIGNvdWxkIGJlIG51bGwgaW4gcG9seWdvbiBmaWx0ZXJcbiAgY29uc3QgdmFsdWVBY2Nlc3NvciA9IGZpZWxkID8gZmllbGQudmFsdWVBY2Nlc3NvciA6ICgpID0+IG51bGw7XG4gIGNvbnN0IGRlZmF1bHRGdW5jID0gKCkgPT4gdHJ1ZTtcblxuICBpZiAoZmlsdGVyLmVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRGdW5jO1xuICB9XG5cbiAgc3dpdGNoIChmaWx0ZXIudHlwZSkge1xuICAgIGNhc2UgRklMVEVSX1RZUEVTLnJhbmdlOlxuICAgICAgcmV0dXJuIGRhdGEgPT4gaXNJblJhbmdlKHZhbHVlQWNjZXNzb3IoZGF0YSksIGZpbHRlci52YWx1ZSk7XG4gICAgY2FzZSBGSUxURVJfVFlQRVMubXVsdGlTZWxlY3Q6XG4gICAgICByZXR1cm4gZGF0YSA9PiBmaWx0ZXIudmFsdWUuaW5jbHVkZXModmFsdWVBY2Nlc3NvcihkYXRhKSk7XG4gICAgY2FzZSBGSUxURVJfVFlQRVMuc2VsZWN0OlxuICAgICAgcmV0dXJuIGRhdGEgPT4gdmFsdWVBY2Nlc3NvcihkYXRhKSA9PT0gZmlsdGVyLnZhbHVlO1xuICAgIGNhc2UgRklMVEVSX1RZUEVTLnRpbWVSYW5nZToge1xuICAgICAgaWYgKCFmaWVsZCkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdEZ1bmM7XG4gICAgICB9XG4gICAgICBjb25zdCBtYXBwZWRWYWx1ZSA9IGdldChmaWVsZCwgWydmaWx0ZXJQcm9wcycsICdtYXBwZWRWYWx1ZSddKTtcbiAgICAgIGNvbnN0IGFjY2Vzc29yID0gQXJyYXkuaXNBcnJheShtYXBwZWRWYWx1ZSlcbiAgICAgICAgPyBkYXRhID0+IG1hcHBlZFZhbHVlW2RhdGEuaW5kZXhdXG4gICAgICAgIDogZGF0YSA9PiB0aW1lVG9Vbml4TWlsbGkodmFsdWVBY2Nlc3NvcihkYXRhKSwgZmllbGQuZm9ybWF0KTtcbiAgICAgIHJldHVybiBkYXRhID0+IGlzSW5SYW5nZShhY2Nlc3NvcihkYXRhKSwgZmlsdGVyLnZhbHVlKTtcbiAgICB9XG4gICAgY2FzZSBGSUxURVJfVFlQRVMucG9seWdvbjoge1xuICAgICAgaWYgKCFsYXllcnMgfHwgIWxheWVycy5sZW5ndGggfHwgIWZpbHRlci5sYXllcklkKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RnVuYztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxheWVyRmlsdGVyRnVuY3Rpb25zID0gZmlsdGVyLmxheWVySWRcbiAgICAgICAgLm1hcChpZCA9PiBsYXllcnMuZmluZChsID0+IGwuaWQgPT09IGlkKSlcbiAgICAgICAgLmZpbHRlcihsID0+IGwgJiYgbC5jb25maWcuZGF0YUlkID09PSBkYXRhSWQpXG4gICAgICAgIC5tYXAobGF5ZXIgPT4gZ2V0UG9seWdvbkZpbHRlckZ1bmN0b3IobGF5ZXIsIGZpbHRlciwgZGF0YUNvbnRhaW5lcikpO1xuXG4gICAgICByZXR1cm4gZGF0YSA9PiBsYXllckZpbHRlckZ1bmN0aW9ucy5ldmVyeShmaWx0ZXJGdW5jID0+IGZpbHRlckZ1bmMoZGF0YSkpO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGRlZmF1bHRGdW5jO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVGaWx0ZXJEYXRhSWQoZGF0YUlkOiBzdHJpbmcgfCBzdHJpbmdbXSk6IEZpbHRlckJhc2U8TGluZUNoYXJ0PiB7XG4gIHJldHVybiBnZXREZWZhdWx0RmlsdGVyKHtkYXRhSWR9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckRhdGFCeUZpbHRlclR5cGVzKFxuICB7XG4gICAgZHluYW1pY0RvbWFpbkZpbHRlcnMsXG4gICAgY3B1RmlsdGVycyxcbiAgICBmaWx0ZXJGdW5jc1xuICB9OiB7XG4gICAgZHluYW1pY0RvbWFpbkZpbHRlcnM6IEZpbHRlcltdIHwgbnVsbDtcbiAgICBjcHVGaWx0ZXJzOiBGaWx0ZXJbXSB8IG51bGw7XG4gICAgZmlsdGVyRnVuY3M6IHtcbiAgICAgIFtrZXk6IHN0cmluZ106IGZpbHRlckZ1bmN0aW9uO1xuICAgIH07XG4gIH0sXG4gIGRhdGFDb250YWluZXI6IERhdGFDb250YWluZXJJbnRlcmZhY2Vcbik6IEZpbHRlclJlc3VsdCB7XG4gIGNvbnN0IGZpbHRlcmVkSW5kZXhGb3JEb21haW46IG51bWJlcltdID0gW107XG4gIGNvbnN0IGZpbHRlcmVkSW5kZXg6IG51bWJlcltdID0gW107XG5cbiAgY29uc3QgZmlsdGVyQ29udGV4dCA9IHtpbmRleDogLTEsIGRhdGFDb250YWluZXJ9O1xuICBjb25zdCBmaWx0ZXJGdW5jQ2FsbGVyID0gKGZpbHRlcjogRmlsdGVyKSA9PiBmaWx0ZXJGdW5jc1tmaWx0ZXIuaWRdKGZpbHRlckNvbnRleHQpO1xuXG4gIGNvbnN0IG51bVJvd3MgPSBkYXRhQ29udGFpbmVyLm51bVJvd3MoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Sb3dzOyArK2kpIHtcbiAgICBmaWx0ZXJDb250ZXh0LmluZGV4ID0gaTtcblxuICAgIGNvbnN0IG1hdGNoRm9yRG9tYWluID0gZHluYW1pY0RvbWFpbkZpbHRlcnMgJiYgZHluYW1pY0RvbWFpbkZpbHRlcnMuZXZlcnkoZmlsdGVyRnVuY0NhbGxlcik7XG4gICAgaWYgKG1hdGNoRm9yRG9tYWluKSB7XG4gICAgICBmaWx0ZXJlZEluZGV4Rm9yRG9tYWluLnB1c2goZmlsdGVyQ29udGV4dC5pbmRleCk7XG4gICAgfVxuXG4gICAgY29uc3QgbWF0Y2hGb3JSZW5kZXIgPSBjcHVGaWx0ZXJzICYmIGNwdUZpbHRlcnMuZXZlcnkoZmlsdGVyRnVuY0NhbGxlcik7XG4gICAgaWYgKG1hdGNoRm9yUmVuZGVyKSB7XG4gICAgICBmaWx0ZXJlZEluZGV4LnB1c2goZmlsdGVyQ29udGV4dC5pbmRleCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAuLi4oZHluYW1pY0RvbWFpbkZpbHRlcnMgPyB7ZmlsdGVyZWRJbmRleEZvckRvbWFpbn0gOiB7fSksXG4gICAgLi4uKGNwdUZpbHRlcnMgPyB7ZmlsdGVyZWRJbmRleH0gOiB7fSlcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgYSByZWNvcmQgb2YgZmlsdGVycyBiYXNlZCBvbiBkb21haW4gdHlwZSBhbmQgZ3B1IC8gY3B1XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJSZWNvcmQoXG4gIGRhdGFJZDogc3RyaW5nLFxuICBmaWx0ZXJzOiBGaWx0ZXJbXSxcbiAgb3B0OiBGaWx0ZXJEYXRhc2V0T3B0ID0ge31cbik6IEZpbHRlclJlY29yZCB7XG4gIGNvbnN0IGZpbHRlclJlY29yZDogRmlsdGVyUmVjb3JkID0ge1xuICAgIGR5bmFtaWNEb21haW46IFtdLFxuICAgIGZpeGVkRG9tYWluOiBbXSxcbiAgICBjcHU6IFtdLFxuICAgIGdwdTogW11cbiAgfTtcblxuICBmaWx0ZXJzLmZvckVhY2goZiA9PiB7XG4gICAgaWYgKGlzVmFsaWRGaWx0ZXJWYWx1ZShmLnR5cGUsIGYudmFsdWUpICYmIHRvQXJyYXkoZi5kYXRhSWQpLmluY2x1ZGVzKGRhdGFJZCkpIHtcbiAgICAgIChmLmZpeGVkRG9tYWluIHx8IG9wdC5pZ25vcmVEb21haW5cbiAgICAgICAgPyBmaWx0ZXJSZWNvcmQuZml4ZWREb21haW5cbiAgICAgICAgOiBmaWx0ZXJSZWNvcmQuZHluYW1pY0RvbWFpblxuICAgICAgKS5wdXNoKGYpO1xuXG4gICAgICAoZi5ncHUgJiYgIW9wdC5jcHVPbmx5ID8gZmlsdGVyUmVjb3JkLmdwdSA6IGZpbHRlclJlY29yZC5jcHUpLnB1c2goZik7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZmlsdGVyUmVjb3JkO1xufVxuXG4vKipcbiAqIENvbXBhcmUgZmlsdGVyIHJlY29yZHMgdG8gZ2V0IHdoYXQgaGFzIGNoYW5nZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpZmZGaWx0ZXJzKFxuICBmaWx0ZXJSZWNvcmQ6IEZpbHRlclJlY29yZCxcbiAgb2xkRmlsdGVyUmVjb3JkOiBGaWx0ZXJSZWNvcmQgfCBSZWNvcmQ8c3RyaW5nLCBuZXZlcj4gPSB7fVxuKTogRmlsdGVyQ2hhbmdlZCB7XG4gIGxldCBmaWx0ZXJDaGFuZ2VkOiBQYXJ0aWFsPEZpbHRlckNoYW5nZWQ+ID0ge307XG5cbiAgKE9iamVjdC5lbnRyaWVzKGZpbHRlclJlY29yZCkgYXMgRW50cmllczxGaWx0ZXJSZWNvcmQ+KS5mb3JFYWNoKChbcmVjb3JkLCBpdGVtc10pID0+IHtcbiAgICBpdGVtcy5mb3JFYWNoKGZpbHRlciA9PiB7XG4gICAgICBjb25zdCBvbGRGaWx0ZXI6IEZpbHRlciB8IHVuZGVmaW5lZCA9IChvbGRGaWx0ZXJSZWNvcmRbcmVjb3JkXSB8fCBbXSkuZmluZChcbiAgICAgICAgKGY6IEZpbHRlcikgPT4gZi5pZCA9PT0gZmlsdGVyLmlkXG4gICAgICApO1xuXG4gICAgICBpZiAoIW9sZEZpbHRlcikge1xuICAgICAgICAvLyBhZGRlZFxuICAgICAgICBmaWx0ZXJDaGFuZ2VkID0gc2V0KFtyZWNvcmQsIGZpbHRlci5pZF0sICdhZGRlZCcsIGZpbHRlckNoYW5nZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY2hlY2sgIHdoYXQgaGFzIGNoYW5nZWRcbiAgICAgICAgWyduYW1lJywgJ3ZhbHVlJywgJ2RhdGFJZCddLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgICAgaWYgKGZpbHRlcltwcm9wXSAhPT0gb2xkRmlsdGVyW3Byb3BdKSB7XG4gICAgICAgICAgICBmaWx0ZXJDaGFuZ2VkID0gc2V0KFtyZWNvcmQsIGZpbHRlci5pZF0sIGAke3Byb3B9X2NoYW5nZWRgLCBmaWx0ZXJDaGFuZ2VkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgKG9sZEZpbHRlclJlY29yZFtyZWNvcmRdIHx8IFtdKS5mb3JFYWNoKChvbGRGaWx0ZXI6IEZpbHRlcikgPT4ge1xuICAgICAgLy8gZGVsZXRlZFxuICAgICAgaWYgKCFpdGVtcy5maW5kKGYgPT4gZi5pZCA9PT0gb2xkRmlsdGVyLmlkKSkge1xuICAgICAgICBmaWx0ZXJDaGFuZ2VkID0gc2V0KFtyZWNvcmQsIG9sZEZpbHRlci5pZF0sICdkZWxldGVkJywgZmlsdGVyQ2hhbmdlZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiB7Li4ue2R5bmFtaWNEb21haW46IG51bGwsIGZpeGVkRG9tYWluOiBudWxsLCBjcHU6IG51bGwsIGdwdTogbnVsbH0sIC4uLmZpbHRlckNoYW5nZWR9O1xufVxuXG4vKipcbiAqIENhbGwgYnkgcGFyc2luZyBmaWx0ZXJzIGZyb20gVVJMXG4gKiBDaGVjayBpZiB2YWx1ZSBvZiBmaWx0ZXIgd2l0aGluIGZpbHRlciBkb21haW4sIGlmIG5vdCBhZGp1c3QgaXQgdG8gbWF0Y2hcbiAqIGZpbHRlciBkb21haW5cbiAqXG4gKiBAcmV0dXJucyB2YWx1ZSAtIGFkanVzdGVkIHZhbHVlIHRvIG1hdGNoIGZpbHRlciBvciBudWxsIHRvIHJlbW92ZSBmaWx0ZXJcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmV4cG9ydCBmdW5jdGlvbiBhZGp1c3RWYWx1ZVRvRmlsdGVyRG9tYWluKHZhbHVlOiBGaWx0ZXJbJ3ZhbHVlJ10sIHtkb21haW4sIHR5cGV9KSB7XG4gIGlmICghdHlwZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBpZiB0aGUgY3VycmVudCBmaWx0ZXIgaXMgYSBwb2x5Z29uIGl0IHdpbGwgbm90IGhhdmUgYW55IGRvbWFpblxuICAvLyBhbGwgb3RoZXIgZmlsdGVyIHR5cGVzIHJlcXVpcmUgZG9tYWluXG4gIGlmICh0eXBlICE9PSBGSUxURVJfVFlQRVMucG9seWdvbiAmJiAhZG9tYWluKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBGSUxURVJfVFlQRVMucmFuZ2U6XG4gICAgY2FzZSBGSUxURVJfVFlQRVMudGltZVJhbmdlOlxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggIT09IDIpIHtcbiAgICAgICAgcmV0dXJuIGRvbWFpbi5tYXAoZCA9PiBkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlLm1hcCgoZCwgaSkgPT4gKG5vdE51bGxvclVuZGVmaW5lZChkKSAmJiBpc0luUmFuZ2UoZCwgZG9tYWluKSA/IGQgOiBkb21haW5baV0pKTtcblxuICAgIGNhc2UgRklMVEVSX1RZUEVTLm11bHRpU2VsZWN0OiB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpbHRlcmVkVmFsdWUgPSB2YWx1ZS5maWx0ZXIoZCA9PiBkb21haW4uaW5jbHVkZXMoZCkpO1xuICAgICAgcmV0dXJuIGZpbHRlcmVkVmFsdWUubGVuZ3RoID8gZmlsdGVyZWRWYWx1ZSA6IFtdO1xuICAgIH1cbiAgICBjYXNlIEZJTFRFUl9UWVBFUy5zZWxlY3Q6XG4gICAgICByZXR1cm4gZG9tYWluLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogdHJ1ZTtcbiAgICBjYXNlIEZJTFRFUl9UWVBFUy5wb2x5Z29uOlxuICAgICAgcmV0dXJuIHZhbHVlO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIG51bWVyaWMgZG9tYWluIGFuZCBzdWl0YWJsZSBzdGVwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXROdW1lcmljRmllbGREb21haW4oXG4gIGRhdGFDb250YWluZXI6IERhdGFDb250YWluZXJJbnRlcmZhY2UsXG4gIHZhbHVlQWNjZXNzb3I6IGRhdGFWYWx1ZUFjY2Vzc29yXG4pOiBSYW5nZUZpZWxkRG9tYWluIHtcbiAgbGV0IGRvbWFpbjogW251bWJlciwgbnVtYmVyXSA9IFswLCAxXTtcbiAgbGV0IHN0ZXAgPSAwLjE7XG5cbiAgY29uc3QgbWFwcGVkVmFsdWUgPSBkYXRhQ29udGFpbmVyLm1hcEluZGV4KHZhbHVlQWNjZXNzb3IpO1xuXG4gIGlmIChkYXRhQ29udGFpbmVyLm51bVJvd3MoKSA+IDEpIHtcbiAgICBkb21haW4gPSBTY2FsZVV0aWxzLmdldExpbmVhckRvbWFpbihtYXBwZWRWYWx1ZSk7XG4gICAgY29uc3QgZGlmZiA9IGRvbWFpblsxXSAtIGRvbWFpblswXTtcblxuICAgIC8vIGluIGNhc2UgZXF1YWwgZG9tYWluLCBbOTYsIDk2XSwgd2hpY2ggd2lsbCBicmVhayBxdWFudGl6ZSBzY2FsZVxuICAgIGlmICghZGlmZikge1xuICAgICAgZG9tYWluWzFdID0gZG9tYWluWzBdICsgMTtcbiAgICB9XG5cbiAgICBzdGVwID0gZ2V0TnVtZXJpY1N0ZXBTaXplKGRpZmYpIHx8IHN0ZXA7XG4gICAgZG9tYWluWzBdID0gZm9ybWF0TnVtYmVyQnlTdGVwKGRvbWFpblswXSwgc3RlcCwgJ2Zsb29yJyk7XG4gICAgZG9tYWluWzFdID0gZm9ybWF0TnVtYmVyQnlTdGVwKGRvbWFpblsxXSwgc3RlcCwgJ2NlaWwnKTtcbiAgfVxuXG4gIHJldHVybiB7ZG9tYWluLCBzdGVwfTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgc3RlcCBzaXplIGZvciByYW5nZSBhbmQgdGltZXJhbmdlIGZpbHRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TnVtZXJpY1N0ZXBTaXplKGRpZmY6IG51bWJlcik6IG51bWJlciB7XG4gIGRpZmYgPSBNYXRoLmFicyhkaWZmKTtcblxuICBpZiAoZGlmZiA+IDEwMCkge1xuICAgIHJldHVybiAxO1xuICB9IGVsc2UgaWYgKGRpZmYgPiAzKSB7XG4gICAgcmV0dXJuIDAuMDE7XG4gIH0gZWxzZSBpZiAoZGlmZiA+IDEpIHtcbiAgICByZXR1cm4gMC4wMDE7XG4gIH1cbiAgLy8gVHJ5IHRvIGdldCBhdCBsZWFzdCAxMDAwIHN0ZXBzIC0gYW5kIGtlZXAgdGhlIHN0ZXAgc2l6ZSBiZWxvdyB0aGF0IG9mXG4gIC8vIHRoZSAoZGlmZiA+IDEpIGNhc2UuXG4gIGNvbnN0IHggPSBkaWZmIC8gMTAwMDtcbiAgLy8gRmluZCB0aGUgZXhwb25lbnQgYW5kIHRydW5jYXRlIHRvIDEwIHRvIHRoZSBwb3dlciBvZiB0aGF0IGV4cG9uZW50XG5cbiAgY29uc3QgZXhwb25lbnRpYWxGb3JtID0geC50b0V4cG9uZW50aWFsKCk7XG4gIGNvbnN0IGV4cG9uZW50ID0gcGFyc2VGbG9hdChleHBvbmVudGlhbEZvcm0uc3BsaXQoJ2UnKVsxXSk7XG5cbiAgLy8gR2V0dGluZyByZWFkeSBmb3Igbm9kZSAxMlxuICAvLyB0aGlzIGlzIHdoeSB3ZSBuZWVkIGRlY2ltYWwuanNcbiAgLy8gTWF0aC5wb3coMTAsIC01KSA9IDAuMDAwMDA5OTk5OTk5OTk5OTk5OTk5XG4gIC8vIHRoZSBhYm92ZSByZXN1bHQgc2hvd3MgaW4gYnJvd3NlciBhbmQgbm9kZSAxMFxuICAvLyBub2RlIDEyIGJlaGF2ZXMgY29ycmVjdGx5XG4gIHJldHVybiBuZXcgRGVjaW1hbCgxMCkucG93KGV4cG9uZW50KS50b051bWJlcigpO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSB0aW1lc3RhbXAgZG9tYWluIGFuZCBzdWl0YWJsZSBzdGVwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lc3RhbXBGaWVsZERvbWFpbihcbiAgZGF0YUNvbnRhaW5lcjogRGF0YUNvbnRhaW5lckludGVyZmFjZSxcbiAgdmFsdWVBY2Nlc3NvcjogZGF0YVZhbHVlQWNjZXNzb3Jcbik6IFRpbWVSYW5nZUZpZWxkRG9tYWluIHtcbiAgLy8gdG8gYXZvaWQgY29udmVydGluZyBzdHJpbmcgZm9ybWF0IHRpbWUgdG8gZXBvY2hcbiAgLy8gZXZlcnkgdGltZSB3ZSBjb21wYXJlIHdlIHN0b3JlIGEgdmFsdWUgbWFwcGVkIHRvIGludCBpbiBmaWx0ZXIgZG9tYWluXG4gIGNvbnN0IG1hcHBlZFZhbHVlID0gZGF0YUNvbnRhaW5lci5tYXBJbmRleCh2YWx1ZUFjY2Vzc29yKTtcblxuICBjb25zdCBkb21haW4gPSBTY2FsZVV0aWxzLmdldExpbmVhckRvbWFpbihtYXBwZWRWYWx1ZSk7XG4gIGNvbnN0IGRlZmF1bHRUaW1lRm9ybWF0ID0gZ2V0VGltZVdpZGdldFRpdGxlRm9ybWF0dGVyKGRvbWFpbik7XG5cbiAgbGV0IHN0ZXAgPSAwLjAxO1xuXG4gIGNvbnN0IGRpZmYgPSBkb21haW5bMV0gLSBkb21haW5bMF07XG4gIC8vIGluIGNhc2UgZXF1YWwgdGltZXN0YW1wIGFkZCAxIHNlY29uZCBwYWRkaW5nIHRvIHByZXZlbnQgYnJlYWtcbiAgaWYgKCFkaWZmKSB7XG4gICAgZG9tYWluWzFdID0gZG9tYWluWzBdICsgMTAwMDtcbiAgfVxuICBjb25zdCBlbnRyeSA9IFRpbWVzdGFtcFN0ZXBNYXAuZmluZChmID0+IGYubWF4ID49IGRpZmYpO1xuICBpZiAoZW50cnkpIHtcbiAgICBzdGVwID0gZW50cnkuc3RlcDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZG9tYWluLFxuICAgIHN0ZXAsXG4gICAgbWFwcGVkVmFsdWUsXG4gICAgZGVmYXVsdFRpbWVGb3JtYXRcbiAgfTtcbn1cblxuLyoqXG4gKiByb3VuZCBudW1iZXIgYmFzZWQgb24gc3RlcFxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdGVwXG4gKiBAcGFyYW0ge3N0cmluZ30gYm91bmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHJvdW5kZWQgbnVtYmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXROdW1iZXJCeVN0ZXAodmFsOiBudW1iZXIsIHN0ZXA6IG51bWJlciwgYm91bmQ6ICdmbG9vcicgfCAnY2VpbCcpOiBudW1iZXIge1xuICBpZiAoYm91bmQgPT09ICdmbG9vcicpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcih2YWwgKiAoMSAvIHN0ZXApKSAvICgxIC8gc3RlcCk7XG4gIH1cblxuICByZXR1cm4gTWF0aC5jZWlsKHZhbCAqICgxIC8gc3RlcCkpIC8gKDEgLyBzdGVwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSW5SYW5nZSh2YWw6IGFueSwgZG9tYWluOiBudW1iZXJbXSk6IGJvb2xlYW4ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZG9tYWluKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICByZXR1cm4gZG9tYWluWzBdIDw9IHZhbFswXSAmJiB2YWxbMV0gPD0gZG9tYWluWzFdO1xuICB9XG5cbiAgcmV0dXJuIHZhbCA+PSBkb21haW5bMF0gJiYgdmFsIDw9IGRvbWFpblsxXTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBwb2ludCBpcyB3aXRoaW4gdGhlIHByb3ZpZGVkIHBvbHlnb25cbiAqXG4gKiBAcGFyYW0gcG9pbnQgYXMgaW5wdXQgc2VhcmNoIFtsYXQsIGxuZ11cbiAqIEBwYXJhbSBwb2x5Z29uIFBvaW50cyBtdXN0IGJlIHdpdGhpbiB0aGVzZSAoTXVsdGkpUG9seWdvbihzKVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW5Qb2x5Z29uKHBvaW50OiBudW1iZXJbXSwgcG9seWdvbjogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBib29sZWFuV2l0aGluKHR1cmZQb2ludChwb2ludCksIHBvbHlnb24pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbWVXaWRnZXRUaXRsZUZvcm1hdHRlcihkb21haW46IFtudW1iZXIsIG51bWJlcl0pOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKCFpc1ZhbGlkVGltZURvbWFpbihkb21haW4pKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBkaWZmID0gZG9tYWluWzFdIC0gZG9tYWluWzBdO1xuXG4gIC8vIExvY2FsIGF3YXJlIGZvcm1hdHNcbiAgLy8gaHR0cHM6Ly9tb21lbnRqcy5jb20vZG9jcy8jL3BhcnNpbmcvc3RyaW5nLWZvcm1hdFxuICByZXR1cm4gZGlmZiA+IGR1cmF0aW9uWWVhciA/ICdMJyA6IGRpZmYgPiBkdXJhdGlvbkRheSA/ICdMIExUJyA6ICdMIExUUyc7XG59XG5cbi8qKlxuICogU2FuaXR5IGNoZWNrIG9uIGZpbHRlcnMgdG8gcHJlcGFyZSBmb3Igc2F2ZVxuICogQHR5cGUge3R5cGVvZiBpbXBvcnQoJy4vZmlsdGVyLXV0aWxzJykuaXNGaWx0ZXJWYWxpZFRvU2F2ZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRmlsdGVyVmFsaWRUb1NhdmUoZmlsdGVyOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBmaWx0ZXI/LnR5cGUgJiYgQXJyYXkuaXNBcnJheShmaWx0ZXI/Lm5hbWUpICYmIChmaWx0ZXI/Lm5hbWUubGVuZ3RoIHx8IGZpbHRlcj8ubGF5ZXJJZC5sZW5ndGgpXG4gICk7XG59XG5cbi8qKlxuICogU2FuaXR5IGNoZWNrIG9uIGZpbHRlcnMgdG8gcHJlcGFyZSBmb3Igc2F2ZVxuICogQHR5cGUge3R5cGVvZiBpbXBvcnQoJy4vZmlsdGVyLXV0aWxzJykuaXNWYWxpZEZpbHRlclZhbHVlfVxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjb21wbGV4aXR5ICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEZpbHRlclZhbHVlKHR5cGU6IHN0cmluZyB8IG51bGwsIHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgaWYgKCF0eXBlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgRklMVEVSX1RZUEVTLnNlbGVjdDpcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2U7XG5cbiAgICBjYXNlIEZJTFRFUl9UWVBFUy5yYW5nZTpcbiAgICBjYXNlIEZJTFRFUl9UWVBFUy50aW1lUmFuZ2U6XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUuZXZlcnkodiA9PiB2ICE9PSBudWxsICYmICFpc05hTih2KSk7XG5cbiAgICBjYXNlIEZJTFRFUl9UWVBFUy5tdWx0aVNlbGVjdDpcbiAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiBCb29sZWFuKHZhbHVlLmxlbmd0aCk7XG5cbiAgICBjYXNlIEZJTFRFUl9UWVBFUy5pbnB1dDpcbiAgICAgIHJldHVybiBCb29sZWFuKHZhbHVlLmxlbmd0aCk7XG5cbiAgICBjYXNlIEZJTFRFUl9UWVBFUy5wb2x5Z29uOiB7XG4gICAgICBjb25zdCBjb29yZGluYXRlcyA9IGdldCh2YWx1ZSwgWydnZW9tZXRyeScsICdjb29yZGluYXRlcyddKTtcbiAgICAgIHJldHVybiBCb29sZWFuKHZhbHVlICYmIHZhbHVlLmlkICYmIGNvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2x1bW5GaWx0ZXJQcm9wczxLIGV4dGVuZHMgS2VwbGVyVGFibGVNb2RlbDxLLCBMPiwgTD4oXG4gIGZpbHRlcjogRmlsdGVyLFxuICBkYXRhc2V0OiBLXG4pOiB7bGluZUNoYXJ0OiBMaW5lQ2hhcnQ7IHlBeHM6IEZpZWxkfSB8IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICBpZiAoZmlsdGVyLnBsb3RUeXBlPy50eXBlID09PSBQTE9UX1RZUEVTLmhpc3RvZ3JhbSB8fCAhZmlsdGVyLnlBeGlzKSB7XG4gICAgLy8gaGlzdG9ncmFtIHNob3VsZCBiZSBjYWxjdWxhdGVkIHdoZW4gY3JlYXRlIGZpbHRlclxuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIGNvbnN0IHttYXBwZWRWYWx1ZSA9IFtdfSA9IGZpbHRlcjtcbiAgY29uc3Qge3lBeGlzfSA9IGZpbHRlcjtcbiAgY29uc3QgZmllbGRJZHggPSBkYXRhc2V0LmdldENvbHVtbkZpZWxkSWR4KHlBeGlzLm5hbWUpO1xuICBpZiAoZmllbGRJZHggPCAwKSB7XG4gICAgLy8gQ29uc29sZS53YXJuKGB5QXhpcyAke3lBeGlzLm5hbWV9IGRvZXMgbm90IGV4aXN0IGluIGRhdGFzZXRgKTtcbiAgICByZXR1cm4ge2xpbmVDaGFydDoge30sIHlBeGlzfTtcbiAgfVxuXG4gIC8vIHJldHVybiBsaW5lQ2hhcnRcbiAgY29uc3Qgc2VyaWVzID0gZGF0YXNldC5kYXRhQ29udGFpbmVyXG4gICAgLm1hcChcbiAgICAgIChyb3csIHJvd0luZGV4KSA9PiAoe1xuICAgICAgICB4OiBtYXBwZWRWYWx1ZVtyb3dJbmRleF0sXG4gICAgICAgIHk6IHJvdy52YWx1ZUF0KGZpZWxkSWR4KVxuICAgICAgfSksXG4gICAgICB0cnVlXG4gICAgKVxuICAgIC5maWx0ZXIoKHt4LCB5fSkgPT4gTnVtYmVyLmlzRmluaXRlKHgpICYmIE51bWJlci5pc0Zpbml0ZSh5KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYXNjZW5kaW5nKGEueCwgYi54KSk7XG5cbiAgY29uc3QgeURvbWFpbiA9IGV4dGVudChzZXJpZXMsIGQgPT4gZC55KSBhcyBbbnVtYmVyLCBudW1iZXJdO1xuICBjb25zdCB4RG9tYWluID0gW3Nlcmllc1swXS54LCBzZXJpZXNbc2VyaWVzLmxlbmd0aCAtIDFdLnhdIGFzIFtudW1iZXIsIG51bWJlcl07XG5cbiAgcmV0dXJuIHtsaW5lQ2hhcnQ6IHtzZXJpZXMsIHlEb21haW4sIHhEb21haW59LCB5QXhpc307XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVGaWx0ZXJQbG90PEsgZXh0ZW5kcyBLZXBsZXJUYWJsZU1vZGVsPEssIGFueT4+KFxuICBkYXRhc2V0czoge1tpZDogc3RyaW5nXTogS30sXG4gIGZpbHRlcjogRmlsdGVyLFxuICBkYXRhSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxuKSB7XG4gIGlmIChkYXRhSWQpIHtcbiAgICBmaWx0ZXIgPSByZW1vdmVGaWx0ZXJQbG90KGZpbHRlciwgZGF0YUlkKTtcbiAgfVxuXG4gIGlmIChmaWx0ZXIudHlwZSA9PT0gRklMVEVSX1RZUEVTLnRpbWVSYW5nZSkge1xuICAgIHJldHVybiB1cGRhdGVUaW1lRmlsdGVyUGxvdFR5cGUoZmlsdGVyIGFzIFRpbWVSYW5nZUZpbHRlciwgZmlsdGVyLnBsb3RUeXBlLCBkYXRhc2V0cyk7XG4gIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZJTFRFUl9UWVBFUy5yYW5nZSkge1xuICAgIHJldHVybiB1cGRhdGVSYW5nZUZpbHRlclBsb3RUeXBlKGZpbHRlciBhcyBSYW5nZUZpbHRlciwgZmlsdGVyLnBsb3RUeXBlLCBkYXRhc2V0cyk7XG4gIH1cbiAgcmV0dXJuIGZpbHRlcjtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGRhdGFzZXRJZHMgbGlzdCBvZiBkYXRhc2V0IGlkcyB0byBiZSBmaWx0ZXJlZFxuICogQHBhcmFtIGRhdGFzZXRzIGFsbCBkYXRhc2V0c1xuICogQHBhcmFtIGZpbHRlcnMgYWxsIGZpbHRlcnMgdG8gYmUgYXBwbGllZCB0byBkYXRhc2V0c1xuICogQHJldHVybiBkYXRhc2V0cyAtIG5ldyB1cGRhdGVkIGRhdGFzZXRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUZpbHRlcnNUb0RhdGFzZXRzPFxuICBLIGV4dGVuZHMgS2VwbGVyVGFibGVNb2RlbDxLLCBMPixcbiAgTCBleHRlbmRzIHtjb25maWc6IHtkYXRhSWQ6IHN0cmluZyB8IG51bGx9fVxuPihcbiAgZGF0YXNldElkczogc3RyaW5nW10sXG4gIGRhdGFzZXRzOiB7W2lkOiBzdHJpbmddOiBLfSxcbiAgZmlsdGVyczogRmlsdGVyW10sXG4gIGxheWVycz86IExbXVxuKToge1tpZDogc3RyaW5nXTogS30ge1xuICBjb25zdCBkYXRhSWRzID0gdG9BcnJheShkYXRhc2V0SWRzKTtcbiAgcmV0dXJuIGRhdGFJZHMucmVkdWNlKChhY2MsIGRhdGFJZCkgPT4ge1xuICAgIGNvbnN0IGxheWVyc1RvRmlsdGVyID0gKGxheWVycyB8fCBbXSkuZmlsdGVyKGwgPT4gbC5jb25maWcuZGF0YUlkID09PSBkYXRhSWQpO1xuICAgIGNvbnN0IGFwcGxpZWRGaWx0ZXJzID0gZmlsdGVycy5maWx0ZXIoZCA9PiBzaG91bGRBcHBseUZpbHRlcihkLCBkYXRhSWQpKTtcbiAgICBjb25zdCB0YWJsZSA9IGRhdGFzZXRzW2RhdGFJZF07XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uYWNjLFxuICAgICAgW2RhdGFJZF06IHRhYmxlLmZpbHRlclRhYmxlKGFwcGxpZWRGaWx0ZXJzLCBsYXllcnNUb0ZpbHRlciwge30pXG4gICAgfTtcbiAgfSwgZGF0YXNldHMpO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgYSBuZXcgZmllbGQgbmFtZSB2YWx1ZSB0byBmaWx0ZXIgYW5kIHVwZGF0ZSBib3RoIGZpbHRlciBhbmQgZGF0YXNldFxuICogQHBhcmFtIGZpbHRlciAtIHRvIGJlIGFwcGxpZWQgdGhlIG5ldyBmaWVsZCBuYW1lIG9uXG4gKiBAcGFyYW0gZGF0YXNldHMgLSBBbGwgZGF0YXNldHNcbiAqIEBwYXJhbSBkYXRhc2V0SWQgLSBJZCBvZiB0aGUgZGF0YXNldCB0aGUgZmllbGQgYmVsb25ncyB0b1xuICogQHBhcmFtIGZpZWxkTmFtZSAtIGZpZWxkLm5hbWVcbiAqIEBwYXJhbSBmaWx0ZXJEYXRhc2V0SW5kZXggLSBmaWVsZC5uYW1lXG4gKiBAcGFyYW0gb3B0aW9uXG4gKiBAcmV0dXJuIC0ge2ZpbHRlciwgZGF0YXNldHN9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUZpbHRlckZpZWxkTmFtZTxLIGV4dGVuZHMgS2VwbGVyVGFibGVNb2RlbDxLLCBMPiwgTD4oXG4gIGZpbHRlcjogRmlsdGVyLFxuICBkYXRhc2V0czogUmVjb3JkPHN0cmluZywgSz4sXG4gIGRhdGFzZXRJZDogc3RyaW5nLFxuICBmaWVsZE5hbWU6IHN0cmluZyxcbiAgZmlsdGVyRGF0YXNldEluZGV4ID0gMCxcbiAgb3B0aW9uPzoge21lcmdlRG9tYWluOiBib29sZWFufVxuKToge1xuICBmaWx0ZXI6IEZpbHRlciB8IG51bGw7XG4gIGRhdGFzZXQ6IEs7XG59IHtcbiAgLy8gdXNpbmcgZmlsdGVyRGF0YXNldEluZGV4IHdlIGNhbiBmaWx0ZXIgb25seSB0aGUgc3BlY2lmaWVkIGRhdGFzZXRcbiAgY29uc3QgbWVyZ2VEb21haW4gPVxuICAgIG9wdGlvbiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0aW9uLCAnbWVyZ2VEb21haW4nKVxuICAgICAgPyBvcHRpb24ubWVyZ2VEb21haW5cbiAgICAgIDogZmFsc2U7XG5cbiAgY29uc3QgZGF0YXNldCA9IGRhdGFzZXRzW2RhdGFzZXRJZF07XG4gIGNvbnN0IGZpZWxkSW5kZXggPSBkYXRhc2V0Py5nZXRDb2x1bW5GaWVsZElkeChmaWVsZE5hbWUpO1xuICAvLyBpZiBubyBmaWVsZCB3aXRoIHNhbWUgbmFtZSBpcyBmb3VuZCwgbW92ZSB0byB0aGUgbmV4dCBkYXRhc2V0c1xuICBpZiAoIWRhdGFzZXQgfHwgZmllbGRJbmRleCA9PT0gLTEpIHtcbiAgICAvLyB0aHJvdyBuZXcgRXJyb3IoYGZpZWxkSW5kZXggbm90IGZvdW5kLiBEYXRhc2V0IG11c3QgY29udGFpbiBhIHByb3BlcnR5IHdpdGggbmFtZTogJHtmaWVsZE5hbWV9YCk7XG4gICAgcmV0dXJuIHtmaWx0ZXI6IG51bGwsIGRhdGFzZXR9O1xuICB9XG5cbiAgLy8gVE9ETzogdmFsaWRhdGUgZmllbGQgdHlwZVxuICBjb25zdCBmaWx0ZXJQcm9wcyA9IGRhdGFzZXQuZ2V0Q29sdW1uRmlsdGVyUHJvcHMoZmllbGROYW1lKTtcblxuICBsZXQgbmV3RmlsdGVyID0ge1xuICAgIC4uLmZpbHRlcixcbiAgICAuLi5maWx0ZXJQcm9wcyxcbiAgICBuYW1lOiBPYmplY3QuYXNzaWduKFsuLi50b0FycmF5KGZpbHRlci5uYW1lKV0sIHtbZmlsdGVyRGF0YXNldEluZGV4XTogZmllbGROYW1lfSksXG4gICAgZmllbGRJZHg6IE9iamVjdC5hc3NpZ24oWy4uLnRvQXJyYXkoZmlsdGVyLmZpZWxkSWR4KV0sIHtcbiAgICAgIFtmaWx0ZXJEYXRhc2V0SW5kZXhdOiBmaWVsZEluZGV4XG4gICAgfSksXG4gICAgLy8gTWFrZSBzdXJlIHBsb3RUeXBlIGlzIG5vdCBvdmVyd3JpdHRlbiBieSB0aGUgZGVmYXVsdCBlbXB0eSBwbG90VHlwZVxuICAgIC4uLihmaWx0ZXIucGxvdFR5cGUgPyB7cGxvdFR5cGU6IGZpbHRlci5wbG90VHlwZX0gOiB7fSlcbiAgfTtcblxuICBpZiAobWVyZ2VEb21haW4pIHtcbiAgICBjb25zdCBkb21haW5TdGVwczogKEZpbHRlciAmIHtzdGVwPzogbnVtYmVyfSkgfCBudWxsID1cbiAgICAgIG1lcmdlRmlsdGVyRG9tYWluKG5ld0ZpbHRlciwgZGF0YXNldHMpID8/ICh7fSBhcyBGaWx0ZXIpO1xuICAgIGlmIChkb21haW5TdGVwcykge1xuICAgICAgY29uc3Qge2RvbWFpbiwgc3RlcH0gPSBkb21haW5TdGVwcztcbiAgICAgIG5ld0ZpbHRlci5kb21haW4gPSBkb21haW47XG4gICAgICBpZiAobmV3RmlsdGVyLnN0ZXAgIT09IHN0ZXApIHtcbiAgICAgICAgbmV3RmlsdGVyLnN0ZXAgPSBzdGVwO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE86IGlmIHdlIGRvbid0IHNldCBmaWx0ZXIgdmFsdWUgaW4gZmlsdGVyUHJvcHMsIHdlIGRvbid0IG5lZWQgdG8gZG8gdGhpc1xuICBpZiAoZmlsdGVyRGF0YXNldEluZGV4ID4gMCkge1xuICAgIC8vIGRvbid0IHJlc2V0IHRoZSBmaWx0ZXIgdmFsdWUgaWYgd2UgYXJlIGp1c3QgYWRkaW5nIGEgc3luY2VkIGRhdGFzZXRcbiAgICBuZXdGaWx0ZXIgPSB7XG4gICAgICAuLi5uZXdGaWx0ZXIsXG4gICAgICB2YWx1ZTogZmlsdGVyLnZhbHVlXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZmlsdGVyOiBuZXdGaWx0ZXIsXG4gICAgZGF0YXNldFxuICB9O1xufVxuXG4vKipcbiAqIE1lcmdlIHRoZSBkb21haW5zIG9mIGEgZmlsdGVyIGluIGNhc2UgaXQgYXBwbGllcyB0byBtdWx0aXBsZSBkYXRhc2V0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VGaWx0ZXJEb21haW4oXG4gIGZpbHRlcjogRmlsdGVyLFxuICBkYXRhc2V0czogUmVjb3JkPHN0cmluZywgS2VwbGVyVGFibGVNb2RlbDxhbnksIGFueT4+XG4pOiAoRmlsdGVyICYge3N0ZXA/OiBudW1iZXJ9KSB8IG51bGwge1xuICBsZXQgZG9tYWluU3RlcHM6IChGaWx0ZXIgJiB7c3RlcD86IG51bWJlcn0pIHwgbnVsbCA9IG51bGw7XG4gIGlmICghZmlsdGVyPy5kYXRhSWQ/Lmxlbmd0aCkge1xuICAgIHJldHVybiBmaWx0ZXI7XG4gIH1cbiAgZmlsdGVyLmRhdGFJZC5mb3JFYWNoKChmaWx0ZXJEYXRhSWQsIGlkeCkgPT4ge1xuICAgIGNvbnN0IGRhdGFzZXQgPSBkYXRhc2V0c1tmaWx0ZXJEYXRhSWRdO1xuICAgIGNvbnN0IGZpbHRlclByb3BzID0gZGF0YXNldC5nZXRDb2x1bW5GaWx0ZXJQcm9wcyhmaWx0ZXIubmFtZVtpZHhdKTtcbiAgICBkb21haW5TdGVwcyA9IG1lcmdlRmlsdGVyRG9tYWluU3RlcChkb21haW5TdGVwcyA/PyAoe30gYXMgRmlsdGVyKSwgZmlsdGVyUHJvcHMpO1xuICB9KTtcbiAgcmV0dXJuIGRvbWFpblN0ZXBzO1xufVxuXG4vKipcbiAqIE1lcmdlIG9uZSBmaWx0ZXIgd2l0aCBvdGhlciBmaWx0ZXIgcHJvcCBkb21haW5cbiAqL1xuLyogZXNsaW50LWRpc2FibGUgY29tcGxleGl0eSAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRmlsdGVyRG9tYWluU3RlcChcbiAgZmlsdGVyOiBGaWx0ZXIgfCBudWxsLFxuICBmaWx0ZXJQcm9wcz86IFBhcnRpYWw8RmlsdGVyPlxuKTogKEZpbHRlciAmIHtzdGVwPzogbnVtYmVyfSkgfCBudWxsIHtcbiAgaWYgKCFmaWx0ZXIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmICghZmlsdGVyUHJvcHMpIHtcbiAgICByZXR1cm4gZmlsdGVyO1xuICB9XG5cbiAgaWYgKChmaWx0ZXIuZmllbGRUeXBlICYmIGZpbHRlci5maWVsZFR5cGUgIT09IGZpbHRlclByb3BzLmZpZWxkVHlwZSkgfHwgIWZpbHRlclByb3BzLmRvbWFpbikge1xuICAgIHJldHVybiBmaWx0ZXI7XG4gIH1cblxuICBjb25zdCBzb3J0ZWREb21haW4gPSAhZmlsdGVyLmRvbWFpblxuICAgID8gZmlsdGVyUHJvcHMuZG9tYWluXG4gICAgOiBbLi4uKGZpbHRlci5kb21haW4gfHwgW10pLCAuLi4oZmlsdGVyUHJvcHMuZG9tYWluIHx8IFtdKV0uc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuXG4gIGNvbnN0IG5ld0ZpbHRlciA9IHtcbiAgICAuLi5maWx0ZXIsXG4gICAgLi4uZmlsdGVyUHJvcHMsXG4gICAgLy8gdXNlIG1pbiBtYXggYXMgZGVmYXVsdCBkb21haW5cbiAgICBkb21haW46IFtzb3J0ZWREb21haW5bMF0sIHNvcnRlZERvbWFpbltzb3J0ZWREb21haW4ubGVuZ3RoIC0gMV1dXG4gIH07XG5cbiAgc3dpdGNoIChmaWx0ZXJQcm9wcy5maWVsZFR5cGUpIHtcbiAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5zdHJpbmc6XG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMuaDM6XG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMuZGF0ZTpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLm5ld0ZpbHRlcixcbiAgICAgICAgZG9tYWluOiB1bmlxdWUoc29ydGVkRG9tYWluKVxuICAgICAgfTtcblxuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLnRpbWVzdGFtcDoge1xuICAgICAgY29uc3Qgc3RlcCA9XG4gICAgICAgIChmaWx0ZXIgYXMgVGltZVJhbmdlRmlsdGVyKS5zdGVwIDwgKGZpbHRlclByb3BzIGFzIFRpbWVSYW5nZUZpZWxkRG9tYWluKS5zdGVwXG4gICAgICAgICAgPyAoZmlsdGVyIGFzIFRpbWVSYW5nZUZpbHRlcikuc3RlcFxuICAgICAgICAgIDogKGZpbHRlclByb3BzIGFzIFRpbWVSYW5nZUZpZWxkRG9tYWluKS5zdGVwO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5uZXdGaWx0ZXIsXG4gICAgICAgIHN0ZXBcbiAgICAgIH07XG4gICAgfVxuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLnJlYWw6XG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMuaW50ZWdlcjpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG5ld0ZpbHRlcjtcbiAgfVxufVxuLyogZXNsaW50LWVuYWJsZSBjb21wbGV4aXR5ICovXG5cbi8qKlxuICogR2VuZXJhdGVzIHBvbHlnb24gZmlsdGVyXG4gKi9cbmV4cG9ydCBjb25zdCBmZWF0dXJlVG9GaWx0ZXJWYWx1ZSA9IChcbiAgZmVhdHVyZTogRmVhdHVyZSxcbiAgZmlsdGVySWQ6IHN0cmluZyxcbiAgcHJvcGVydGllcz86IFJlY29yZDxzdHJpbmcsIGFueT5cbik6IEZlYXR1cmVWYWx1ZSA9PiAoe1xuICAuLi5mZWF0dXJlLFxuICBpZDogZmVhdHVyZS5pZCxcbiAgcHJvcGVydGllczoge1xuICAgIC4uLmZlYXR1cmUucHJvcGVydGllcyxcbiAgICAuLi5wcm9wZXJ0aWVzLFxuICAgIGZpbHRlcklkXG4gIH1cbn0pO1xuXG5leHBvcnQgY29uc3QgZ2V0RmlsdGVySWRJbkZlYXR1cmUgPSAoZjogRmVhdHVyZVZhbHVlKTogc3RyaW5nID0+IGdldChmLCBbJ3Byb3BlcnRpZXMnLCAnZmlsdGVySWQnXSk7XG5cbi8qKlxuICogR2VuZXJhdGVzIHBvbHlnb24gZmlsdGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVBvbHlnb25GaWx0ZXI8XG4gIEwgZXh0ZW5kcyB7Y29uZmlnOiB7ZGF0YUlkOiBzdHJpbmcgfCBudWxsOyBsYWJlbDogc3RyaW5nfTsgaWQ6IHN0cmluZ31cbj4obGF5ZXJzOiBMW10sIGZlYXR1cmU6IEZlYXR1cmUpOiBQb2x5Z29uRmlsdGVyIHtcbiAgY29uc3QgZGF0YUlkID0gbGF5ZXJzLm1hcChsID0+IGwuY29uZmlnLmRhdGFJZCkuZmlsdGVyKG5vdE51bGxvclVuZGVmaW5lZCk7XG4gIGNvbnN0IGxheWVySWQgPSBsYXllcnMubWFwKGwgPT4gbC5pZCk7XG4gIGNvbnN0IG5hbWUgPSBsYXllcnMubWFwKGwgPT4gbC5jb25maWcubGFiZWwpO1xuICBjb25zdCBmaWx0ZXIgPSBnZXREZWZhdWx0RmlsdGVyKHtkYXRhSWR9KTtcbiAgcmV0dXJuIHtcbiAgICAuLi5maWx0ZXIsXG4gICAgZml4ZWREb21haW46IHRydWUsXG4gICAgdHlwZTogRklMVEVSX1RZUEVTLnBvbHlnb24sXG4gICAgbmFtZSxcbiAgICBsYXllcklkLFxuICAgIHZhbHVlOiBmZWF0dXJlVG9GaWx0ZXJWYWx1ZShmZWF0dXJlLCBmaWx0ZXIuaWQsIHtpc1Zpc2libGU6IHRydWV9KVxuICB9O1xufVxuXG4vKipcbiAqIFJ1biBmaWx0ZXIgZW50aXJlbHkgb24gQ1BVXG4gKi9cbmludGVyZmFjZSBTdGF0ZVR5cGU8SyBleHRlbmRzIEtlcGxlclRhYmxlTW9kZWw8SywgTD4sIEw+IHtcbiAgbGF5ZXJzOiBMW107XG4gIGZpbHRlcnM6IEZpbHRlcltdO1xuICBkYXRhc2V0czoge1tpZDogc3RyaW5nXTogS307XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJEYXRhc2V0Q1BVPFQgZXh0ZW5kcyBTdGF0ZVR5cGU8SywgTD4sIEsgZXh0ZW5kcyBLZXBsZXJUYWJsZU1vZGVsPEssIEw+LCBMPihcbiAgc3RhdGU6IFQsXG4gIGRhdGFJZDogc3RyaW5nXG4pOiBUIHtcbiAgY29uc3QgZGF0YXNldEZpbHRlcnMgPSBzdGF0ZS5maWx0ZXJzLmZpbHRlcihmID0+IGYuZGF0YUlkLmluY2x1ZGVzKGRhdGFJZCkpO1xuICBjb25zdCBkYXRhc2V0ID0gc3RhdGUuZGF0YXNldHNbZGF0YUlkXTtcblxuICBpZiAoIWRhdGFzZXQpIHtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICBjb25zdCBjcHVGaWx0ZXJlZERhdGFzZXQgPSBkYXRhc2V0LmZpbHRlclRhYmxlQ1BVKGRhdGFzZXRGaWx0ZXJzLCBzdGF0ZS5sYXllcnMpO1xuXG4gIHJldHVybiBzZXQoWydkYXRhc2V0cycsIGRhdGFJZF0sIGNwdUZpbHRlcmVkRGF0YXNldCwgc3RhdGUpO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIHBhcnNlZCBmaWx0ZXJzIHdpdGggZGF0YXNldHMgYW5kIGFkZCBmaWx0ZXJQcm9wcyB0byBmaWVsZFxuICovXG50eXBlIE1pblZpc1N0YXRlRm9yRmlsdGVyID0gUGljazxWaXNTdGF0ZSwgJ2xheWVycycgfCAnZGF0YXNldHMnIHwgJ2lzTWVyZ2luZ0RhdGFzZXRzJz47XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVGaWx0ZXJzVXBkYXRlRGF0YXNldHM8XG4gIFMgZXh0ZW5kcyBNaW5WaXNTdGF0ZUZvckZpbHRlcixcbiAgSyBleHRlbmRzIEtlcGxlclRhYmxlTW9kZWw8SywgTD4sXG4gIEwgZXh0ZW5kcyB7Y29uZmlnOiB7ZGF0YUlkOiBzdHJpbmcgfCBudWxsOyBsYWJlbDogc3RyaW5nfTsgaWQ6IHN0cmluZ31cbj4oXG4gIHN0YXRlOiBTLFxuICBmaWx0ZXJzVG9WYWxpZGF0ZTogUGFyc2VkRmlsdGVyW10gPSBbXVxuKToge1xuICB2YWxpZGF0ZWQ6IEZpbHRlcltdO1xuICBmYWlsZWQ6IEZpbHRlcltdO1xuICB1cGRhdGVkRGF0YXNldHM6IFNbJ2RhdGFzZXRzJ107XG59IHtcbiAgLy8gVE9ETyBCZXR0ZXIgVHlwaW5ncyBoZXJlXG4gIGNvbnN0IHZhbGlkYXRlZDogYW55W10gPSBbXTtcbiAgY29uc3QgZmFpbGVkOiBhbnlbXSA9IFtdO1xuICBjb25zdCB7ZGF0YXNldHMsIGxheWVyc30gPSBzdGF0ZTtcbiAgbGV0IHVwZGF0ZWREYXRhc2V0cyA9IGRhdGFzZXRzO1xuXG4gIC8vIG1lcmdlIGZpbHRlcnNcbiAgZmlsdGVyc1RvVmFsaWRhdGUuZm9yRWFjaChmaWx0ZXJUb1ZhbGlkYXRlID0+IHtcbiAgICAvLyB3ZSBjYW4gb25seSBsb29rIGZvciBkYXRhc2V0cyBkZWZpbmUgaW4gdGhlIGZpbHRlciBkYXRhSWRcbiAgICBjb25zdCBkYXRhc2V0SWRzID0gdG9BcnJheShmaWx0ZXJUb1ZhbGlkYXRlLmRhdGFJZCk7XG5cbiAgICAvLyB3ZSBjYW4gbWVyZ2UgYSBmaWx0ZXIgb25seSBpZiBhbGwgZGF0YXNldHMgaW4gZmlsdGVyLmRhdGFJZCBhcmUgbG9hZGVkXG4gICAgaWYgKGRhdGFzZXRJZHMuZXZlcnkoZCA9PiBkYXRhc2V0c1tkXSAmJiAhc3RhdGUuaXNNZXJnaW5nRGF0YXNldHNbZF0pKSB7XG4gICAgICAvLyBhbGwgZGF0YXNldElkcyBpbiBmaWx0ZXIgbXVzdCBiZSBwcmVzZW50IHRoZSBzdGF0ZSBkYXRhc2V0c1xuICAgICAgY29uc3Qge3ZhbGlkYXRlZEZpbHRlciwgYXBwbHlUb0RhdGFzZXRzLCBhdWdtZW50ZWREYXRhc2V0c30gPSBkYXRhc2V0SWRzLnJlZHVjZTx7XG4gICAgICAgIHZhbGlkYXRlZEZpbHRlcjogRmlsdGVyIHwgbnVsbDtcbiAgICAgICAgYXBwbHlUb0RhdGFzZXRzOiBzdHJpbmdbXTtcbiAgICAgICAgYXVnbWVudGVkRGF0YXNldHM6IHtbZGF0YXNldElkOiBzdHJpbmddOiBhbnl9O1xuICAgICAgfT4oXG4gICAgICAgIChhY2MsIGRhdGFzZXRJZCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGFzZXQgPSB1cGRhdGVkRGF0YXNldHNbZGF0YXNldElkXTtcbiAgICAgICAgICBjb25zdCBkYXRhc2V0TGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihsID0+IGwuY29uZmlnLmRhdGFJZCA9PT0gZGF0YXNldC5pZCk7XG4gICAgICAgICAgY29uc3QgdG9WYWxpZGF0ZSA9IGFjYy52YWxpZGF0ZWRGaWx0ZXIgfHwgZmlsdGVyVG9WYWxpZGF0ZTtcblxuICAgICAgICAgIGNvbnN0IHtmaWx0ZXI6IHVwZGF0ZWRGaWx0ZXIsIGRhdGFzZXQ6IHVwZGF0ZWREYXRhc2V0fSA9IHZhbGlkYXRlRmlsdGVyV2l0aERhdGEoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC4uLnVwZGF0ZWREYXRhc2V0cyxcbiAgICAgICAgICAgICAgLi4uYWNjLmF1Z21lbnRlZERhdGFzZXRzLFxuICAgICAgICAgICAgICBbZGF0YXNldElkXTogYWNjLmF1Z21lbnRlZERhdGFzZXRzW2RhdGFzZXRJZF0gfHwgZGF0YXNldFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGFzZXRJZCxcbiAgICAgICAgICAgIHRvVmFsaWRhdGUsXG4gICAgICAgICAgICBkYXRhc2V0TGF5ZXJzXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmICh1cGRhdGVkRmlsdGVyKSB7XG4gICAgICAgICAgICAvLyBtZXJnZSBmaWx0ZXIgZG9tYWluIHN0ZXBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHZhbGlkYXRlZEZpbHRlcjogdXBkYXRlZEZpbHRlcixcblxuICAgICAgICAgICAgICBhcHBseVRvRGF0YXNldHM6IFsuLi5hY2MuYXBwbHlUb0RhdGFzZXRzLCBkYXRhc2V0SWRdLFxuXG4gICAgICAgICAgICAgIGF1Z21lbnRlZERhdGFzZXRzOiB7XG4gICAgICAgICAgICAgICAgLi4uYWNjLmF1Z21lbnRlZERhdGFzZXRzLFxuICAgICAgICAgICAgICAgIFtkYXRhc2V0SWRdOiB1cGRhdGVkRGF0YXNldFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB2YWxpZGF0ZWRGaWx0ZXI6IG51bGwsXG4gICAgICAgICAgYXBwbHlUb0RhdGFzZXRzOiBbXSxcbiAgICAgICAgICBhdWdtZW50ZWREYXRhc2V0czoge31cbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgaWYgKHZhbGlkYXRlZEZpbHRlciAmJiBpc0VxdWFsKGRhdGFzZXRJZHMsIGFwcGx5VG9EYXRhc2V0cykpIHtcbiAgICAgICAgbGV0IGRvbWFpbiA9IHZhbGlkYXRlZEZpbHRlci5kb21haW47XG4gICAgICAgIGlmICgodmFsaWRhdGVkRmlsdGVyIGFzIFRpbWVSYW5nZUZpbHRlcikuc3luY2VkV2l0aExheWVyVGltZWxpbmUpIHtcbiAgICAgICAgICBjb25zdCBhbmltYXRhYmxlTGF5ZXJzID0gZ2V0QW5pbWF0YWJsZVZpc2libGVMYXllcnMobGF5ZXJzKTtcbiAgICAgICAgICBkb21haW4gPSBtZXJnZVRpbWVEb21haW5zKFtcbiAgICAgICAgICAgIC4uLmFuaW1hdGFibGVMYXllcnMubWFwKGwgPT4gbC5jb25maWcuYW5pbWF0aW9uLmRvbWFpbiB8fCBbMCwgMF0pLFxuICAgICAgICAgICAgdmFsaWRhdGVkRmlsdGVyLmRvbWFpblxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsaWRhdGVkRmlsdGVyLnZhbHVlID0gYWRqdXN0VmFsdWVUb0ZpbHRlckRvbWFpbihmaWx0ZXJUb1ZhbGlkYXRlLnZhbHVlLCB7XG4gICAgICAgICAgLi4udmFsaWRhdGVkRmlsdGVyLFxuICAgICAgICAgIGRvbWFpblxuICAgICAgICB9KTtcblxuICAgICAgICB2YWxpZGF0ZWQucHVzaCh1cGRhdGVGaWx0ZXJQbG90KGRhdGFzZXRzLCB2YWxpZGF0ZWRGaWx0ZXIpKTtcbiAgICAgICAgdXBkYXRlZERhdGFzZXRzID0ge1xuICAgICAgICAgIC4uLnVwZGF0ZWREYXRhc2V0cyxcbiAgICAgICAgICAuLi5hdWdtZW50ZWREYXRhc2V0c1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmFpbGVkLnB1c2goZmlsdGVyVG9WYWxpZGF0ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhaWxlZC5wdXNoKGZpbHRlclRvVmFsaWRhdGUpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHt2YWxpZGF0ZWQsIGZhaWxlZCwgdXBkYXRlZERhdGFzZXRzfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZpbHRlclBsb3QoZmlsdGVyOiBGaWx0ZXIsIGRhdGFJZDogc3RyaW5nKSB7XG4gIGxldCBuZXh0RmlsdGVyID0gZmlsdGVyO1xuXG4gIGNvbnN0IHJhbmdlRmlsdGVyID0gZmlsdGVyIGFzIFJhbmdlRmlsdGVyO1xuICBpZiAocmFuZ2VGaWx0ZXIuYmlucyAmJiByYW5nZUZpbHRlci5iaW5zW2RhdGFJZF0pIHtcbiAgICBjb25zdCB7W2RhdGFJZF06IF9kZWxldGUsIC4uLm5leHRCaW5zfSA9IHJhbmdlRmlsdGVyLmJpbnM7XG4gICAgbmV4dEZpbHRlciA9IHtcbiAgICAgIC4uLnJhbmdlRmlsdGVyLFxuICAgICAgYmluczogbmV4dEJpbnNcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgdGltZUZpbHRlciA9IGZpbHRlciBhcyBUaW1lUmFuZ2VGaWx0ZXI7XG4gIGlmICh0aW1lRmlsdGVyLnRpbWVCaW5zICYmIHRpbWVGaWx0ZXIudGltZUJpbnNbZGF0YUlkXSkge1xuICAgIGNvbnN0IHtbZGF0YUlkXTogX19kZWxldGUsIC4uLm5leHRUaW1lQmluc30gPSB0aW1lRmlsdGVyLnRpbWVCaW5zO1xuICAgIG5leHRGaWx0ZXIgPSB7XG4gICAgICAuLi5uZXh0RmlsdGVyLFxuICAgICAgdGltZUJpbnM6IG5leHRUaW1lQmluc1xuICAgIH0gYXMgRmlsdGVyO1xuICB9XG5cbiAgcmV0dXJuIG5leHRGaWx0ZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkVGltZURvbWFpbihkb21haW4pIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZG9tYWluKSAmJiBkb21haW4uZXZlcnkoTnVtYmVyLmlzRmluaXRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbWVXaWRnZXRIaW50Rm9ybWF0dGVyKGRvbWFpbjogW251bWJlciwgbnVtYmVyXSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmICghaXNWYWxpZFRpbWVEb21haW4oZG9tYWluKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zdCBkaWZmID0gZG9tYWluWzFdIC0gZG9tYWluWzBdO1xuICByZXR1cm4gZGlmZiA+IGR1cmF0aW9uV2Vla1xuICAgID8gJ0wnXG4gICAgOiBkaWZmID4gZHVyYXRpb25EYXlcbiAgICA/ICdMIExUJ1xuICAgIDogZGlmZiA+IGR1cmF0aW9uSG91clxuICAgID8gJ0xUJ1xuICAgIDogJ0xUUyc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1NpZGVGaWx0ZXIoZmlsdGVyOiBGaWx0ZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIGZpbHRlci52aWV3ID09PSBGSUxURVJfVklFV19UWVBFUy5zaWRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VUaW1lRG9tYWlucyhkb21haW5zOiAoW251bWJlciwgbnVtYmVyXSB8IG51bGwpW10pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgcmV0dXJuIGRvbWFpbnMucmVkdWNlKFxuICAgIChhY2M6IFtudW1iZXIsIG51bWJlcl0sIGRvbWFpbikgPT4gW1xuICAgICAgTWF0aC5taW4oYWNjWzBdLCBkb21haW4/LlswXSA/PyBJbmZpbml0eSksXG4gICAgICBNYXRoLm1heChhY2NbMV0sIGRvbWFpbj8uWzFdID8/IC1JbmZpbml0eSlcbiAgICBdLFxuICAgIFtOdW1iZXIoSW5maW5pdHkpLCAtSW5maW5pdHldXG4gICkgYXMgW251bWJlciwgbnVtYmVyXTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0xheWVyfSBsYXllclxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNMYXllckFuaW1hdGFibGUobGF5ZXI6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gbGF5ZXIuY29uZmlnLmFuaW1hdGlvbj8uZW5hYmxlZCAmJiBBcnJheS5pc0FycmF5KGxheWVyLmNvbmZpZy5hbmltYXRpb24uZG9tYWluKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0xheWVyW119IGxheWVyc1xuICogQHJldHVybnMge0xheWVyW119XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbmltYXRhYmxlVmlzaWJsZUxheWVycyhsYXllcnM6IGFueVtdKTogYW55W10ge1xuICByZXR1cm4gbGF5ZXJzLmZpbHRlcihsID0+IGlzTGF5ZXJBbmltYXRhYmxlKGwpICYmIGwuY29uZmlnLmlzVmlzaWJsZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtMYXllcltdfSBsYXllcnNcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gKiBAcmV0dXJucyB7TGF5ZXJbXX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFuaW1hdGFibGVWaXNpYmxlTGF5ZXJzQnlUeXBlKGxheWVyczogYW55W10sIHR5cGU6IHN0cmluZyk6IGFueVtdIHtcbiAgcmV0dXJuIGdldEFuaW1hdGFibGVWaXNpYmxlTGF5ZXJzKGxheWVycykuZmlsdGVyKGwgPT4gbC50eXBlID09PSB0eXBlKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0xheWVyW119IGxheWVyc1xuICogQHJldHVybnMge0xheWVyW119XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnZhbEJhc2VkQW5pbWF0aW9uTGF5ZXJzKGxheWVyczogYW55W10pOiBhbnlbXSB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgcmV0dXJuIGdldEFuaW1hdGFibGVWaXNpYmxlTGF5ZXJzKGxheWVycykuZmlsdGVyKGwgPT4gbC5jb25maWcuYW5pbWF0aW9uPy50aW1lU3RlcHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VGaWx0ZXJXaXRoVGltZWxpbmUoXG4gIGZpbHRlcjogVGltZVJhbmdlRmlsdGVyLFxuICBhbmltYXRpb25Db25maWc6IEFuaW1hdGlvbkNvbmZpZ1xuKToge2ZpbHRlcjogVGltZVJhbmdlRmlsdGVyOyBhbmltYXRpb25Db25maWc6IEFuaW1hdGlvbkNvbmZpZ30ge1xuICBpZiAoXG4gICAgZmlsdGVyPy50eXBlID09PSBGSUxURVJfVFlQRVMudGltZVJhbmdlICYmXG4gICAgZmlsdGVyLnN5bmNlZFdpdGhMYXllclRpbWVsaW5lICYmXG4gICAgYW5pbWF0aW9uQ29uZmlnICYmXG4gICAgQXJyYXkuaXNBcnJheShhbmltYXRpb25Db25maWcuZG9tYWluKVxuICApIHtcbiAgICBjb25zdCBkb21haW4gPSBtZXJnZVRpbWVEb21haW5zKFtmaWx0ZXIuZG9tYWluLCBhbmltYXRpb25Db25maWcuZG9tYWluIGFzIFtudW1iZXIsIG51bWJlcl1dKTtcbiAgICByZXR1cm4ge1xuICAgICAgZmlsdGVyOiB7XG4gICAgICAgIC4uLmZpbHRlcixcbiAgICAgICAgZG9tYWluXG4gICAgICB9LFxuICAgICAgYW5pbWF0aW9uQ29uZmlnOiB7XG4gICAgICAgIC4uLmFuaW1hdGlvbkNvbmZpZyxcbiAgICAgICAgZG9tYWluXG4gICAgICB9XG4gICAgfTtcbiAgfVxuICByZXR1cm4ge2ZpbHRlciwgYW5pbWF0aW9uQ29uZmlnfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlU291cmNlRG9tYWluVG9EZXN0aW5hdGlvbihcbiAgc291cmNlRG9tYWluOiBbbnVtYmVyLCBudW1iZXJdLFxuICBkZXN0aW5hdGlvbkRvbWFpbjogW251bWJlciwgbnVtYmVyXVxuKTogW251bWJlciwgbnVtYmVyXSB7XG4gIC8vIDAgLT4gMTAwOiBtZXJnZWQgZG9tYWlucyB0MSAtIHQwID09PSAxMDAlIGZpbHRlciBtYXkgYWxyZWFkeSBoYXZlIHRoaXMgaW5mbyB3aGljaCBpcyBnb29kXG4gIGNvbnN0IHNvdXJjZURvbWFpblNpemUgPSBzb3VyY2VEb21haW5bMV0gLSBzb3VyY2VEb21haW5bMF07XG4gIC8vIDEwIC0+IDIwOiBhbmltYXRpb25Db25maWcgZG9tYWluIGQxIC0gZDAgPT09IGFuaW1hdGlvbkNvbmZpZyBzaXplXG4gIGNvbnN0IGRlc3RpbmF0aW9uRG9tYWluU2l6ZSA9IGRlc3RpbmF0aW9uRG9tYWluWzFdIC0gZGVzdGluYXRpb25Eb21haW5bMF07XG4gIC8vIHNjYWxlIGFuaW1hdGlvbkNvbmZpZyBzaXplIHVzaW5nIGRvbWFpbiBzaXplXG4gIGNvbnN0IHNjYWxlZFNvdXJjZURvbWFpblNpemUgPSAoc291cmNlRG9tYWluU2l6ZSAvIGRlc3RpbmF0aW9uRG9tYWluU2l6ZSkgKiAxMDA7XG4gIC8vIHNjYWxlIGQwIC0gdDAgdXNpbmcgZG9tYWluIHNpemUgdG8gZmluZCBzdGFydGluZyBwb2ludFxuICBjb25zdCBvZmZzZXQgPSBzb3VyY2VEb21haW5bMF0gLSBkZXN0aW5hdGlvbkRvbWFpblswXTtcbiAgY29uc3Qgc2NhbGVkT2Zmc2V0ID0gKG9mZnNldCAvIGRlc3RpbmF0aW9uRG9tYWluU2l6ZSkgKiAxMDA7XG4gIHJldHVybiBbc2NhbGVkT2Zmc2V0LCBzY2FsZWRTb3VyY2VEb21haW5TaXplICsgc2NhbGVkT2Zmc2V0XTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbHRlclNjYWxlZFRpbWVsaW5lKGZpbHRlciwgYW5pbWF0aW9uQ29uZmlnKTogW251bWJlciwgbnVtYmVyXSB8IFtdIHtcbiAgaWYgKCEoZmlsdGVyLnN5bmNlZFdpdGhMYXllclRpbWVsaW5lICYmIGFuaW1hdGlvbkNvbmZpZz8uZG9tYWluKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHJldHVybiBzY2FsZVNvdXJjZURvbWFpblRvRGVzdGluYXRpb24oYW5pbWF0aW9uQ29uZmlnLmRvbWFpbiwgZmlsdGVyLmRvbWFpbik7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxJQUFBQSxVQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxRQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxRQUFBLEdBQUFILE9BQUE7QUFFQSxJQUFBSSxjQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxRQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFB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