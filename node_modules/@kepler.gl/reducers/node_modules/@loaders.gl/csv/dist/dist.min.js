(function webpackUniversalModuleDefinition(root, factory) {
  if (typeof exports === 'object' && typeof module === 'object')
    module.exports = factory();
  else if (typeof define === 'function' && define.amd) define([], factory);
        else if (typeof exports === 'object') exports['loaders'] = factory();
  else root['loaders'] = factory();})(globalThis, function () {
"use strict";var __exports__=(()=>{var Pe=Object.create;var P=Object.defineProperty;var He=Object.getOwnPropertyDescriptor;var ze=Object.getOwnPropertyNames;var Ve=Object.getPrototypeOf,We=Object.prototype.hasOwnProperty;var Je=(t,e,r)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var $e=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ze=(t,e)=>{for(var r in e)P(t,r,{get:e[r],enumerable:!0})},Y=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ze(e))!We.call(t,n)&&n!==r&&P(t,n,{get:()=>e[n],enumerable:!(s=He(e,n))||s.enumerable});return t},K=(t,e,r)=>(Y(t,e,"default"),r&&Y(r,e,"default")),Qe=(t,e,r)=>(r=t!=null?Pe(Ve(t)):{},Y(e||!t||!t.__esModule?P(r,"default",{value:t,enumerable:!0}):r,t)),Ye=t=>Y(P({},"__esModule",{value:!0}),t);var Re=(t,e,r)=>(Je(t,typeof e!="symbol"?e+"":e,r),r);var Ce=$e((_t,Ae)=>{Ae.exports=globalThis.loaders});var $={};Ze($,{CSVLoader:()=>ne,CSVWriter:()=>qe});K($,Qe(Ce(),1));var X=class{schema;options;shape;length=0;rows=null;cursor=0;_headers=[];constructor(e,r){if(this.options=r,this.schema=e,!Array.isArray(e)){this._headers=[];for(let s in e)this._headers[e[s].index]=e[s].name}}rowCount(){return this.length}addArrayRow(e,r){Number.isFinite(r)&&(this.cursor=r),this.shape="array-row-table",this.rows=this.rows||new Array(100),this.rows[this.length]=e,this.length++}addObjectRow(e,r){Number.isFinite(r)&&(this.cursor=r),this.shape="object-row-table",this.rows=this.rows||new Array(100),this.rows[this.length]=e,this.length++}getBatch(){let e=this.rows;return e?(e=e.slice(0,this.length),this.rows=null,{shape:this.shape||"array-row-table",batchType:"data",data:e,length:this.length,schema:this.schema,cursor:this.cursor}):null}};function H(t,e){if(!t)throw new Error("null row");let r={};if(e)for(let s=0;s<e.length;s++)r[e[s]]=t[s];else for(let s=0;s<t.length;s++){let n=`column-${s}`;r[n]=t[s]}return r}function z(t,e){if(!t)throw new Error("null row");if(e){let r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=t[e[s]];return r}return Object.values(t)}function Ee(t){let e=[];for(let r=0;r<t.length;r++){let s=`column-${r}`;e.push(s)}return e}function xe(t){return Object.keys(t)}var je=100,G=class{schema;options;length=0;objectRows=null;arrayRows=null;cursor=0;_headers=null;constructor(e,r){if(this.options=r,this.schema=e,e){this._headers=[];for(let s in e)this._headers[e[s].index]=e[s].name}}rowCount(){return this.length}addArrayRow(e,r){switch(Number.isFinite(r)&&(this.cursor=r),this._headers||=Ee(e),this.options.shape){case"object-row-table":let s=H(e,this._headers);this.addObjectRow(s,r);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(je),this.arrayRows[this.length]=e,this.length++;break}}addObjectRow(e,r){switch(Number.isFinite(r)&&(this.cursor=r),this._headers||=xe(e),this.options.shape){case"array-row-table":let s=z(e,this._headers);this.addArrayRow(s,r);break;case"object-row-table":this.objectRows=this.objectRows||new Array(je),this.objectRows[this.length]=e,this.length++;break}}getBatch(){let e=this.arrayRows||this.objectRows;return e?(e=e.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:e,length:this.length,schema:this.schema,cursor:this.cursor}):null}};var ee=class{schema;length=0;allocated=0;columns={};constructor(e,r){this.schema=e,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(e){this._reallocateColumns();let r=0;for(let s in this.columns)this.columns[s][this.length]=e[r++];this.length++}addObjectRow(e){this._reallocateColumns();for(let r in e)this.columns[r][this.length]=e[r];this.length++}getBatch(){this._pruneColumns();let e=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(let s in this.schema){let n=this.schema[s];e[n.name]=this.columns[n.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:e,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:100,this.columns={};for(let e in this.schema){let r=this.schema[e],s=r.type||Float32Array,n=this.columns[r.index];if(n&&ArrayBuffer.isView(n)){let o=new s(this.allocated);o.set(n),this.columns[r.index]=o}else n?(n.length=this.allocated,this.columns[r.index]=n):this.columns[r.index]=new s(this.allocated)}}}_pruneColumns(){for(let[e,r]of Object.entries(this.columns))this.columns[e]=r.slice(0,this.length)}};var Ke={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},Xe="TableBatchBuilder",te=class{schema;options;aggregator=null;batchCount=0;bytesUsed=0;isChunkComplete=!1;lastBatchEmittedMs=Date.now();totalLength=0;totalBytes=0;rowBytes=0;constructor(e,r){this.schema=e,this.options={...Ke,...r}}limitReached(){return!!(Boolean(this.options?.limit)&&this.totalLength>=this.options.limit||Boolean(this.options?._limitMB)&&this.totalBytes/1e6>=this.options._limitMB)}addRow(e){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(e),this.totalBytes+=this.rowBytes,Array.isArray(e)?this.addArrayRow(e):this.addObjectRow(e))}addArrayRow(e){if(!this.aggregator){let r=this._getTableBatchType();this.aggregator=new r(this.schema,this.options)}this.aggregator.addArrayRow(e)}addObjectRow(e){if(!this.aggregator){let r=this._getTableBatchType();this.aggregator=new r(this.schema,this.options)}this.aggregator.addObjectRow(e)}chunkComplete(e){e instanceof ArrayBuffer&&(this.bytesUsed+=e.byteLength),typeof e=="string"&&(this.bytesUsed+=e.length),this.isChunkComplete=!0}getFullBatch(e){return this._isFull()?this._getBatch(e):null}getFinalBatch(e){return this._getBatch(e)}_estimateRowMB(e){return Array.isArray(e)?e.length*8:Object.keys(e).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(e){if(!this.aggregator)return null;e?.bytesUsed&&(this.bytesUsed=e.bytesUsed);let r=this.aggregator.getBatch();return r.count=this.batchCount,r.bytesUsed=this.bytesUsed,Object.assign(r,e),this.batchCount++,this.aggregator=null,r}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return G;case"columnar-table":return ee;case"arrow-table":if(!te.ArrowBatch)throw new Error(Xe);return te.ArrowBatch;default:return X}}},L=te;Re(L,"ArrowBatch");function he(t){switch(t.shape){case"array-row-table":case"object-row-table":return t.data.length;case"geojson-table":return t.features.length;case"arrow-table":return t.data.numRows;case"columnar-table":for(let r of Object.values(t.data))return r.length||0;return 0;default:throw new Error("table")}}function ce(t){if(t.schema)return t.schema.fields.length;if(he(t)===0)throw new Error("empty table");switch(t.shape){case"array-row-table":return t.data[0].length;case"object-row-table":return Object.keys(t.data[0]).length;case"geojson-table":return Object.keys(t.features[0]).length;case"columnar-table":return Object.keys(t.data).length;case"arrow-table":return t.data.numCols;default:throw new Error("table")}}function Oe(t,e,r,s){switch(t.shape){case"array-row-table":return s?Array.from(t.data[e]):t.data[e];case"object-row-table":if(t.schema){let l=r||[];for(let i=0;i<t.schema.fields.length;i++)l[i]=t.data[e][t.schema.fields[i].name];return l}return Object.values(t.data[e]);case"geojson-table":if(t.schema){let l=r||[];for(let i=0;i<t.schema.fields.length;i++)l[i]=t.features[e][t.schema.fields[i].name];return l}return Object.values(t.features[e]);case"columnar-table":if(t.schema){let l=r||[];for(let i=0;i<t.schema.fields.length;i++)l[i]=t.data[t.schema.fields[i].name][e];return l}else{let l=r||[],i=0;for(let d of Object.values(t.data))l[i]=d[e],i++;return l}case"arrow-table":let n=t.data,o=r||[],c=n.get(e),u=n.schema;for(let l=0;l<u.fields.length;l++)o[l]=c?.[u.fields[l].name];return o;default:throw new Error("shape")}}function*le(t,e=[]){let r=he(t);for(let s=0;s<r;s++)yield Oe(t,s,e)}var re=class extends Array{enqueue(e){return this.push(e)}dequeue(){return this.shift()}},M=class{_values;_settlers;_closed;constructor(){this._values=new re,this._settlers=new re,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[Symbol.asyncIterator](){return this}enqueue(e){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");let r=this._settlers.dequeue();e instanceof Error?r.reject(e):r.resolve({value:e})}else this._values.enqueue(e)}next(){if(this._values.length>0){let e=this._values.dequeue();return e instanceof Error?Promise.reject(e):Promise.resolve({value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((e,r)=>{this._settlers.enqueue({resolve:e,reject:r})})}};var Fe="\uFEFF";function Ge(t,e={},r=ue){e=e||{};var s=e.dynamicTyping||!1;F(s)&&(e.dynamicTypingFunction=s,s={}),e.dynamicTyping=s,e.transform=F(e.transform)?e.transform:!1;var n=new r(e);return n.stream(t)}function et(t,e){var r=!1,s=!0,n=",",o=`\r
`,c='"',u=c+c,l=!1,i=null;a();var d=new RegExp(V(c),"g");if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return m(null,t,l);if(typeof t[0]=="object")return m(i||Object.keys(t[0]),t,l)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:Object.keys(t.data[0])),!Array.isArray(t.data[0])&&typeof t.data[0]!="object"&&(t.data=[t.data])),m(t.fields||[],t.data||[],l);throw new Error("Unable to serialize unrecognized input");function a(){if(typeof e=="object"){if(typeof e.delimiter=="string"&&!D.BAD_DELIMITERS.filter(function(h){return e.delimiter.indexOf(h)!==-1}).length&&(n=e.delimiter),(typeof e.quotes=="boolean"||Array.isArray(e.quotes))&&(r=e.quotes),(typeof e.skipEmptyLines=="boolean"||typeof e.skipEmptyLines=="string")&&(l=e.skipEmptyLines),typeof e.newline=="string"&&(o=e.newline),typeof e.quoteChar=="string"&&(c=e.quoteChar),typeof e.header=="boolean"&&(s=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");i=e.columns}e.escapeChar!==void 0&&(u=e.escapeChar+c)}}function m(h,f,w){var T="";typeof h=="string"&&(h=JSON.parse(h)),typeof f=="string"&&(f=JSON.parse(f));var p=Array.isArray(h)&&h.length>0,S=!Array.isArray(f[0]);if(p&&s){for(var b=0;b<h.length;b++)b>0&&(T+=n),T+=g(h[b],b);f.length>0&&(T+=o)}for(var v=0;v<f.length;v++){var O=p?h.length:f[v].length,E=!1,j=p?Object.keys(f[v]).length===0:f[v].length===0;if(w&&!p&&(E=w==="greedy"?f[v].join("").trim()==="":f[v].length===1&&f[v][0].length===0),w==="greedy"&&p){for(var C=[],k=0;k<O;k++){var _=S?h[k]:k;C.push(f[v][_])}E=C.join("").trim()===""}if(!E){for(var B=0;B<O;B++){B>0&&!j&&(T+=n);var oe=p&&S?h[B]:B;T+=g(f[v][oe],B)}v<f.length-1&&(!w||O>0&&!j)&&(T+=o)}}return T}function g(h,f){if(typeof h>"u"||h===null)return"";if(h.constructor===Date)return JSON.stringify(h).slice(1,25);h=h.toString().replace(d,u);var w=typeof r=="boolean"&&r||Array.isArray(r)&&r[f]||y(h,D.BAD_DELIMITERS)||h.indexOf(n)>-1||h.charAt(0)===" "||h.charAt(h.length-1)===" ";return w?c+h+c:h}function y(h,f){for(var w=0;w<f.length;w++)if(h.indexOf(f[w])>-1)return!0;return!1}}var se=class{_handle;_config;_finished=!1;_completed=!1;_input=null;_baseIndex=0;_partialLine="";_rowCount=0;_start=0;isFirstChunk=!0;_completeResults={data:[],errors:[],meta:{}};constructor(e){var r={...e};r.chunkSize=parseInt(r.chunkSize),!e.step&&!e.chunk&&(r.chunkSize=null),this._handle=new ae(r),this._handle.streamer=this,this._config=r}parseChunk(e,r){if(this.isFirstChunk&&F(this._config.beforeFirstChunk)){var s=this._config.beforeFirstChunk(e);s!==void 0&&(e=s)}this.isFirstChunk=!1;var n=this._partialLine+e;this._partialLine="";var o=this._handle.parse(n,this._baseIndex,!this._finished);if(!(this._handle.paused()||this._handle.aborted())){var c=o.meta.cursor;this._finished||(this._partialLine=n.substring(c-this._baseIndex),this._baseIndex=c),o&&o.data&&(this._rowCount+=o.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(F(this._config.chunk)&&!r){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return;o=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),!this._completed&&u&&F(this._config.complete)&&(!o||!o.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),o}}_sendError(e){F(this._config.error)&&this._config.error(e)}},ue=class extends se{remaining;constructor(e={}){super(e)}stream(e){return this.remaining=e,this._nextChunk()}_nextChunk(){if(!this._finished){var e=this._config.chunkSize,r=e?this.remaining.substr(0,e):this.remaining;return this.remaining=e?this.remaining.substr(e):"",this._finished=!this.remaining,this.parseChunk(r)}}},tt=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,rt=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,ae=class{_config;_stepCounter=0;_rowCounter=0;_input;_parser;_paused=!1;_aborted=!1;_delimiterError=!1;_fields=[];_results={data:[],errors:[],meta:{}};constructor(e){if(F(e.step)){var r=e.step;e.step=s=>{if(this._results=s,this.needsHeaderRow())this.processResults();else{if(this.processResults(),!this._results.data||this._results.data.length===0)return;this._stepCounter+=s.data.length,e.preview&&this._stepCounter>e.preview?this._parser.abort():r(this._results,this)}}}this._config=e}parse(e,r,s){var n=this._config.quoteChar||'"';if(this._config.newline||(this._config.newline=st(e,n)),this._delimiterError=!1,this._config.delimiter)F(this._config.delimiter)&&(this._config.delimiter=this._config.delimiter(e),this._results.meta.delimiter=this._config.delimiter);else{var o=this.guessDelimiter(e,this._config.newline,this._config.skipEmptyLines,this._config.comments,this._config.delimitersToGuess);o.successful?this._config.delimiter=o.bestDelimiter:(this._delimiterError=!0,this._config.delimiter=D.DefaultDelimiter),this._results.meta.delimiter=this._config.delimiter}var c=Se(this._config);return this._config.preview&&this._config.header&&c.preview++,this._input=e,this._parser=new fe(c),this._results=this._parser.parse(this._input,r,s),this.processResults(),this._paused?{meta:{paused:!0}}:this._results||{meta:{paused:!1}}}paused(){return this._paused}pause(){this._paused=!0,this._parser.abort(),this._input=this._input.substr(this._parser.getCharIndex())}resume(){this._paused=!1,this.streamer.parseChunk(this._input,!0)}aborted(){return this._aborted}abort(){this._aborted=!0,this._parser.abort(),this._results.meta.aborted=!0,F(this._config.complete)&&this._config.complete(this._results),this._input=""}testEmptyLine(e){return this._config.skipEmptyLines==="greedy"?e.join("").trim()==="":e.length===1&&e[0].length===0}processResults(){if(this._results&&this._delimiterError&&(this.addError("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+D.DefaultDelimiter+"'"),this._delimiterError=!1),this._config.skipEmptyLines)for(var e=0;e<this._results.data.length;e++)this.testEmptyLine(this._results.data[e])&&this._results.data.splice(e--,1);return this.needsHeaderRow()&&this.fillHeaderFields(),this.applyHeaderAndDynamicTypingAndTransformation()}needsHeaderRow(){return this._config.header&&this._fields.length===0}fillHeaderFields(){if(!this._results)return;let e=s=>{F(this._config.transformHeader)&&(s=this._config.transformHeader(s)),this._fields.push(s)};if(Array.isArray(this._results.data[0])){for(var r=0;this.needsHeaderRow()&&r<this._results.data.length;r++)this._results.data[r].forEach(e);this._results.data.splice(0,1)}else this._results.data.forEach(e)}shouldApplyDynamicTyping(e){return this._config.dynamicTypingFunction&&this._config.dynamicTyping[e]===void 0&&(this._config.dynamicTyping[e]=this._config.dynamicTypingFunction(e)),(this._config.dynamicTyping[e]||this._config.dynamicTyping)===!0}parseDynamic(e,r){return this.shouldApplyDynamicTyping(e)?r==="true"||r==="TRUE"?!0:r==="false"||r==="FALSE"?!1:tt.test(r)?parseFloat(r):rt.test(r)?new Date(r):r===""?null:r:r}applyHeaderAndDynamicTypingAndTransformation(){if(!this._results||!this._results.data||!this._config.header&&!this._config.dynamicTyping&&!this._config.transform)return this._results;var e=1;return!this._results.data[0]||Array.isArray(this._results.data[0])?(this._results.data=this._results.data.map(this.processRow.bind(this)),e=this._results.data.length):this._results.data=this.processRow(this._results.data,0),this._config.header&&this._results.meta&&(this._results.meta.fields=this._fields),this._rowCounter+=e,this._results}processRow(e,r){var s=this._config.header?{}:[],n;for(n=0;n<e.length;n++){var o=n,c=e[n];this._config.header&&(o=n>=this._fields.length?"__parsed_extra":this._fields[n]),this._config.transform&&(c=this._config.transform(c,o)),c=this.parseDynamic(o,c),o==="__parsed_extra"?(s[o]=s[o]||[],s[o].push(c)):s[o]=c}return this._config.header&&(n>this._fields.length?this.addError("FieldMismatch","TooManyFields","Too many fields: expected "+this._fields.length+" fields but parsed "+n,this._rowCounter+r):n<this._fields.length&&this.addError("FieldMismatch","TooFewFields","Too few fields: expected "+this._fields.length+" fields but parsed "+n,this._rowCounter+r)),s}guessDelimiter(e,r,s,n,o){var c,u,l;o=o||[",","	","|",";",D.RECORD_SEP,D.UNIT_SEP];for(var i=0;i<o.length;i++){var d=o[i],a=0,m=0,g=0;l=void 0;for(var y=new fe({comments:n,delimiter:d,newline:r,preview:10}).parse(e),h=0;h<y.data.length;h++){if(s&&this.testEmptyLine(y.data[h])){g++;continue}var f=y.data[h].length;if(m+=f,typeof l>"u"){l=0;continue}else f>1&&(a+=Math.abs(f-l),l=f)}y.data.length>0&&(m/=y.data.length-g),(typeof u>"u"||a>u)&&m>1.99&&(u=a,c=d)}return this._config.delimiter=c,{successful:!!c,bestDelimiter:c}}addError(e,r,s,n){this._results.errors.push({type:e,code:r,message:s,row:n})}};function st(t,e){t=t.substr(0,1024*1024);var r=new RegExp(V(e)+"([^]*?)"+V(e),"gm");t=t.replace(r,"");var s=t.split("\r"),n=t.split(`
`),o=n.length>1&&n[0].length<s[0].length;if(s.length===1||o)return`
`;for(var c=0,u=0;u<s.length;u++)s[u][0]===`
`&&c++;return c>=s.length/2?`\r
`:"\r"}function V(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fe(t){t=t||{};var e=t.delimiter,r=t.newline,s=t.comments,n=t.step,o=t.preview,c=t.fastMode,u;t.quoteChar===void 0?u='"':u=t.quoteChar;var l=u;if(t.escapeChar!==void 0&&(l=t.escapeChar),(typeof e!="string"||D.BAD_DELIMITERS.indexOf(e)>-1)&&(e=","),s===e)throw new Error("Comment character same as delimiter");s===!0?s="#":(typeof s!="string"||D.BAD_DELIMITERS.indexOf(s)>-1)&&(s=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var i=0,d=!1;this.parse=function(a,m,g){if(typeof a!="string")throw new Error("Input must be a string");var y=a.length,h=e.length,f=r.length,w=s.length,T=F(n);i=0;var p=[],S=[],b=[],v=0;if(!a)return R();if(c||c!==!1&&a.indexOf(u)===-1){for(var O=a.split(r),E=0;E<O.length;E++){let A=O[E];if(i+=A.length,E!==O.length-1)i+=r.length;else if(g)return R();if(!(s&&A.substr(0,w)===s)){if(T){if(p=[],Z(A.split(e)),U(),d)return R()}else Z(A.split(e));if(o&&E>=o)return p=p.slice(0,o),R(!0)}}return R()}for(var j=a.indexOf(e,i),C=a.indexOf(r,i),k=new RegExp(V(l)+V(u),"g"),_;;){if(a[i]===u){for(_=i,i++;;){if(_=a.indexOf(u,_+1),_===-1)return g||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:p.length,index:i}),ie();if(_===y-1){var B=a.substring(i,_).replace(k,u);return ie(B)}if(u===l&&a[_+1]===l){_++;continue}if(!(u!==l&&_!==0&&a[_-1]===l)){var oe=C===-1?j:Math.min(j,C),be=ve(oe);if(a[_+1+be]===e){if(b.push(a.substring(i,_).replace(k,u)),i=_+1+be+h,j=a.indexOf(e,i),C=a.indexOf(r,i),T&&(U(),d))return R();if(o&&p.length>=o)return R(!0);break}var _e=ve(C);if(a.substr(_+1+_e,f)===r){if(b.push(a.substring(i,_).replace(k,u)),Te(_+1+_e+f),j=a.indexOf(e,i),T&&(U(),d))return R();if(o&&p.length>=o)return R(!0);break}S.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:p.length,index:i}),_++}}if(T&&(U(),d))return R();if(o&&p.length>=o)return R(!0);continue}if(s&&b.length===0&&a.substr(i,w)===s){if(C===-1)return R();i=C+f,C=a.indexOf(r,i),j=a.indexOf(e,i);continue}if(j!==-1&&(j<C||C===-1)){b.push(a.substring(i,j)),i=j+h,j=a.indexOf(e,i);continue}if(C!==-1){if(b.push(a.substring(i,C)),Te(C+f),T&&(U(),d))return R();if(o&&p.length>=o)return R(!0);continue}break}return ie();function Z(A){p.push(A),v=i}function ve(A){var Q=0;if(A!==-1){var q=a.substring(_+1,A);q&&q.trim()===""&&(Q=q.length)}return Q}function ie(A){return g||(typeof A>"u"&&(A=a.substr(i)),b.push(A),i=y,Z(b),T&&U()),R()}function Te(A){i=A,Z(b),b=[],C=a.indexOf(r,i)}function R(A,Q){var q=Q||!1;return{data:q?p[0]:p,errors:S,meta:{delimiter:e,linebreak:r,aborted:d,truncated:!!A,cursor:v+(m||0)}}}function U(){n(R(void 0,!0)),p=[],S=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return i}}function Se(t){if(typeof t!="object"||t===null)return t;var e=Array.isArray(t)?[]:{};for(var r in t)e[r]=Se(t[r]);return e}function F(t){return typeof t=="function"}var D={parse:Ge,unparse:et,RECORD_SEP:String.fromCharCode(30),UNIT_SEP:String.fromCharCode(31),BYTE_ORDER_MARK:Fe,BAD_DELIMITERS:["\r",`
`,'"',Fe],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:1024*1024*10,RemoteChunkSize:1024*1024*5,DefaultDelimiter:",",Parser:fe,ParserHandle:ae,ChunkStreamer:se},I=D;var{ChunkStreamer:at}=I,W=class extends at{textDecoder=new TextDecoder(this._config.encoding);constructor(e={}){super(e)}async stream(e){this._input=e;try{for await(let r of e)this.parseChunk(this.getStringChunk(r));this._finished=!0,this.parseChunk("")}catch(r){this._sendError(r)}}_nextChunk(){}getStringChunk(e){return typeof e=="string"?e:this.textDecoder.decode(e,{stream:!0})}};var nt="4.3.3",de="object-row-table",ne={dataType:null,batchType:null,id:"csv",module:"csv",name:"CSV",version:nt,extensions:["csv","tsv","dsv"],mimeTypes:["text/csv","text/tab-separated-values","text/dsv"],category:"table",parse:async(t,e)=>De(new TextDecoder().decode(t),e),parseText:(t,e)=>De(t,e),parseInBatches:ot,options:{csv:{shape:de,optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"]}}};async function De(t,e){let r={...ne.options.csv,...e?.csv},s=it(t),o=r.header==="auto"?ke(s):Boolean(r.header),c={...r,header:o,download:!1,transformHeader:o?Be():void 0,error:a=>{throw new Error(a)}},u=I.parse(t,c),l=u.data,i=u.meta.fields||Ne(r.columnPrefix,s.length),d=r.shape||de;switch(d){case"object-row-table":return{shape:"object-row-table",data:l.map(a=>Array.isArray(a)?H(a,i):a)};case"array-row-table":return{shape:"array-row-table",data:l.map(a=>Array.isArray(a)?a:z(a,i))};default:throw new Error(d)}}function ot(t,e){e={...e},e.batchSize==="auto"&&(e.batchSize=4e3);let r={...ne.options.csv,...e?.csv},s=new M,n=!0,o=null,c=null,u=null,l={...r,header:!1,download:!1,chunkSize:1024*1024*5,skipEmptyLines:!1,step(i){let d=i.data;if(r.skipEmptyLines&&d.flat().join("").trim()==="")return;let a=i.meta.cursor;if(n&&!o&&(r.header==="auto"?ke(d):Boolean(r.header))){o=d.map(Be());return}n&&(n=!1,o||(o=Ne(r.columnPrefix,d.length)),u=ht(d,o)),r.optimizeMemoryUsage&&(d=JSON.parse(JSON.stringify(d)));let m=r.shape||de;c=c||new L(u,{shape:m,...e});try{c.addRow(d);let g=c&&c.getFullBatch({bytesUsed:a});g&&s.enqueue(g)}catch(g){s.enqueue(g)}},complete(i){try{let d=i.meta.cursor,a=c&&c.getFinalBatch({bytesUsed:d});a&&s.enqueue(a)}catch(d){s.enqueue(d)}s.close()}};return I.parse(t,l,W),s}function ke(t){return t&&t.every(e=>typeof e=="string")}function it(t){return I.parse(t,{dynamicTyping:!0,preview:1}).data[0]}function Be(){let t=new Set;return e=>{let r=e,s=1;for(;t.has(r);)r=`${e}.${s}`,s++;return t.add(r),r}}function Ne(t,e=0){let r=[];for(let s=0;s<e;s++)r.push(`${t}${s+1}`);return r}function ht(t,e){let r=e?{}:[];for(let s=0;s<t.length;s++){let n=e&&e[s]||s;switch(typeof t[s]){case"number":case"boolean":r[n]={name:String(n),index:s,type:Float32Array};break;case"string":default:r[n]={name:String(n),index:s,type:Array}}}return r}var Ue={},me={},pe=34,J=10,ge=13;function Me(t){return new Function("d","return {"+t.map(function(e,r){return JSON.stringify(e)+": d["+r+'] || ""'}).join(",")+"}")}function ct(t,e){var r=Me(t);return function(s,n){return e(r(s),n,t)}}function Le(t){var e=Object.create(null),r=[];return t.forEach(function(s){for(var n in s)n in e||r.push(e[n]=n)}),r}function x(t,e){var r=t+"",s=r.length;return s<e?new Array(e-s+1).join(0)+r:r}function lt(t){return t<0?"-"+x(-t,6):t>9999?"+"+x(t,6):x(t,4)}function ut(t){var e=t.getUTCHours(),r=t.getUTCMinutes(),s=t.getUTCSeconds(),n=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":lt(t.getUTCFullYear(),4)+"-"+x(t.getUTCMonth()+1,2)+"-"+x(t.getUTCDate(),2)+(n?"T"+x(e,2)+":"+x(r,2)+":"+x(s,2)+"."+x(n,3)+"Z":s?"T"+x(e,2)+":"+x(r,2)+":"+x(s,2)+"Z":r||e?"T"+x(e,2)+":"+x(r,2)+"Z":"")}function Ie(t){var e=new RegExp('["'+t+`
\r]`),r=t.charCodeAt(0);function s(a,m){var g,y,h=n(a,function(f,w){if(g)return g(f,w-1);y=f,g=m?ct(f,m):Me(f)});return h.columns=y||[],h}function n(a,m){var g=[],y=a.length,h=0,f=0,w,T=y<=0,p=!1;a.charCodeAt(y-1)===J&&--y,a.charCodeAt(y-1)===ge&&--y;function S(){if(T)return me;if(p)return p=!1,Ue;var v,O=h,E;if(a.charCodeAt(O)===pe){for(;h++<y&&a.charCodeAt(h)!==pe||a.charCodeAt(++h)===pe;);return(v=h)>=y?T=!0:(E=a.charCodeAt(h++))===J?p=!0:E===ge&&(p=!0,a.charCodeAt(h)===J&&++h),a.slice(O+1,v-1).replace(/""/g,'"')}for(;h<y;){if((E=a.charCodeAt(v=h++))===J)p=!0;else if(E===ge)p=!0,a.charCodeAt(h)===J&&++h;else if(E!==r)continue;return a.slice(O,v)}return T=!0,a.slice(O,y)}for(;(w=S())!==me;){for(var b=[];w!==Ue&&w!==me;)b.push(w),w=S();m&&(b=m(b,f++))==null||g.push(b)}return g}function o(a,m){return a.map(function(g){return m.map(function(y){return d(g[y])}).join(t)})}function c(a,m){return m==null&&(m=Le(a)),[m.map(d).join(t)].concat(o(a,m)).join(`
`)}function u(a,m){return m==null&&(m=Le(a)),o(a,m).join(`
`)}function l(a){return a.map(i).join(`
`)}function i(a){return a.map(d).join(t)}function d(a){return a==null?"":a instanceof Date?ut(a):e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}return{parse:s,parseRows:n,format:c,formatBody:u,formatRows:l,formatRow:i,formatValue:d}}var N=Ie(","),ft=N.parse,dt=N.parseRows,mt=N.format,pt=N.formatBody,ye=N.formatRows,gt=N.formatRow,yt=N.formatValue;function we(t,e={csv:{useDisplayNames:!0}}){let r=e.useDisplayNames||e.csv?.useDisplayNames,o=[(t.schema?.fields||[]).map(c=>{let u=c.metadata?.displayName;return r&&typeof u=="string"?u:c.name})];for(let c of le(t)){let u=[];for(let l=0;l<ce(t);++l){let i=c[l];u[l]=wt(i)}o.push(u)}return ye(o)}var wt=t=>t==null?null:t instanceof Date?t.toISOString():typeof t=="object"?JSON.stringify(t):String(t);var qe={id:"csv",version:"latest",module:"csv",name:"CSV",extensions:["csv"],mimeTypes:["text/csv"],options:{csv:{useDisplayNames:!1}},text:!0,encode:async(t,e)=>new TextEncoder().encode(we(t,e)).buffer,encodeTextSync:(t,e)=>we(t,e)};return Ye($);})();
/* @license
Papa Parse
v5.0.0-beta.0
https://github.com/mholt/PapaParse
License: MIT
*/
      return __exports__;
      });
