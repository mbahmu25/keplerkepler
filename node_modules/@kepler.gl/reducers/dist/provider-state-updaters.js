"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resetProviderStatusUpdater = exports.postSaveLoadSuccessUpdater = exports.loadCloudMapUpdater = exports.loadCloudMapSuccessUpdater = exports.loadCloudMapSuccess2Updater = exports.loadCloudMapErrorUpdater = exports.exportFileToCloudUpdater = exports.exportFileSuccessUpdater = exports.exportFileErrorUpdater = exports.INITIAL_PROVIDER_STATE = void 0;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _tasks = _interopRequireWildcard(require("react-palm/tasks"));
var _console = _interopRequireDefault(require("global/console"));
var _utils = require("@kepler.gl/utils");
var _commonUtils = require("@kepler.gl/common-utils");
var _tasks2 = require("@kepler.gl/tasks");
var _actions = require("@kepler.gl/actions");
var _constants = require("@kepler.gl/constants");
var _cloudProviders = require("@kepler.gl/cloud-providers");
var _processors = require("@kepler.gl/processors");
var _table = require("@kepler.gl/table");
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
var INITIAL_PROVIDER_STATE = exports.INITIAL_PROVIDER_STATE = {
  isProviderLoading: false,
  isCloudMapLoading: false,
  providerError: null,
  currentProvider: null,
  successInfo: {},
  mapSaved: null,
  savedMapId: null,
  visualizations: []
};
function createActionTask(action, payload) {
  if (typeof action === 'function') {
    return (0, _tasks2.ACTION_TASK)().map(function () {
      return action(payload);
    });
  }
  return null;
}
function _validateProvider(provider, method) {
  if (!provider) {
    _console["default"].error("provider is not defined");
    return false;
  }
  if (typeof provider[method] !== 'function') {
    _console["default"].error("".concat(method, " is not a function of Cloud provider: ").concat(provider.name));
    return false;
  }
  return true;
}
function createGlobalNotificationTasks(_ref) {
  var type = _ref.type,
    message = _ref.message,
    _ref$delayClose = _ref.delayClose,
    delayClose = _ref$delayClose === void 0 ? true : _ref$delayClose;
  var id = (0, _commonUtils.generateHashId)();
  var successNote = {
    id: id,
    type: _constants.DEFAULT_NOTIFICATION_TYPES[type || ''] || _constants.DEFAULT_NOTIFICATION_TYPES.success,
    topic: _constants.DEFAULT_NOTIFICATION_TOPICS.global,
    message: message
  };
  var task = (0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.addNotification)(successNote);
  });
  return delayClose ? [task, (0, _tasks2.DELAY_TASK)(3000).map(function () {
    return (0, _actions.removeNotification)(id);
  })] : [task];
}

/**
 * This method will export the current kepler config file to the chosen cloud proder
 * add returns a share URL
 *
 */
var exportFileToCloudUpdater = exports.exportFileToCloudUpdater = function exportFileToCloudUpdater(state, action) {
  var _action$payload = action.payload,
    mapData = _action$payload.mapData,
    provider = _action$payload.provider,
    _action$payload$optio = _action$payload.options,
    options = _action$payload$optio === void 0 ? {} : _action$payload$optio,
    onSuccess = _action$payload.onSuccess,
    onError = _action$payload.onError,
    closeModal = _action$payload.closeModal;
  if (!_validateProvider(provider, 'uploadMap')) {
    return state;
  }
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: true,
    currentProvider: provider.name
  });

  // payload called by provider.uploadMap
  var payload = {
    mapData: mapData,
    options: options
  };
  var uploadFileTask = (0, _tasks2.EXPORT_FILE_TO_CLOUD_TASK)({
    provider: provider,
    payload: payload
  }).bimap(
  // success
  function (response) {
    return (0, _actions.exportFileSuccess)({
      response: response,
      provider: provider,
      options: options,
      onSuccess: onSuccess,
      closeModal: closeModal
    });
  },
  // error
  function (error) {
    return (0, _actions.exportFileError)({
      error: error,
      provider: provider,
      options: options,
      onError: onError
    });
  });
  return (0, _tasks.withTask)(newState, uploadFileTask);
};
var exportFileSuccessUpdater = exports.exportFileSuccessUpdater = function exportFileSuccessUpdater(state, action) {
  var _response$info$id, _response$info;
  var _action$payload2 = action.payload,
    response = _action$payload2.response,
    provider = _action$payload2.provider,
    _action$payload2$opti = _action$payload2.options,
    options = _action$payload2$opti === void 0 ? {} : _action$payload2$opti,
    onSuccess = _action$payload2.onSuccess,
    closeModal = _action$payload2.closeModal;
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: false,
    // TODO: do we always have to store this?
    successInfo: response
  }, !options.isPublic ? {
    mapSaved: provider.name,
    savedMapId: (_response$info$id = response === null || response === void 0 || (_response$info = response.info) === null || _response$info === void 0 ? void 0 : _response$info.id) !== null && _response$info$id !== void 0 ? _response$info$id : null
  } : {});
  var tasks = [createActionTask(onSuccess, {
    response: response,
    provider: provider,
    options: options
  }), closeModal && (0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.postSaveLoadSuccess)("Map saved to ".concat(state.currentProvider, "!"));
  })].filter(function (d) {
    return d;
  });
  return tasks.length ? (0, _tasks.withTask)(newState, tasks) : newState;
};

/**
 * Close modal on success and display notification
 */
var postSaveLoadSuccessUpdater = exports.postSaveLoadSuccessUpdater = function postSaveLoadSuccessUpdater(state, action) {
  var message = action.payload || "Saved / Load to ".concat(state.currentProvider, " Success");
  var tasks = [(0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.toggleModal)(null);
  }), (0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.resetProviderStatus)();
  })].concat((0, _toConsumableArray2["default"])(createGlobalNotificationTasks({
    message: message
  })));
  return (0, _tasks.withTask)(state, tasks);
};
var exportFileErrorUpdater = exports.exportFileErrorUpdater = function exportFileErrorUpdater(state, action) {
  var _action$payload3 = action.payload,
    error = _action$payload3.error,
    provider = _action$payload3.provider,
    onError = _action$payload3.onError;
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: false
  });
  if (isFileConflict(error)) {
    newState.mapSaved = provider.name;
    return (0, _tasks.withTask)(newState, [(0, _tasks2.ACTION_TASK)().map(function () {
      return (0, _actions.toggleModal)(_constants.OVERWRITE_MAP_ID);
    })]);
  }
  newState.providerError = (0, _utils.getError)(error);
  var task = createActionTask(onError, {
    error: error,
    provider: provider
  });
  return task ? (0, _tasks.withTask)(newState, task) : newState;
};
var loadCloudMapUpdater = exports.loadCloudMapUpdater = function loadCloudMapUpdater(state, action) {
  var _action$payload4 = action.payload,
    loadParams = _action$payload4.loadParams,
    provider = _action$payload4.provider,
    onSuccess = _action$payload4.onSuccess,
    onError = _action$payload4.onError;
  if (!loadParams) {
    _console["default"].warn('load map error: loadParams is undefined');
    return state;
  }
  if (!_validateProvider(provider, 'downloadMap')) {
    return state;
  }
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: true,
    isCloudMapLoading: true
  });

  // payload called by provider.downloadMap
  var uploadFileTask = (0, _tasks2.LOAD_CLOUD_MAP_TASK)({
    provider: provider,
    payload: loadParams
  }).bimap(
  // success
  // @ts-expect-error
  function (response) {
    return (0, _actions.loadCloudMapSuccess)({
      response: response,
      loadParams: loadParams,
      provider: provider,
      onSuccess: onSuccess,
      onError: onError
    });
  },
  // error
  // @ts-expect-error
  function (error) {
    return (0, _actions.loadCloudMapError)({
      error: error,
      provider: provider,
      onError: onError
    });
  });
  return (0, _tasks.withTask)(newState, uploadFileTask);
};
function isFileConflict(error) {
  return error && error.message === _cloudProviders.FILE_CONFLICT_MSG;
}
function checkLoadMapResponseError(response) {
  if (!response || !(0, _utils.isPlainObject)(response)) {
    return new Error('Load map response is empty');
  }
  if (!(0, _utils.isPlainObject)(response.map)) {
    return new Error("Load map response should be an object property \"map\"");
  }
  if (!response.map.datasets || !response.map.config) {
    return new Error("Load map response.map should be an object with property datasets or config");
  }
  return null;
}
function getDatasetHandler(format) {
  var _getApplicationConfig;
  var defaultHandler = _processors.DATASET_HANDLERS[_constants.DATASET_FORMATS.csv];
  if (!format) {
    _console["default"].warn('format is not provided in load map response, will use csv by default');
    return defaultHandler;
  }

  // use custom processors from table class
  var TableClass = (_getApplicationConfig = (0, _utils.getApplicationConfig)().table) !== null && _getApplicationConfig !== void 0 ? _getApplicationConfig : _table.KeplerTable;
  if (typeof TableClass.getFileProcessor === 'function') {
    var processorResult = TableClass.getFileProcessor(null, format);
    if (!processorResult.processor) {
      _console["default"].warn("No processor found for format ".concat(format, ", will use csv by default"));
      return defaultHandler;
    }
    return processorResult.processor;
  }
  if (!_processors.DATASET_HANDLERS[format]) {
    var supportedFormat = Object.keys(_constants.DATASET_FORMATS).map(function (k) {
      return "'".concat(k, "'");
    }).join(', ');
    _console["default"].warn("unknown format ".concat(format, ". Please use one of ").concat(supportedFormat, ", will use csv by default"));
    return defaultHandler;
  }
  return _processors.DATASET_HANDLERS[format];
}

/**
 * A task to handle async processorMethod
 * @param param0
 * @returns
 */
function parseLoadMapResponseTask(_x) {
  return _parseLoadMapResponseTask.apply(this, arguments);
}
function _parseLoadMapResponseTask() {
  _parseLoadMapResponseTask = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(_ref2) {
    var response, loadParams, provider, map, format, processorMethod, parsedDatasets, parsedMap, datasets, info;
    return _regenerator["default"].wrap(function _callee2$(_context2) {
      while (1) switch (_context2.prev = _context2.next) {
        case 0:
          response = _ref2.response, loadParams = _ref2.loadParams, provider = _ref2.provider;
          map = response.map, format = response.format;
          processorMethod = getDatasetHandler(format);
          parsedDatasets = [];
          if (!(format === _constants.DATASET_FORMATS.keplergl && processorMethod !== _processors.DATASET_HANDLERS[_constants.DATASET_FORMATS.keplergl])) {
            _context2.next = 11;
            break;
          }
          _context2.next = 7;
          return processorMethod(map);
        case 7:
          parsedMap = _context2.sent;
          parsedDatasets = parsedMap.datasets;
          _context2.next = 15;
          break;
        case 11:
          datasets = (0, _commonUtils.toArray)(map.datasets);
          _context2.next = 14;
          return Promise.all(datasets.map( /*#__PURE__*/function () {
            var _ref3 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(ds) {
              var info, data;
              return _regenerator["default"].wrap(function _callee$(_context) {
                while (1) switch (_context.prev = _context.next) {
                  case 0:
                    if (!(format === _constants.DATASET_FORMATS.keplergl)) {
                      _context.next = 4;
                      break;
                    }
                    _context.next = 3;
                    return processorMethod(ds);
                  case 3:
                    return _context.abrupt("return", _context.sent);
                  case 4:
                    info = ds && ds.info || {
                      id: (0, _commonUtils.generateHashId)(6)
                    };
                    _context.next = 7;
                    return processorMethod(ds.data || ds);
                  case 7:
                    data = _context.sent;
                    return _context.abrupt("return", {
                      info: info,
                      data: data
                    });
                  case 9:
                  case "end":
                    return _context.stop();
                }
              }, _callee);
            }));
            return function (_x2) {
              return _ref3.apply(this, arguments);
            };
          }()));
        case 14:
          parsedDatasets = _context2.sent;
        case 15:
          info = _objectSpread(_objectSpread({}, map.info), {}, {
            provider: provider.name,
            loadParams: loadParams
          });
          return _context2.abrupt("return", _objectSpread(_objectSpread({
            datasets: parsedDatasets,
            info: info
          }, map.config ? {
            config: map.config
          } : {}), {}, {
            options: {
              // do not center map when loading cloud map
              centerMap: false
            }
          }));
        case 17:
        case "end":
          return _context2.stop();
      }
    }, _callee2);
  }));
  return _parseLoadMapResponseTask.apply(this, arguments);
}
var PARSE_LOAD_MAP_RESPONSE_TASK = _tasks["default"].fromPromise(parseLoadMapResponseTask, 'PARSE_LOAD_MAP_RESPONSE_TASK');

/**
 * Used to load resources stored in a private storage.
 */
var loadCloudMapSuccessUpdater = exports.loadCloudMapSuccessUpdater = function loadCloudMapSuccessUpdater(state, action) {
  var _action$payload5 = action.payload,
    response = _action$payload5.response,
    loadParams = _action$payload5.loadParams,
    provider = _action$payload5.provider,
    onError = _action$payload5.onError;
  var formatError = checkLoadMapResponseError(response);
  if (formatError) {
    // if response format is not correct
    return exportFileErrorUpdater(state, {
      payload: {
        error: formatError,
        provider: provider,
        onError: onError
      }
    });
  }

  // processorMethod can be async so create a task
  var parseLoadMapResponseTask = PARSE_LOAD_MAP_RESPONSE_TASK({
    response: response,
    loadParams: loadParams,
    provider: provider
  }).bimap(function (datasetsPayload) {
    return (0, _actions.loadCloudMapSuccess2)(_objectSpread(_objectSpread({}, action.payload), {}, {
      datasetsPayload: datasetsPayload
    }));
  }, function (error) {
    return exportFileErrorUpdater(state, {
      payload: {
        error: error,
        provider: provider,
        onError: onError
      }
    });
  });
  return (0, _tasks.withTask)(state, parseLoadMapResponseTask);
};
var loadCloudMapSuccess2Updater = exports.loadCloudMapSuccess2Updater = function loadCloudMapSuccess2Updater(state, action) {
  var _action$payload6 = action.payload,
    datasetsPayload = _action$payload6.datasetsPayload,
    response = _action$payload6.response,
    loadParams = _action$payload6.loadParams,
    provider = _action$payload6.provider,
    onSuccess = _action$payload6.onSuccess;
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    mapSaved: provider.name,
    currentProvider: provider.name,
    isCloudMapLoading: false,
    isProviderLoading: false
  });
  var tasks = [(0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.addDataToMap)(datasetsPayload);
  }), createActionTask(onSuccess, {
    response: response,
    loadParams: loadParams,
    provider: provider
  }), (0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.postSaveLoadSuccess)("Map from ".concat(provider.name, " loaded"));
  })].filter(function (d) {
    return d;
  });
  return tasks.length ? (0, _tasks.withTask)(newState, tasks) : newState;
};
var loadCloudMapErrorUpdater = exports.loadCloudMapErrorUpdater = function loadCloudMapErrorUpdater(state, action) {
  var message = (0, _utils.getError)(action.payload.error) || "Error loading saved map";
  _console["default"].warn(message);
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: false,
    isCloudMapLoading: false,
    providerError: null
  });
  return (0, _tasks.withTask)(newState, createGlobalNotificationTasks({
    type: 'error',
    message: message,
    delayClose: false
  }));
};
var resetProviderStatusUpdater = exports.resetProviderStatusUpdater = function resetProviderStatusUpdater(state) {
  return _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: false,
    providerError: null,
    isCloudMapLoading: false,
    successInfo: {}
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdGFza3MiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfY29uc29sZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdXRpbHMiLCJfY29tbW9uVXRpbHMiLCJfdGFza3MyIiwiX2FjdGlvbnMiLCJfY29uc3RhbnRzIiwiX2Nsb3VkUHJvdmlkZXJzIiwiX3Byb2Nlc3NvcnMiLCJfdGFibGUiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJvd25LZXlzIiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm8iLCJmaWx0ZXIiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJJTklUSUFMX1BST1ZJREVSX1NUQVRFIiwiZXhwb3J0cyIsImlzUHJvdmlkZXJMb2FkaW5nIiwiaXNDbG91ZE1hcExvYWRpbmciLCJwcm92aWRlckVycm9yIiwiY3VycmVudFByb3ZpZGVyIiwic3VjY2Vzc0luZm8iLCJtYXBTYXZlZCIsInNhdmVkTWFwSWQiLCJ2aXN1YWxpemF0aW9ucyIsImNyZWF0ZUFjdGlvblRhc2siLCJhY3Rpb24iLCJwYXlsb2FkIiwiQUNUSU9OX1RBU0siLCJtYXAiLCJfdmFsaWRhdGVQcm92aWRlciIsInByb3ZpZGVyIiwibWV0aG9kIiwiQ29uc29sZSIsImVycm9yIiwiY29uY2F0IiwibmFtZSIsImNyZWF0ZUdsb2JhbE5vdGlmaWNhdGlvblRhc2tzIiwiX3JlZiIsInR5cGUiLCJtZXNzYWdlIiwiX3JlZiRkZWxheUNsb3NlIiwiZGVsYXlDbG9zZSIsImlkIiwiZ2VuZXJhdGVIYXNoSWQiLCJzdWNjZXNzTm90ZSIsIkRFRkFVTFRfTk9USUZJQ0FUSU9OX1RZUEVTIiwic3VjY2VzcyIsInRvcGljIiwiREVGQVVMVF9OT1RJRklDQVRJT05fVE9QSUNTIiwiZ2xvYmFsIiwidGFzayIsImFkZE5vdGlmaWNhdGlvbiIsIkRFTEFZX1RBU0siLCJyZW1vdmVOb3RpZmljYXRpb24iLCJleHBvcnRGaWxlVG9DbG91ZFVwZGF0ZXIiLCJzdGF0ZSIsIl9hY3Rpb24kcGF5bG9hZCIsIm1hcERhdGEiLCJfYWN0aW9uJHBheWxvYWQkb3B0aW8iLCJvcHRpb25zIiwib25TdWNjZXNzIiwib25FcnJvciIsImNsb3NlTW9kYWwiLCJuZXdTdGF0ZSIsInVwbG9hZEZpbGVUYXNrIiwiRVhQT1JUX0ZJTEVfVE9fQ0xPVURfVEFTSyIsImJpbWFwIiwicmVzcG9uc2UiLCJleHBvcnRGaWxlU3VjY2VzcyIsImV4cG9ydEZpbGVFcnJvciIsIndpdGhUYXNrIiwiZXhwb3J0RmlsZVN1Y2Nlc3NVcGRhdGVyIiwiX3Jlc3BvbnNlJGluZm8kaWQiLCJfcmVzcG9uc2UkaW5mbyIsIl9hY3Rpb24kcGF5bG9hZDIiLCJfYWN0aW9uJHBheWxvYWQyJG9wdGkiLCJpc1B1YmxpYyIsImluZm8iLCJ0YXNrcyIsInBvc3RTYXZlTG9hZFN1Y2Nlc3MiLCJkIiwicG9zdFNhdmVMb2FkU3VjY2Vzc1VwZGF0ZXIiLCJ0b2dnbGVNb2RhbCIsInJlc2V0UHJvdmlkZXJTdGF0dXMiLCJfdG9Db25zdW1hYmxlQXJyYXkyIiwiZXhwb3J0RmlsZUVycm9yVXBkYXRlciIsIl9hY3Rpb24kcGF5bG9hZDMiLCJpc0ZpbGVDb25mbGljdCIsIk9WRVJXUklURV9NQVBfSUQiLCJnZXRFcnJvciIsImxvYWRDbG91ZE1hcFVwZGF0ZXIiLCJfYWN0aW9uJHBheWxvYWQ0IiwibG9hZFBhcmFtcyIsIndhcm4iLCJMT0FEX0NMT1VEX01BUF9UQVNLIiwibG9hZENsb3VkTWFwU3VjY2VzcyIsImxvYWRDbG91ZE1hcEVycm9yIiwiRklMRV9DT05GTElDVF9NU0ciLCJjaGVja0xvYWRNYXBSZXNwb25zZUVycm9yIiwiaXNQbGFpbk9iamVjdCIsIkVycm9yIiwiZGF0YXNldHMiLCJjb25maWciLCJnZXREYXRhc2V0SGFuZGxlciIsImZvcm1hdCIsIl9nZXRBcHBsaWNhdGlvbkNvbmZpZyIsImRlZmF1bHRIYW5kbGVyIiwiREFUQVNFVF9IQU5ETEVSUyIsIkRBVEFTRVRfRk9STUFUUyIsImNzdiIsIlRhYmxlQ2xhc3MiLCJnZXRBcHBsaWNhdGlvbkNvbmZpZyIsInRhYmxlIiwiS2VwbGVyVGFibGUiLCJnZXRGaWxlUHJvY2Vzc29yIiwicHJvY2Vzc29yUmVzdWx0IiwicHJvY2Vzc29yIiwic3VwcG9ydGVkRm9ybWF0IiwiayIsImpvaW4iLCJwYXJzZUxvYWRNYXBSZXNwb25zZVRhc2siLCJfeCIsIl9wYXJzZUxvYWRNYXBSZXNwb25zZVRhc2siLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJtYXJrIiwiX2NhbGxlZTIiLCJfcmVmMiIsInByb2Nlc3Nvck1ldGhvZCIsInBhcnNlZERhdGFzZXRzIiwicGFyc2VkTWFwIiwid3JhcCIsIl9jYWxsZWUyJCIsIl9jb250ZXh0MiIsInByZXYiLCJuZXh0Iiwia2VwbGVyZ2wiLCJzZW50IiwidG9BcnJheSIsIlByb21pc2UiLCJhbGwiLCJfcmVmMyIsIl9jYWxsZWUiLCJkcyIsImRhdGEiLCJfY2FsbGVlJCIsIl9jb250ZXh0IiwiYWJydXB0Iiwic3RvcCIsIl94MiIsImNlbnRlck1hcCIsIlBBUlNFX0xPQURfTUFQX1JFU1BPTlNFX1RBU0siLCJUYXNrIiwiZnJvbVByb21pc2UiLCJsb2FkQ2xvdWRNYXBTdWNjZXNzVXBkYXRlciIsIl9hY3Rpb24kcGF5bG9hZDUiLCJmb3JtYXRFcnJvciIsImRhdGFzZXRzUGF5bG9hZCIsImxvYWRDbG91ZE1hcFN1Y2Nlc3MyIiwibG9hZENsb3VkTWFwU3VjY2VzczJVcGRhdGVyIiwiX2FjdGlvbiRwYXlsb2FkNiIsImFkZERhdGFUb01hcCIsImxvYWRDbG91ZE1hcEVycm9yVXBkYXRlciIsInJlc2V0UHJvdmlkZXJTdGF0dXNVcGRhdGVyIl0sInNvdXJjZXMiOlsiLi4vc3JjL3Byb3ZpZGVyLXN0YXRlLXVwZGF0ZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBUYXNrLCB7d2l0aFRhc2t9IGZyb20gJ3JlYWN0LXBhbG0vdGFza3MnO1xuaW1wb3J0IENvbnNvbGUgZnJvbSAnZ2xvYmFsL2NvbnNvbGUnO1xuaW1wb3J0IHtnZXRBcHBsaWNhdGlvbkNvbmZpZywgZ2V0RXJyb3IsIGlzUGxhaW5PYmplY3R9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuaW1wb3J0IHtnZW5lcmF0ZUhhc2hJZCwgdG9BcnJheX0gZnJvbSAnQGtlcGxlci5nbC9jb21tb24tdXRpbHMnO1xuaW1wb3J0IHtcbiAgRVhQT1JUX0ZJTEVfVE9fQ0xPVURfVEFTSyxcbiAgQUNUSU9OX1RBU0ssXG4gIERFTEFZX1RBU0ssXG4gIExPQURfQ0xPVURfTUFQX1RBU0tcbn0gZnJvbSAnQGtlcGxlci5nbC90YXNrcyc7XG5pbXBvcnQge1xuICBleHBvcnRGaWxlU3VjY2VzcyxcbiAgZXhwb3J0RmlsZUVycm9yLFxuICBwb3N0U2F2ZUxvYWRTdWNjZXNzLFxuICBsb2FkQ2xvdWRNYXBTdWNjZXNzLFxuICBsb2FkQ2xvdWRNYXBTdWNjZXNzMixcbiAgbG9hZENsb3VkTWFwRXJyb3IsXG4gIHJlc2V0UHJvdmlkZXJTdGF0dXMsXG4gIHJlbW92ZU5vdGlmaWNhdGlvbixcbiAgdG9nZ2xlTW9kYWwsXG4gIGFkZE5vdGlmaWNhdGlvbixcbiAgYWRkRGF0YVRvTWFwLFxuICBQcm92aWRlckFjdGlvbnNcbn0gZnJvbSAnQGtlcGxlci5nbC9hY3Rpb25zJztcbmltcG9ydCB7XG4gIERFRkFVTFRfTk9USUZJQ0FUSU9OX1RZUEVTLFxuICBERUZBVUxUX05PVElGSUNBVElPTl9UT1BJQ1MsXG4gIERBVEFTRVRfRk9STUFUUyxcbiAgT1ZFUldSSVRFX01BUF9JRFxufSBmcm9tICdAa2VwbGVyLmdsL2NvbnN0YW50cyc7XG5pbXBvcnQge0FkZERhdGFUb01hcFBheWxvYWQsIEV4cG9ydEZpbGVUb0Nsb3VkUGF5bG9hZH0gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5cbmltcG9ydCB7RklMRV9DT05GTElDVF9NU0csIE1hcExpc3RJdGVtfSBmcm9tICdAa2VwbGVyLmdsL2Nsb3VkLXByb3ZpZGVycyc7XG5pbXBvcnQge0RBVEFTRVRfSEFORExFUlN9IGZyb20gJ0BrZXBsZXIuZ2wvcHJvY2Vzc29ycyc7XG5pbXBvcnQge0tlcGxlclRhYmxlfSBmcm9tICdAa2VwbGVyLmdsL3RhYmxlJztcblxudHlwZSBBY3Rpb25QYXlsb2FkPFA+ID0ge1xuICB0eXBlPzogc3RyaW5nO1xuICBwYXlsb2FkOiBQO1xufTtcblxuZXhwb3J0IHR5cGUgUHJvdmlkZXJTdGF0ZSA9IHtcbiAgaXNQcm92aWRlckxvYWRpbmc6IGJvb2xlYW47XG4gIGlzQ2xvdWRNYXBMb2FkaW5nOiBib29sZWFuO1xuICBwcm92aWRlckVycm9yOiBhbnk7XG4gIGN1cnJlbnRQcm92aWRlcjogc3RyaW5nIHwgbnVsbDtcbiAgc3VjY2Vzc0luZm86IGFueTtcbiAgbWFwU2F2ZWQ6IG51bGwgfCBzdHJpbmc7XG4gIHNhdmVkTWFwSWQ6IG51bGwgfCBzdHJpbmc7XG4gIGluaXRpYWxTdGF0ZT86IGFueTtcbiAgdmlzdWFsaXphdGlvbnM6IE1hcExpc3RJdGVtW107XG59O1xuXG5leHBvcnQgY29uc3QgSU5JVElBTF9QUk9WSURFUl9TVEFURTogUHJvdmlkZXJTdGF0ZSA9IHtcbiAgaXNQcm92aWRlckxvYWRpbmc6IGZhbHNlLFxuICBpc0Nsb3VkTWFwTG9hZGluZzogZmFsc2UsXG4gIHByb3ZpZGVyRXJyb3I6IG51bGwsXG4gIGN1cnJlbnRQcm92aWRlcjogbnVsbCxcbiAgc3VjY2Vzc0luZm86IHt9LFxuICBtYXBTYXZlZDogbnVsbCxcbiAgc2F2ZWRNYXBJZDogbnVsbCxcbiAgdmlzdWFsaXphdGlvbnM6IFtdXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVBY3Rpb25UYXNrKGFjdGlvbiwgcGF5bG9hZCkge1xuICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBBQ1RJT05fVEFTSygpLm1hcCgoKSA9PiBhY3Rpb24ocGF5bG9hZCkpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIF92YWxpZGF0ZVByb3ZpZGVyKHByb3ZpZGVyLCBtZXRob2QpIHtcbiAgaWYgKCFwcm92aWRlcikge1xuICAgIENvbnNvbGUuZXJyb3IoYHByb3ZpZGVyIGlzIG5vdCBkZWZpbmVkYCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwcm92aWRlclttZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgQ29uc29sZS5lcnJvcihgJHttZXRob2R9IGlzIG5vdCBhIGZ1bmN0aW9uIG9mIENsb3VkIHByb3ZpZGVyOiAke3Byb3ZpZGVyLm5hbWV9YCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdsb2JhbE5vdGlmaWNhdGlvblRhc2tzKHtcbiAgdHlwZSxcbiAgbWVzc2FnZSxcbiAgZGVsYXlDbG9zZSA9IHRydWVcbn06IHtcbiAgdHlwZT86IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBkZWxheUNsb3NlPzogYm9vbGVhbjtcbn0pIHtcbiAgY29uc3QgaWQgPSBnZW5lcmF0ZUhhc2hJZCgpO1xuICBjb25zdCBzdWNjZXNzTm90ZSA9IHtcbiAgICBpZCxcbiAgICB0eXBlOiBERUZBVUxUX05PVElGSUNBVElPTl9UWVBFU1t0eXBlIHx8ICcnXSB8fCBERUZBVUxUX05PVElGSUNBVElPTl9UWVBFUy5zdWNjZXNzLFxuICAgIHRvcGljOiBERUZBVUxUX05PVElGSUNBVElPTl9UT1BJQ1MuZ2xvYmFsLFxuICAgIG1lc3NhZ2VcbiAgfTtcbiAgY29uc3QgdGFzayA9IEFDVElPTl9UQVNLKCkubWFwKCgpID0+IGFkZE5vdGlmaWNhdGlvbihzdWNjZXNzTm90ZSkpO1xuICByZXR1cm4gZGVsYXlDbG9zZSA/IFt0YXNrLCBERUxBWV9UQVNLKDMwMDApLm1hcCgoKSA9PiByZW1vdmVOb3RpZmljYXRpb24oaWQpKV0gOiBbdGFza107XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2Qgd2lsbCBleHBvcnQgdGhlIGN1cnJlbnQga2VwbGVyIGNvbmZpZyBmaWxlIHRvIHRoZSBjaG9zZW4gY2xvdWQgcHJvZGVyXG4gKiBhZGQgcmV0dXJucyBhIHNoYXJlIFVSTFxuICpcbiAqL1xuZXhwb3J0IGNvbnN0IGV4cG9ydEZpbGVUb0Nsb3VkVXBkYXRlciA9IChcbiAgc3RhdGU6IFByb3ZpZGVyU3RhdGUsXG4gIGFjdGlvbjogQWN0aW9uUGF5bG9hZDxFeHBvcnRGaWxlVG9DbG91ZFBheWxvYWQ+XG4pOiBQcm92aWRlclN0YXRlID0+IHtcbiAgY29uc3Qge21hcERhdGEsIHByb3ZpZGVyLCBvcHRpb25zID0ge30sIG9uU3VjY2Vzcywgb25FcnJvciwgY2xvc2VNb2RhbH0gPSBhY3Rpb24ucGF5bG9hZDtcblxuICBpZiAoIV92YWxpZGF0ZVByb3ZpZGVyKHByb3ZpZGVyLCAndXBsb2FkTWFwJykpIHtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAuLi5zdGF0ZSxcbiAgICBpc1Byb3ZpZGVyTG9hZGluZzogdHJ1ZSxcbiAgICBjdXJyZW50UHJvdmlkZXI6IHByb3ZpZGVyLm5hbWVcbiAgfTtcblxuICAvLyBwYXlsb2FkIGNhbGxlZCBieSBwcm92aWRlci51cGxvYWRNYXBcbiAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICBtYXBEYXRhLFxuICAgIG9wdGlvbnNcbiAgfTtcbiAgY29uc3QgdXBsb2FkRmlsZVRhc2sgPSBFWFBPUlRfRklMRV9UT19DTE9VRF9UQVNLKHtwcm92aWRlciwgcGF5bG9hZH0pLmJpbWFwKFxuICAgIC8vIHN1Y2Nlc3NcbiAgICByZXNwb25zZSA9PiBleHBvcnRGaWxlU3VjY2Vzcyh7cmVzcG9uc2UsIHByb3ZpZGVyLCBvcHRpb25zLCBvblN1Y2Nlc3MsIGNsb3NlTW9kYWx9KSxcbiAgICAvLyBlcnJvclxuICAgIGVycm9yID0+IGV4cG9ydEZpbGVFcnJvcih7ZXJyb3IsIHByb3ZpZGVyLCBvcHRpb25zLCBvbkVycm9yfSlcbiAgKTtcblxuICByZXR1cm4gd2l0aFRhc2sobmV3U3RhdGUsIHVwbG9hZEZpbGVUYXNrKTtcbn07XG5cbmV4cG9ydCBjb25zdCBleHBvcnRGaWxlU3VjY2Vzc1VwZGF0ZXIgPSAoXG4gIHN0YXRlOiBQcm92aWRlclN0YXRlLFxuICBhY3Rpb246IEFjdGlvblBheWxvYWQ8UHJvdmlkZXJBY3Rpb25zLkV4cG9ydEZpbGVTdWNjZXNzUGF5bG9hZD5cbik6IFByb3ZpZGVyU3RhdGUgPT4ge1xuICBjb25zdCB7cmVzcG9uc2UsIHByb3ZpZGVyLCBvcHRpb25zID0ge30sIG9uU3VjY2VzcywgY2xvc2VNb2RhbH0gPSBhY3Rpb24ucGF5bG9hZDtcblxuICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAuLi5zdGF0ZSxcbiAgICBpc1Byb3ZpZGVyTG9hZGluZzogZmFsc2UsXG4gICAgLy8gVE9ETzogZG8gd2UgYWx3YXlzIGhhdmUgdG8gc3RvcmUgdGhpcz9cbiAgICBzdWNjZXNzSW5mbzogcmVzcG9uc2UsXG4gICAgLi4uKCFvcHRpb25zLmlzUHVibGljXG4gICAgICA/IHtcbiAgICAgICAgICBtYXBTYXZlZDogcHJvdmlkZXIubmFtZSxcbiAgICAgICAgICBzYXZlZE1hcElkOiByZXNwb25zZT8uaW5mbz8uaWQgPz8gbnVsbFxuICAgICAgICB9XG4gICAgICA6IHt9KVxuICB9O1xuXG4gIGNvbnN0IHRhc2tzID0gW1xuICAgIGNyZWF0ZUFjdGlvblRhc2sob25TdWNjZXNzLCB7cmVzcG9uc2UsIHByb3ZpZGVyLCBvcHRpb25zfSksXG4gICAgY2xvc2VNb2RhbCAmJlxuICAgICAgQUNUSU9OX1RBU0soKS5tYXAoKCkgPT4gcG9zdFNhdmVMb2FkU3VjY2VzcyhgTWFwIHNhdmVkIHRvICR7c3RhdGUuY3VycmVudFByb3ZpZGVyfSFgKSlcbiAgXS5maWx0ZXIoZCA9PiBkKTtcblxuICByZXR1cm4gdGFza3MubGVuZ3RoID8gd2l0aFRhc2sobmV3U3RhdGUsIHRhc2tzKSA6IG5ld1N0YXRlO1xufTtcblxuLyoqXG4gKiBDbG9zZSBtb2RhbCBvbiBzdWNjZXNzIGFuZCBkaXNwbGF5IG5vdGlmaWNhdGlvblxuICovXG5leHBvcnQgY29uc3QgcG9zdFNhdmVMb2FkU3VjY2Vzc1VwZGF0ZXIgPSAoXG4gIHN0YXRlOiBQcm92aWRlclN0YXRlLFxuICBhY3Rpb246IEFjdGlvblBheWxvYWQ8UHJvdmlkZXJBY3Rpb25zLlBvc3RTYXZlTG9hZFN1Y2Nlc3NQYXlsb2FkPlxuKTogUHJvdmlkZXJTdGF0ZSA9PiB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBhY3Rpb24ucGF5bG9hZCB8fCBgU2F2ZWQgLyBMb2FkIHRvICR7c3RhdGUuY3VycmVudFByb3ZpZGVyfSBTdWNjZXNzYDtcblxuICBjb25zdCB0YXNrcyA9IFtcbiAgICBBQ1RJT05fVEFTSygpLm1hcCgoKSA9PiB0b2dnbGVNb2RhbChudWxsKSksXG4gICAgQUNUSU9OX1RBU0soKS5tYXAoKCkgPT4gcmVzZXRQcm92aWRlclN0YXR1cygpKSxcbiAgICAuLi5jcmVhdGVHbG9iYWxOb3RpZmljYXRpb25UYXNrcyh7bWVzc2FnZX0pXG4gIF07XG5cbiAgcmV0dXJuIHdpdGhUYXNrKHN0YXRlLCB0YXNrcyk7XG59O1xuXG5leHBvcnQgY29uc3QgZXhwb3J0RmlsZUVycm9yVXBkYXRlciA9IChcbiAgc3RhdGU6IFByb3ZpZGVyU3RhdGUsXG4gIGFjdGlvbjogQWN0aW9uUGF5bG9hZDxQcm92aWRlckFjdGlvbnMuRXhwb3J0RmlsZUVycm9yUGF5bG9hZD5cbik6IFByb3ZpZGVyU3RhdGUgPT4ge1xuICBjb25zdCB7ZXJyb3IsIHByb3ZpZGVyLCBvbkVycm9yfSA9IGFjdGlvbi5wYXlsb2FkO1xuXG4gIGNvbnN0IG5ld1N0YXRlID0ge1xuICAgIC4uLnN0YXRlLFxuICAgIGlzUHJvdmlkZXJMb2FkaW5nOiBmYWxzZVxuICB9O1xuXG4gIGlmIChpc0ZpbGVDb25mbGljdChlcnJvcikpIHtcbiAgICBuZXdTdGF0ZS5tYXBTYXZlZCA9IHByb3ZpZGVyLm5hbWU7XG4gICAgcmV0dXJuIHdpdGhUYXNrKG5ld1N0YXRlLCBbQUNUSU9OX1RBU0soKS5tYXAoKCkgPT4gdG9nZ2xlTW9kYWwoT1ZFUldSSVRFX01BUF9JRCkpXSk7XG4gIH1cblxuICBuZXdTdGF0ZS5wcm92aWRlckVycm9yID0gZ2V0RXJyb3IoZXJyb3IpO1xuICBjb25zdCB0YXNrID0gY3JlYXRlQWN0aW9uVGFzayhvbkVycm9yLCB7ZXJyb3IsIHByb3ZpZGVyfSk7XG5cbiAgcmV0dXJuIHRhc2sgPyB3aXRoVGFzayhuZXdTdGF0ZSwgdGFzaykgOiBuZXdTdGF0ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2FkQ2xvdWRNYXBVcGRhdGVyID0gKFxuICBzdGF0ZTogUHJvdmlkZXJTdGF0ZSxcbiAgYWN0aW9uOiBBY3Rpb25QYXlsb2FkPFByb3ZpZGVyQWN0aW9ucy5Mb2FkQ2xvdWRNYXBQYXlsb2FkPlxuKTogUHJvdmlkZXJTdGF0ZSA9PiB7XG4gIGNvbnN0IHtsb2FkUGFyYW1zLCBwcm92aWRlciwgb25TdWNjZXNzLCBvbkVycm9yfSA9IGFjdGlvbi5wYXlsb2FkO1xuICBpZiAoIWxvYWRQYXJhbXMpIHtcbiAgICBDb25zb2xlLndhcm4oJ2xvYWQgbWFwIGVycm9yOiBsb2FkUGFyYW1zIGlzIHVuZGVmaW5lZCcpO1xuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuICBpZiAoIV92YWxpZGF0ZVByb3ZpZGVyKHByb3ZpZGVyLCAnZG93bmxvYWRNYXAnKSkge1xuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG4gIGNvbnN0IG5ld1N0YXRlID0ge1xuICAgIC4uLnN0YXRlLFxuICAgIGlzUHJvdmlkZXJMb2FkaW5nOiB0cnVlLFxuICAgIGlzQ2xvdWRNYXBMb2FkaW5nOiB0cnVlXG4gIH07XG5cbiAgLy8gcGF5bG9hZCBjYWxsZWQgYnkgcHJvdmlkZXIuZG93bmxvYWRNYXBcbiAgY29uc3QgdXBsb2FkRmlsZVRhc2sgPSBMT0FEX0NMT1VEX01BUF9UQVNLKHtwcm92aWRlciwgcGF5bG9hZDogbG9hZFBhcmFtc30pLmJpbWFwKFxuICAgIC8vIHN1Y2Nlc3NcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgcmVzcG9uc2UgPT4gbG9hZENsb3VkTWFwU3VjY2Vzcyh7cmVzcG9uc2UsIGxvYWRQYXJhbXMsIHByb3ZpZGVyLCBvblN1Y2Nlc3MsIG9uRXJyb3J9KSxcbiAgICAvLyBlcnJvclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICBlcnJvciA9PiBsb2FkQ2xvdWRNYXBFcnJvcih7ZXJyb3IsIHByb3ZpZGVyLCBvbkVycm9yfSlcbiAgKTtcblxuICByZXR1cm4gd2l0aFRhc2sobmV3U3RhdGUsIHVwbG9hZEZpbGVUYXNrKTtcbn07XG5cbmZ1bmN0aW9uIGlzRmlsZUNvbmZsaWN0KGVycm9yKSB7XG4gIHJldHVybiBlcnJvciAmJiBlcnJvci5tZXNzYWdlID09PSBGSUxFX0NPTkZMSUNUX01TRztcbn1cblxuZnVuY3Rpb24gY2hlY2tMb2FkTWFwUmVzcG9uc2VFcnJvcihyZXNwb25zZSkge1xuICBpZiAoIXJlc3BvbnNlIHx8ICFpc1BsYWluT2JqZWN0KHJlc3BvbnNlKSkge1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0xvYWQgbWFwIHJlc3BvbnNlIGlzIGVtcHR5Jyk7XG4gIH1cbiAgaWYgKCFpc1BsYWluT2JqZWN0KHJlc3BvbnNlLm1hcCkpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKGBMb2FkIG1hcCByZXNwb25zZSBzaG91bGQgYmUgYW4gb2JqZWN0IHByb3BlcnR5IFwibWFwXCJgKTtcbiAgfVxuICBpZiAoIXJlc3BvbnNlLm1hcC5kYXRhc2V0cyB8fCAhcmVzcG9uc2UubWFwLmNvbmZpZykge1xuICAgIHJldHVybiBuZXcgRXJyb3IoYExvYWQgbWFwIHJlc3BvbnNlLm1hcCBzaG91bGQgYmUgYW4gb2JqZWN0IHdpdGggcHJvcGVydHkgZGF0YXNldHMgb3IgY29uZmlnYCk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YXNldEhhbmRsZXIoZm9ybWF0KSB7XG4gIGNvbnN0IGRlZmF1bHRIYW5kbGVyID0gREFUQVNFVF9IQU5ETEVSU1tEQVRBU0VUX0ZPUk1BVFMuY3N2XTtcbiAgaWYgKCFmb3JtYXQpIHtcbiAgICBDb25zb2xlLndhcm4oJ2Zvcm1hdCBpcyBub3QgcHJvdmlkZWQgaW4gbG9hZCBtYXAgcmVzcG9uc2UsIHdpbGwgdXNlIGNzdiBieSBkZWZhdWx0Jyk7XG4gICAgcmV0dXJuIGRlZmF1bHRIYW5kbGVyO1xuICB9XG5cbiAgLy8gdXNlIGN1c3RvbSBwcm9jZXNzb3JzIGZyb20gdGFibGUgY2xhc3NcbiAgY29uc3QgVGFibGVDbGFzcyA9IGdldEFwcGxpY2F0aW9uQ29uZmlnKCkudGFibGUgPz8gS2VwbGVyVGFibGU7XG4gIGlmICh0eXBlb2YgVGFibGVDbGFzcy5nZXRGaWxlUHJvY2Vzc29yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgcHJvY2Vzc29yUmVzdWx0ID0gVGFibGVDbGFzcy5nZXRGaWxlUHJvY2Vzc29yKG51bGwsIGZvcm1hdCk7XG4gICAgaWYgKCFwcm9jZXNzb3JSZXN1bHQucHJvY2Vzc29yKSB7XG4gICAgICBDb25zb2xlLndhcm4oYE5vIHByb2Nlc3NvciBmb3VuZCBmb3IgZm9ybWF0ICR7Zm9ybWF0fSwgd2lsbCB1c2UgY3N2IGJ5IGRlZmF1bHRgKTtcbiAgICAgIHJldHVybiBkZWZhdWx0SGFuZGxlcjtcbiAgICB9XG4gICAgcmV0dXJuIHByb2Nlc3NvclJlc3VsdC5wcm9jZXNzb3I7XG4gIH1cblxuICBpZiAoIURBVEFTRVRfSEFORExFUlNbZm9ybWF0XSkge1xuICAgIGNvbnN0IHN1cHBvcnRlZEZvcm1hdCA9IE9iamVjdC5rZXlzKERBVEFTRVRfRk9STUFUUylcbiAgICAgIC5tYXAoayA9PiBgJyR7a30nYClcbiAgICAgIC5qb2luKCcsICcpO1xuICAgIENvbnNvbGUud2FybihcbiAgICAgIGB1bmtub3duIGZvcm1hdCAke2Zvcm1hdH0uIFBsZWFzZSB1c2Ugb25lIG9mICR7c3VwcG9ydGVkRm9ybWF0fSwgd2lsbCB1c2UgY3N2IGJ5IGRlZmF1bHRgXG4gICAgKTtcbiAgICByZXR1cm4gZGVmYXVsdEhhbmRsZXI7XG4gIH1cblxuICByZXR1cm4gREFUQVNFVF9IQU5ETEVSU1tmb3JtYXRdO1xufVxuXG4vKipcbiAqIEEgdGFzayB0byBoYW5kbGUgYXN5bmMgcHJvY2Vzc29yTWV0aG9kXG4gKiBAcGFyYW0gcGFyYW0wXG4gKiBAcmV0dXJuc1xuICovXG5hc3luYyBmdW5jdGlvbiBwYXJzZUxvYWRNYXBSZXNwb25zZVRhc2soe1xuICByZXNwb25zZSxcbiAgbG9hZFBhcmFtcyxcbiAgcHJvdmlkZXJcbn06IHtcbiAgcmVzcG9uc2U6IFByb3ZpZGVyQWN0aW9ucy5Mb2FkQ2xvdWRNYXBTdWNjZXNzUGF5bG9hZFsncmVzcG9uc2UnXTtcbiAgbG9hZFBhcmFtczogUHJvdmlkZXJBY3Rpb25zLkxvYWRDbG91ZE1hcFN1Y2Nlc3NQYXlsb2FkWydsb2FkUGFyYW1zJ107XG4gIHByb3ZpZGVyOiBQcm92aWRlckFjdGlvbnMuTG9hZENsb3VkTWFwU3VjY2Vzc1BheWxvYWRbJ3Byb3ZpZGVyJ107XG59KSB7XG4gIGNvbnN0IHttYXAsIGZvcm1hdH0gPSByZXNwb25zZTtcbiAgY29uc3QgcHJvY2Vzc29yTWV0aG9kID0gZ2V0RGF0YXNldEhhbmRsZXIoZm9ybWF0KTtcblxuICBsZXQgcGFyc2VkRGF0YXNldHM6IEFkZERhdGFUb01hcFBheWxvYWRbJ2RhdGFzZXRzJ10gPSBbXTtcblxuICBpZiAoXG4gICAgZm9ybWF0ID09PSBEQVRBU0VUX0ZPUk1BVFMua2VwbGVyZ2wgJiZcbiAgICBwcm9jZXNzb3JNZXRob2QgIT09IERBVEFTRVRfSEFORExFUlNbREFUQVNFVF9GT1JNQVRTLmtlcGxlcmdsXVxuICApIHtcbiAgICAvLyBwbHVnaW4gdGFibGUgcHJvdmlkZXMgcHJvY2Vzc29yIGZvciBrZXBsZXJnbCBtYXAsIG5vdCBzaW5nbGUgZGF0YXNldCB3aXRoIGFsbERhdGFcbiAgICBjb25zdCBwYXJzZWRNYXAgPSBhd2FpdCBwcm9jZXNzb3JNZXRob2QobWFwKTtcbiAgICBwYXJzZWREYXRhc2V0cyA9IHBhcnNlZE1hcC5kYXRhc2V0cztcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBkYXRhc2V0cyA9IHRvQXJyYXkobWFwLmRhdGFzZXRzKTtcbiAgICBwYXJzZWREYXRhc2V0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgZGF0YXNldHMubWFwKGFzeW5jIGRzID0+IHtcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gREFUQVNFVF9GT1JNQVRTLmtlcGxlcmdsKSB7XG4gICAgICAgICAgLy8gbm8gbmVlZCB0byBvYnRhaW4gaWQsIGRpcmVjdGx5IHBhc3MgdGhlbSBpblxuICAgICAgICAgIHJldHVybiBhd2FpdCBwcm9jZXNzb3JNZXRob2QoZHMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZm8gPSAoZHMgJiYgZHMuaW5mbykgfHwge2lkOiBnZW5lcmF0ZUhhc2hJZCg2KX07XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwcm9jZXNzb3JNZXRob2QoZHMuZGF0YSB8fCBkcyk7XG4gICAgICAgIHJldHVybiB7aW5mbywgZGF0YX07XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBjb25zdCBpbmZvID0ge1xuICAgIC4uLm1hcC5pbmZvLFxuICAgIHByb3ZpZGVyOiBwcm92aWRlci5uYW1lLFxuICAgIGxvYWRQYXJhbXNcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBkYXRhc2V0czogcGFyc2VkRGF0YXNldHMsXG4gICAgaW5mbyxcbiAgICAuLi4obWFwLmNvbmZpZyA/IHtjb25maWc6IG1hcC5jb25maWd9IDoge30pLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIC8vIGRvIG5vdCBjZW50ZXIgbWFwIHdoZW4gbG9hZGluZyBjbG91ZCBtYXBcbiAgICAgIGNlbnRlck1hcDogZmFsc2VcbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IFBBUlNFX0xPQURfTUFQX1JFU1BPTlNFX1RBU0sgPSBUYXNrLmZyb21Qcm9taXNlKFxuICBwYXJzZUxvYWRNYXBSZXNwb25zZVRhc2ssXG4gICdQQVJTRV9MT0FEX01BUF9SRVNQT05TRV9UQVNLJ1xuKTtcblxuLyoqXG4gKiBVc2VkIHRvIGxvYWQgcmVzb3VyY2VzIHN0b3JlZCBpbiBhIHByaXZhdGUgc3RvcmFnZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGxvYWRDbG91ZE1hcFN1Y2Nlc3NVcGRhdGVyID0gKFxuICBzdGF0ZTogUHJvdmlkZXJTdGF0ZSxcbiAgYWN0aW9uOiBBY3Rpb25QYXlsb2FkPFByb3ZpZGVyQWN0aW9ucy5Mb2FkQ2xvdWRNYXBTdWNjZXNzUGF5bG9hZD5cbik6IFByb3ZpZGVyU3RhdGUgPT4ge1xuICBjb25zdCB7cmVzcG9uc2UsIGxvYWRQYXJhbXMsIHByb3ZpZGVyLCBvbkVycm9yfSA9IGFjdGlvbi5wYXlsb2FkO1xuXG4gIGNvbnN0IGZvcm1hdEVycm9yID0gY2hlY2tMb2FkTWFwUmVzcG9uc2VFcnJvcihyZXNwb25zZSk7XG4gIGlmIChmb3JtYXRFcnJvcikge1xuICAgIC8vIGlmIHJlc3BvbnNlIGZvcm1hdCBpcyBub3QgY29ycmVjdFxuICAgIHJldHVybiBleHBvcnRGaWxlRXJyb3JVcGRhdGVyKHN0YXRlLCB7XG4gICAgICBwYXlsb2FkOiB7ZXJyb3I6IGZvcm1hdEVycm9yLCBwcm92aWRlciwgb25FcnJvcn1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIHByb2Nlc3Nvck1ldGhvZCBjYW4gYmUgYXN5bmMgc28gY3JlYXRlIGEgdGFza1xuICBjb25zdCBwYXJzZUxvYWRNYXBSZXNwb25zZVRhc2sgPSBQQVJTRV9MT0FEX01BUF9SRVNQT05TRV9UQVNLKHtcbiAgICByZXNwb25zZSxcbiAgICBsb2FkUGFyYW1zLFxuICAgIHByb3ZpZGVyXG4gIH0pLmJpbWFwKFxuICAgIChkYXRhc2V0c1BheWxvYWQ6IEFkZERhdGFUb01hcFBheWxvYWQpID0+IHtcbiAgICAgIHJldHVybiBsb2FkQ2xvdWRNYXBTdWNjZXNzMih7Li4uYWN0aW9uLnBheWxvYWQsIGRhdGFzZXRzUGF5bG9hZH0pO1xuICAgIH0sXG4gICAgZXJyb3IgPT5cbiAgICAgIGV4cG9ydEZpbGVFcnJvclVwZGF0ZXIoc3RhdGUsIHtcbiAgICAgICAgcGF5bG9hZDoge2Vycm9yLCBwcm92aWRlciwgb25FcnJvcn1cbiAgICAgIH0pXG4gICk7XG5cbiAgcmV0dXJuIHdpdGhUYXNrKHN0YXRlLCBwYXJzZUxvYWRNYXBSZXNwb25zZVRhc2spO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvYWRDbG91ZE1hcFN1Y2Nlc3MyVXBkYXRlciA9IChcbiAgc3RhdGU6IFByb3ZpZGVyU3RhdGUsXG4gIGFjdGlvbjogQWN0aW9uUGF5bG9hZDxQcm92aWRlckFjdGlvbnMuTG9hZENsb3VkTWFwU3VjY2VzczJQYXlsb2FkPlxuKTogUHJvdmlkZXJTdGF0ZSA9PiB7XG4gIGNvbnN0IHtkYXRhc2V0c1BheWxvYWQsIHJlc3BvbnNlLCBsb2FkUGFyYW1zLCBwcm92aWRlciwgb25TdWNjZXNzfSA9IGFjdGlvbi5wYXlsb2FkO1xuXG4gIGNvbnN0IG5ld1N0YXRlID0ge1xuICAgIC4uLnN0YXRlLFxuICAgIG1hcFNhdmVkOiBwcm92aWRlci5uYW1lLFxuICAgIGN1cnJlbnRQcm92aWRlcjogcHJvdmlkZXIubmFtZSxcbiAgICBpc0Nsb3VkTWFwTG9hZGluZzogZmFsc2UsXG4gICAgaXNQcm92aWRlckxvYWRpbmc6IGZhbHNlXG4gIH07XG5cbiAgY29uc3QgdGFza3MgPSBbXG4gICAgQUNUSU9OX1RBU0soKS5tYXAoKCkgPT4gYWRkRGF0YVRvTWFwKGRhdGFzZXRzUGF5bG9hZCkpLFxuICAgIGNyZWF0ZUFjdGlvblRhc2sob25TdWNjZXNzLCB7cmVzcG9uc2UsIGxvYWRQYXJhbXMsIHByb3ZpZGVyfSksXG4gICAgQUNUSU9OX1RBU0soKS5tYXAoKCkgPT4gcG9zdFNhdmVMb2FkU3VjY2VzcyhgTWFwIGZyb20gJHtwcm92aWRlci5uYW1lfSBsb2FkZWRgKSlcbiAgXS5maWx0ZXIoZCA9PiBkKTtcblxuICByZXR1cm4gdGFza3MubGVuZ3RoID8gd2l0aFRhc2sobmV3U3RhdGUsIHRhc2tzKSA6IG5ld1N0YXRlO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvYWRDbG91ZE1hcEVycm9yVXBkYXRlciA9IChcbiAgc3RhdGU6IFByb3ZpZGVyU3RhdGUsXG4gIGFjdGlvbjogQWN0aW9uUGF5bG9hZDxQcm92aWRlckFjdGlvbnMuTG9hZENsb3VkTWFwRXJyb3JQYXlsb2FkPlxuKTogUHJvdmlkZXJTdGF0ZSA9PiB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBnZXRFcnJvcihhY3Rpb24ucGF5bG9hZC5lcnJvcikgfHwgYEVycm9yIGxvYWRpbmcgc2F2ZWQgbWFwYDtcblxuICBDb25zb2xlLndhcm4obWVzc2FnZSk7XG5cbiAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgLi4uc3RhdGUsXG4gICAgaXNQcm92aWRlckxvYWRpbmc6IGZhbHNlLFxuICAgIGlzQ2xvdWRNYXBMb2FkaW5nOiBmYWxzZSxcbiAgICBwcm92aWRlckVycm9yOiBudWxsXG4gIH07XG5cbiAgcmV0dXJuIHdpdGhUYXNrKFxuICAgIG5ld1N0YXRlLFxuICAgIGNyZWF0ZUdsb2JhbE5vdGlmaWNhdGlvblRhc2tzKHt0eXBlOiAnZXJyb3InLCBtZXNzYWdlLCBkZWxheUNsb3NlOiBmYWxzZX0pXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVzZXRQcm92aWRlclN0YXR1c1VwZGF0ZXIgPSAoc3RhdGU6IFByb3ZpZGVyU3RhdGUpOiBQcm92aWRlclN0YXRlID0+ICh7XG4gIC4uLnN0YXRlLFxuICBpc1Byb3ZpZGVyTG9hZGluZzogZmFsc2UsXG4gIHByb3ZpZGVyRXJyb3I6IG51bGwsXG4gIGlzQ2xvdWRNYXBMb2FkaW5nOiBmYWxzZSxcbiAgc3VjY2Vzc0luZm86IHt9XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBR0EsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksWUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssT0FBQSxHQUFBTCxPQUFBO0FBTUEsSUFBQU0sUUFBQSxHQUFBTixPQUFBO0FBY0EsSUFBQU8sVUFBQSxHQUFBUCxPQUFBO0FBUUEsSUFBQVEsZUFBQSxHQUFBUixPQUFBO0FBQ0EsSUFBQVMsV0FBQSxHQUFBVCxPQUFBO0FBQ0EsSUFBQVUsTUFBQSxHQUFBVixPQUFBO0FBQTZDLFNBQUFXLHlCQUFBQyxDQUFBLDZCQUFBQyxPQUFBLG1CQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFGLHdCQUFBLFlBQUFBLHlCQUFBQyxDQUFBLFdBQUFBLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLEtBQUFGLENBQUE7QUFBQSxTQUFBYix3QkFBQWEsQ0FBQSxFQUFBRSxDQUFBLFNBQUFBLENBQUEsSUFBQUYsQ0FBQSxJQUFBQSxDQUFBLENBQUFJLFVBQUEsU0FBQUosQ0FBQSxlQUFBQSxDQUFBLGdCQUFBSyxPQUFBLENBQUFMLENBQUEsMEJBQUFBLENBQUEsc0JBQUFBLENBQUEsUUFBQUcsQ0FBQSxHQUFBSix3QkFBQSxDQUFBRyxDQUFBLE9BQUFDLENBQUEsSUFBQUEsQ0FBQSxDQUFBRyxHQUFBLENBQUFOLENBQUEsVUFBQUcsQ0FBQSxDQUFBSSxHQUFBLENB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