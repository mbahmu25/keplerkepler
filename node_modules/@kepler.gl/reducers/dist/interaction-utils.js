"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TOOLTIP_MINUS_SIGN = exports.NEGATIVE_SIGNS = exports.BRUSH_CONFIG = void 0;
exports.findFieldsToShow = findFieldsToShow;
exports.getTooltipDisplayDeltaValue = getTooltipDisplayDeltaValue;
exports.getTooltipDisplayValue = getTooltipDisplayValue;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _constants = require("@kepler.gl/constants");
var _utils = require("@kepler.gl/utils");
var _commonUtils = require("@kepler.gl/common-utils");
// SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project

/**
 * Minus sign used in tooltip formatting.
 * \u2212 or \u002D is the minus sign that d3-format uses for decimal number formatting
 * d3-format 2.0 uses \u002D
 */
var TOOLTIP_MINUS_SIGN = exports.TOOLTIP_MINUS_SIGN = "\u2212";
// both are posible negative signs
var NEGATIVE_SIGNS = exports.NEGATIVE_SIGNS = ["-", "\u2212"];
var BRUSH_CONFIG = exports.BRUSH_CONFIG = {
  range: [0, 50]
};
function findFieldsToShow(_ref) {
  var fields = _ref.fields,
    id = _ref.id,
    maxDefaultTooltips = _ref.maxDefaultTooltips;
  // first find default tooltip fields for trips
  var fieldsToShow = _constants.DEFAULT_TOOLTIP_FIELDS.reduce(function (prev, curr) {
    if (fields.find(function (_ref2) {
      var name = _ref2.name;
      return curr.name === name;
    })) {
      // @ts-ignore
      prev.push(curr);
    }
    return prev;
  }, []);
  return (0, _defineProperty2["default"])({}, id, fieldsToShow.length ? fieldsToShow : autoFindTooltipFields(fields, maxDefaultTooltips));
}
function autoFindTooltipFields(fields, maxDefaultTooltips) {
  var ptFields = _mergeFieldPairs(_constants.TRIP_POINT_FIELDS);
  // filter out the default fields that contains lat and lng and any geometry
  var fieldsToShow = fields.filter(function (_ref4) {
    var name = _ref4.name,
      type = _ref4.type;
    return name.replace(/[_,.]+/g, ' ').trim().split(' ').every(function (seg) {
      return !ptFields.includes(seg);
    }) && type !== _constants.ALL_FIELD_TYPES.geojson && type !== _constants.ALL_FIELD_TYPES.geoarrow && type !== 'object';
  });
  return fieldsToShow.slice(0, maxDefaultTooltips).map(function (_ref5) {
    var name = _ref5.name;
    return {
      name: name,
      format: null
    };
  });
}
function _mergeFieldPairs(pairs) {
  return pairs.reduce(function (prev, pair) {
    return [].concat((0, _toConsumableArray2["default"])(prev), (0, _toConsumableArray2["default"])(pair));
  }, []);
}
function getTooltipDisplayDeltaValue(_ref6) {
  var field = _ref6.field,
    value = _ref6.value,
    primaryValue = _ref6.primaryValue,
    compareType = _ref6.compareType;
  var displayDeltaValue = null;
  if (
  // comparison mode only works for numeric field
  field.type === _constants.ALL_FIELD_TYPES.integer || field.type === _constants.ALL_FIELD_TYPES.real) {
    if ((0, _utils.isNumber)(primaryValue) && (0, _utils.isNumber)(value)) {
      var deltaValue = compareType === _constants.COMPARE_TYPES.RELATIVE ? value / primaryValue - 1 : value - primaryValue;
      var deltaFormat = compareType === _constants.COMPARE_TYPES.RELATIVE ? _constants.TOOLTIP_FORMATS.DECIMAL_PERCENT_FULL_2[_constants.TOOLTIP_KEY] : field.displayFormat || _constants.TOOLTIP_FORMATS.DECIMAL_DECIMAL_FIXED_3[_constants.TOOLTIP_KEY];
      displayDeltaValue = (0, _utils.getFormatter)(deltaFormat, field)(deltaValue);

      // safely cast string
      displayDeltaValue = (0, _utils.defaultFormatter)(displayDeltaValue);
      var deltaFirstChar = displayDeltaValue.charAt(0);
      if (deltaFirstChar !== '+' && !NEGATIVE_SIGNS.includes(deltaFirstChar)) {
        displayDeltaValue = "+".concat(displayDeltaValue);
      }
    } else {
      displayDeltaValue = TOOLTIP_MINUS_SIGN;
    }
  }
  return displayDeltaValue;
}
function getTooltipDisplayValue(_ref7) {
  var item = _ref7.item,
    field = _ref7.field,
    value = _ref7.value;
  if (!(0, _commonUtils.notNullorUndefined)(value)) {
    return '';
  }
  return item !== null && item !== void 0 && item.format ? (0, _utils.getFormatter)(item === null || item === void 0 ? void 0 : item.format, field)(value) : field.displayFormat ? (0, _utils.getFormatter)(field.displayFormat, field)(value) : (0, _utils.parseFieldValue)(value, field.type);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29uc3RhbnRzIiwicmVxdWlyZSIsIl91dGlscyIsIl9jb21tb25VdGlscyIsIlRPT0xUSVBfTUlOVVNfU0lHTiIsImV4cG9ydHMiLCJORUdBVElWRV9TSUdOUyIsIkJSVVNIX0NPTkZJRyIsInJhbmdlIiwiZmluZEZpZWxkc1RvU2hvdyIsIl9yZWYiLCJmaWVsZHMiLCJpZCIsIm1heERlZmF1bHRUb29sdGlwcyIsImZpZWxkc1RvU2hvdyIsIkRFRkFVTFRfVE9PTFRJUF9GSUVMRFMiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyciIsImZpbmQiLCJfcmVmMiIsIm5hbWUiLCJwdXNoIiwiX2RlZmluZVByb3BlcnR5MiIsImxlbmd0aCIsImF1dG9GaW5kVG9vbHRpcEZpZWxkcyIsInB0RmllbGRzIiwiX21lcmdlRmllbGRQYWlycyIsIlRSSVBfUE9JTlRfRklFTERTIiwiZmlsdGVyIiwiX3JlZjQiLCJ0eXBlIiwicmVwbGFjZSIsInRyaW0iLCJzcGxpdCIsImV2ZXJ5Iiwic2VnIiwiaW5jbHVkZXMiLCJBTExfRklFTERfVFlQRVMiLCJnZW9qc29uIiwiZ2VvYXJyb3ciLCJzbGljZSIsIm1hcCIsIl9yZWY1IiwiZm9ybWF0IiwicGFpcnMiLCJwYWlyIiwiY29uY2F0IiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsImdldFRvb2x0aXBEaXNwbGF5RGVsdGFWYWx1ZSIsIl9yZWY2IiwiZmllbGQiLCJ2YWx1ZSIsInByaW1hcnlWYWx1ZSIsImNvbXBhcmVUeXBlIiwiZGlzcGxheURlbHRhVmFsdWUiLCJpbnRlZ2VyIiwicmVhbCIsImlzTnVtYmVyIiwiZGVsdGFWYWx1ZSIsIkNPTVBBUkVfVFlQRVMiLCJSRUxBVElWRSIsImRlbHRhRm9ybWF0IiwiVE9PTFRJUF9GT1JNQVRTIiwiREVDSU1BTF9QRVJDRU5UX0ZVTExfMiIsIlRPT0xUSVBfS0VZIiwiZGlzcGxheUZvcm1hdCIsIkRFQ0lNQUxfREVDSU1BTF9GSVhFRF8zIiwiZ2V0Rm9ybWF0dGVyIiwiZGVmYXVsdEZvcm1hdHRlciIsImRlbHRhRmlyc3RDaGFyIiwiY2hhckF0IiwiZ2V0VG9vbHRpcERpc3BsYXlWYWx1ZSIsIl9yZWY3IiwiaXRlbSIsIm5vdE51bGxvclVuZGVmaW5lZCIsInBhcnNlRmllbGRWYWx1ZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9pbnRlcmFjdGlvbi11dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQge1xuICBERUZBVUxUX1RPT0xUSVBfRklFTERTLFxuICBBTExfRklFTERfVFlQRVMsXG4gIFRSSVBfUE9JTlRfRklFTERTLFxuICBUT09MVElQX0ZPUk1BVFMsXG4gIFRPT0xUSVBfS0VZLFxuICBDT01QQVJFX1RZUEVTXG59IGZyb20gJ0BrZXBsZXIuZ2wvY29uc3RhbnRzJztcblxuaW1wb3J0IHtGaWVsZCwgVG9vbHRpcEZpZWxkLCBDb21wYXJlVHlwZX0gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5pbXBvcnQge3BhcnNlRmllbGRWYWx1ZSwgZ2V0Rm9ybWF0dGVyLCBpc051bWJlciwgZGVmYXVsdEZvcm1hdHRlcn0gZnJvbSAnQGtlcGxlci5nbC91dGlscyc7XG5pbXBvcnQge25vdE51bGxvclVuZGVmaW5lZH0gZnJvbSAnQGtlcGxlci5nbC9jb21tb24tdXRpbHMnO1xuXG4vKipcbiAqIE1pbnVzIHNpZ24gdXNlZCBpbiB0b29sdGlwIGZvcm1hdHRpbmcuXG4gKiBcXHUyMjEyIG9yIFxcdTAwMkQgaXMgdGhlIG1pbnVzIHNpZ24gdGhhdCBkMy1mb3JtYXQgdXNlcyBmb3IgZGVjaW1hbCBudW1iZXIgZm9ybWF0dGluZ1xuICogZDMtZm9ybWF0IDIuMCB1c2VzIFxcdTAwMkRcbiAqL1xuZXhwb3J0IGNvbnN0IFRPT0xUSVBfTUlOVVNfU0lHTiA9ICdcXHUyMjEyJztcbi8vIGJvdGggYXJlIHBvc2libGUgbmVnYXRpdmUgc2lnbnNcbmV4cG9ydCBjb25zdCBORUdBVElWRV9TSUdOUyA9IFsnXFx1MDAyRCcsICdcXHUyMjEyJ107XG5cbmV4cG9ydCBjb25zdCBCUlVTSF9DT05GSUc6IHtcbiAgcmFuZ2U6IFtudW1iZXIsIG51bWJlcl07XG59ID0ge1xuICByYW5nZTogWzAsIDUwXVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRGaWVsZHNUb1Nob3coe1xuICBmaWVsZHMsXG4gIGlkLFxuICBtYXhEZWZhdWx0VG9vbHRpcHNcbn06IHtcbiAgZmllbGRzOiBGaWVsZFtdO1xuICBpZDogc3RyaW5nO1xuICBtYXhEZWZhdWx0VG9vbHRpcHM6IG51bWJlcjtcbn0pOiB7XG4gIFtrZXk6IHN0cmluZ106IHN0cmluZ1tdO1xufSB7XG4gIC8vIGZpcnN0IGZpbmQgZGVmYXVsdCB0b29sdGlwIGZpZWxkcyBmb3IgdHJpcHNcbiAgY29uc3QgZmllbGRzVG9TaG93ID0gREVGQVVMVF9UT09MVElQX0ZJRUxEUy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHtcbiAgICBpZiAoZmllbGRzLmZpbmQoKHtuYW1lfSkgPT4gY3Vyci5uYW1lID09PSBuYW1lKSkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgcHJldi5wdXNoKGN1cnIpO1xuICAgIH1cbiAgICByZXR1cm4gcHJldjtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgW2lkXTogZmllbGRzVG9TaG93Lmxlbmd0aCA/IGZpZWxkc1RvU2hvdyA6IGF1dG9GaW5kVG9vbHRpcEZpZWxkcyhmaWVsZHMsIG1heERlZmF1bHRUb29sdGlwcylcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXV0b0ZpbmRUb29sdGlwRmllbGRzKGZpZWxkcywgbWF4RGVmYXVsdFRvb2x0aXBzKSB7XG4gIGNvbnN0IHB0RmllbGRzID0gX21lcmdlRmllbGRQYWlycyhUUklQX1BPSU5UX0ZJRUxEUyk7XG4gIC8vIGZpbHRlciBvdXQgdGhlIGRlZmF1bHQgZmllbGRzIHRoYXQgY29udGFpbnMgbGF0IGFuZCBsbmcgYW5kIGFueSBnZW9tZXRyeVxuICBjb25zdCBmaWVsZHNUb1Nob3cgPSBmaWVsZHMuZmlsdGVyKFxuICAgICh7bmFtZSwgdHlwZX0pID0+XG4gICAgICBuYW1lXG4gICAgICAgIC5yZXBsYWNlKC9bXywuXSsvZywgJyAnKVxuICAgICAgICAudHJpbSgpXG4gICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgIC5ldmVyeShzZWcgPT4gIXB0RmllbGRzLmluY2x1ZGVzKHNlZykpICYmXG4gICAgICB0eXBlICE9PSBBTExfRklFTERfVFlQRVMuZ2VvanNvbiAmJlxuICAgICAgdHlwZSAhPT0gQUxMX0ZJRUxEX1RZUEVTLmdlb2Fycm93ICYmXG4gICAgICB0eXBlICE9PSAnb2JqZWN0J1xuICApO1xuXG4gIHJldHVybiBmaWVsZHNUb1Nob3cuc2xpY2UoMCwgbWF4RGVmYXVsdFRvb2x0aXBzKS5tYXAoKHtuYW1lfSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lLFxuICAgICAgZm9ybWF0OiBudWxsXG4gICAgfTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIF9tZXJnZUZpZWxkUGFpcnMocGFpcnMpIHtcbiAgcmV0dXJuIHBhaXJzLnJlZHVjZSgocHJldiwgcGFpcikgPT4gWy4uLnByZXYsIC4uLnBhaXJdLCBbXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb29sdGlwRGlzcGxheURlbHRhVmFsdWUoe1xuICBmaWVsZCxcbiAgdmFsdWUsXG4gIHByaW1hcnlWYWx1ZSxcbiAgY29tcGFyZVR5cGVcbn06IHtcbiAgZmllbGQ6IEZpZWxkO1xuICB2YWx1ZTogYW55O1xuICBwcmltYXJ5VmFsdWU6IGFueTtcbiAgY29tcGFyZVR5cGU/OiBDb21wYXJlVHlwZTtcbn0pOiBzdHJpbmcgfCBudWxsIHtcbiAgbGV0IGRpc3BsYXlEZWx0YVZhbHVlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBpZiAoXG4gICAgLy8gY29tcGFyaXNvbiBtb2RlIG9ubHkgd29ya3MgZm9yIG51bWVyaWMgZmllbGRcbiAgICBmaWVsZC50eXBlID09PSBBTExfRklFTERfVFlQRVMuaW50ZWdlciB8fFxuICAgIGZpZWxkLnR5cGUgPT09IEFMTF9GSUVMRF9UWVBFUy5yZWFsXG4gICkge1xuICAgIGlmIChpc051bWJlcihwcmltYXJ5VmFsdWUpICYmIGlzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgY29uc3QgZGVsdGFWYWx1ZSA9XG4gICAgICAgIGNvbXBhcmVUeXBlID09PSBDT01QQVJFX1RZUEVTLlJFTEFUSVZFID8gdmFsdWUgLyBwcmltYXJ5VmFsdWUgLSAxIDogdmFsdWUgLSBwcmltYXJ5VmFsdWU7XG4gICAgICBjb25zdCBkZWx0YUZvcm1hdCA9XG4gICAgICAgIGNvbXBhcmVUeXBlID09PSBDT01QQVJFX1RZUEVTLlJFTEFUSVZFXG4gICAgICAgICAgPyBUT09MVElQX0ZPUk1BVFMuREVDSU1BTF9QRVJDRU5UX0ZVTExfMltUT09MVElQX0tFWV1cbiAgICAgICAgICA6IGZpZWxkLmRpc3BsYXlGb3JtYXQgfHwgVE9PTFRJUF9GT1JNQVRTLkRFQ0lNQUxfREVDSU1BTF9GSVhFRF8zW1RPT0xUSVBfS0VZXTtcblxuICAgICAgZGlzcGxheURlbHRhVmFsdWUgPSBnZXRGb3JtYXR0ZXIoZGVsdGFGb3JtYXQsIGZpZWxkKShkZWx0YVZhbHVlKTtcblxuICAgICAgLy8gc2FmZWx5IGNhc3Qgc3RyaW5nXG4gICAgICBkaXNwbGF5RGVsdGFWYWx1ZSA9IGRlZmF1bHRGb3JtYXR0ZXIoZGlzcGxheURlbHRhVmFsdWUpO1xuICAgICAgY29uc3QgZGVsdGFGaXJzdENoYXIgPSBkaXNwbGF5RGVsdGFWYWx1ZS5jaGFyQXQoMCk7XG5cbiAgICAgIGlmIChkZWx0YUZpcnN0Q2hhciAhPT0gJysnICYmICFORUdBVElWRV9TSUdOUy5pbmNsdWRlcyhkZWx0YUZpcnN0Q2hhcikpIHtcbiAgICAgICAgZGlzcGxheURlbHRhVmFsdWUgPSBgKyR7ZGlzcGxheURlbHRhVmFsdWV9YDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGlzcGxheURlbHRhVmFsdWUgPSBUT09MVElQX01JTlVTX1NJR047XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRpc3BsYXlEZWx0YVZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbHRpcERpc3BsYXlWYWx1ZSh7XG4gIGl0ZW0sXG4gIGZpZWxkLFxuICB2YWx1ZVxufToge1xuICBpdGVtOiBUb29sdGlwRmllbGQgfCB1bmRlZmluZWQ7XG4gIGZpZWxkOiBGaWVsZDtcbiAgdmFsdWU6IGFueTtcbn0pOiBzdHJpbmcge1xuICBpZiAoIW5vdE51bGxvclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICByZXR1cm4gaXRlbT8uZm9ybWF0XG4gICAgPyBnZXRGb3JtYXR0ZXIoaXRlbT8uZm9ybWF0LCBmaWVsZCkodmFsdWUpXG4gICAgOiBmaWVsZC5kaXNwbGF5Rm9ybWF0XG4gICAgPyBnZXRGb3JtYXR0ZXIoZmllbGQuZGlzcGxheUZvcm1hdCwgZmllbGQpKHZhbHVlKVxuICAgIDogcGFyc2VGaWVsZFZhbHVlKHZhbHVlLCBmaWVsZC50eXBlKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBR0EsSUFBQUEsVUFBQSxHQUFBQyxPQUFBO0FBVUEsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsWUFBQSxHQUFBRixPQUFBO0FBZEE7QUFDQTs7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sSUFBTUcsa0JBQWtCLEdBQUFDLE9BQUEsQ0FBQUQsa0JBQUEsR0FBRyxRQUFRO0FBQzFDO0FBQ08sSUFBTUUsY0FBYyxHQUFBRCxPQUFBLENBQUFDLGNBQUEsR0FBRyxDQUFDLEdBQVEsRUFBRSxRQUFRLENBQUM7QUFFM0MsSUFBTUMsWUFFWixHQUFBRixPQUFBLENBQUFFLFlBQUEsR0FBRztFQUNGQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNmLENBQUM7QUFFTSxTQUFTQyxnQkFBZ0JBLENBQUFDLElBQUEsRUFVOUI7RUFB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