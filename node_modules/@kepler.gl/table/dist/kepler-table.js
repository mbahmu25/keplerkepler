"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.copyTable = copyTable;
exports.copyTableAndUpdate = copyTableAndUpdate;
exports["default"] = void 0;
exports.findPointFieldPairs = findPointFieldPairs;
exports.getFieldValueAccessor = getFieldValueAccessor;
exports.maybeToDate = maybeToDate;
exports.pinTableColumns = pinTableColumns;
exports.sortDatasetByColumn = sortDatasetByColumn;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _console = _interopRequireDefault(require("global/console"));
var _d3Array = require("d3-array");
var _constants = require("@kepler.gl/constants");
var _gpuFilterUtils = require("./gpu-filter-utils");
var _utils = require("@kepler.gl/utils");
var _commonUtils = require("@kepler.gl/common-utils");
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
// TODO isolate layer type, depends on @kepler.gl/layers

// Unique identifier of each field
var FID_KEY = 'name';
function maybeToDate(isTime, fieldIdx, format, dc,
// An object with row index or a materialized row array (for materialized hover info from trip layer)
d) {
  if (isTime) {
    return (0, _utils.timeToUnixMilli)(Array.isArray(d) ? d[fieldIdx] : dc.valueAt(d.index, fieldIdx), format);
  }
  return Array.isArray(d) ? d[fieldIdx] : dc.valueAt(d.index, fieldIdx);
}
var KeplerTable = /*#__PURE__*/function () {
  function KeplerTable(_ref) {
    var info = _ref.info,
      color = _ref.color,
      metadata = _ref.metadata,
      _ref$supportedFilterT = _ref.supportedFilterTypes,
      supportedFilterTypes = _ref$supportedFilterT === void 0 ? null : _ref$supportedFilterT,
      _ref$disableDataOpera = _ref.disableDataOperation,
      disableDataOperation = _ref$disableDataOpera === void 0 ? false : _ref$disableDataOpera;
    (0, _classCallCheck2["default"])(this, KeplerTable);
    (0, _defineProperty2["default"])(this, "id", void 0);
    (0, _defineProperty2["default"])(this, "type", void 0);
    (0, _defineProperty2["default"])(this, "label", void 0);
    (0, _defineProperty2["default"])(this, "color", void 0);
    // fields and data
    (0, _defineProperty2["default"])(this, "fields", []);
    (0, _defineProperty2["default"])(this, "dataContainer", void 0);
    (0, _defineProperty2["default"])(this, "allIndexes", []);
    (0, _defineProperty2["default"])(this, "filteredIndex", []);
    (0, _defineProperty2["default"])(this, "filteredIdxCPU", void 0);
    (0, _defineProperty2["default"])(this, "filteredIndexForDomain", []);
    (0, _defineProperty2["default"])(this, "fieldPairs", []);
    (0, _defineProperty2["default"])(this, "gpuFilter", void 0);
    (0, _defineProperty2["default"])(this, "filterRecord", void 0);
    (0, _defineProperty2["default"])(this, "filterRecordCPU", void 0);
    (0, _defineProperty2["default"])(this, "changedFilters", void 0);
    // table-injected metadata
    (0, _defineProperty2["default"])(this, "sortColumn", void 0);
    (0, _defineProperty2["default"])(this, "sortOrder", void 0);
    (0, _defineProperty2["default"])(this, "pinnedColumns", void 0);
    (0, _defineProperty2["default"])(this, "supportedFilterTypes", void 0);
    (0, _defineProperty2["default"])(this, "disableDataOperation", void 0);
    // table-injected metadata
    (0, _defineProperty2["default"])(this, "metadata", void 0);
    (0, _defineProperty2["default"])(this, "getFileProcessor", void 0);
    // TODO - what to do if validation fails? Can kepler handle exceptions?
    // const validatedData = validateInputData(data);
    // if (!validatedData) {
    //   return this;
    // }

    var datasetInfo = _objectSpread({
      id: (0, _commonUtils.generateHashId)(4),
      label: 'new dataset',
      type: ''
    }, info);
    var defaultMetadata = {
      id: datasetInfo.id,
      // @ts-ignore
      format: datasetInfo.format || '',
      label: datasetInfo.label || ''
    };
    this.id = datasetInfo.id;
    this.type = datasetInfo.type;
    this.label = datasetInfo.label;
    this.color = color;
    this.metadata = _objectSpread(_objectSpread({}, defaultMetadata), metadata);
    this.supportedFilterTypes = supportedFilterTypes;
    this.disableDataOperation = disableDataOperation;
    this.dataContainer = (0, _utils.createDataContainer)([]);
    this.gpuFilter = (0, _gpuFilterUtils.getGpuFilterProps)([], this.id, [], undefined);
  }
  return (0, _createClass2["default"])(KeplerTable, [{
    key: "importData",
    value: function () {
      var _importData = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(_ref2) {
        var data, dataContainerData, inputDataFormat, dataContainer, fields, allIndexes;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              data = _ref2.data;
              dataContainerData = data.cols ? data.cols : data.rows;
              inputDataFormat = data.cols ? _utils.DataForm.COLS_ARRAY : _utils.DataForm.ROWS_ARRAY;
              dataContainer = (0, _utils.createDataContainer)(dataContainerData, {
                fields: data.fields,
                inputDataFormat: inputDataFormat
              });
              fields = data.fields.map(function (f, i) {
                return _objectSpread(_objectSpread({}, f), {}, {
                  fieldIdx: i,
                  id: f.name,
                  displayName: f.displayName || f.name,
                  analyzerType: f.analyzerType || _constants.ALL_FIELD_TYPES.string,
                  format: f.format || '',
                  valueAccessor: getFieldValueAccessor(f, i, dataContainer)
                });
              });
              allIndexes = dataContainer.getPlainIndex();
              this.dataContainer = dataContainer;
              this.allIndexes = allIndexes;
              this.filteredIndex = allIndexes;
              this.filteredIndexForDomain = allIndexes;
              this.fieldPairs = findPointFieldPairs(fields);
              // @ts-expect-error Make sure that fields satisfies F extends Field
              this.fields = fields;
              this.gpuFilter = (0, _gpuFilterUtils.getGpuFilterProps)([], this.id, fields, undefined);
            case 13:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function importData(_x) {
        return _importData.apply(this, arguments);
      }
      return importData;
    }()
    /**
     * update table with new data
     * @param data - new data e.g. the arrow data with new batches loaded
     */
  }, {
    key: "update",
    value: (function () {
      var _update = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(data) {
        var _this$dataContainer$u, _this$dataContainer;
        var dataContainerData;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              dataContainerData = data.cols ? data.cols : data.rows;
              (_this$dataContainer$u = (_this$dataContainer = this.dataContainer).update) === null || _this$dataContainer$u === void 0 || _this$dataContainer$u.call(_this$dataContainer, dataContainerData);
              this.allIndexes = this.dataContainer.getPlainIndex();
              this.filteredIndex = this.allIndexes;
              this.filteredIndexForDomain = this.allIndexes;
              return _context2.abrupt("return", this);
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function update(_x2) {
        return _update.apply(this, arguments);
      }
      return update;
    }())
  }, {
    key: "length",
    get: function get() {
      return this.dataContainer.numRows();
    }

    /**
     * Get field
     * @param columnName
     */
  }, {
    key: "getColumnField",
    value: function getColumnField(columnName) {
      var field = this.fields.find(function (fd) {
        return fd[FID_KEY] === columnName;
      });
      this._assetField(columnName, field);
      return field;
    }

    /**
     * Get fieldIdx
     * @param columnName
     */
  }, {
    key: "getColumnFieldIdx",
    value: function getColumnFieldIdx(columnName) {
      var fieldIdx = this.fields.findIndex(function (fd) {
        return fd[FID_KEY] === columnName;
      });
      this._assetField(columnName, Boolean(fieldIdx > -1));
      return fieldIdx;
    }

    /**
     * Get displayFormat
     * @param columnName
     */
  }, {
    key: "getColumnDisplayFormat",
    value: function getColumnDisplayFormat(columnName) {
      var field = this.fields.find(function (fd) {
        return fd[FID_KEY] === columnName;
      });
      this._assetField(columnName, field);
      return field === null || field === void 0 ? void 0 : field.displayFormat;
    }

    /**
     * Get the value of a cell
     */
  }, {
    key: "getValue",
    value: function getValue(columnName, rowIdx) {
      var field = this.getColumnField(columnName);
      return field ? field.valueAccessor({
        index: rowIdx
      }) : null;
    }

    /**
     * Updates existing field with a new object
     * @param fieldIdx
     * @param newField
     */
  }, {
    key: "updateColumnField",
    value: function updateColumnField(fieldIdx, newField) {
      this.fields = Object.assign((0, _toConsumableArray2["default"])(this.fields), (0, _defineProperty2["default"])({}, fieldIdx, newField));
    }

    /**
     * Update dataset color by custom color
     * @param newColor
     */
  }, {
    key: "updateTableColor",
    value: function updateTableColor(newColor) {
      this.color = newColor;
    }

    /**
     * Save filterProps to field and retrieve it
     * @param columnName
     */
  }, {
    key: "getColumnFilterProps",
    value: function getColumnFilterProps(columnName) {
      var fieldIdx = this.getColumnFieldIdx(columnName);
      if (fieldIdx < 0) {
        return null;
      }
      var field = this.fields[fieldIdx];
      if (Object.prototype.hasOwnProperty.call(field, 'filterProps')) {
        return field.filterProps;
      }
      var fieldDomain = this.getColumnFilterDomain(field);
      if (!fieldDomain) {
        return null;
      }
      var filterProps = (0, _utils.getFilterProps)(field, fieldDomain);
      var newField = _objectSpread(_objectSpread({}, field), {}, {
        filterProps: filterProps
      });
      this.updateColumnField(fieldIdx, newField);
      return filterProps;
    }

    /**
     * Apply filters to dataset, return the filtered dataset with updated `gpuFilter`, `filterRecord`, `filteredIndex`, `filteredIndexForDomain`
     * @param filters
     * @param layers
     * @param opt
     */
  }, {
    key: "filterTable",
    value: function filterTable(filters, layers, opt) {
      var _this = this;
      var dataContainer = this.dataContainer,
        dataId = this.id,
        oldFilterRecord = this.filterRecord,
        fields = this.fields;

      // if there is no filters
      var filterRecord = (0, _utils.getFilterRecord)(dataId, filters, opt || {});
      this.filterRecord = filterRecord;
      this.gpuFilter = (0, _gpuFilterUtils.getGpuFilterProps)(filters, dataId, fields, this.gpuFilter);
      this.changedFilters = (0, _utils.diffFilters)(filterRecord, oldFilterRecord);
      if (!filters.length) {
        this.filteredIndex = this.allIndexes;
        this.filteredIndexForDomain = this.allIndexes;
        return this;
      }

      // generate 2 sets of filter result
      // filteredIndex used to calculate layer data
      // filteredIndexForDomain used to calculate layer Domain
      var shouldCalDomain = Boolean(this.changedFilters.dynamicDomain);
      var shouldCalIndex = Boolean(this.changedFilters.cpu);
      var filterResult = {};
      if (shouldCalDomain || shouldCalIndex) {
        var dynamicDomainFilters = shouldCalDomain ? filterRecord.dynamicDomain : null;
        var cpuFilters = shouldCalIndex ? filterRecord.cpu : null;
        var filterFuncs = filters.reduce(function (acc, filter) {
          var fieldIndex = (0, _gpuFilterUtils.getDatasetFieldIndexForFilter)(_this.id, filter);
          var field = fieldIndex !== -1 ? fields[fieldIndex] : null;
          return _objectSpread(_objectSpread({}, acc), {}, (0, _defineProperty2["default"])({}, filter.id, (0, _utils.getFilterFunction)(field, _this.id, filter, layers, dataContainer)));
        }, {});
        filterResult = (0, _utils.filterDataByFilterTypes)({
          dynamicDomainFilters: dynamicDomainFilters,
          cpuFilters: cpuFilters,
          filterFuncs: filterFuncs
        }, dataContainer);
      }
      this.filteredIndex = filterResult.filteredIndex || this.filteredIndex;
      this.filteredIndexForDomain = filterResult.filteredIndexForDomain || this.filteredIndexForDomain;
      return this;
    }

    /**
     * Apply filters to a dataset all on CPU, assign to `filteredIdxCPU`, `filterRecordCPU`
     * @param filters
     * @param layers
     */
  }, {
    key: "filterTableCPU",
    value: function filterTableCPU(filters, layers) {
      var opt = {
        cpuOnly: true,
        ignoreDomain: true
      };

      // no filter
      if (!filters.length) {
        this.filteredIdxCPU = this.allIndexes;
        this.filterRecordCPU = (0, _utils.getFilterRecord)(this.id, filters, opt);
        return this;
      }

      // no gpu filter
      if (!filters.find(function (f) {
        return f.gpu;
      })) {
        this.filteredIdxCPU = this.filteredIndex;
        this.filterRecordCPU = (0, _utils.getFilterRecord)(this.id, filters, opt);
        return this;
      }

      // make a copy for cpu filtering
      var copied = copyTable(this);
      copied.filterRecord = this.filterRecordCPU;
      copied.filteredIndex = this.filteredIdxCPU || [];
      var filtered = copied.filterTable(filters, layers, opt);
      this.filteredIdxCPU = filtered.filteredIndex;
      this.filterRecordCPU = filtered.filterRecord;
      return this;
    }

    /**
     * Calculate field domain based on field type and data
     * for Filter
     */
  }, {
    key: "getColumnFilterDomain",
    value: function getColumnFilterDomain(field) {
      var dataContainer = this.dataContainer;
      var valueAccessor = field.valueAccessor;
      var domain;
      switch (field.type) {
        case _constants.ALL_FIELD_TYPES.real:
        case _constants.ALL_FIELD_TYPES.integer:
          // calculate domain and step
          return (0, _utils.getNumericFieldDomain)(dataContainer, valueAccessor);
        case _constants.ALL_FIELD_TYPES["boolean"]:
          return {
            domain: [true, false]
          };
        case _constants.ALL_FIELD_TYPES.string:
        case _constants.ALL_FIELD_TYPES.h3:
        case _constants.ALL_FIELD_TYPES.date:
          domain = (0, _utils.getOrdinalDomain)(dataContainer, valueAccessor);
          return {
            domain: domain
          };
        case _constants.ALL_FIELD_TYPES.timestamp:
          return (0, _utils.getTimestampFieldDomain)(dataContainer, valueAccessor);
        default:
          return {
            domain: (0, _utils.getOrdinalDomain)(dataContainer, valueAccessor)
          };
      }
    }

    /**
     *  Get the domain of this column based on scale type
     */
  }, {
    key: "getColumnLayerDomain",
    value: function getColumnLayerDomain(field, scaleType) {
      var dataContainer = this.dataContainer,
        filteredIndexForDomain = this.filteredIndexForDomain;
      if (!_constants.SCALE_TYPES[scaleType]) {
        _console["default"].error("scale type ".concat(scaleType, " not supported"));
        return null;
      }
      var valueAccessor = field.valueAccessor;
      var indexValueAccessor = function indexValueAccessor(i) {
        return valueAccessor({
          index: i
        });
      };
      var sortFunction = (0, _utils.getSortingFunction)(field.type);
      switch (scaleType) {
        case _constants.SCALE_TYPES.ordinal:
        case _constants.SCALE_TYPES.customOrdinal:
        case _constants.SCALE_TYPES.point:
          // do not recalculate ordinal domain based on filtered data
          // don't need to update ordinal domain every time
          return (0, _utils.getOrdinalDomain)(dataContainer, valueAccessor);
        case _constants.SCALE_TYPES.quantile:
          return (0, _utils.getQuantileDomain)(filteredIndexForDomain, indexValueAccessor, sortFunction);
        case _constants.SCALE_TYPES.log:
          return (0, _utils.getLogDomain)(filteredIndexForDomain, indexValueAccessor);
        case _constants.SCALE_TYPES.quantize:
        case _constants.SCALE_TYPES.linear:
        case _constants.SCALE_TYPES.sqrt:
        case _constants.SCALE_TYPES.custom:
        default:
          return (0, _utils.getLinearDomain)(filteredIndexForDomain, indexValueAccessor);
      }
    }

    /**
     * Get a sample of rows to calculate layer boundaries
     */
    // getSampleData(rows)

    /**
     * Parse cell value based on column type and return a string representation
     * Value the field value, type the field type
     */
    // parseFieldValue(value, type)

    // sortDatasetByColumn()

    /**
     * Assert whether field exist
     * @param fieldName
     * @param condition
     */
  }, {
    key: "_assetField",
    value: function _assetField(fieldName, condition) {
      if (!condition) {
        _console["default"].error("".concat(fieldName, " doesnt exist in dataset ").concat(this.id));
      }
    }
  }]);
}();
// HELPER FUNCTIONS (MAINLY EXPORTED FOR TEST...)
// have to double excape
var specialCharacterSet = "[#_&@\\.\\-\\ ]";
function foundMatchingFields(re, suffixPair, allNames, fieldName) {
  var partnerIdx = allNames.findIndex(function (d) {
    return d === fieldName.replace(re, function (match) {
      return match.replace(suffixPair[0], suffixPair[1]);
    });
  });
  var altIdx = -1;
  if (partnerIdx > -1) {
    // if found partner, go on and look for altitude
    _constants.ALTITUDE_FIELDS.some(function (alt) {
      altIdx = allNames.findIndex(function (d) {
        return d === fieldName.replace(re, function (match) {
          return match.replace(suffixPair[0], alt);
        });
      });
      return altIdx > -1;
    });
  }
  return {
    partnerIdx: partnerIdx,
    altIdx: altIdx
  };
}
/**
 * Find point fields pairs from fields
 *
 * @param fields
 * @returns found point fields
 */
function findPointFieldPairs(fields) {
  var allNames = fields.map(function (f) {
    return f.name.toLowerCase();
  });

  // get list of all fields with matching suffixes
  var acc = [];
  return allNames.reduce(function (carry, fieldName, idx) {
    // This search for pairs will early exit if found.
    var _iterator = _createForOfIteratorHelper(_constants.TRIP_POINT_FIELDS),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var suffixPair = _step.value;
        // match first suffix
        // (^|[#_&@\.\-\ ])lat([#_&@\.\-\ ]|$)
        var re = new RegExp("(^|".concat(specialCharacterSet, ")").concat(suffixPair[0], "(").concat(specialCharacterSet, "|$)"));
        if (re.test(fieldName)) {
          var _foundMatchingFields = foundMatchingFields(re, suffixPair, allNames, fieldName),
            partnerIdx = _foundMatchingFields.partnerIdx,
            altIdx = _foundMatchingFields.altIdx;
          if (partnerIdx > -1) {
            var trimName = fieldName.replace(re, '').trim();
            carry.push({
              defaultName: trimName || 'point',
              pair: _objectSpread({
                lat: {
                  fieldIdx: idx,
                  value: fields[idx].name
                },
                lng: {
                  fieldIdx: partnerIdx,
                  value: fields[partnerIdx].name
                }
              }, altIdx > -1 ? {
                altitude: {
                  fieldIdx: altIdx,
                  value: fields[altIdx].name
                }
              } : {}),
              suffix: suffixPair
            });
            return carry;
          }
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return carry;
  }, acc);
}

/**
 *
 * @param dataset
 * @param column
 * @param mode
 * @type
 */
function sortDatasetByColumn(dataset, column, mode) {
  var allIndexes = dataset.allIndexes,
    fields = dataset.fields,
    dataContainer = dataset.dataContainer;
  var fieldIndex = fields.findIndex(function (f) {
    return f.name === column;
  });
  if (fieldIndex < 0) {
    return dataset;
  }
  var sortBy = _constants.SORT_ORDER[mode || ''] || _constants.SORT_ORDER.ASCENDING;
  if (sortBy === _constants.SORT_ORDER.UNSORT) {
    dataset.sortColumn = {};
    dataset.sortOrder = null;
    return dataset;
  }
  var sortFunction = sortBy === _constants.SORT_ORDER.ASCENDING ? _d3Array.ascending : _d3Array.descending;
  var sortOrder = allIndexes.slice().sort(function (a, b) {
    var value1 = dataContainer.valueAt(a, fieldIndex);
    var value2 = dataContainer.valueAt(b, fieldIndex);
    if (!(0, _commonUtils.notNullorUndefined)(value1) && (0, _commonUtils.notNullorUndefined)(value2)) {
      return 1;
    } else if ((0, _commonUtils.notNullorUndefined)(value1) && !(0, _commonUtils.notNullorUndefined)(value2)) {
      return -1;
    }
    return sortFunction(value1, value2);
  });
  dataset.sortColumn = (0, _defineProperty2["default"])({}, column, sortBy);
  dataset.sortOrder = sortOrder;
  return dataset;
}
function pinTableColumns(dataset, column) {
  var field = dataset.getColumnField(column);
  if (!field) {
    return dataset;
  }
  var pinnedColumns;
  if (Array.isArray(dataset.pinnedColumns) && dataset.pinnedColumns.includes(field.name)) {
    // unpin it
    pinnedColumns = dataset.pinnedColumns.filter(function (co) {
      return co !== field.name;
    });
  } else {
    pinnedColumns = (dataset.pinnedColumns || []).concat(field.name);
  }

  // @ts-ignore
  return copyTableAndUpdate(dataset, {
    pinnedColumns: pinnedColumns
  });
}
function copyTable(original) {
  return Object.assign(Object.create(Object.getPrototypeOf(original)), original);
}

/**
 * @type
 * @returns
 */
function copyTableAndUpdate(original) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return Object.entries(options).reduce(function (acc, entry) {
    acc[entry[0]] = entry[1];
    return acc;
  }, copyTable(original));
}
function getFieldValueAccessor(f, i, dc) {
  return maybeToDate.bind(null,
  // is time
  f.type === _constants.ALL_FIELD_TYPES.timestamp, i, f.format || '', dc);
}
var _default = exports["default"] = KeplerTable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29uc29sZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2QzQXJyYXkiLCJfY29uc3RhbnRzIiwiX2dwdUZpbHRlclV0aWxzIiwiX3V0aWxzIiwiX2NvbW1vblV0aWxzIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJyIiwiZSIsInQiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkFycmF5IiwiaXNBcnJheSIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsImxlbmd0aCIsIl9uIiwiRiIsInMiLCJuIiwiZG9uZSIsInZhbHVlIiwiZiIsIlR5cGVFcnJvciIsIm8iLCJhIiwidSIsImNhbGwiLCJuZXh0IiwiX2FycmF5TGlrZVRvQXJyYXkiLCJ0b1N0cmluZyIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiZnJvbSIsInRlc3QiLCJvd25LZXlzIiwiT2JqZWN0Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5IiwiRklEX0tFWSIsIm1heWJlVG9EYXRlIiwiaXNUaW1lIiwiZmllbGRJZHgiLCJmb3JtYXQiLCJkYyIsImQiLCJ0aW1lVG9Vbml4TWlsbGkiLCJ2YWx1ZUF0IiwiaW5kZXgiLCJLZXBsZXJUYWJsZSIsIl9yZWYiLCJpbmZvIiwiY29sb3IiLCJtZXRhZGF0YSIsIl9yZWYkc3VwcG9ydGVkRmlsdGVyVCIsInN1cHBvcnRlZEZpbHRlclR5cGVzIiwiX3JlZiRkaXNhYmxlRGF0YU9wZXJhIiwiZGlzYWJsZURhdGFPcGVyYXRpb24iLCJfY2xhc3NDYWxsQ2hlY2syIiwiZGF0YXNldEluZm8iLCJpZCIsImdlbmVyYXRlSGFzaElkIiwibGFiZWwiLCJ0eXBlIiwiZGVmYXVsdE1ldGFkYXRhIiwiZGF0YUNvbnRhaW5lciIsImNyZWF0ZURhdGFDb250YWluZXIiLCJncHVGaWx0ZXIiLCJnZXRHcHVGaWx0ZXJQcm9wcyIsInVuZGVmaW5lZCIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJfaW1wb3J0RGF0YSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWdlbmVyYXRvciIsIm1hcmsiLCJfY2FsbGVlIiwiX3JlZjIiLCJkYXRhIiwiZGF0YUNvbnRhaW5lckRhdGEiLCJpbnB1dERhdGFGb3JtYXQiLCJmaWVsZHMiLCJhbGxJbmRleGVzIiwid3JhcCIsIl9jYWxsZWUkIiwiX2NvbnRleHQiLCJwcmV2IiwiY29scyIsInJvd3MiLCJEYXRhRm9ybSIsIkNPTFNfQVJSQVkiLCJST1dTX0FSUkFZIiwibWFwIiwiaSIsImRpc3BsYXlOYW1lIiwiYW5hbHl6ZXJUeXBlIiwiQUxMX0ZJRUxEX1RZUEVTIiwic3RyaW5nIiwidmFsdWVBY2Nlc3NvciIsImdldEZpZWxkVmFsdWVBY2Nlc3NvciIsImdldFBsYWluSW5kZXgiLCJmaWx0ZXJlZEluZGV4IiwiZmlsdGVyZWRJbmRleEZvckRvbWFpbiIsImZpZWxkUGFpcnMiLCJmaW5kUG9pbnRGaWVsZFBhaXJzIiwic3RvcCIsImltcG9ydERhdGEiLCJfeCIsIl91cGRhdGUiLCJfY2FsbGVlMiIsIl90aGlzJGRhdGFDb250YWluZXIkdSIsIl90aGlzJGRhdGFDb250YWluZXIiLCJfY2FsbGVlMiQiLCJfY29udGV4dDIiLCJ1cGRhdGUiLCJhYnJ1cHQiLCJfeDIiLCJnZXQiLCJudW1Sb3dzIiwiZ2V0Q29sdW1uRmllbGQiLCJjb2x1bW5OYW1lIiwiZmllbGQiLCJmaW5kIiwiZmQiLCJfYXNzZXRGaWVsZCIsImdldENvbHVtbkZpZWxkSWR4IiwiZmluZEluZGV4IiwiQm9vbGVhbiIsImdldENvbHVtbkRpc3BsYXlGb3JtYXQiLCJkaXNwbGF5Rm9ybWF0IiwiZ2V0VmFsdWUiLCJyb3dJZHgiLCJ1cGRhdGVDb2x1bW5GaWVsZCIsIm5ld0ZpZWxkIiwiYXNzaWduIiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsInVwZGF0ZVRhYmxlQ29sb3IiLCJuZXdDb2xvciIsImdldENvbHVtbkZpbHRlclByb3BzIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJmaWx0ZXJQcm9wcyIsImZpZWxkRG9tYWluIiwiZ2V0Q29sdW1uRmlsdGVyRG9tYWluIiwiZ2V0RmlsdGVyUHJvcHMiLCJmaWx0ZXJUYWJsZSIsImZpbHRlcnMiLCJsYXllcnMiLCJvcHQiLCJfdGhpcyIsImRhdGFJZCIsIm9sZEZpbHRlclJlY29yZCIsImZpbHRlclJlY29yZCIsImdldEZpbHRlclJlY29yZCIsImNoYW5nZWRGaWx0ZXJzIiwiZGlmZkZpbHRlcnMiLCJzaG91bGRDYWxEb21haW4iLCJkeW5hbWljRG9tYWluIiwic2hvdWxkQ2FsSW5kZXgiLCJjcHUiLCJmaWx0ZXJSZXN1bHQiLCJkeW5hbWljRG9tYWluRmlsdGVycyIsImNwdUZpbHRlcnMiLCJmaWx0ZXJGdW5jcyIsInJlZHVjZSIsImFjYyIsImZpZWxkSW5kZXgiLCJnZXREYXRhc2V0RmllbGRJbmRleEZvckZpbHRlciIsImdldEZpbHRlckZ1bmN0aW9uIiwiZmlsdGVyRGF0YUJ5RmlsdGVyVHlwZXMiLCJmaWx0ZXJUYWJsZUNQVSIsImNwdU9ubHkiLCJpZ25vcmVEb21haW4iLCJmaWx0ZXJlZElkeENQVSIsImZpbHRlclJlY29yZENQVSIsImdwdSIsImNvcGllZCIsImNvcHlUYWJsZSIsImZpbHRlcmVkIiwiZG9tYWluIiwicmVhbCIsImludGVnZXIiLCJnZXROdW1lcmljRmllbGREb21haW4iLCJoMyIsImRhdGUiLCJnZXRPcmRpbmFsRG9tYWluIiwidGltZXN0YW1wIiwiZ2V0VGltZXN0YW1wRmllbGREb21haW4iLCJnZXRDb2x1bW5MYXllckRvbWFpbiIsInNjYWxlVHlwZSIsIlNDQUxFX1RZUEVTIiwiQ29uc29sZSIsImVycm9yIiwiY29uY2F0IiwiaW5kZXhWYWx1ZUFjY2Vzc29yIiwic29ydEZ1bmN0aW9uIiwiZ2V0U29ydGluZ0Z1bmN0aW9uIiwib3JkaW5hbCIsImN1c3RvbU9yZGluYWwiLCJwb2ludCIsInF1YW50aWxlIiwiZ2V0UXVhbnRpbGVEb21haW4iLCJsb2ciLCJnZXRMb2dEb21haW4iLCJxdWFudGl6ZSIsImxpbmVhciIsInNxcnQiLCJjdXN0b20iLCJnZXRMaW5lYXJEb21haW4iLCJmaWVsZE5hbWUiLCJjb25kaXRpb24iLCJzcGVjaWFsQ2hhcmFjdGVyU2V0IiwiZm91bmRNYXRjaGluZ0ZpZWxkcyIsInJlIiwic3VmZml4UGFpciIsImFsbE5hbWVzIiwicGFydG5lcklkeCIsInJlcGxhY2UiLCJtYXRjaCIsImFsdElkeCIsIkFMVElUVURFX0ZJRUxEUyIsInNvbWUiLCJhbHQiLCJ0b0xvd2VyQ2FzZSIsImNhcnJ5IiwiaWR4IiwiX2l0ZXJhdG9yIiwiVFJJUF9QT0lOVF9GSUVMRFMiLCJfc3RlcCIsIlJlZ0V4cCIsIl9mb3VuZE1hdGNoaW5nRmllbGRzIiwidHJpbU5hbWUiLCJ0cmltIiwiZGVmYXVsdE5hbWUiLCJwYWlyIiwibGF0IiwibG5nIiwiYWx0aXR1ZGUiLCJzdWZmaXgiLCJlcnIiLCJzb3J0RGF0YXNldEJ5Q29sdW1uIiwiZGF0YXNldCIsImNvbHVtbiIsIm1vZGUiLCJzb3J0QnkiLCJTT1JUX09SREVSIiwiQVNDRU5ESU5HIiwiVU5TT1JUIiwic29ydENvbHVtbiIsInNvcnRPcmRlciIsImFzY2VuZGluZyIsImRlc2NlbmRpbmciLCJzb3J0IiwiYiIsInZhbHVlMSIsInZhbHVlMiIsIm5vdE51bGxvclVuZGVmaW5lZCIsInBpblRhYmxlQ29sdW1ucyIsInBpbm5lZENvbHVtbnMiLCJpbmNsdWRlcyIsImNvIiwiY29weVRhYmxlQW5kVXBkYXRlIiwib3JpZ2luYWwiLCJjcmVhdGUiLCJnZXRQcm90b3R5cGVPZiIsIm9wdGlvbnMiLCJlbnRyaWVzIiwiZW50cnkiLCJiaW5kIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vc3JjL2tlcGxlci10YWJsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQgQ29uc29sZSBmcm9tICdnbG9iYWwvY29uc29sZSc7XG5pbXBvcnQge2FzY2VuZGluZywgZGVzY2VuZGluZ30gZnJvbSAnZDMtYXJyYXknO1xuXG5pbXBvcnQge1xuICBUUklQX1BPSU5UX0ZJRUxEUyxcbiAgU09SVF9PUkRFUixcbiAgQUxMX0ZJRUxEX1RZUEVTLFxuICBBTFRJVFVERV9GSUVMRFMsXG4gIFNDQUxFX1RZUEVTXG59IGZyb20gJ0BrZXBsZXIuZ2wvY29uc3RhbnRzJztcbmltcG9ydCB7XG4gIFJHQkNvbG9yLFxuICBGaWVsZCxcbiAgRmllbGRQYWlyLFxuICBGaWVsZERvbWFpbixcbiAgRmlsdGVyLFxuICBQcm90b0RhdGFzZXQsXG4gIEZpbHRlclJlY29yZCxcbiAgRmlsdGVyRGF0YXNldE9wdCxcbiAgUmFuZ2VGaWVsZERvbWFpbixcbiAgU2VsZWN0RmllbGREb21haW4sXG4gIE11bHRpU2VsZWN0RmllbGREb21haW4sXG4gIFRpbWVSYW5nZUZpZWxkRG9tYWluXG59IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuXG5pbXBvcnQge2dldEdwdUZpbHRlclByb3BzLCBnZXREYXRhc2V0RmllbGRJbmRleEZvckZpbHRlcn0gZnJvbSAnLi9ncHUtZmlsdGVyLXV0aWxzJztcblxuaW1wb3J0IHtcbiAgZ2V0U29ydGluZ0Z1bmN0aW9uLFxuICB0aW1lVG9Vbml4TWlsbGksXG4gIGNyZWF0ZURhdGFDb250YWluZXIsXG4gIERhdGFGb3JtLFxuICBkaWZmRmlsdGVycyxcbiAgZmlsdGVyRGF0YUJ5RmlsdGVyVHlwZXMsXG4gIEZpbHRlclJlc3VsdCxcbiAgZ2V0RmlsdGVyRnVuY3Rpb24sXG4gIGdldEZpbHRlclByb3BzLFxuICBnZXRGaWx0ZXJSZWNvcmQsXG4gIGdldE51bWVyaWNGaWVsZERvbWFpbixcbiAgZ2V0VGltZXN0YW1wRmllbGREb21haW4sXG4gIGdldExpbmVhckRvbWFpbixcbiAgZ2V0TG9nRG9tYWluLFxuICBnZXRPcmRpbmFsRG9tYWluLFxuICBnZXRRdWFudGlsZURvbWFpbixcbiAgRGF0YUNvbnRhaW5lckludGVyZmFjZSxcbiAgRmlsdGVyQ2hhbmdlZFxufSBmcm9tICdAa2VwbGVyLmdsL3V0aWxzJztcbmltcG9ydCB7Z2VuZXJhdGVIYXNoSWQsIG5vdE51bGxvclVuZGVmaW5lZH0gZnJvbSAnQGtlcGxlci5nbC9jb21tb24tdXRpbHMnO1xuXG4vLyBUT0RPIGlzb2xhdGUgbGF5ZXIgdHlwZSwgZGVwZW5kcyBvbiBAa2VwbGVyLmdsL2xheWVyc1xudHlwZSBMYXllciA9IGFueTtcblxuZXhwb3J0IHR5cGUgR3B1RmlsdGVyID0ge1xuICBmaWx0ZXJSYW5nZTogbnVtYmVyW11bXTtcbiAgZmlsdGVyVmFsdWVVcGRhdGVUcmlnZ2Vyczoge1xuICAgIFtpZDogc3RyaW5nXToge25hbWU6IHN0cmluZzsgZG9tYWluMDogbnVtYmVyfSB8IG51bGw7XG4gIH07XG4gIGZpbHRlclZhbHVlQWNjZXNzb3I6IChcbiAgICBkYzogRGF0YUNvbnRhaW5lckludGVyZmFjZVxuICApID0+IChcbiAgICBnZXRJbmRleD86IChhbnkpID0+IG51bWJlcixcbiAgICBnZXREYXRhPzogKGRjXzogRGF0YUNvbnRhaW5lckludGVyZmFjZSwgZDogYW55LCBmaWVsZEluZGV4OiBudW1iZXIpID0+IGFueVxuICApID0+IChkOiBhbnksIG9iamVjdEluZm8/OiB7aW5kZXg6IG51bWJlcn0pID0+IChudW1iZXIgfCBudW1iZXJbXSlbXTtcbn07XG5cbmV4cG9ydCB0eXBlIEZpbHRlclByb3BzID1cbiAgfCBOdW1lcmljRmllbGRGaWx0ZXJQcm9wc1xuICB8IEJvb2xlYW5GaWVsZEZpbHRlclByb3BzXG4gIHwgU3RyaW5nRmllbGRGaWx0ZXJQcm9wc1xuICB8IFRpbWVGaWVsZEZpbHRlclByb3BzO1xuXG5leHBvcnQgdHlwZSBOdW1lcmljRmllbGRGaWx0ZXJQcm9wcyA9IFJhbmdlRmllbGREb21haW4gJiB7XG4gIHZhbHVlOiBbbnVtYmVyLCBudW1iZXJdO1xuICB0eXBlOiBzdHJpbmc7XG4gIHR5cGVPcHRpb25zOiBzdHJpbmdbXTtcbiAgZ3B1OiBib29sZWFuO1xuICBjb2x1bW5TdGF0cz86IFJlY29yZDxzdHJpbmcsIGFueT47XG59O1xuZXhwb3J0IHR5cGUgQm9vbGVhbkZpZWxkRmlsdGVyUHJvcHMgPSBTZWxlY3RGaWVsZERvbWFpbiAmIHtcbiAgdHlwZTogc3RyaW5nO1xuICB2YWx1ZTogYm9vbGVhbjtcbiAgZ3B1OiBib29sZWFuO1xuICBjb2x1bW5TdGF0cz86IFJlY29yZDxzdHJpbmcsIGFueT47XG59O1xuZXhwb3J0IHR5cGUgU3RyaW5nRmllbGRGaWx0ZXJQcm9wcyA9IE11bHRpU2VsZWN0RmllbGREb21haW4gJiB7XG4gIHR5cGU6IHN0cmluZztcbiAgdmFsdWU6IHN0cmluZ1tdO1xuICBncHU6IGJvb2xlYW47XG4gIGNvbHVtblN0YXRzPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn07XG5leHBvcnQgdHlwZSBUaW1lRmllbGRGaWx0ZXJQcm9wcyA9IFRpbWVSYW5nZUZpZWxkRG9tYWluICYge1xuICB0eXBlOiBzdHJpbmc7XG4gIHZpZXc6IEZpbHRlclsndmlldyddO1xuICBmaXhlZERvbWFpbjogYm9vbGVhbjtcbiAgdmFsdWU6IG51bWJlcltdO1xuICBncHU6IGJvb2xlYW47XG4gIGNvbHVtblN0YXRzPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn07XG5cbi8vIFVuaXF1ZSBpZGVudGlmaWVyIG9mIGVhY2ggZmllbGRcbmNvbnN0IEZJRF9LRVkgPSAnbmFtZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVRvRGF0ZShcbiAgaXNUaW1lOiBib29sZWFuLFxuICBmaWVsZElkeDogbnVtYmVyLFxuICBmb3JtYXQ6IHN0cmluZyxcbiAgZGM6IERhdGFDb250YWluZXJJbnRlcmZhY2UsXG4gIC8vIEFuIG9iamVjdCB3aXRoIHJvdyBpbmRleCBvciBhIG1hdGVyaWFsaXplZCByb3cgYXJyYXkgKGZvciBtYXRlcmlhbGl6ZWQgaG92ZXIgaW5mbyBmcm9tIHRyaXAgbGF5ZXIpXG4gIGQ6IHtpbmRleDogbnVtYmVyfSB8IGFueVtdXG4pIHtcbiAgaWYgKGlzVGltZSkge1xuICAgIHJldHVybiB0aW1lVG9Vbml4TWlsbGkoQXJyYXkuaXNBcnJheShkKSA/IGRbZmllbGRJZHhdIDogZGMudmFsdWVBdChkLmluZGV4LCBmaWVsZElkeCksIGZvcm1hdCk7XG4gIH1cblxuICByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IGRbZmllbGRJZHhdIDogZGMudmFsdWVBdChkLmluZGV4LCBmaWVsZElkeCk7XG59XG5cbmNsYXNzIEtlcGxlclRhYmxlPEYgZXh0ZW5kcyBGaWVsZCA9IEZpZWxkPiB7XG4gIHJlYWRvbmx5IGlkOiBzdHJpbmc7XG5cbiAgdHlwZT86IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgY29sb3I6IFJHQkNvbG9yO1xuXG4gIC8vIGZpZWxkcyBhbmQgZGF0YVxuICBmaWVsZHM6IEZbXSA9IFtdO1xuXG4gIGRhdGFDb250YWluZXI6IERhdGFDb250YWluZXJJbnRlcmZhY2U7XG5cbiAgYWxsSW5kZXhlczogbnVtYmVyW10gPSBbXTtcbiAgZmlsdGVyZWRJbmRleDogbnVtYmVyW10gPSBbXTtcbiAgZmlsdGVyZWRJZHhDUFU/OiBudW1iZXJbXTtcbiAgZmlsdGVyZWRJbmRleEZvckRvbWFpbjogbnVtYmVyW10gPSBbXTtcbiAgZmllbGRQYWlyczogRmllbGRQYWlyW10gPSBbXTtcbiAgZ3B1RmlsdGVyOiBHcHVGaWx0ZXI7XG4gIGZpbHRlclJlY29yZD86IEZpbHRlclJlY29yZDtcbiAgZmlsdGVyUmVjb3JkQ1BVPzogRmlsdGVyUmVjb3JkO1xuICBjaGFuZ2VkRmlsdGVycz86IEZpbHRlckNoYW5nZWQ7XG5cbiAgLy8gdGFibGUtaW5qZWN0ZWQgbWV0YWRhdGFcbiAgc29ydENvbHVtbj86IHtcbiAgICAvLyBjb2x1bW4gbmFtZTogc29ydGVkIGlkeFxuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZzsgLy8gQVNDRU5ESU5HIHwgREVTQ0VORElORyB8IFVOU09SVFxuICB9O1xuICBzb3J0T3JkZXI/OiBudW1iZXJbXSB8IG51bGw7XG5cbiAgcGlubmVkQ29sdW1ucz86IHN0cmluZ1tdO1xuICBzdXBwb3J0ZWRGaWx0ZXJUeXBlcz86IHN0cmluZ1tdIHwgbnVsbDtcbiAgZGlzYWJsZURhdGFPcGVyYXRpb24/OiBib29sZWFuO1xuXG4gIC8vIHRhYmxlLWluamVjdGVkIG1ldGFkYXRhXG4gIG1ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG4gIGdldEZpbGVQcm9jZXNzb3I/OiAoZGF0YTogYW55LCBpbnB1dEZvcm1hdD86IHN0cmluZykgPT4ge2RhdGE6IGFueTsgZm9ybWF0OiBzdHJpbmd9O1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBpbmZvLFxuICAgIGNvbG9yLFxuICAgIG1ldGFkYXRhLFxuICAgIHN1cHBvcnRlZEZpbHRlclR5cGVzID0gbnVsbCxcbiAgICBkaXNhYmxlRGF0YU9wZXJhdGlvbiA9IGZhbHNlXG4gIH06IHtcbiAgICBpbmZvPzogUHJvdG9EYXRhc2V0WydpbmZvJ107XG4gICAgY29sb3I6IFJHQkNvbG9yO1xuICAgIG1ldGFkYXRhPzogUHJvdG9EYXRhc2V0WydtZXRhZGF0YSddO1xuICAgIHN1cHBvcnRlZEZpbHRlclR5cGVzPzogUHJvdG9EYXRhc2V0WydzdXBwb3J0ZWRGaWx0ZXJUeXBlcyddO1xuICAgIGRpc2FibGVEYXRhT3BlcmF0aW9uPzogUHJvdG9EYXRhc2V0WydkaXNhYmxlRGF0YU9wZXJhdGlvbiddO1xuICB9KSB7XG4gICAgLy8gVE9ETyAtIHdoYXQgdG8gZG8gaWYgdmFsaWRhdGlvbiBmYWlscz8gQ2FuIGtlcGxlciBoYW5kbGUgZXhjZXB0aW9ucz9cbiAgICAvLyBjb25zdCB2YWxpZGF0ZWREYXRhID0gdmFsaWRhdGVJbnB1dERhdGEoZGF0YSk7XG4gICAgLy8gaWYgKCF2YWxpZGF0ZWREYXRhKSB7XG4gICAgLy8gICByZXR1cm4gdGhpcztcbiAgICAvLyB9XG5cbiAgICBjb25zdCBkYXRhc2V0SW5mbyA9IHtcbiAgICAgIGlkOiBnZW5lcmF0ZUhhc2hJZCg0KSxcbiAgICAgIGxhYmVsOiAnbmV3IGRhdGFzZXQnLFxuICAgICAgdHlwZTogJycsXG4gICAgICAuLi5pbmZvXG4gICAgfTtcblxuICAgIGNvbnN0IGRlZmF1bHRNZXRhZGF0YSA9IHtcbiAgICAgIGlkOiBkYXRhc2V0SW5mby5pZCxcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGZvcm1hdDogZGF0YXNldEluZm8uZm9ybWF0IHx8ICcnLFxuICAgICAgbGFiZWw6IGRhdGFzZXRJbmZvLmxhYmVsIHx8ICcnXG4gICAgfTtcblxuICAgIHRoaXMuaWQgPSBkYXRhc2V0SW5mby5pZDtcbiAgICB0aGlzLnR5cGUgPSBkYXRhc2V0SW5mby50eXBlO1xuICAgIHRoaXMubGFiZWwgPSBkYXRhc2V0SW5mby5sYWJlbDtcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgdGhpcy5tZXRhZGF0YSA9IHtcbiAgICAgIC4uLmRlZmF1bHRNZXRhZGF0YSxcbiAgICAgIC4uLm1ldGFkYXRhXG4gICAgfTtcblxuICAgIHRoaXMuc3VwcG9ydGVkRmlsdGVyVHlwZXMgPSBzdXBwb3J0ZWRGaWx0ZXJUeXBlcztcbiAgICB0aGlzLmRpc2FibGVEYXRhT3BlcmF0aW9uID0gZGlzYWJsZURhdGFPcGVyYXRpb247XG5cbiAgICB0aGlzLmRhdGFDb250YWluZXIgPSBjcmVhdGVEYXRhQ29udGFpbmVyKFtdKTtcbiAgICB0aGlzLmdwdUZpbHRlciA9IGdldEdwdUZpbHRlclByb3BzKFtdLCB0aGlzLmlkLCBbXSwgdW5kZWZpbmVkKTtcbiAgfVxuXG4gIGFzeW5jIGltcG9ydERhdGEoe2RhdGF9OiB7ZGF0YTogUHJvdG9EYXRhc2V0WydkYXRhJ119KSB7XG4gICAgY29uc3QgZGF0YUNvbnRhaW5lckRhdGEgPSBkYXRhLmNvbHMgPyBkYXRhLmNvbHMgOiBkYXRhLnJvd3M7XG4gICAgY29uc3QgaW5wdXREYXRhRm9ybWF0ID0gZGF0YS5jb2xzID8gRGF0YUZvcm0uQ09MU19BUlJBWSA6IERhdGFGb3JtLlJPV1NfQVJSQVk7XG5cbiAgICBjb25zdCBkYXRhQ29udGFpbmVyID0gY3JlYXRlRGF0YUNvbnRhaW5lcihkYXRhQ29udGFpbmVyRGF0YSwge1xuICAgICAgZmllbGRzOiBkYXRhLmZpZWxkcyxcbiAgICAgIGlucHV0RGF0YUZvcm1hdFxuICAgIH0pO1xuXG4gICAgY29uc3QgZmllbGRzOiBGaWVsZFtdID0gZGF0YS5maWVsZHMubWFwKChmLCBpKSA9PiAoe1xuICAgICAgLi4uZixcbiAgICAgIGZpZWxkSWR4OiBpLFxuICAgICAgaWQ6IGYubmFtZSxcbiAgICAgIGRpc3BsYXlOYW1lOiBmLmRpc3BsYXlOYW1lIHx8IGYubmFtZSxcbiAgICAgIGFuYWx5emVyVHlwZTogZi5hbmFseXplclR5cGUgfHwgQUxMX0ZJRUxEX1RZUEVTLnN0cmluZyxcbiAgICAgIGZvcm1hdDogZi5mb3JtYXQgfHwgJycsXG4gICAgICB2YWx1ZUFjY2Vzc29yOiBnZXRGaWVsZFZhbHVlQWNjZXNzb3IoZiwgaSwgZGF0YUNvbnRhaW5lcilcbiAgICB9KSk7XG5cbiAgICBjb25zdCBhbGxJbmRleGVzID0gZGF0YUNvbnRhaW5lci5nZXRQbGFpbkluZGV4KCk7XG4gICAgdGhpcy5kYXRhQ29udGFpbmVyID0gZGF0YUNvbnRhaW5lcjtcbiAgICB0aGlzLmFsbEluZGV4ZXMgPSBhbGxJbmRleGVzO1xuICAgIHRoaXMuZmlsdGVyZWRJbmRleCA9IGFsbEluZGV4ZXM7XG4gICAgdGhpcy5maWx0ZXJlZEluZGV4Rm9yRG9tYWluID0gYWxsSW5kZXhlcztcbiAgICB0aGlzLmZpZWxkUGFpcnMgPSBmaW5kUG9pbnRGaWVsZFBhaXJzKGZpZWxkcyk7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBNYWtlIHN1cmUgdGhhdCBmaWVsZHMgc2F0aXNmaWVzIEYgZXh0ZW5kcyBGaWVsZFxuICAgIHRoaXMuZmllbGRzID0gZmllbGRzO1xuICAgIHRoaXMuZ3B1RmlsdGVyID0gZ2V0R3B1RmlsdGVyUHJvcHMoW10sIHRoaXMuaWQsIGZpZWxkcywgdW5kZWZpbmVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB1cGRhdGUgdGFibGUgd2l0aCBuZXcgZGF0YVxuICAgKiBAcGFyYW0gZGF0YSAtIG5ldyBkYXRhIGUuZy4gdGhlIGFycm93IGRhdGEgd2l0aCBuZXcgYmF0Y2hlcyBsb2FkZWRcbiAgICovXG4gIGFzeW5jIHVwZGF0ZShkYXRhOiBQcm90b0RhdGFzZXRbJ2RhdGEnXSkge1xuICAgIGNvbnN0IGRhdGFDb250YWluZXJEYXRhID0gZGF0YS5jb2xzID8gZGF0YS5jb2xzIDogZGF0YS5yb3dzO1xuICAgIHRoaXMuZGF0YUNvbnRhaW5lci51cGRhdGU/LihkYXRhQ29udGFpbmVyRGF0YSk7XG4gICAgdGhpcy5hbGxJbmRleGVzID0gdGhpcy5kYXRhQ29udGFpbmVyLmdldFBsYWluSW5kZXgoKTtcbiAgICB0aGlzLmZpbHRlcmVkSW5kZXggPSB0aGlzLmFsbEluZGV4ZXM7XG4gICAgdGhpcy5maWx0ZXJlZEluZGV4Rm9yRG9tYWluID0gdGhpcy5hbGxJbmRleGVzO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXQgbGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGFDb250YWluZXIubnVtUm93cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWVsZFxuICAgKiBAcGFyYW0gY29sdW1uTmFtZVxuICAgKi9cbiAgZ2V0Q29sdW1uRmllbGQoY29sdW1uTmFtZTogc3RyaW5nKTogRiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkcy5maW5kKGZkID0+IGZkW0ZJRF9LRVldID09PSBjb2x1bW5OYW1lKTtcbiAgICB0aGlzLl9hc3NldEZpZWxkKGNvbHVtbk5hbWUsIGZpZWxkKTtcbiAgICByZXR1cm4gZmllbGQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZpZWxkSWR4XG4gICAqIEBwYXJhbSBjb2x1bW5OYW1lXG4gICAqL1xuICBnZXRDb2x1bW5GaWVsZElkeChjb2x1bW5OYW1lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGZpZWxkSWR4ID0gdGhpcy5maWVsZHMuZmluZEluZGV4KGZkID0+IGZkW0ZJRF9LRVldID09PSBjb2x1bW5OYW1lKTtcbiAgICB0aGlzLl9hc3NldEZpZWxkKGNvbHVtbk5hbWUsIEJvb2xlYW4oZmllbGRJZHggPiAtMSkpO1xuICAgIHJldHVybiBmaWVsZElkeDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGlzcGxheUZvcm1hdFxuICAgKiBAcGFyYW0gY29sdW1uTmFtZVxuICAgKi9cbiAgZ2V0Q29sdW1uRGlzcGxheUZvcm1hdChjb2x1bW5OYW1lKSB7XG4gICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkcy5maW5kKGZkID0+IGZkW0ZJRF9LRVldID09PSBjb2x1bW5OYW1lKTtcbiAgICB0aGlzLl9hc3NldEZpZWxkKGNvbHVtbk5hbWUsIGZpZWxkKTtcbiAgICByZXR1cm4gZmllbGQ/LmRpc3BsYXlGb3JtYXQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiBhIGNlbGxcbiAgICovXG4gIGdldFZhbHVlKGNvbHVtbk5hbWU6IHN0cmluZywgcm93SWR4OiBudW1iZXIpOiBhbnkge1xuICAgIGNvbnN0IGZpZWxkID0gdGhpcy5nZXRDb2x1bW5GaWVsZChjb2x1bW5OYW1lKTtcbiAgICByZXR1cm4gZmllbGQgPyBmaWVsZC52YWx1ZUFjY2Vzc29yKHtpbmRleDogcm93SWR4fSkgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgZXhpc3RpbmcgZmllbGQgd2l0aCBhIG5ldyBvYmplY3RcbiAgICogQHBhcmFtIGZpZWxkSWR4XG4gICAqIEBwYXJhbSBuZXdGaWVsZFxuICAgKi9cbiAgdXBkYXRlQ29sdW1uRmllbGQoZmllbGRJZHg6IG51bWJlciwgbmV3RmllbGQ6IEYpOiB2b2lkIHtcbiAgICB0aGlzLmZpZWxkcyA9IE9iamVjdC5hc3NpZ24oWy4uLnRoaXMuZmllbGRzXSwge1tmaWVsZElkeF06IG5ld0ZpZWxkfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGRhdGFzZXQgY29sb3IgYnkgY3VzdG9tIGNvbG9yXG4gICAqIEBwYXJhbSBuZXdDb2xvclxuICAgKi9cbiAgdXBkYXRlVGFibGVDb2xvcihuZXdDb2xvcjogUkdCQ29sb3IpOiB2b2lkIHtcbiAgICB0aGlzLmNvbG9yID0gbmV3Q29sb3I7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSBmaWx0ZXJQcm9wcyB0byBmaWVsZCBhbmQgcmV0cmlldmUgaXRcbiAgICogQHBhcmFtIGNvbHVtbk5hbWVcbiAgICovXG4gIGdldENvbHVtbkZpbHRlclByb3BzKGNvbHVtbk5hbWU6IHN0cmluZyk6IEZbJ2ZpbHRlclByb3BzJ10gfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBmaWVsZElkeCA9IHRoaXMuZ2V0Q29sdW1uRmllbGRJZHgoY29sdW1uTmFtZSk7XG4gICAgaWYgKGZpZWxkSWR4IDwgMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGZpZWxkID0gdGhpcy5maWVsZHNbZmllbGRJZHhdO1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZmllbGQsICdmaWx0ZXJQcm9wcycpKSB7XG4gICAgICByZXR1cm4gZmllbGQuZmlsdGVyUHJvcHM7XG4gICAgfVxuXG4gICAgY29uc3QgZmllbGREb21haW4gPSB0aGlzLmdldENvbHVtbkZpbHRlckRvbWFpbihmaWVsZCk7XG4gICAgaWYgKCFmaWVsZERvbWFpbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsdGVyUHJvcHMgPSBnZXRGaWx0ZXJQcm9wcyhmaWVsZCwgZmllbGREb21haW4pO1xuICAgIGNvbnN0IG5ld0ZpZWxkID0ge1xuICAgICAgLi4uZmllbGQsXG4gICAgICBmaWx0ZXJQcm9wc1xuICAgIH07XG5cbiAgICB0aGlzLnVwZGF0ZUNvbHVtbkZpZWxkKGZpZWxkSWR4LCBuZXdGaWVsZCk7XG5cbiAgICByZXR1cm4gZmlsdGVyUHJvcHM7XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgZmlsdGVycyB0byBkYXRhc2V0LCByZXR1cm4gdGhlIGZpbHRlcmVkIGRhdGFzZXQgd2l0aCB1cGRhdGVkIGBncHVGaWx0ZXJgLCBgZmlsdGVyUmVjb3JkYCwgYGZpbHRlcmVkSW5kZXhgLCBgZmlsdGVyZWRJbmRleEZvckRvbWFpbmBcbiAgICogQHBhcmFtIGZpbHRlcnNcbiAgICogQHBhcmFtIGxheWVyc1xuICAgKiBAcGFyYW0gb3B0XG4gICAqL1xuICBmaWx0ZXJUYWJsZShmaWx0ZXJzOiBGaWx0ZXJbXSwgbGF5ZXJzOiBMYXllcltdLCBvcHQ/OiBGaWx0ZXJEYXRhc2V0T3B0KTogS2VwbGVyVGFibGU8RmllbGQ+IHtcbiAgICBjb25zdCB7ZGF0YUNvbnRhaW5lciwgaWQ6IGRhdGFJZCwgZmlsdGVyUmVjb3JkOiBvbGRGaWx0ZXJSZWNvcmQsIGZpZWxkc30gPSB0aGlzO1xuXG4gICAgLy8gaWYgdGhlcmUgaXMgbm8gZmlsdGVyc1xuICAgIGNvbnN0IGZpbHRlclJlY29yZCA9IGdldEZpbHRlclJlY29yZChkYXRhSWQsIGZpbHRlcnMsIG9wdCB8fCB7fSk7XG5cbiAgICB0aGlzLmZpbHRlclJlY29yZCA9IGZpbHRlclJlY29yZDtcbiAgICB0aGlzLmdwdUZpbHRlciA9IGdldEdwdUZpbHRlclByb3BzKGZpbHRlcnMsIGRhdGFJZCwgZmllbGRzLCB0aGlzLmdwdUZpbHRlcik7XG5cbiAgICB0aGlzLmNoYW5nZWRGaWx0ZXJzID0gZGlmZkZpbHRlcnMoZmlsdGVyUmVjb3JkLCBvbGRGaWx0ZXJSZWNvcmQpO1xuXG4gICAgaWYgKCFmaWx0ZXJzLmxlbmd0aCkge1xuICAgICAgdGhpcy5maWx0ZXJlZEluZGV4ID0gdGhpcy5hbGxJbmRleGVzO1xuICAgICAgdGhpcy5maWx0ZXJlZEluZGV4Rm9yRG9tYWluID0gdGhpcy5hbGxJbmRleGVzO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gZ2VuZXJhdGUgMiBzZXRzIG9mIGZpbHRlciByZXN1bHRcbiAgICAvLyBmaWx0ZXJlZEluZGV4IHVzZWQgdG8gY2FsY3VsYXRlIGxheWVyIGRhdGFcbiAgICAvLyBmaWx0ZXJlZEluZGV4Rm9yRG9tYWluIHVzZWQgdG8gY2FsY3VsYXRlIGxheWVyIERvbWFpblxuICAgIGNvbnN0IHNob3VsZENhbERvbWFpbiA9IEJvb2xlYW4odGhpcy5jaGFuZ2VkRmlsdGVycy5keW5hbWljRG9tYWluKTtcbiAgICBjb25zdCBzaG91bGRDYWxJbmRleCA9IEJvb2xlYW4odGhpcy5jaGFuZ2VkRmlsdGVycy5jcHUpO1xuXG4gICAgbGV0IGZpbHRlclJlc3VsdDogRmlsdGVyUmVzdWx0ID0ge307XG4gICAgaWYgKHNob3VsZENhbERvbWFpbiB8fCBzaG91bGRDYWxJbmRleCkge1xuICAgICAgY29uc3QgZHluYW1pY0RvbWFpbkZpbHRlcnMgPSBzaG91bGRDYWxEb21haW4gPyBmaWx0ZXJSZWNvcmQuZHluYW1pY0RvbWFpbiA6IG51bGw7XG4gICAgICBjb25zdCBjcHVGaWx0ZXJzID0gc2hvdWxkQ2FsSW5kZXggPyBmaWx0ZXJSZWNvcmQuY3B1IDogbnVsbDtcblxuICAgICAgY29uc3QgZmlsdGVyRnVuY3MgPSBmaWx0ZXJzLnJlZHVjZSgoYWNjLCBmaWx0ZXIpID0+IHtcbiAgICAgICAgY29uc3QgZmllbGRJbmRleCA9IGdldERhdGFzZXRGaWVsZEluZGV4Rm9yRmlsdGVyKHRoaXMuaWQsIGZpbHRlcik7XG4gICAgICAgIGNvbnN0IGZpZWxkID0gZmllbGRJbmRleCAhPT0gLTEgPyBmaWVsZHNbZmllbGRJbmRleF0gOiBudWxsO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgIFtmaWx0ZXIuaWRdOiBnZXRGaWx0ZXJGdW5jdGlvbihmaWVsZCwgdGhpcy5pZCwgZmlsdGVyLCBsYXllcnMsIGRhdGFDb250YWluZXIpXG4gICAgICAgIH07XG4gICAgICB9LCB7fSk7XG5cbiAgICAgIGZpbHRlclJlc3VsdCA9IGZpbHRlckRhdGFCeUZpbHRlclR5cGVzKFxuICAgICAgICB7ZHluYW1pY0RvbWFpbkZpbHRlcnMsIGNwdUZpbHRlcnMsIGZpbHRlckZ1bmNzfSxcbiAgICAgICAgZGF0YUNvbnRhaW5lclxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmZpbHRlcmVkSW5kZXggPSBmaWx0ZXJSZXN1bHQuZmlsdGVyZWRJbmRleCB8fCB0aGlzLmZpbHRlcmVkSW5kZXg7XG4gICAgdGhpcy5maWx0ZXJlZEluZGV4Rm9yRG9tYWluID1cbiAgICAgIGZpbHRlclJlc3VsdC5maWx0ZXJlZEluZGV4Rm9yRG9tYWluIHx8IHRoaXMuZmlsdGVyZWRJbmRleEZvckRvbWFpbjtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGZpbHRlcnMgdG8gYSBkYXRhc2V0IGFsbCBvbiBDUFUsIGFzc2lnbiB0byBgZmlsdGVyZWRJZHhDUFVgLCBgZmlsdGVyUmVjb3JkQ1BVYFxuICAgKiBAcGFyYW0gZmlsdGVyc1xuICAgKiBAcGFyYW0gbGF5ZXJzXG4gICAqL1xuICBmaWx0ZXJUYWJsZUNQVShmaWx0ZXJzOiBGaWx0ZXJbXSwgbGF5ZXJzOiBMYXllcltdKTogS2VwbGVyVGFibGU8RmllbGQ+IHtcbiAgICBjb25zdCBvcHQgPSB7XG4gICAgICBjcHVPbmx5OiB0cnVlLFxuICAgICAgaWdub3JlRG9tYWluOiB0cnVlXG4gICAgfTtcblxuICAgIC8vIG5vIGZpbHRlclxuICAgIGlmICghZmlsdGVycy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuZmlsdGVyZWRJZHhDUFUgPSB0aGlzLmFsbEluZGV4ZXM7XG4gICAgICB0aGlzLmZpbHRlclJlY29yZENQVSA9IGdldEZpbHRlclJlY29yZCh0aGlzLmlkLCBmaWx0ZXJzLCBvcHQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gbm8gZ3B1IGZpbHRlclxuICAgIGlmICghZmlsdGVycy5maW5kKGYgPT4gZi5ncHUpKSB7XG4gICAgICB0aGlzLmZpbHRlcmVkSWR4Q1BVID0gdGhpcy5maWx0ZXJlZEluZGV4O1xuICAgICAgdGhpcy5maWx0ZXJSZWNvcmRDUFUgPSBnZXRGaWx0ZXJSZWNvcmQodGhpcy5pZCwgZmlsdGVycywgb3B0KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIG1ha2UgYSBjb3B5IGZvciBjcHUgZmlsdGVyaW5nXG4gICAgY29uc3QgY29waWVkID0gY29weVRhYmxlKHRoaXMpO1xuXG4gICAgY29waWVkLmZpbHRlclJlY29yZCA9IHRoaXMuZmlsdGVyUmVjb3JkQ1BVO1xuICAgIGNvcGllZC5maWx0ZXJlZEluZGV4ID0gdGhpcy5maWx0ZXJlZElkeENQVSB8fCBbXTtcblxuICAgIGNvbnN0IGZpbHRlcmVkID0gY29waWVkLmZpbHRlclRhYmxlKGZpbHRlcnMsIGxheWVycywgb3B0KTtcblxuICAgIHRoaXMuZmlsdGVyZWRJZHhDUFUgPSBmaWx0ZXJlZC5maWx0ZXJlZEluZGV4O1xuICAgIHRoaXMuZmlsdGVyUmVjb3JkQ1BVID0gZmlsdGVyZWQuZmlsdGVyUmVjb3JkO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGZpZWxkIGRvbWFpbiBiYXNlZCBvbiBmaWVsZCB0eXBlIGFuZCBkYXRhXG4gICAqIGZvciBGaWx0ZXJcbiAgICovXG4gIGdldENvbHVtbkZpbHRlckRvbWFpbihmaWVsZDogRik6IEZpZWxkRG9tYWluIHtcbiAgICBjb25zdCB7ZGF0YUNvbnRhaW5lcn0gPSB0aGlzO1xuICAgIGNvbnN0IHt2YWx1ZUFjY2Vzc29yfSA9IGZpZWxkO1xuXG4gICAgbGV0IGRvbWFpbjtcblxuICAgIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgICAgY2FzZSBBTExfRklFTERfVFlQRVMucmVhbDpcbiAgICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLmludGVnZXI6XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBkb21haW4gYW5kIHN0ZXBcbiAgICAgICAgcmV0dXJuIGdldE51bWVyaWNGaWVsZERvbWFpbihkYXRhQ29udGFpbmVyLCB2YWx1ZUFjY2Vzc29yKTtcblxuICAgICAgY2FzZSBBTExfRklFTERfVFlQRVMuYm9vbGVhbjpcbiAgICAgICAgcmV0dXJuIHtkb21haW46IFt0cnVlLCBmYWxzZV19O1xuXG4gICAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5zdHJpbmc6XG4gICAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5oMzpcbiAgICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLmRhdGU6XG4gICAgICAgIGRvbWFpbiA9IGdldE9yZGluYWxEb21haW4oZGF0YUNvbnRhaW5lciwgdmFsdWVBY2Nlc3Nvcik7XG4gICAgICAgIHJldHVybiB7ZG9tYWlufTtcblxuICAgICAgY2FzZSBBTExfRklFTERfVFlQRVMudGltZXN0YW1wOlxuICAgICAgICByZXR1cm4gZ2V0VGltZXN0YW1wRmllbGREb21haW4oZGF0YUNvbnRhaW5lciwgdmFsdWVBY2Nlc3Nvcik7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7ZG9tYWluOiBnZXRPcmRpbmFsRG9tYWluKGRhdGFDb250YWluZXIsIHZhbHVlQWNjZXNzb3IpfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogIEdldCB0aGUgZG9tYWluIG9mIHRoaXMgY29sdW1uIGJhc2VkIG9uIHNjYWxlIHR5cGVcbiAgICovXG4gIGdldENvbHVtbkxheWVyRG9tYWluKGZpZWxkOiBGLCBzY2FsZVR5cGU6IHN0cmluZyk6IG51bWJlcltdIHwgc3RyaW5nW10gfCBbbnVtYmVyLCBudW1iZXJdIHwgbnVsbCB7XG4gICAgY29uc3Qge2RhdGFDb250YWluZXIsIGZpbHRlcmVkSW5kZXhGb3JEb21haW59ID0gdGhpcztcblxuICAgIGlmICghU0NBTEVfVFlQRVNbc2NhbGVUeXBlXSkge1xuICAgICAgQ29uc29sZS5lcnJvcihgc2NhbGUgdHlwZSAke3NjYWxlVHlwZX0gbm90IHN1cHBvcnRlZGApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qge3ZhbHVlQWNjZXNzb3J9ID0gZmllbGQ7XG4gICAgY29uc3QgaW5kZXhWYWx1ZUFjY2Vzc29yID0gaSA9PiB2YWx1ZUFjY2Vzc29yKHtpbmRleDogaX0pO1xuICAgIGNvbnN0IHNvcnRGdW5jdGlvbiA9IGdldFNvcnRpbmdGdW5jdGlvbihmaWVsZC50eXBlKTtcblxuICAgIHN3aXRjaCAoc2NhbGVUeXBlKSB7XG4gICAgICBjYXNlIFNDQUxFX1RZUEVTLm9yZGluYWw6XG4gICAgICBjYXNlIFNDQUxFX1RZUEVTLmN1c3RvbU9yZGluYWw6XG4gICAgICBjYXNlIFNDQUxFX1RZUEVTLnBvaW50OlxuICAgICAgICAvLyBkbyBub3QgcmVjYWxjdWxhdGUgb3JkaW5hbCBkb21haW4gYmFzZWQgb24gZmlsdGVyZWQgZGF0YVxuICAgICAgICAvLyBkb24ndCBuZWVkIHRvIHVwZGF0ZSBvcmRpbmFsIGRvbWFpbiBldmVyeSB0aW1lXG4gICAgICAgIHJldHVybiBnZXRPcmRpbmFsRG9tYWluKGRhdGFDb250YWluZXIsIHZhbHVlQWNjZXNzb3IpO1xuXG4gICAgICBjYXNlIFNDQUxFX1RZUEVTLnF1YW50aWxlOlxuICAgICAgICByZXR1cm4gZ2V0UXVhbnRpbGVEb21haW4oZmlsdGVyZWRJbmRleEZvckRvbWFpbiwgaW5kZXhWYWx1ZUFjY2Vzc29yLCBzb3J0RnVuY3Rpb24pO1xuXG4gICAgICBjYXNlIFNDQUxFX1RZUEVTLmxvZzpcbiAgICAgICAgcmV0dXJuIGdldExvZ0RvbWFpbihmaWx0ZXJlZEluZGV4Rm9yRG9tYWluLCBpbmRleFZhbHVlQWNjZXNzb3IpO1xuXG4gICAgICBjYXNlIFNDQUxFX1RZUEVTLnF1YW50aXplOlxuICAgICAgY2FzZSBTQ0FMRV9UWVBFUy5saW5lYXI6XG4gICAgICBjYXNlIFNDQUxFX1RZUEVTLnNxcnQ6XG4gICAgICBjYXNlIFNDQUxFX1RZUEVTLmN1c3RvbTpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBnZXRMaW5lYXJEb21haW4oZmlsdGVyZWRJbmRleEZvckRvbWFpbiwgaW5kZXhWYWx1ZUFjY2Vzc29yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgc2FtcGxlIG9mIHJvd3MgdG8gY2FsY3VsYXRlIGxheWVyIGJvdW5kYXJpZXNcbiAgICovXG4gIC8vIGdldFNhbXBsZURhdGEocm93cylcblxuICAvKipcbiAgICogUGFyc2UgY2VsbCB2YWx1ZSBiYXNlZCBvbiBjb2x1bW4gdHlwZSBhbmQgcmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gICAqIFZhbHVlIHRoZSBmaWVsZCB2YWx1ZSwgdHlwZSB0aGUgZmllbGQgdHlwZVxuICAgKi9cbiAgLy8gcGFyc2VGaWVsZFZhbHVlKHZhbHVlLCB0eXBlKVxuXG4gIC8vIHNvcnREYXRhc2V0QnlDb2x1bW4oKVxuXG4gIC8qKlxuICAgKiBBc3NlcnQgd2hldGhlciBmaWVsZCBleGlzdFxuICAgKiBAcGFyYW0gZmllbGROYW1lXG4gICAqIEBwYXJhbSBjb25kaXRpb25cbiAgICovXG4gIF9hc3NldEZpZWxkKGZpZWxkTmFtZTogc3RyaW5nLCBjb25kaXRpb246IGFueSk6IHZvaWQge1xuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICBDb25zb2xlLmVycm9yKGAke2ZpZWxkTmFtZX0gZG9lc250IGV4aXN0IGluIGRhdGFzZXQgJHt0aGlzLmlkfWApO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgdHlwZSBEYXRhc2V0cyA9IHtcbiAgW2tleTogc3RyaW5nXTogS2VwbGVyVGFibGU8RmllbGQ+O1xufTtcblxuLy8gSEVMUEVSIEZVTkNUSU9OUyAoTUFJTkxZIEVYUE9SVEVEIEZPUiBURVNULi4uKVxuLy8gaGF2ZSB0byBkb3VibGUgZXhjYXBlXG5jb25zdCBzcGVjaWFsQ2hhcmFjdGVyU2V0ID0gYFsjXyZAXFxcXC5cXFxcLVxcXFwgXWA7XG5cbmZ1bmN0aW9uIGZvdW5kTWF0Y2hpbmdGaWVsZHMocmUsIHN1ZmZpeFBhaXIsIGFsbE5hbWVzLCBmaWVsZE5hbWUpIHtcbiAgY29uc3QgcGFydG5lcklkeCA9IGFsbE5hbWVzLmZpbmRJbmRleChcbiAgICBkID0+IGQgPT09IGZpZWxkTmFtZS5yZXBsYWNlKHJlLCBtYXRjaCA9PiBtYXRjaC5yZXBsYWNlKHN1ZmZpeFBhaXJbMF0sIHN1ZmZpeFBhaXJbMV0pKVxuICApO1xuICBsZXQgYWx0SWR4ID0gLTE7XG4gIGlmIChwYXJ0bmVySWR4ID4gLTEpIHtcbiAgICAvLyBpZiBmb3VuZCBwYXJ0bmVyLCBnbyBvbiBhbmQgbG9vayBmb3IgYWx0aXR1ZGVcbiAgICBBTFRJVFVERV9GSUVMRFMuc29tZShhbHQgPT4ge1xuICAgICAgYWx0SWR4ID0gYWxsTmFtZXMuZmluZEluZGV4KFxuICAgICAgICBkID0+IGQgPT09IGZpZWxkTmFtZS5yZXBsYWNlKHJlLCBtYXRjaCA9PiBtYXRjaC5yZXBsYWNlKHN1ZmZpeFBhaXJbMF0sIGFsdCkpXG4gICAgICApO1xuICAgICAgcmV0dXJuIGFsdElkeCA+IC0xO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB7cGFydG5lcklkeCwgYWx0SWR4fTtcbn1cbi8qKlxuICogRmluZCBwb2ludCBmaWVsZHMgcGFpcnMgZnJvbSBmaWVsZHNcbiAqXG4gKiBAcGFyYW0gZmllbGRzXG4gKiBAcmV0dXJucyBmb3VuZCBwb2ludCBmaWVsZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRQb2ludEZpZWxkUGFpcnMoZmllbGRzOiBGaWVsZFtdKTogRmllbGRQYWlyW10ge1xuICBjb25zdCBhbGxOYW1lcyA9IGZpZWxkcy5tYXAoZiA9PiBmLm5hbWUudG9Mb3dlckNhc2UoKSk7XG5cbiAgLy8gZ2V0IGxpc3Qgb2YgYWxsIGZpZWxkcyB3aXRoIG1hdGNoaW5nIHN1ZmZpeGVzXG4gIGNvbnN0IGFjYzogRmllbGRQYWlyW10gPSBbXTtcbiAgcmV0dXJuIGFsbE5hbWVzLnJlZHVjZSgoY2FycnksIGZpZWxkTmFtZSwgaWR4KSA9PiB7XG4gICAgLy8gVGhpcyBzZWFyY2ggZm9yIHBhaXJzIHdpbGwgZWFybHkgZXhpdCBpZiBmb3VuZC5cbiAgICBmb3IgKGNvbnN0IHN1ZmZpeFBhaXIgb2YgVFJJUF9QT0lOVF9GSUVMRFMpIHtcbiAgICAgIC8vIG1hdGNoIGZpcnN0IHN1ZmZpeFxuICAgICAgLy8gKF58WyNfJkBcXC5cXC1cXCBdKWxhdChbI18mQFxcLlxcLVxcIF18JClcbiAgICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChgKF58JHtzcGVjaWFsQ2hhcmFjdGVyU2V0fSkke3N1ZmZpeFBhaXJbMF19KCR7c3BlY2lhbENoYXJhY3RlclNldH18JClgKTtcblxuICAgICAgaWYgKHJlLnRlc3QoZmllbGROYW1lKSkge1xuICAgICAgICBjb25zdCB7cGFydG5lcklkeCwgYWx0SWR4fSA9IGZvdW5kTWF0Y2hpbmdGaWVsZHMocmUsIHN1ZmZpeFBhaXIsIGFsbE5hbWVzLCBmaWVsZE5hbWUpO1xuXG4gICAgICAgIGlmIChwYXJ0bmVySWR4ID4gLTEpIHtcbiAgICAgICAgICBjb25zdCB0cmltTmFtZSA9IGZpZWxkTmFtZS5yZXBsYWNlKHJlLCAnJykudHJpbSgpO1xuXG4gICAgICAgICAgY2FycnkucHVzaCh7XG4gICAgICAgICAgICBkZWZhdWx0TmFtZTogdHJpbU5hbWUgfHwgJ3BvaW50JyxcbiAgICAgICAgICAgIHBhaXI6IHtcbiAgICAgICAgICAgICAgbGF0OiB7XG4gICAgICAgICAgICAgICAgZmllbGRJZHg6IGlkeCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmllbGRzW2lkeF0ubmFtZVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBsbmc6IHtcbiAgICAgICAgICAgICAgICBmaWVsZElkeDogcGFydG5lcklkeCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmllbGRzW3BhcnRuZXJJZHhdLm5hbWVcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgLi4uKGFsdElkeCA+IC0xXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIGFsdGl0dWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZmllbGRJZHg6IGFsdElkeCxcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmllbGRzW2FsdElkeF0ubmFtZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7fSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWZmaXg6IHN1ZmZpeFBhaXJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gY2Fycnk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhcnJ5O1xuICB9LCBhY2MpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gZGF0YXNldFxuICogQHBhcmFtIGNvbHVtblxuICogQHBhcmFtIG1vZGVcbiAqIEB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb3J0RGF0YXNldEJ5Q29sdW1uKFxuICBkYXRhc2V0OiBLZXBsZXJUYWJsZTxGaWVsZD4sXG4gIGNvbHVtbjogc3RyaW5nLFxuICBtb2RlPzogc3RyaW5nXG4pOiBLZXBsZXJUYWJsZTxGaWVsZD4ge1xuICBjb25zdCB7YWxsSW5kZXhlcywgZmllbGRzLCBkYXRhQ29udGFpbmVyfSA9IGRhdGFzZXQ7XG4gIGNvbnN0IGZpZWxkSW5kZXggPSBmaWVsZHMuZmluZEluZGV4KGYgPT4gZi5uYW1lID09PSBjb2x1bW4pO1xuICBpZiAoZmllbGRJbmRleCA8IDApIHtcbiAgICByZXR1cm4gZGF0YXNldDtcbiAgfVxuXG4gIGNvbnN0IHNvcnRCeSA9IFNPUlRfT1JERVJbbW9kZSB8fCAnJ10gfHwgU09SVF9PUkRFUi5BU0NFTkRJTkc7XG5cbiAgaWYgKHNvcnRCeSA9PT0gU09SVF9PUkRFUi5VTlNPUlQpIHtcbiAgICBkYXRhc2V0LnNvcnRDb2x1bW4gPSB7fTtcbiAgICBkYXRhc2V0LnNvcnRPcmRlciA9IG51bGw7XG5cbiAgICByZXR1cm4gZGF0YXNldDtcbiAgfVxuXG4gIGNvbnN0IHNvcnRGdW5jdGlvbiA9IHNvcnRCeSA9PT0gU09SVF9PUkRFUi5BU0NFTkRJTkcgPyBhc2NlbmRpbmcgOiBkZXNjZW5kaW5nO1xuICBjb25zdCBzb3J0T3JkZXIgPSBhbGxJbmRleGVzLnNsaWNlKCkuc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IHZhbHVlMSA9IGRhdGFDb250YWluZXIudmFsdWVBdChhLCBmaWVsZEluZGV4KTtcbiAgICBjb25zdCB2YWx1ZTIgPSBkYXRhQ29udGFpbmVyLnZhbHVlQXQoYiwgZmllbGRJbmRleCk7XG4gICAgaWYgKCFub3ROdWxsb3JVbmRlZmluZWQodmFsdWUxKSAmJiBub3ROdWxsb3JVbmRlZmluZWQodmFsdWUyKSkge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChub3ROdWxsb3JVbmRlZmluZWQodmFsdWUxKSAmJiAhbm90TnVsbG9yVW5kZWZpbmVkKHZhbHVlMikpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgcmV0dXJuIHNvcnRGdW5jdGlvbih2YWx1ZTEsIHZhbHVlMik7XG4gIH0pO1xuXG4gIGRhdGFzZXQuc29ydENvbHVtbiA9IHtcbiAgICBbY29sdW1uXTogc29ydEJ5XG4gIH07XG4gIGRhdGFzZXQuc29ydE9yZGVyID0gc29ydE9yZGVyO1xuXG4gIHJldHVybiBkYXRhc2V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGluVGFibGVDb2x1bW5zKGRhdGFzZXQ6IEtlcGxlclRhYmxlPEZpZWxkPiwgY29sdW1uOiBzdHJpbmcpOiBLZXBsZXJUYWJsZTxGaWVsZD4ge1xuICBjb25zdCBmaWVsZCA9IGRhdGFzZXQuZ2V0Q29sdW1uRmllbGQoY29sdW1uKTtcbiAgaWYgKCFmaWVsZCkge1xuICAgIHJldHVybiBkYXRhc2V0O1xuICB9XG5cbiAgbGV0IHBpbm5lZENvbHVtbnM7XG4gIGlmIChBcnJheS5pc0FycmF5KGRhdGFzZXQucGlubmVkQ29sdW1ucykgJiYgZGF0YXNldC5waW5uZWRDb2x1bW5zLmluY2x1ZGVzKGZpZWxkLm5hbWUpKSB7XG4gICAgLy8gdW5waW4gaXRcbiAgICBwaW5uZWRDb2x1bW5zID0gZGF0YXNldC5waW5uZWRDb2x1bW5zLmZpbHRlcihjbyA9PiBjbyAhPT0gZmllbGQubmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgcGlubmVkQ29sdW1ucyA9IChkYXRhc2V0LnBpbm5lZENvbHVtbnMgfHwgW10pLmNvbmNhdChmaWVsZC5uYW1lKTtcbiAgfVxuXG4gIC8vIEB0cy1pZ25vcmVcbiAgcmV0dXJuIGNvcHlUYWJsZUFuZFVwZGF0ZShkYXRhc2V0LCB7cGlubmVkQ29sdW1uc30pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29weVRhYmxlKG9yaWdpbmFsOiBLZXBsZXJUYWJsZTxGaWVsZD4pOiBLZXBsZXJUYWJsZTxGaWVsZD4ge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihvcmlnaW5hbCkpLCBvcmlnaW5hbCk7XG59XG5cbi8qKlxuICogQHR5cGVcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5VGFibGVBbmRVcGRhdGUoXG4gIG9yaWdpbmFsOiBLZXBsZXJUYWJsZTxGaWVsZD4sXG4gIG9wdGlvbnM6IFBhcnRpYWw8S2VwbGVyVGFibGU8RmllbGQ+PiA9IHt9XG4pOiBLZXBsZXJUYWJsZTxGaWVsZD4ge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMob3B0aW9ucykucmVkdWNlKChhY2MsIGVudHJ5KSA9PiB7XG4gICAgYWNjW2VudHJ5WzBdXSA9IGVudHJ5WzFdO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIGNvcHlUYWJsZShvcmlnaW5hbCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmllbGRWYWx1ZUFjY2Vzc29yPFxuICBGIGV4dGVuZHMge1xuICAgIHR5cGU/OiBGaWVsZFsndHlwZSddO1xuICAgIGZvcm1hdD86IEZpZWxkWydmb3JtYXQnXTtcbiAgfVxuPihmOiBGLCBpOiBudW1iZXIsIGRjOiBEYXRhQ29udGFpbmVySW50ZXJmYWNlKSB7XG4gIHJldHVybiBtYXliZVRvRGF0ZS5iaW5kKFxuICAgIG51bGwsXG4gICAgLy8gaXMgdGltZVxuICAgIGYudHlwZSA9PT0gQUxMX0ZJRUxEX1RZUEVTLnRpbWVzdGFtcCxcbiAgICBpLFxuICAgIGYuZm9ybWF0IHx8ICcnLFxuICAgIGRjXG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEtlcGxlclRhYmxlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUVBLElBQUFFLFVBQUEsR0FBQUYsT0FBQTtBQXNCQSxJQUFBRyxlQUFBLEdBQUFILE9BQUE7QUFFQSxJQUFBSSxNQUFBLEdBQUFKLE9BQUE7QUFvQkEsSUFBQUssWUFBQSxHQUFBTCxPQUFBO0FBQTJFLFNBQUFNLDJCQUFBQyxDQUFBLEVBQUFDLENBQUEsUUFBQUMsQ0FBQSx5QkFBQUMsTUFBQSxJQUFBSCxDQUFBLENBQUFHLE1BQUEsQ0FBQUMsUUFBQSxLQUFBSixDQUFBLHFCQUFBRSxDQUFBLFFBQUFHLEtBQUEsQ0FBQUMsT0FBQSxDQUFBTixDQUFBLE1BQUFFLENBQUEsR0FBQUssMkJBQUEsQ0FBQVAsQ0FBQSxNQUFBQyxDQUFBLElBQUFELENBQUEsdUJBQUFBLENBQUEsQ0FBQVEsTUFBQSxJQUFBTixDQUFBLEtBQUFGLENBQUEsR0FBQUUsQ0FBQSxPQUFBTyxFQUFBLE1BQUFDLENBQUEsWUFBQUEsRUFBQSxlQUFBQyxDQUFBLEVBQUFELENBQUEsRUFBQUUsQ0FBQSxXQUFBQSxFQUFBLFdBQUFILEVB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