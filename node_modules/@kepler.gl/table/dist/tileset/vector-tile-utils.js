"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getFieldsFromTile = void 0;
exports.getFilterProps = getFilterProps;
exports.getMetaUrl = getMetaUrl;
exports.getTileUrl = getTileUrl;
exports.isTileDataset = isTileDataset;
exports.matchDatasetType = matchDatasetType;
exports.parseVectorMetadata = parseVectorMetadata;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));
var _typeAnalyzer = require("type-analyzer");
var _d3Array = require("d3-array");
var _console = _interopRequireDefault(require("global/console"));
var _uniq = _interopRequireDefault(require("lodash/uniq"));
var _mvt = require("@loaders.gl/mvt");
var _pmtiles = require("@loaders.gl/pmtiles");
var _commonUtils = require("@kepler.gl/common-utils");
var _constants = require("@kepler.gl/constants");
var _utils = require("@kepler.gl/utils");
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function isTileDataset(dataset) {
  return Boolean((dataset === null || dataset === void 0 ? void 0 : dataset.type) === _constants.DatasetType.VECTOR_TILE);
}
// https://github.com/mapbox/tilejson-spec/tree/master/2.2.0
function isLat(num) {
  return Number.isFinite(num) && num <= 90 && num >= -90;
}
function isLng(num) {
  return Number.isFinite(num) && num <= 180 && num >= -180;
}
function isZoom(num) {
  return Number.isFinite(num) && num >= 0 && num <= 22;
}
function fromArrayOrString(data) {
  if (typeof data === 'string') {
    return data.split(',').map(parseFloat);
  } else if (Array.isArray(data)) {
    return data;
  }
  return null;
}
function parseCenter(center) {
  // supported formats
  // string: "-96.657715,40.126127,-90.140061,43.516689",
  // array: [-91.505127,41.615442,14]
  var result = fromArrayOrString(center);
  if (Array.isArray(result) && result.length === 3 && isLng(result[0]) && isLat(result[1]) && isZoom(result[2])) {
    return result;
  }
  return null;
}

/**
 * bounds should be [minLng, minLat, maxLng, maxLat]
 * @param {*} bounds
 */
function parseBounds(bounds) {
  // supported formats
  // string: "-96.657715,40.126127,-90.140061,43.516689",
  // array: [ -180, -85.05112877980659, 180, 85.0511287798066 ]
  var result = fromArrayOrString(bounds);
  // validate bounds
  if (Array.isArray(result) && result.length === 4 && [result[0], result[2]].every(isLng) && [result[1], result[3]].every(isLat)) {
    return result;
  }
  return null;
}
var X_PATT = /\{x\}/;
var Y_PATT = /\{y\}/;
var Z_PATT = /\{z\}/;
function isFullyQualifiedTileUrl(tileUrl) {
  return X_PATT.test(tileUrl) && Y_PATT.test(tileUrl) && Z_PATT.test(tileUrl);
}

/**
 * Normalize tile URL
 * @param  {string} tileUrl Initial tile URL, which may be either the root URL for the
 *                          tileset or a fully qualified template
 * @param  {function} validateUrl function to validate tile URL
 * @return {string|null}    Fully qualified tile URL template, or null if input does not
 *                          appear to be a valid URL
 */
function getTileUrl(tileUrl) {
  var validateUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : isFullyQualifiedTileUrl;
  // Check for a valid URL. Ideally we'd have a simple method here.
  var uriParts = (0, _commonUtils.parseUri)(tileUrl);
  if (!uriParts.protocol || !uriParts.host) {
    return null;
  }
  if (validateUrl(tileUrl)) {
    return tileUrl;
  }
  return "".concat(tileUrl.replace(/\/$/, ''), "/{z}/{x}/{y}.pbf");
}

/**
 * Map of util functions for different tileset types, keyed by host
 */
var TILESET_FUNCTIONS = {
  'api.mapbox.com': {
    getMetaUrl: getMetaUrlMapbox,
    parseMetadata: parseMetadataTileJSON
  },
  "default": {
    getMetaUrl: getMetaUrlTippecanoe,
    parseMetadata: parseMetadataTileJSON
  }
};
function getTilesetFunctions(tileUrl) {
  var host = '';
  try {
    host = new URL(tileUrl || '').hostname;
  } catch (error) {
    // do nothing
  }
  return TILESET_FUNCTIONS[host] || TILESET_FUNCTIONS["default"];
}

/**
 * Get the metadata URL for a given tileset
 */
function getMetaUrl(tileUrl) {
  return getTilesetFunctions(tileUrl).getMetaUrl(tileUrl);
}
/**
 * Parse the metadata for a given tileset
 */
function parseVectorMetadata(
// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
metadata, option) {
  var _ref = option || {},
    _ref$tileUrl = _ref.tileUrl,
    tileUrl = _ref$tileUrl === void 0 ? '' : _ref$tileUrl;
  return getTilesetFunctions(tileUrl).parseMetadata(metadata);
}
var MAPBOX_URL_PATT = /\/\{z\}\/\{x\}\/\{y\}\.mvt/;
function getMetaUrlMapbox() {
  var tileUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  return tileUrl.replace(MAPBOX_URL_PATT, '.json');
}
function parseMetadataTileJSON(metadata) {
  var _parsed$fields;
  var parsed = parseMetadataTippecanoeFromDataSource(metadata);
  if (!parsed) return null;

  // PMTiles can potentially be in RasterTile format
  var mimeType = metadata.tileMIMEType;
  if (mimeType) {
    parsed.pmtilesType = mimeType === 'application/vnd.mapbox-vector-tile' ? _constants.PMTilesType.MVT : _constants.PMTilesType.RASTER;
  }

  // Fields already parsed from `json` property
  if ((_parsed$fields = parsed.fields) !== null && _parsed$fields !== void 0 && _parsed$fields.length) {
    return parsed;
  }
  return parsed;
}
function getMetaUrlTippecanoe(tileUrl) {
  var url = getTileUrl(tileUrl);
  if (!url) return null;
  // assumes the structure <url_base>/{z}...
  var baseUrl = url.split(Z_PATT)[0].replace(/\/$/, '');
  return "".concat(baseUrl, "/metadata.json");
}

/**
 * Special parsing for metadata returned by MVTSource and PMTilesSource.
 * @param metadata Tileset metadata parsed by a DataSouce
 * @returns Metadata in Kepler-friendly format.
 */
function parseMetadataTippecanoeFromDataSource(metadata) {
  var _pmTileMetadata$tilej, _pmTileMetadata$tilej2;
  if (!metadata || (0, _typeof2["default"])(metadata) !== 'object') {
    return null;
  }
  var result = {
    attributions: [],
    metaJson: null,
    bounds: null,
    center: null,
    maxZoom: null,
    minZoom: null,
    fields: []
  };
  var mvtMetadata = metadata;
  var pmTileMetadata = metadata;

  // try to parse metaJson
  if (typeof mvtMetadata.metaJson === 'string') {
    try {
      result.metaJson = JSON.parse(mvtMetadata.metaJson);
    } catch (err) {
      // do nothing
    }
  } else if ((0, _typeof2["default"])(mvtMetadata.metaJson) === 'object') {
    result.metaJson = mvtMetadata.metaJson;
  }
  result.bounds = parseBounds(Array.isArray(metadata.boundingBox) ? metadata.boundingBox.flat() : '');

  // PMTileSource has centerZoom and center [lon, lat], MVTSource - [lon, lat, zoom]
  var center = pmTileMetadata.centerZoom !== undefined && Array.isArray(metadata.center) ? [].concat((0, _toConsumableArray2["default"])(metadata.center), [pmTileMetadata.centerZoom]) : metadata.center;
  result.center = parseCenter(center || '');
  result.maxZoom = safeParseFloat(metadata.maxZoom);
  result.minZoom = safeParseFloat(metadata.minZoom);
  result.name = metadata.name || '';
  result.description = mvtMetadata.description || ((_pmTileMetadata$tilej = pmTileMetadata.tilejson) === null || _pmTileMetadata$tilej === void 0 ? void 0 : _pmTileMetadata$tilej.description) || '';
  if (Array.isArray((_pmTileMetadata$tilej2 = pmTileMetadata.tilejson) === null || _pmTileMetadata$tilej2 === void 0 ? void 0 : _pmTileMetadata$tilej2.layers)) {
    var _pmTileMetadata$tilej3;
    var layers = pmTilesLayerToTippecanoeLayer((_pmTileMetadata$tilej3 = pmTileMetadata.tilejson) === null || _pmTileMetadata$tilej3 === void 0 ? void 0 : _pmTileMetadata$tilej3.layers);
    result.fields = collectAttributes(layers);
  } else if (Array.isArray(mvtMetadata.layers)) {
    var _layers = pmTilesLayerToTippecanoeLayer(mvtMetadata.layers);
    result.fields = collectAttributes(_layers);
  }
  result = _objectSpread(_objectSpread({}, result), {}, {
    attributions: pmTileMetadata.attributions || (mvtMetadata.htmlAttribution ? [mvtMetadata.htmlAttribution] : undefined) || []
  }, parseMetaJson(result.metaJson));
  return result;
}
function safeParseFloat(input) {
  var result = typeof input === 'string' ? parseFloat(input) : typeof input === 'number' ? input : null;
  return result === null || isNaN(result) ? null : result;
}
function parseMetaJson(metaJson) {
  if (!metaJson || (0, _typeof2["default"])(metaJson) !== 'object') {
    return null;
  }
  if (metaJson.tilestats && Array.isArray(metaJson.tilestats.layers)) {
    // we are in luck!
    return {
      fields: collectAttributes(metaJson.tilestats.layers)
    };
  }
  return null;
}
function getTimeAnimationDomain(mappedValue) {
  var timeSteps = (0, _uniq["default"])(mappedValue).sort(_d3Array.ascending).filter(_commonUtils.notNullorUndefined);
  var domain = [timeSteps[0], timeSteps[timeSteps.length - 1]];

  // if taks 10 * 1000 ms to finish the entire animation
  var duration = 10000 / timeSteps.length;
  var clamped = (0, _utils.clamp)([100, 2000], duration);
  return {
    domain: domain,
    timeSteps: timeSteps,
    duration: clamped,
    mappedValue: mappedValue
  };
}
var pmTileTypeToAttrMap = {
  float32: 'number',
  string: 'string',
  utf8: 'string',
  "int": 'int',
  "boolean": 'boolean'
};

/**
 * Transform TileJSON['layers'] back to TippecanoeLayer
 */
function pmTilesLayerToTippecanoeLayer(layers) {
  if (!layers) return [];
  var outLayers = [];
  var _iterator = _createForOfIteratorHelper(layers),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var layer = _step.value;
      var _ref2 = layer || {},
        _ref2$fields = _ref2.fields,
        fields = _ref2$fields === void 0 ? [] : _ref2$fields;
      var _iterator2 = _createForOfIteratorHelper(fields),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _pmField$values;
          var pmField = _step2.value;
          var attribute = {
            attribute: pmField.name,
            type: pmTileTypeToAttrMap[pmField.type],
            count: pmField.uniqueValueCount,
            values: (_pmField$values = pmField.values) !== null && _pmField$values !== void 0 ? _pmField$values : [],
            min: pmField.min,
            max: pmField.max
          };
          outLayers.push({
            attributes: [attribute]
          });
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return outLayers;
}
function collectAttributes() {
  var layers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var fields = {};
  var indexedAttributes = {};
  var _iterator3 = _createForOfIteratorHelper(layers),
    _step3;
  try {
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
      var layer = _step3.value;
      var _ref3 = layer || {},
        _ref3$attributes = _ref3.attributes,
        attributes = _ref3$attributes === void 0 ? [] : _ref3$attributes;
      var _iterator5 = _createForOfIteratorHelper(attributes),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var attr = _step5.value;
          var _name = attr.attribute;
          if (typeof _name === 'string') {
            // eslint-disable-next-line max-depth
            if (_name.split('|').length > 1) {
              // indexed field
              var fname = _name.split('|')[0];
              indexedAttributes[fname] = indexedAttributes[fname] || [];
              indexedAttributes[fname].push(attr);
            } else if (!fields[_name]) {
              fields[_name] = attributeToField(attr);
            } else {
              mergeAttributeDomain(fields[_name], attr);
            }
          }
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
    }

    // parse indexed attribute, and put index key unidentified back as normal field
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }
  for (var _i = 0, _Object$entries = Object.entries(indexedAttributes); _i < _Object$entries.length; _i++) {
    var _Object$entries$_i = (0, _slicedToArray2["default"])(_Object$entries[_i], 2),
      name = _Object$entries$_i[0],
      attrs = _Object$entries$_i[1];
    var _parseIndexedField = parseIndexedField(name, attrs),
      indexedField = _parseIndexedField.indexedField,
      unidentified = _parseIndexedField.unidentified;
    fields[indexedField.name] = indexedField;
    var _iterator4 = _createForOfIteratorHelper(unidentified),
      _step4;
    try {
      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
        var unidentifiedAttr = _step4.value;
        if (unidentifiedAttr.attribute) {
          fields[unidentifiedAttr.attribute] = fields[unidentifiedAttr.attribute] || attributeToField(unidentifiedAttr);
          mergeAttributeDomain(fields[unidentifiedAttr.attribute], unidentifiedAttr);
        }
      }
    } catch (err) {
      _iterator4.e(err);
    } finally {
      _iterator4.f();
    }
  }
  return Object.values(fields);
}
function getIndexKeyFromFieldName(name) {
  return name && name.split('|').length > 1 ? name.split('|')[1] : null;
}
function parseIndexedField(name, attrs) {
  var unidentified = [];
  // analyze time format
  var field;
  var _iterator6 = _createForOfIteratorHelper(attrs),
    _step6;
  try {
    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
      var attr = _step6.value;
      var fieldName = attr.attribute;
      var indexKey = getIndexKeyFromFieldName(fieldName || '');
      var analyzedType = indexKey && (0, _commonUtils.containValidTime)([indexKey]);
      if (analyzedType) {
        field = field || _objectSpread(_objectSpread({}, attributeToField(attr)), {}, {
          // overide name and id to truncated name
          name: name,
          id: name,
          indexBy: {
            format: analyzedType.format,
            type: (0, _commonUtils.analyzerTypeToFieldType)(analyzedType.type),
            mappedValue: {}
          }
        });
        mergeAttributeDomain(field, attr);
        // save epoch time in mappedValue
        var fieldTs = indexKey;
        if (analyzedType.format === 'x' || analyzedType.format === 'X') {
          fieldTs = Number(indexKey);
        }
        var epoch = (0, _utils.timeToUnixMilli)(fieldTs, analyzedType.format);
        if (epoch) {
          field.indexBy.mappedValue[epoch] = fieldName;
        }
      } else {
        // key is not valid timestamp
        unidentified.push(attr);
      }
    }
  } catch (err) {
    _iterator6.e(err);
  } finally {
    _iterator6.f();
  }
  if (field.indexBy && field.indexBy.type === _constants.ALL_FIELD_TYPES.timestamp) {
    field.indexBy.timeDomain = getTimeAnimationDomain(Object.keys(field.indexBy.mappedValue).map(Number));
  }
  return {
    unidentified: unidentified,
    indexedField: field
  };
}
function compare(num1, num2, operator) {
  return Number.isFinite(num1) && Number.isFinite(num2) ? Math[operator](num1, num2) : Number.isFinite(num1) ? num1 : Number.isFinite(num2) ? num2 : NaN;
}
function getFilterProps(fieldType, attribute) {
  switch (fieldType) {
    case _constants.ALL_FIELD_TYPES.real:
    case _constants.ALL_FIELD_TYPES.integer:
      {
        var _getAttributeDomain = getAttributeDomain(fieldType, attribute),
          _getAttributeDomain2 = (0, _slicedToArray2["default"])(_getAttributeDomain, 2),
          min = _getAttributeDomain2[0],
          max = _getAttributeDomain2[1];
        var diff = max - min;
        var step = (0, _utils.getNumericStepSize)(diff) || 0.1;
        var domain = [(0, _utils.formatNumberByStep)(min, step, 'floor'), (0, _utils.formatNumberByStep)(max, step, 'ceil')];
        var filterProps = {
          domain: domain,
          value: domain,
          type: _constants.FILTER_TYPES.range,
          typeOptions: [_constants.FILTER_TYPES.range],
          gpu: true,
          step: step
        };
        return filterProps;
      }
    case _constants.ALL_FIELD_TYPES["boolean"]:
      {
        var _filterProps = {
          domain: [true, false],
          value: true,
          type: _constants.FILTER_TYPES.select,
          gpu: true
        };
        return _filterProps;
      }
    default:
      {
        // Assume string for all other fields
        var _filterProps2 = {
          domain: attribute.values,
          value: attribute.values,
          type: _constants.FILTER_TYPES.multiSelect,
          gpu: false
        };
        return _filterProps2;
      }
  }
}
function attributeToField() {
  var attribute = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
    values: []
  };
  // attribute: "_season_peaks_color"
  // count: 1000
  // max: 0.95
  // min: 0.24375
  // type: "number"
  var fieldTypes = attributeTypeToFieldType(attribute.type);
  return _objectSpread({
    name: attribute.attribute,
    id: attribute.attribute,
    format: '',
    filterProps: getFilterProps(fieldTypes.type, attribute)
  }, fieldTypes);
}
function getAttributeDomain(type, attribute) {
  switch (type) {
    case _constants.ALL_FIELD_TYPES.real:
    case _constants.ALL_FIELD_TYPES.integer:
      return [Number.isFinite(attribute.min) ? attribute.min : NaN, Number.isFinite(attribute.max) ? attribute.max : NaN];
    case _constants.ALL_FIELD_TYPES["boolean"]:
      return [0, 1];
    default:
      return [0, 1];
  }
}

/**
 * @param field This function mutates the field parameter
 */
function mergeAttributeDomain(field, attribute) {
  switch (field.type) {
    case _constants.ALL_FIELD_TYPES.real:
    case _constants.ALL_FIELD_TYPES.integer:
      {
        var _field$metadata, _field$filterProps;
        var domain = ((_field$metadata = field.metadata) === null || _field$metadata === void 0 ? void 0 : _field$metadata.domain) || ((_field$filterProps = field.filterProps) === null || _field$filterProps === void 0 ? void 0 : _field$filterProps.domain);
        if (domain) {
          domain.min = compare(attribute.min, domain[0], 'min');
          domain.max = compare(attribute.max, domain[1], 'max');
        }
        return;
      }
    default:
      return;
  }
}

// possible types https://github.com/mapbox/tippecanoe#modifying-feature-attributes
var attrTypeMap = {
  number: {
    type: _constants.ALL_FIELD_TYPES.real,
    analyzerType: _typeAnalyzer.DATA_TYPES.FLOAT
  },
  numeric: {
    type: _constants.ALL_FIELD_TYPES.real,
    analyzerType: _typeAnalyzer.DATA_TYPES.FLOAT
  },
  string: {
    type: _constants.ALL_FIELD_TYPES.string,
    analyzerType: _typeAnalyzer.DATA_TYPES.STRING
  },
  vachar: {
    type: _constants.ALL_FIELD_TYPES.string,
    analyzerType: _typeAnalyzer.DATA_TYPES.STRING
  },
  "float": {
    type: _constants.ALL_FIELD_TYPES.real,
    analyzerType: _typeAnalyzer.DATA_TYPES.FLOAT
  },
  "int": {
    type: _constants.ALL_FIELD_TYPES.integer,
    analyzerType: _typeAnalyzer.DATA_TYPES.INT
  },
  int4: {
    type: _constants.ALL_FIELD_TYPES.integer,
    analyzerType: _typeAnalyzer.DATA_TYPES.INT
  },
  "boolean": {
    type: _constants.ALL_FIELD_TYPES["boolean"],
    analyzerType: _typeAnalyzer.DATA_TYPES.BOOLEAN
  },
  bool: {
    type: _constants.ALL_FIELD_TYPES["boolean"],
    analyzerType: _typeAnalyzer.DATA_TYPES.BOOLEAN
  }
};
function attributeTypeToFieldType(aType) {
  var type = aType === null || aType === void 0 ? void 0 : aType.toLowerCase();
  if (!type || !attrTypeMap[type]) {
    _console["default"].warn("cannot convert attribute type ".concat(type, " to kepler.gl data type, use string by default"));
    return attrTypeMap.string;
  }
  return attrTypeMap[type];
}

/**
 * Returns true if a dataset can be used as source data for a layer.
 * @param dataset A dataset.
 * @param layer A layer.
 * @returns Returns true if a dataset can be used as source data for a layer.
 */
function matchDatasetType(dataset, layer) {
  // allow selection if type is not assigned yet
  if (!layer.type) {
    return true;
  }
  // allow selection if is current selected dataset
  if (layer.config.dataId === dataset.id) {
    return true;
  }
  // allow selection if layer doesn't have supportedDatasetTypes
  if (!layer.supportedDatasetTypes) {
    return true;
  }
  return Array.isArray(layer.supportedDatasetTypes) && layer.supportedDatasetTypes.includes(dataset.type || '');
}
/**
 * Extracts fields from a tile and updates the metadata object with found fields.
 * Note: this function is for tilesets that don't include fields in metadata (most likely saved with older spec.).
 * @param params.remoteTileFormat The format of the remote tile (MVT or PMTiles).
 * @param params.tilesetUrl The URL of the tileset.
 * @param params.metadataUrl The URL of the metadata.
 * @param params.metadata The metadata object containing fields and tile properties.
 */
var getFieldsFromTile = exports.getFieldsFromTile = /*#__PURE__*/function () {
  var _ref5 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(_ref4) {
    var remoteTileFormat, tilesetUrl, metadataUrl, metadata, _metadata$fields, _metadata$bounds, lon, lat, tileIndices, tileSource, tile, updatedFields;
    return _regenerator["default"].wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          remoteTileFormat = _ref4.remoteTileFormat, tilesetUrl = _ref4.tilesetUrl, metadataUrl = _ref4.metadataUrl, metadata = _ref4.metadata;
          _context.prev = 1;
          if (!(tilesetUrl && metadataUrl && metadata && ((_metadata$fields = metadata.fields) === null || _metadata$fields === void 0 ? void 0 : _metadata$fields.length) === 0 && metadata.minZoom && ((_metadata$bounds = metadata.bounds) === null || _metadata$bounds === void 0 ? void 0 : _metadata$bounds.length) === 4 && (!metadata.pmtilesType || metadata.pmtilesType === _constants.PMTilesType.MVT))) {
            _context.next = 12;
            break;
          }
          lon = (metadata.bounds[0] + metadata.bounds[2]) / 2;
          lat = (metadata.bounds[1] + metadata.bounds[3]) / 2;
          tileIndices = lonLatToTileIndex(lon, lat, metadata.minZoom);
          tileSource = remoteTileFormat === _constants.RemoteTileFormat.MVT ? _mvt.MVTSource.createDataSource(decodeURIComponent(tilesetUrl), {
            mvt: {
              metadataUrl: decodeURIComponent(metadataUrl)
            }
          }) : _pmtiles.PMTilesSource.createDataSource(tilesetUrl, {});
          _context.next = 9;
          return tileSource.getTileData({
            index: tileIndices
          });
        case 9:
          tile = _context.sent;
          updatedFields = tileToFields(tile).map(function (f) {
            return _objectSpread(_objectSpread({}, f), {}, {
              analyzerType: f.analyzerType || _constants.ALL_FIELD_TYPES.string,
              id: f.id || f.name
            });
          });
          metadata.fields = updatedFields;
        case 12:
          _context.next = 16;
          break;
        case 14:
          _context.prev = 14;
          _context.t0 = _context["catch"](1);
        case 16:
        case "end":
          return _context.stop();
      }
    }, _callee, null, [[1, 14]]);
  }));
  return function getFieldsFromTile(_x) {
    return _ref5.apply(this, arguments);
  };
}();

/**
 * Converts tile features into Kepler fields.
 * @param tile The tile object containing features.
 * @returns An array of Kepler fields derived from the tile's features.
 */
var tileToFields = function tileToFields(tile) {
  var _tile$features;
  if ((tile === null || tile === void 0 || (_tile$features = tile.features) === null || _tile$features === void 0 ? void 0 : _tile$features.length) > 0) {
    var header = Object.keys(tile.features[0].properties);
    var output = tile.features.map(function (f) {
      var obj = {};
      header.forEach(function (columnName) {
        obj[columnName] = f.properties[columnName];
      });
      return obj;
    });
    var fields = (0, _commonUtils.getFieldsFromData)(output, header);
    // extra transformation of strings to numbers for tiles isn't implemented, so use string, not computed types
    return fields.map(function (f) {
      var forceString = (f.type === 'integer' || f.type === 'float') && typeof tile.features[0].properties[f.name] === 'string';
      return _objectSpread(_objectSpread({}, f), {}, {
        analyzerType: forceString ? _typeAnalyzer.DATA_TYPES.STRING : f.analyzerType,
        type: forceString ? 'string' : f.type
      });
    });
  }
  return [];
};

/**
 * Converts longitude, latitude, and zoom level into vector tile indices (x, y, z).
 * @param lon Longitude in degrees, ranging from -180 to 180.
 * @param lat Latitude in degrees, ranging from -90 to 90.
 * @param zoom Zoom level (integer), where higher values provide more detail.
 * @returns Tile indices with x and y coordinates and zoom level z.
 */
function lonLatToTileIndex(lon, lat, zoom) {
  if (lat < -85.0511 || lat > 85.0511) {
    throw new Error('Latitude out of range. Must be between -85.0511 and 85.0511.');
  }
  if (zoom < 0) {
    throw new Error('Zoom level must be a non-negative integer.');
  }

  // 2^zoom (number of tiles per axis at given zoom level)
  var scale = 1 << zoom;
  // Convert longitude to tile X
  var x = Math.floor((lon + 180) / 360 * scale);
  // Convert latitude to tile Y
  var latRad = lat * Math.PI / 180;
  var y = Math.floor((1 - Math.log(Math.tan(latRad) + 1 / Math.cos(latRad)) / Math.PI) / 2 * scale);
  return {
    x: x,
    y: y,
    z: zoom
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdHlwZUFuYWx5emVyIiwicmVxdWlyZSIsIl9kM0FycmF5IiwiX2NvbnNvbGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3VuaXEiLCJfbXZ0IiwiX3BtdGlsZXMiLCJfY29tbW9uVXRpbHMiLCJfY29uc3RhbnRzIiwiX3V0aWxzIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJyIiwiZSIsInQiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkFycmF5IiwiaXNBcnJheSIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsImxlbmd0aCIsIl9uIiwiRiIsInMiLCJuIiwiZG9uZSIsInZhbHVlIiwiZiIsIlR5cGVFcnJvciIsIm8iLCJhIiwidSIsImNhbGwiLCJuZXh0IiwiX2FycmF5TGlrZVRvQXJyYXkiLCJ0b1N0cmluZyIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiZnJvbSIsInRlc3QiLCJvd25LZXlzIiwiT2JqZWN0Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5IiwiaXNUaWxlRGF0YXNldCIsImRhdGFzZXQiLCJCb29sZWFuIiwidHlwZSIsIkRhdGFzZXRUeXBlIiwiVkVDVE9SX1RJTEUiLCJpc0xhdCIsIm51bSIsIk51bWJlciIsImlzRmluaXRlIiwiaXNMbmciLCJpc1pvb20iLCJmcm9tQXJyYXlPclN0cmluZyIsImRhdGEiLCJzcGxpdCIsIm1hcCIsInBhcnNlRmxvYXQiLCJwYXJzZUNlbnRlciIsImNlbnRlciIsInJlc3VsdCIsInBhcnNlQm91bmRzIiwiYm91bmRzIiwiZXZlcnkiLCJYX1BBVFQiLCJZX1BBVFQiLCJaX1BBVFQiLCJpc0Z1bGx5UXVhbGlmaWVkVGlsZVVybCIsInRpbGVVcmwiLCJnZXRUaWxlVXJsIiwidmFsaWRhdGVVcmwiLCJ1bmRlZmluZWQiLCJ1cmlQYXJ0cyIsInBhcnNlVXJpIiwicHJvdG9jb2wiLCJob3N0IiwiY29uY2F0IiwicmVwbGFjZSIsIlRJTEVTRVRfRlVOQ1RJT05TIiwiZ2V0TWV0YVVybCIsImdldE1ldGFVcmxNYXBib3giLCJwYXJzZU1ldGFkYXRhIiwicGFyc2VNZXRhZGF0YVRpbGVKU09OIiwiZ2V0TWV0YVVybFRpcHBlY2Fub2UiLCJnZXRUaWxlc2V0RnVuY3Rpb25zIiwiVVJMIiwiaG9zdG5hbWUiLCJlcnJvciIsInBhcnNlVmVjdG9yTWV0YWRhdGEiLCJtZXRhZGF0YSIsIm9wdGlvbiIsIl9yZWYiLCJfcmVmJHRpbGVVcmwiLCJNQVBCT1hfVVJMX1BBVFQiLCJfcGFyc2VkJGZpZWxkcyIsInBhcnNlZCIsInBhcnNlTWV0YWRhdGFUaXBwZWNhbm9lRnJvbURhdGFTb3VyY2UiLCJtaW1lVHlwZSIsInRpbGVNSU1FVHlwZSIsInBtdGlsZXNUeXBlIiwiUE1UaWxlc1R5cGUiLCJNVlQiLCJSQVNURVIiLCJmaWVsZHMiLCJ1cmwiLCJiYXNlVXJsIiwiX3BtVGlsZU1ldGFkYXRhJHRpbGVqIiwiX3BtVGlsZU1ldGFkYXRhJHRpbGVqMiIsIl90eXBlb2YyIiwiYXR0cmlidXRpb25zIiwibWV0YUpzb24iLCJtYXhab29tIiwibWluWm9vbSIsIm12dE1ldGFkYXRhIiwicG1UaWxlTWV0YWRhdGEiLCJKU09OIiwicGFyc2UiLCJlcnIiLCJib3VuZGluZ0JveCIsImZsYXQiLCJjZW50ZXJab29tIiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsInNhZmVQYXJzZUZsb2F0IiwiZGVzY3JpcHRpb24iLCJ0aWxlanNvbiIsImxheWVycyIsIl9wbVRpbGVNZXRhZGF0YSR0aWxlajMiLCJwbVRpbGVzTGF5ZXJUb1RpcHBlY2Fub2VMYXllciIsImNvbGxlY3RBdHRyaWJ1dGVzIiwiaHRtbEF0dHJpYnV0aW9uIiwicGFyc2VNZXRhSnNvbiIsImlucHV0IiwiaXNOYU4iLCJ0aWxlc3RhdHMiLCJnZXRUaW1lQW5pbWF0aW9uRG9tYWluIiwibWFwcGVkVmFsdWUiLCJ0aW1lU3RlcHMiLCJ1bmlxIiwic29ydCIsImFzY2VuZGluZyIsIm5vdE51bGxPclVuZGVmaW5lZCIsImRvbWFpbiIsImR1cmF0aW9uIiwiY2xhbXBlZCIsImNsYW1wIiwicG1UaWxlVHlwZVRvQXR0ck1hcCIsImZsb2F0MzIiLCJzdHJpbmciLCJ1dGY4Iiwib3V0TGF5ZXJzIiwiX2l0ZXJhdG9yIiwiX3N0ZXAiLCJsYXllciIsIl9yZWYyIiwiX3JlZjIkZmllbGRzIiwiX2l0ZXJhdG9yMiIsIl9zdGVwMiIsIl9wbUZpZWxkJHZhbHVlcyIsInBtRmllbGQiLCJhdHRyaWJ1dGUiLCJjb3VudCIsInVuaXF1ZVZhbHVlQ291bnQiLCJ2YWx1ZXMiLCJtaW4iLCJtYXgiLCJhdHRyaWJ1dGVzIiwiaW5kZXhlZEF0dHJpYnV0ZXMiLCJfaXRlcmF0b3IzIiwiX3N0ZXAzIiwiX3JlZjMiLCJfcmVmMyRhdHRyaWJ1dGVzIiwiX2l0ZXJhdG9yNSIsIl9zdGVwNSIsImF0dHIiLCJmbmFtZSIsImF0dHJpYnV0ZVRvRmllbGQiLCJtZXJnZUF0dHJpYnV0ZURvbWFpbiIsIl9pIiwiX09iamVjdCRlbnRyaWVzIiwiZW50cmllcyIsIl9PYmplY3QkZW50cmllcyRfaSIsIl9zbGljZWRUb0FycmF5MiIsImF0dHJzIiwiX3BhcnNlSW5kZXhlZEZpZWxkIiwicGFyc2VJbmRleGVkRmllbGQiLCJpbmRleGVkRmllbGQiLCJ1bmlkZW50aWZpZWQiLCJfaXRlcmF0b3I0IiwiX3N0ZXA0IiwidW5pZGVudGlmaWVkQXR0ciIsImdldEluZGV4S2V5RnJvbUZpZWxkTmFtZSIsImZpZWxkIiwiX2l0ZXJhdG9yNiIsIl9zdGVwNiIsImZpZWxkTmFtZSIsImluZGV4S2V5IiwiYW5hbHl6ZWRUeXBlIiwiY29udGFpblZhbGlkVGltZSIsImlkIiwiaW5kZXhCeSIsImZvcm1hdCIsImFuYWx5emVyVHlwZVRvRmllbGRUeXBlIiwiZmllbGRUcyIsImVwb2NoIiwidGltZVRvVW5peE1pbGxpIiwiQUxMX0ZJRUxEX1RZUEVTIiwidGltZXN0YW1wIiwidGltZURvbWFpbiIsImNvbXBhcmUiLCJudW0xIiwibnVtMiIsIm9wZXJhdG9yIiwiTWF0aCIsIk5hTiIsImdldEZpbHRlclByb3BzIiwiZmllbGRUeXBlIiwicmVhbCIsImludGVnZXIiLCJfZ2V0QXR0cmlidXRlRG9tYWluIiwiZ2V0QXR0cmlidXRlRG9tYWluIiwiX2dldEF0dHJpYnV0ZURvbWFpbjIiLCJkaWZmIiwic3RlcCIsImdldE51bWVyaWNTdGVwU2l6ZSIsImZvcm1hdE51bWJlckJ5U3RlcCIsImZpbHRlclByb3BzIiwiRklMVEVSX1RZUEVTIiwicmFuZ2UiLCJ0eXBlT3B0aW9ucyIsImdwdSIsInNlbGVjdCIsIm11bHRpU2VsZWN0IiwiZmllbGRUeXBlcyIsImF0dHJpYnV0ZVR5cGVUb0ZpZWxkVHlwZSIsIl9maWVsZCRtZXRhZGF0YSIsIl9maWVsZCRmaWx0ZXJQcm9wcyIsImF0dHJUeXBlTWFwIiwibnVtYmVyIiwiYW5hbHl6ZXJUeXBlIiwiREFUQV9UWVBFUyIsIkZMT0FUIiwibnVtZXJpYyIsIlNUUklORyIsInZhY2hhciIsIklOVCIsImludDQiLCJCT09MRUFOIiwiYm9vbCIsImFUeXBlIiwidG9Mb3dlckNhc2UiLCJDb25zb2xlIiwid2FybiIsIm1hdGNoRGF0YXNldFR5cGUiLCJjb25maWciLCJkYXRhSWQiLCJzdXBwb3J0ZWREYXRhc2V0VHlwZXMiLCJpbmNsdWRlcyIsImdldEZpZWxkc0Zyb21UaWxlIiwiZXhwb3J0cyIsIl9yZWY1IiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3JlZ2VuZXJhdG9yIiwibWFyayIsIl9jYWxsZWUiLCJfcmVmNCIsInJlbW90ZVRpbGVGb3JtYXQiLCJ0aWxlc2V0VXJsIiwibWV0YWRhdGFVcmwiLCJfbWV0YWRhdGEkZmllbGRzIiwiX21ldGFkYXRhJGJvdW5kcyIsImxvbiIsImxhdCIsInRpbGVJbmRpY2VzIiwidGlsZVNvdXJjZSIsInRpbGUiLCJ1cGRhdGVkRmllbGRzIiwid3JhcCIsIl9jYWxsZWUkIiwiX2NvbnRleHQiLCJwcmV2IiwibG9uTGF0VG9UaWxlSW5kZXgiLCJSZW1vdGVUaWxlRm9ybWF0IiwiTVZUU291cmNlIiwiY3JlYXRlRGF0YVNvdXJjZSIsImRlY29kZVVSSUNvbXBvbmVudCIsIm12dCIsIlBNVGlsZXNTb3VyY2UiLCJnZXRUaWxlRGF0YSIsImluZGV4Iiwic2VudCIsInRpbGVUb0ZpZWxkcyIsInQwIiwic3RvcCIsIl94IiwiX3RpbGUkZmVhdHVyZXMiLCJmZWF0dXJlcyIsImhlYWRlciIsInByb3BlcnRpZXMiLCJvdXRwdXQiLCJvYmoiLCJjb2x1bW5OYW1lIiwiZ2V0RmllbGRzRnJvbURhdGEiLCJmb3JjZVN0cmluZyIsIkFOQUxZWkVSX0RBVEFfVFlQRVMiLCJ6b29tIiwiRXJyb3IiLCJzY2FsZSIsIngiLCJmbG9vciIsImxhdFJhZCIsIlBJIiwieSIsImxvZyIsInRhbiIsImNvcyIsInoiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdGlsZXNldC92ZWN0b3ItdGlsZS11dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQge0RBVEFfVFlQRVMgYXMgQU5BTFlaRVJfREFUQV9UWVBFU30gZnJvbSAndHlwZS1hbmFseXplcic7XG5pbXBvcnQge2FzY2VuZGluZ30gZnJvbSAnZDMtYXJyYXknO1xuaW1wb3J0IENvbnNvbGUgZnJvbSAnZ2xvYmFsL2NvbnNvbGUnO1xuaW1wb3J0IHVuaXEgZnJvbSAnbG9kYXNoL3VuaXEnO1xuaW1wb3J0IHtEQVRBX1RZUEVTfSBmcm9tICd0eXBlLWFuYWx5emVyJztcblxuaW1wb3J0IHtNVlRTb3VyY2UsIFRpbGVKU09OfSBmcm9tICdAbG9hZGVycy5nbC9tdnQnO1xuaW1wb3J0IHtQTVRpbGVzU291cmNlLCBQTVRpbGVzTWV0YWRhdGF9IGZyb20gJ0Bsb2FkZXJzLmdsL3BtdGlsZXMnO1xuXG5pbXBvcnQge1xuICBhbmFseXplclR5cGVUb0ZpZWxkVHlwZSxcbiAgY29udGFpblZhbGlkVGltZSxcbiAgbm90TnVsbG9yVW5kZWZpbmVkIGFzIG5vdE51bGxPclVuZGVmaW5lZCxcbiAgcGFyc2VVcmksXG4gIGdldEZpZWxkc0Zyb21EYXRhXG59IGZyb20gJ0BrZXBsZXIuZ2wvY29tbW9uLXV0aWxzJztcbmltcG9ydCB7XG4gIERhdGFzZXRUeXBlLFxuICBBTExfRklFTERfVFlQRVMsXG4gIEZJTFRFUl9UWVBFUyxcbiAgUE1UaWxlc1R5cGUsXG4gIFJlbW90ZVRpbGVGb3JtYXRcbn0gZnJvbSAnQGtlcGxlci5nbC9jb25zdGFudHMnO1xuXG5pbXBvcnQge0ZlYXR1cmUsIEZpZWxkIGFzIEtlcGxlckZpZWxkLCBLZXBsZXJMYXllcn0gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5pbXBvcnQge2NsYW1wLCBmb3JtYXROdW1iZXJCeVN0ZXAsIGdldE51bWVyaWNTdGVwU2l6ZSwgdGltZVRvVW5peE1pbGxpfSBmcm9tICdAa2VwbGVyLmdsL3V0aWxzJztcblxuaW1wb3J0IHtcbiAgRmlsdGVyUHJvcHMsXG4gIE51bWVyaWNGaWVsZEZpbHRlclByb3BzLFxuICBCb29sZWFuRmllbGRGaWx0ZXJQcm9wcyxcbiAgU3RyaW5nRmllbGRGaWx0ZXJQcm9wcyxcbiAgZGVmYXVsdCBhcyBLZXBsZXJEYXRhc2V0XG59IGZyb20gJy4uL2tlcGxlci10YWJsZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RpbGVEYXRhc2V0KGRhdGFzZXQ6IEtlcGxlckRhdGFzZXQgfCB7dHlwZTogc3RyaW5nfSk6IGJvb2xlYW4ge1xuICByZXR1cm4gQm9vbGVhbihkYXRhc2V0Py50eXBlID09PSBEYXRhc2V0VHlwZS5WRUNUT1JfVElMRSk7XG59XG5cbnR5cGUgVmVjdG9yVGlsZUZpZWxkID0ge1xuICBhbmFseXplclR5cGU6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBpZDogc3RyaW5nO1xuICBmb3JtYXQ6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBmaWx0ZXJQcm9wcz86IEZpbHRlclByb3BzO1xufTtcblxuZXhwb3J0IHR5cGUgVmVjdG9yVGlsZU1ldGFkYXRhID0ge1xuICBhdHRyaWJ1dGlvbnM/OiB1bmtub3duW107XG4gIG1ldGFKc29uOiBhbnkgfCBudWxsO1xuICBib3VuZHM6IG51bWJlcltdIHwgbnVsbDtcbiAgY2VudGVyOiBudW1iZXJbXSB8IG51bGw7XG4gIG1heFpvb206IG51bWJlciB8IG51bGw7XG4gIG1pblpvb206IG51bWJlciB8IG51bGw7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBmaWVsZHM6IFZlY3RvclRpbGVGaWVsZFtdO1xuXG4gIC8vIGlmIHRoZSB0aWxlc2V0IGlzIG9mIHBtdGlsZXMgZm9ybWF0IHRoZW4gaW5jbHVkZSBpbmZvIGFib3V0IHR5cGUgb2YgcG10aWxlc1xuICBwbXRpbGVzVHlwZT86IFBNVGlsZXNUeXBlO1xufTtcblxudHlwZSBUaWxlc2V0TWV0YWRhdGEgPSBWZWN0b3JUaWxlTWV0YWRhdGE7XG5cbmV4cG9ydCB0eXBlIFRpcHBlY2Fub2VMYXllckF0dHJpYnV0ZSA9IHtcbiAgYXR0cmlidXRlPzogc3RyaW5nO1xuICB0eXBlPzogc3RyaW5nO1xuICBtaW4/OiBudW1iZXI7XG4gIG1heD86IG51bWJlcjtcbiAgdmFsdWVzOiBzdHJpbmdbXSB8IG51bWJlcltdO1xufTtcblxudHlwZSBUaXBwZWNhbm9lTGF5ZXIgPSB7XG4gIGF0dHJpYnV0ZXM/OiBUaXBwZWNhbm9lTGF5ZXJBdHRyaWJ1dGVbXTtcbn07XG50eXBlIFRpbGVzZXRGdW5jdGlvbiA9IHtcbiAgZ2V0TWV0YVVybDogKHM6IHN0cmluZykgPT4gc3RyaW5nIHwgbnVsbDtcbiAgcGFyc2VNZXRhZGF0YTogKGQ6IGFueSwgb3B0aW9ucz86IGFueSkgPT4gVGlsZXNldE1ldGFkYXRhIHwgbnVsbDtcbn07XG4vLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L3RpbGVqc29uLXNwZWMvdHJlZS9tYXN0ZXIvMi4yLjBcbmZ1bmN0aW9uIGlzTGF0KG51bTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobnVtKSAmJiBudW0gPD0gOTAgJiYgbnVtID49IC05MDtcbn1cbmZ1bmN0aW9uIGlzTG5nKG51bTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobnVtKSAmJiBudW0gPD0gMTgwICYmIG51bSA+PSAtMTgwO1xufVxuZnVuY3Rpb24gaXNab29tKG51bTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobnVtKSAmJiBudW0gPj0gMCAmJiBudW0gPD0gMjI7XG59XG5mdW5jdGlvbiBmcm9tQXJyYXlPclN0cmluZyhkYXRhOiBzdHJpbmcgfCBudW1iZXJbXSk6IG51bWJlcltdIHwgbnVsbCB7XG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZGF0YS5zcGxpdCgnLCcpLm1hcChwYXJzZUZsb2F0KTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ2VudGVyKGNlbnRlcjogc3RyaW5nIHwgbnVtYmVyW10pOiBudW1iZXJbXSB8IG51bGwge1xuICAvLyBzdXBwb3J0ZWQgZm9ybWF0c1xuICAvLyBzdHJpbmc6IFwiLTk2LjY1NzcxNSw0MC4xMjYxMjcsLTkwLjE0MDA2MSw0My41MTY2ODlcIixcbiAgLy8gYXJyYXk6IFstOTEuNTA1MTI3LDQxLjYxNTQ0MiwxNF1cbiAgY29uc3QgcmVzdWx0ID0gZnJvbUFycmF5T3JTdHJpbmcoY2VudGVyKTtcbiAgaWYgKFxuICAgIEFycmF5LmlzQXJyYXkocmVzdWx0KSAmJlxuICAgIHJlc3VsdC5sZW5ndGggPT09IDMgJiZcbiAgICBpc0xuZyhyZXN1bHRbMF0pICYmXG4gICAgaXNMYXQocmVzdWx0WzFdKSAmJlxuICAgIGlzWm9vbShyZXN1bHRbMl0pXG4gICkge1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogYm91bmRzIHNob3VsZCBiZSBbbWluTG5nLCBtaW5MYXQsIG1heExuZywgbWF4TGF0XVxuICogQHBhcmFtIHsqfSBib3VuZHNcbiAqL1xuZnVuY3Rpb24gcGFyc2VCb3VuZHMoYm91bmRzOiBzdHJpbmcgfCBudW1iZXJbXSk6IG51bWJlcltdIHwgbnVsbCB7XG4gIC8vIHN1cHBvcnRlZCBmb3JtYXRzXG4gIC8vIHN0cmluZzogXCItOTYuNjU3NzE1LDQwLjEyNjEyNywtOTAuMTQwMDYxLDQzLjUxNjY4OVwiLFxuICAvLyBhcnJheTogWyAtMTgwLCAtODUuMDUxMTI4Nzc5ODA2NTksIDE4MCwgODUuMDUxMTI4Nzc5ODA2NiBdXG4gIGNvbnN0IHJlc3VsdCA9IGZyb21BcnJheU9yU3RyaW5nKGJvdW5kcyk7XG4gIC8vIHZhbGlkYXRlIGJvdW5kc1xuICBpZiAoXG4gICAgQXJyYXkuaXNBcnJheShyZXN1bHQpICYmXG4gICAgcmVzdWx0Lmxlbmd0aCA9PT0gNCAmJlxuICAgIFtyZXN1bHRbMF0sIHJlc3VsdFsyXV0uZXZlcnkoaXNMbmcpICYmXG4gICAgW3Jlc3VsdFsxXSwgcmVzdWx0WzNdXS5ldmVyeShpc0xhdClcbiAgKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuY29uc3QgWF9QQVRUID0gL1xce3hcXH0vO1xuY29uc3QgWV9QQVRUID0gL1xce3lcXH0vO1xuY29uc3QgWl9QQVRUID0gL1xce3pcXH0vO1xuXG5mdW5jdGlvbiBpc0Z1bGx5UXVhbGlmaWVkVGlsZVVybCh0aWxlVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIFhfUEFUVC50ZXN0KHRpbGVVcmwpICYmIFlfUEFUVC50ZXN0KHRpbGVVcmwpICYmIFpfUEFUVC50ZXN0KHRpbGVVcmwpO1xufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSB0aWxlIFVSTFxuICogQHBhcmFtICB7c3RyaW5nfSB0aWxlVXJsIEluaXRpYWwgdGlsZSBVUkwsIHdoaWNoIG1heSBiZSBlaXRoZXIgdGhlIHJvb3QgVVJMIGZvciB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlc2V0IG9yIGEgZnVsbHkgcXVhbGlmaWVkIHRlbXBsYXRlXG4gKiBAcGFyYW0gIHtmdW5jdGlvbn0gdmFsaWRhdGVVcmwgZnVuY3Rpb24gdG8gdmFsaWRhdGUgdGlsZSBVUkxcbiAqIEByZXR1cm4ge3N0cmluZ3xudWxsfSAgICBGdWxseSBxdWFsaWZpZWQgdGlsZSBVUkwgdGVtcGxhdGUsIG9yIG51bGwgaWYgaW5wdXQgZG9lcyBub3RcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlYXIgdG8gYmUgYSB2YWxpZCBVUkxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbGVVcmwoXG4gIHRpbGVVcmw6IHN0cmluZyxcbiAgdmFsaWRhdGVVcmw6IChzOiBzdHJpbmcpID0+IGJvb2xlYW4gPSBpc0Z1bGx5UXVhbGlmaWVkVGlsZVVybFxuKTogc3RyaW5nIHwgbnVsbCB7XG4gIC8vIENoZWNrIGZvciBhIHZhbGlkIFVSTC4gSWRlYWxseSB3ZSdkIGhhdmUgYSBzaW1wbGUgbWV0aG9kIGhlcmUuXG4gIGNvbnN0IHVyaVBhcnRzID0gcGFyc2VVcmkodGlsZVVybCk7XG4gIGlmICghdXJpUGFydHMucHJvdG9jb2wgfHwgIXVyaVBhcnRzLmhvc3QpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAodmFsaWRhdGVVcmwodGlsZVVybCkpIHtcbiAgICByZXR1cm4gdGlsZVVybDtcbiAgfVxuICByZXR1cm4gYCR7dGlsZVVybC5yZXBsYWNlKC9cXC8kLywgJycpfS97en0ve3h9L3t5fS5wYmZgO1xufVxuXG4vKipcbiAqIE1hcCBvZiB1dGlsIGZ1bmN0aW9ucyBmb3IgZGlmZmVyZW50IHRpbGVzZXQgdHlwZXMsIGtleWVkIGJ5IGhvc3RcbiAqL1xuY29uc3QgVElMRVNFVF9GVU5DVElPTlM6IHtba2V5OiBzdHJpbmddOiBUaWxlc2V0RnVuY3Rpb259ID0ge1xuICAnYXBpLm1hcGJveC5jb20nOiB7XG4gICAgZ2V0TWV0YVVybDogZ2V0TWV0YVVybE1hcGJveCxcbiAgICBwYXJzZU1ldGFkYXRhOiBwYXJzZU1ldGFkYXRhVGlsZUpTT05cbiAgfSxcbiAgZGVmYXVsdDoge1xuICAgIGdldE1ldGFVcmw6IGdldE1ldGFVcmxUaXBwZWNhbm9lLFxuICAgIHBhcnNlTWV0YWRhdGE6IHBhcnNlTWV0YWRhdGFUaWxlSlNPTlxuICB9XG59O1xuXG5mdW5jdGlvbiBnZXRUaWxlc2V0RnVuY3Rpb25zKHRpbGVVcmw6IHN0cmluZyB8IG51bGwpOiBUaWxlc2V0RnVuY3Rpb24ge1xuICBsZXQgaG9zdCA9ICcnO1xuICB0cnkge1xuICAgIGhvc3QgPSBuZXcgVVJMKHRpbGVVcmwgfHwgJycpLmhvc3RuYW1lO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIGRvIG5vdGhpbmdcbiAgfVxuXG4gIHJldHVybiBUSUxFU0VUX0ZVTkNUSU9OU1tob3N0XSB8fCBUSUxFU0VUX0ZVTkNUSU9OUy5kZWZhdWx0O1xufVxuXG4vKipcbiAqIEdldCB0aGUgbWV0YWRhdGEgVVJMIGZvciBhIGdpdmVuIHRpbGVzZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1ldGFVcmwodGlsZVVybDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIHJldHVybiBnZXRUaWxlc2V0RnVuY3Rpb25zKHRpbGVVcmwpLmdldE1ldGFVcmwodGlsZVVybCk7XG59XG50eXBlIFBhcnNlTWV0YWRhdGFPcHRpb24gPSB7XG4gIHRpbGVVcmw/OiBzdHJpbmcgfCBudWxsO1xufTtcbi8qKlxuICogUGFyc2UgdGhlIG1ldGFkYXRhIGZvciBhIGdpdmVuIHRpbGVzZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVmVjdG9yTWV0YWRhdGEoXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzXG4gIG1ldGFkYXRhOiBQTVRpbGVzTWV0YWRhdGEgfCBUaWxlSlNPTixcbiAgb3B0aW9uPzogUGFyc2VNZXRhZGF0YU9wdGlvblxuKTogVGlsZXNldE1ldGFkYXRhIHwgbnVsbCB7XG4gIGNvbnN0IHt0aWxlVXJsID0gJyd9ID0gb3B0aW9uIHx8IHt9O1xuICByZXR1cm4gZ2V0VGlsZXNldEZ1bmN0aW9ucyh0aWxlVXJsKS5wYXJzZU1ldGFkYXRhKG1ldGFkYXRhKTtcbn1cblxuY29uc3QgTUFQQk9YX1VSTF9QQVRUID0gL1xcL1xce3pcXH1cXC9cXHt4XFx9XFwvXFx7eVxcfVxcLm12dC87XG5cbmZ1bmN0aW9uIGdldE1ldGFVcmxNYXBib3godGlsZVVybCA9ICcnKTogc3RyaW5nIHtcbiAgcmV0dXJuIHRpbGVVcmwucmVwbGFjZShNQVBCT1hfVVJMX1BBVFQsICcuanNvbicpO1xufVxuXG5mdW5jdGlvbiBwYXJzZU1ldGFkYXRhVGlsZUpTT04obWV0YWRhdGE6IFBNVGlsZXNNZXRhZGF0YSB8IFRpbGVKU09OKTogVGlsZXNldE1ldGFkYXRhIHwgbnVsbCB7XG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlTWV0YWRhdGFUaXBwZWNhbm9lRnJvbURhdGFTb3VyY2UobWV0YWRhdGEpO1xuICBpZiAoIXBhcnNlZCkgcmV0dXJuIG51bGw7XG5cbiAgLy8gUE1UaWxlcyBjYW4gcG90ZW50aWFsbHkgYmUgaW4gUmFzdGVyVGlsZSBmb3JtYXRcbiAgY29uc3QgbWltZVR5cGUgPSAobWV0YWRhdGEgYXMgUE1UaWxlc01ldGFkYXRhKS50aWxlTUlNRVR5cGU7XG4gIGlmIChtaW1lVHlwZSkge1xuICAgIHBhcnNlZC5wbXRpbGVzVHlwZSA9XG4gICAgICBtaW1lVHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3ZuZC5tYXBib3gtdmVjdG9yLXRpbGUnID8gUE1UaWxlc1R5cGUuTVZUIDogUE1UaWxlc1R5cGUuUkFTVEVSO1xuICB9XG5cbiAgLy8gRmllbGRzIGFscmVhZHkgcGFyc2VkIGZyb20gYGpzb25gIHByb3BlcnR5XG4gIGlmIChwYXJzZWQuZmllbGRzPy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcGFyc2VkO1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlZDtcbn1cblxuZnVuY3Rpb24gZ2V0TWV0YVVybFRpcHBlY2Fub2UodGlsZVVybCkge1xuICBjb25zdCB1cmwgPSBnZXRUaWxlVXJsKHRpbGVVcmwpO1xuICBpZiAoIXVybCkgcmV0dXJuIG51bGw7XG4gIC8vIGFzc3VtZXMgdGhlIHN0cnVjdHVyZSA8dXJsX2Jhc2U+L3t6fS4uLlxuICBjb25zdCBiYXNlVXJsID0gdXJsLnNwbGl0KFpfUEFUVClbMF0ucmVwbGFjZSgvXFwvJC8sICcnKTtcbiAgcmV0dXJuIGAke2Jhc2VVcmx9L21ldGFkYXRhLmpzb25gO1xufVxuXG4vKipcbiAqIFNwZWNpYWwgcGFyc2luZyBmb3IgbWV0YWRhdGEgcmV0dXJuZWQgYnkgTVZUU291cmNlIGFuZCBQTVRpbGVzU291cmNlLlxuICogQHBhcmFtIG1ldGFkYXRhIFRpbGVzZXQgbWV0YWRhdGEgcGFyc2VkIGJ5IGEgRGF0YVNvdWNlXG4gKiBAcmV0dXJucyBNZXRhZGF0YSBpbiBLZXBsZXItZnJpZW5kbHkgZm9ybWF0LlxuICovXG5mdW5jdGlvbiBwYXJzZU1ldGFkYXRhVGlwcGVjYW5vZUZyb21EYXRhU291cmNlKFxuICBtZXRhZGF0YTogUE1UaWxlc01ldGFkYXRhIHwgVGlsZUpTT04gfCBudWxsXG4pOiBUaWxlc2V0TWV0YWRhdGEgfCBudWxsIHtcbiAgaWYgKCFtZXRhZGF0YSB8fCB0eXBlb2YgbWV0YWRhdGEgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZXQgcmVzdWx0OiBUaWxlc2V0TWV0YWRhdGEgPSB7XG4gICAgYXR0cmlidXRpb25zOiBbXSxcbiAgICBtZXRhSnNvbjogbnVsbCxcbiAgICBib3VuZHM6IG51bGwsXG4gICAgY2VudGVyOiBudWxsLFxuICAgIG1heFpvb206IG51bGwsXG4gICAgbWluWm9vbTogbnVsbCxcbiAgICBmaWVsZHM6IFtdXG4gIH07XG5cbiAgY29uc3QgbXZ0TWV0YWRhdGEgPSBtZXRhZGF0YSBhcyBUaWxlSlNPTjtcbiAgY29uc3QgcG1UaWxlTWV0YWRhdGEgPSBtZXRhZGF0YSBhcyBQTVRpbGVzTWV0YWRhdGE7XG5cbiAgLy8gdHJ5IHRvIHBhcnNlIG1ldGFKc29uXG4gIGlmICh0eXBlb2YgbXZ0TWV0YWRhdGEubWV0YUpzb24gPT09ICdzdHJpbmcnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdC5tZXRhSnNvbiA9IEpTT04ucGFyc2UobXZ0TWV0YWRhdGEubWV0YUpzb24pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gZG8gbm90aGluZ1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgbXZ0TWV0YWRhdGEubWV0YUpzb24gPT09ICdvYmplY3QnKSB7XG4gICAgcmVzdWx0Lm1ldGFKc29uID0gbXZ0TWV0YWRhdGEubWV0YUpzb247XG4gIH1cblxuICByZXN1bHQuYm91bmRzID0gcGFyc2VCb3VuZHMoXG4gICAgQXJyYXkuaXNBcnJheShtZXRhZGF0YS5ib3VuZGluZ0JveCkgPyBtZXRhZGF0YS5ib3VuZGluZ0JveC5mbGF0KCkgOiAnJ1xuICApO1xuXG4gIC8vIFBNVGlsZVNvdXJjZSBoYXMgY2VudGVyWm9vbSBhbmQgY2VudGVyIFtsb24sIGxhdF0sIE1WVFNvdXJjZSAtIFtsb24sIGxhdCwgem9vbV1cbiAgY29uc3QgY2VudGVyID1cbiAgICBwbVRpbGVNZXRhZGF0YS5jZW50ZXJab29tICE9PSB1bmRlZmluZWQgJiYgQXJyYXkuaXNBcnJheShtZXRhZGF0YS5jZW50ZXIpXG4gICAgICA/IFsuLi5tZXRhZGF0YS5jZW50ZXIsIHBtVGlsZU1ldGFkYXRhLmNlbnRlclpvb21dXG4gICAgICA6IG1ldGFkYXRhLmNlbnRlcjtcbiAgcmVzdWx0LmNlbnRlciA9IHBhcnNlQ2VudGVyKGNlbnRlciB8fCAnJyk7XG5cbiAgcmVzdWx0Lm1heFpvb20gPSBzYWZlUGFyc2VGbG9hdChtZXRhZGF0YS5tYXhab29tKTtcbiAgcmVzdWx0Lm1pblpvb20gPSBzYWZlUGFyc2VGbG9hdChtZXRhZGF0YS5taW5ab29tKTtcbiAgcmVzdWx0Lm5hbWUgPSBtZXRhZGF0YS5uYW1lIHx8ICcnO1xuICByZXN1bHQuZGVzY3JpcHRpb24gPSBtdnRNZXRhZGF0YS5kZXNjcmlwdGlvbiB8fCBwbVRpbGVNZXRhZGF0YS50aWxlanNvbj8uZGVzY3JpcHRpb24gfHwgJyc7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkocG1UaWxlTWV0YWRhdGEudGlsZWpzb24/LmxheWVycykpIHtcbiAgICBjb25zdCBsYXllcnMgPSBwbVRpbGVzTGF5ZXJUb1RpcHBlY2Fub2VMYXllcihwbVRpbGVNZXRhZGF0YS50aWxlanNvbj8ubGF5ZXJzKTtcbiAgICByZXN1bHQuZmllbGRzID0gY29sbGVjdEF0dHJpYnV0ZXMobGF5ZXJzKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG12dE1ldGFkYXRhLmxheWVycykpIHtcbiAgICBjb25zdCBsYXllcnMgPSBwbVRpbGVzTGF5ZXJUb1RpcHBlY2Fub2VMYXllcihtdnRNZXRhZGF0YS5sYXllcnMpO1xuICAgIHJlc3VsdC5maWVsZHMgPSBjb2xsZWN0QXR0cmlidXRlcyhsYXllcnMpO1xuICB9XG5cbiAgcmVzdWx0ID0ge1xuICAgIC4uLnJlc3VsdCxcbiAgICBhdHRyaWJ1dGlvbnM6XG4gICAgICBwbVRpbGVNZXRhZGF0YS5hdHRyaWJ1dGlvbnMgfHxcbiAgICAgIChtdnRNZXRhZGF0YS5odG1sQXR0cmlidXRpb24gPyBbbXZ0TWV0YWRhdGEuaHRtbEF0dHJpYnV0aW9uXSA6IHVuZGVmaW5lZCkgfHxcbiAgICAgIFtdLFxuICAgIC4uLnBhcnNlTWV0YUpzb24ocmVzdWx0Lm1ldGFKc29uKVxuICB9O1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHNhZmVQYXJzZUZsb2F0KGlucHV0OiB1bmtub3duKTogbnVtYmVyIHwgbnVsbCB7XG4gIGNvbnN0IHJlc3VsdCA9XG4gICAgdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyA/IHBhcnNlRmxvYXQoaW5wdXQpIDogdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyA/IGlucHV0IDogbnVsbDtcbiAgcmV0dXJuIHJlc3VsdCA9PT0gbnVsbCB8fCBpc05hTihyZXN1bHQpID8gbnVsbCA6IHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gcGFyc2VNZXRhSnNvbihtZXRhSnNvbjogYW55KToge2ZpZWxkczogVmVjdG9yVGlsZUZpZWxkW119IHwgbnVsbCB7XG4gIGlmICghbWV0YUpzb24gfHwgdHlwZW9mIG1ldGFKc29uICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKG1ldGFKc29uLnRpbGVzdGF0cyAmJiBBcnJheS5pc0FycmF5KG1ldGFKc29uLnRpbGVzdGF0cy5sYXllcnMpKSB7XG4gICAgLy8gd2UgYXJlIGluIGx1Y2shXG4gICAgcmV0dXJuIHtmaWVsZHM6IGNvbGxlY3RBdHRyaWJ1dGVzKG1ldGFKc29uLnRpbGVzdGF0cy5sYXllcnMpfTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0VGltZUFuaW1hdGlvbkRvbWFpbihtYXBwZWRWYWx1ZTogbnVtYmVyW10pOiB7XG4gIGRvbWFpbjogbnVtYmVyW107XG4gIHRpbWVTdGVwczogbnVtYmVyW107XG4gIG1hcHBlZFZhbHVlOiBudW1iZXJbXTtcbiAgZHVyYXRpb246IG51bWJlcjtcbn0ge1xuICBjb25zdCB0aW1lU3RlcHMgPSB1bmlxKG1hcHBlZFZhbHVlKS5zb3J0KGFzY2VuZGluZykuZmlsdGVyKG5vdE51bGxPclVuZGVmaW5lZCk7XG5cbiAgY29uc3QgZG9tYWluID0gW3RpbWVTdGVwc1swXSwgdGltZVN0ZXBzW3RpbWVTdGVwcy5sZW5ndGggLSAxXV07XG5cbiAgLy8gaWYgdGFrcyAxMCAqIDEwMDAgbXMgdG8gZmluaXNoIHRoZSBlbnRpcmUgYW5pbWF0aW9uXG4gIGNvbnN0IGR1cmF0aW9uID0gMTAwMDAgLyB0aW1lU3RlcHMubGVuZ3RoO1xuICBjb25zdCBjbGFtcGVkID0gY2xhbXAoWzEwMCwgMjAwMF0sIGR1cmF0aW9uKTtcblxuICByZXR1cm4ge2RvbWFpbiwgdGltZVN0ZXBzLCBkdXJhdGlvbjogY2xhbXBlZCwgbWFwcGVkVmFsdWV9O1xufVxuXG5jb25zdCBwbVRpbGVUeXBlVG9BdHRyTWFwID0ge1xuICBmbG9hdDMyOiAnbnVtYmVyJyxcbiAgc3RyaW5nOiAnc3RyaW5nJyxcbiAgdXRmODogJ3N0cmluZycsXG4gIGludDogJ2ludCcsXG4gIGJvb2xlYW46ICdib29sZWFuJ1xufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gVGlsZUpTT05bJ2xheWVycyddIGJhY2sgdG8gVGlwcGVjYW5vZUxheWVyXG4gKi9cbmZ1bmN0aW9uIHBtVGlsZXNMYXllclRvVGlwcGVjYW5vZUxheWVyKGxheWVyczogVGlsZUpTT05bJ2xheWVycyddKTogVGlwcGVjYW5vZUxheWVyW10ge1xuICBpZiAoIWxheWVycykgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IG91dExheWVyczogVGlwcGVjYW5vZUxheWVyW10gPSBbXTtcbiAgZm9yIChjb25zdCBsYXllciBvZiBsYXllcnMpIHtcbiAgICBjb25zdCB7ZmllbGRzID0gW119ID0gbGF5ZXIgfHwge307XG4gICAgZm9yIChjb25zdCBwbUZpZWxkIG9mIGZpZWxkcykge1xuICAgICAgY29uc3QgYXR0cmlidXRlID0ge1xuICAgICAgICBhdHRyaWJ1dGU6IHBtRmllbGQubmFtZSxcbiAgICAgICAgdHlwZTogcG1UaWxlVHlwZVRvQXR0ck1hcFtwbUZpZWxkLnR5cGVdLFxuICAgICAgICBjb3VudDogcG1GaWVsZC51bmlxdWVWYWx1ZUNvdW50LFxuICAgICAgICB2YWx1ZXM6IChwbUZpZWxkLnZhbHVlcyA/PyBbXSkgYXMgbnVtYmVyW10gfCBzdHJpbmdbXSxcbiAgICAgICAgbWluOiBwbUZpZWxkLm1pbixcbiAgICAgICAgbWF4OiBwbUZpZWxkLm1heFxuICAgICAgfTtcblxuICAgICAgb3V0TGF5ZXJzLnB1c2goe1xuICAgICAgICBhdHRyaWJ1dGVzOiBbYXR0cmlidXRlXVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXRMYXllcnM7XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3RBdHRyaWJ1dGVzKGxheWVyczogVGlwcGVjYW5vZUxheWVyW10gPSBbXSk6IFZlY3RvclRpbGVGaWVsZFtdIHtcbiAgY29uc3QgZmllbGRzID0ge307XG4gIGNvbnN0IGluZGV4ZWRBdHRyaWJ1dGVzOiB7W2tleTogc3RyaW5nXTogVGlwcGVjYW5vZUxheWVyQXR0cmlidXRlW119ID0ge307XG5cbiAgZm9yIChjb25zdCBsYXllciBvZiBsYXllcnMpIHtcbiAgICBjb25zdCB7YXR0cmlidXRlcyA9IFtdfSA9IGxheWVyIHx8IHt9O1xuICAgIGZvciAoY29uc3QgYXR0ciBvZiBhdHRyaWJ1dGVzKSB7XG4gICAgICBjb25zdCBuYW1lID0gYXR0ci5hdHRyaWJ1dGU7XG4gICAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtZGVwdGhcbiAgICAgICAgaWYgKG5hbWUuc3BsaXQoJ3wnKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8gaW5kZXhlZCBmaWVsZFxuICAgICAgICAgIGNvbnN0IGZuYW1lID0gbmFtZS5zcGxpdCgnfCcpWzBdO1xuICAgICAgICAgIGluZGV4ZWRBdHRyaWJ1dGVzW2ZuYW1lXSA9IGluZGV4ZWRBdHRyaWJ1dGVzW2ZuYW1lXSB8fCBbXTtcbiAgICAgICAgICBpbmRleGVkQXR0cmlidXRlc1tmbmFtZV0ucHVzaChhdHRyKTtcbiAgICAgICAgfSBlbHNlIGlmICghZmllbGRzW25hbWVdKSB7XG4gICAgICAgICAgZmllbGRzW25hbWVdID0gYXR0cmlidXRlVG9GaWVsZChhdHRyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZXJnZUF0dHJpYnV0ZURvbWFpbihmaWVsZHNbbmFtZV0sIGF0dHIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gcGFyc2UgaW5kZXhlZCBhdHRyaWJ1dGUsIGFuZCBwdXQgaW5kZXgga2V5IHVuaWRlbnRpZmllZCBiYWNrIGFzIG5vcm1hbCBmaWVsZFxuICBmb3IgKGNvbnN0IFtuYW1lLCBhdHRyc10gb2YgT2JqZWN0LmVudHJpZXMoaW5kZXhlZEF0dHJpYnV0ZXMpKSB7XG4gICAgY29uc3Qge2luZGV4ZWRGaWVsZCwgdW5pZGVudGlmaWVkfSA9IHBhcnNlSW5kZXhlZEZpZWxkKG5hbWUsIGF0dHJzKTtcbiAgICBmaWVsZHNbaW5kZXhlZEZpZWxkLm5hbWVdID0gaW5kZXhlZEZpZWxkO1xuICAgIGZvciAoY29uc3QgdW5pZGVudGlmaWVkQXR0ciBvZiB1bmlkZW50aWZpZWQpIHtcbiAgICAgIGlmICh1bmlkZW50aWZpZWRBdHRyLmF0dHJpYnV0ZSkge1xuICAgICAgICBmaWVsZHNbdW5pZGVudGlmaWVkQXR0ci5hdHRyaWJ1dGVdID1cbiAgICAgICAgICBmaWVsZHNbdW5pZGVudGlmaWVkQXR0ci5hdHRyaWJ1dGVdIHx8IGF0dHJpYnV0ZVRvRmllbGQodW5pZGVudGlmaWVkQXR0cik7XG4gICAgICAgIG1lcmdlQXR0cmlidXRlRG9tYWluKGZpZWxkc1t1bmlkZW50aWZpZWRBdHRyLmF0dHJpYnV0ZV0sIHVuaWRlbnRpZmllZEF0dHIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBPYmplY3QudmFsdWVzKGZpZWxkcyk7XG59XG5cbmZ1bmN0aW9uIGdldEluZGV4S2V5RnJvbUZpZWxkTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgcmV0dXJuIG5hbWUgJiYgbmFtZS5zcGxpdCgnfCcpLmxlbmd0aCA+IDEgPyBuYW1lLnNwbGl0KCd8JylbMV0gOiBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBGaWVsZEluZGV4QnkgPSB7XG4gIGZvcm1hdDogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIG1hcHBlZFZhbHVlOiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuICB9O1xufTtcblxuZnVuY3Rpb24gcGFyc2VJbmRleGVkRmllbGQoXG4gIG5hbWU6IHN0cmluZyxcbiAgYXR0cnM6IFRpcHBlY2Fub2VMYXllckF0dHJpYnV0ZVtdXG4pOiB7XG4gIHVuaWRlbnRpZmllZDogVGlwcGVjYW5vZUxheWVyQXR0cmlidXRlW107XG4gIGluZGV4ZWRGaWVsZDogVmVjdG9yVGlsZUZpZWxkO1xufSB7XG4gIGNvbnN0IHVuaWRlbnRpZmllZDogVGlwcGVjYW5vZUxheWVyQXR0cmlidXRlW10gPSBbXTtcbiAgLy8gYW5hbHl6ZSB0aW1lIGZvcm1hdFxuICBsZXQgZmllbGQ7XG5cbiAgZm9yIChjb25zdCBhdHRyIG9mIGF0dHJzKSB7XG4gICAgY29uc3QgZmllbGROYW1lID0gYXR0ci5hdHRyaWJ1dGU7XG4gICAgY29uc3QgaW5kZXhLZXkgPSBnZXRJbmRleEtleUZyb21GaWVsZE5hbWUoZmllbGROYW1lIHx8ICcnKTtcbiAgICBjb25zdCBhbmFseXplZFR5cGUgPSBpbmRleEtleSAmJiBjb250YWluVmFsaWRUaW1lKFtpbmRleEtleV0pO1xuICAgIGlmIChhbmFseXplZFR5cGUpIHtcbiAgICAgIGZpZWxkID0gZmllbGQgfHwge1xuICAgICAgICAuLi5hdHRyaWJ1dGVUb0ZpZWxkKGF0dHIpLFxuICAgICAgICAvLyBvdmVyaWRlIG5hbWUgYW5kIGlkIHRvIHRydW5jYXRlZCBuYW1lXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGlkOiBuYW1lLFxuICAgICAgICBpbmRleEJ5OiB7XG4gICAgICAgICAgZm9ybWF0OiBhbmFseXplZFR5cGUuZm9ybWF0LFxuICAgICAgICAgIHR5cGU6IGFuYWx5emVyVHlwZVRvRmllbGRUeXBlKGFuYWx5emVkVHlwZS50eXBlKSxcbiAgICAgICAgICBtYXBwZWRWYWx1ZToge31cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG1lcmdlQXR0cmlidXRlRG9tYWluKGZpZWxkLCBhdHRyKTtcbiAgICAgIC8vIHNhdmUgZXBvY2ggdGltZSBpbiBtYXBwZWRWYWx1ZVxuICAgICAgbGV0IGZpZWxkVHM6IHN0cmluZyB8IG51bWJlciB8IG51bGwgPSBpbmRleEtleTtcbiAgICAgIGlmIChhbmFseXplZFR5cGUuZm9ybWF0ID09PSAneCcgfHwgYW5hbHl6ZWRUeXBlLmZvcm1hdCA9PT0gJ1gnKSB7XG4gICAgICAgIGZpZWxkVHMgPSBOdW1iZXIoaW5kZXhLZXkpO1xuICAgICAgfVxuICAgICAgY29uc3QgZXBvY2ggPSB0aW1lVG9Vbml4TWlsbGkoZmllbGRUcywgYW5hbHl6ZWRUeXBlLmZvcm1hdCk7XG4gICAgICBpZiAoZXBvY2gpIHtcbiAgICAgICAgZmllbGQuaW5kZXhCeS5tYXBwZWRWYWx1ZVtlcG9jaF0gPSBmaWVsZE5hbWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGtleSBpcyBub3QgdmFsaWQgdGltZXN0YW1wXG4gICAgICB1bmlkZW50aWZpZWQucHVzaChhdHRyKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZmllbGQuaW5kZXhCeSAmJiBmaWVsZC5pbmRleEJ5LnR5cGUgPT09IEFMTF9GSUVMRF9UWVBFUy50aW1lc3RhbXApIHtcbiAgICBmaWVsZC5pbmRleEJ5LnRpbWVEb21haW4gPSBnZXRUaW1lQW5pbWF0aW9uRG9tYWluKFxuICAgICAgT2JqZWN0LmtleXMoZmllbGQuaW5kZXhCeS5tYXBwZWRWYWx1ZSkubWFwKE51bWJlcilcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHt1bmlkZW50aWZpZWQsIGluZGV4ZWRGaWVsZDogZmllbGR9O1xufVxuXG5mdW5jdGlvbiBjb21wYXJlKG51bTE6IG51bWJlciB8IHVuZGVmaW5lZCwgbnVtMjogbnVtYmVyIHwgdW5kZWZpbmVkLCBvcGVyYXRvcjogc3RyaW5nKTogbnVtYmVyIHtcbiAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShudW0xKSAmJiBOdW1iZXIuaXNGaW5pdGUobnVtMilcbiAgICA/IE1hdGhbb3BlcmF0b3JdKG51bTEgYXMgbnVtYmVyLCBudW0yIGFzIG51bWJlcilcbiAgICA6IE51bWJlci5pc0Zpbml0ZShudW0xKVxuICAgID8gKG51bTEgYXMgbnVtYmVyKVxuICAgIDogTnVtYmVyLmlzRmluaXRlKG51bTIpXG4gICAgPyAobnVtMiBhcyBudW1iZXIpXG4gICAgOiBOYU47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJQcm9wcyhcbiAgZmllbGRUeXBlOiBzdHJpbmcsXG4gIGF0dHJpYnV0ZTogVGlwcGVjYW5vZUxheWVyQXR0cmlidXRlXG4pOiBGaWx0ZXJQcm9wcyB7XG4gIHN3aXRjaCAoZmllbGRUeXBlKSB7XG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMucmVhbDpcbiAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5pbnRlZ2VyOiB7XG4gICAgICBjb25zdCBbbWluLCBtYXhdID0gZ2V0QXR0cmlidXRlRG9tYWluKGZpZWxkVHlwZSwgYXR0cmlidXRlKTtcbiAgICAgIGNvbnN0IGRpZmYgPSBtYXggLSBtaW47XG4gICAgICBjb25zdCBzdGVwID0gZ2V0TnVtZXJpY1N0ZXBTaXplKGRpZmYpIHx8IDAuMTtcbiAgICAgIGNvbnN0IGRvbWFpbiA9IFtcbiAgICAgICAgZm9ybWF0TnVtYmVyQnlTdGVwKG1pbiwgc3RlcCwgJ2Zsb29yJyksXG4gICAgICAgIGZvcm1hdE51bWJlckJ5U3RlcChtYXgsIHN0ZXAsICdjZWlsJylcbiAgICAgIF07XG4gICAgICBjb25zdCBmaWx0ZXJQcm9wczogTnVtZXJpY0ZpZWxkRmlsdGVyUHJvcHMgPSB7XG4gICAgICAgIGRvbWFpbixcbiAgICAgICAgdmFsdWU6IGRvbWFpbiBhcyBbbnVtYmVyLCBudW1iZXJdLFxuICAgICAgICB0eXBlOiBGSUxURVJfVFlQRVMucmFuZ2UsXG4gICAgICAgIHR5cGVPcHRpb25zOiBbRklMVEVSX1RZUEVTLnJhbmdlXSxcbiAgICAgICAgZ3B1OiB0cnVlLFxuICAgICAgICBzdGVwXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGZpbHRlclByb3BzO1xuICAgIH1cblxuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLmJvb2xlYW46IHtcbiAgICAgIGNvbnN0IGZpbHRlclByb3BzOiBCb29sZWFuRmllbGRGaWx0ZXJQcm9wcyA9IHtcbiAgICAgICAgZG9tYWluOiBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgdHlwZTogRklMVEVSX1RZUEVTLnNlbGVjdCxcbiAgICAgICAgZ3B1OiB0cnVlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGZpbHRlclByb3BzO1xuICAgIH1cblxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIC8vIEFzc3VtZSBzdHJpbmcgZm9yIGFsbCBvdGhlciBmaWVsZHNcbiAgICAgIGNvbnN0IGZpbHRlclByb3BzOiBTdHJpbmdGaWVsZEZpbHRlclByb3BzID0ge1xuICAgICAgICBkb21haW46IGF0dHJpYnV0ZS52YWx1ZXMgYXMgc3RyaW5nW10sXG4gICAgICAgIHZhbHVlOiBhdHRyaWJ1dGUudmFsdWVzIGFzIHN0cmluZ1tdLFxuICAgICAgICB0eXBlOiBGSUxURVJfVFlQRVMubXVsdGlTZWxlY3QsXG4gICAgICAgIGdwdTogZmFsc2VcbiAgICAgIH07XG4gICAgICByZXR1cm4gZmlsdGVyUHJvcHM7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGF0dHJpYnV0ZVRvRmllbGQoYXR0cmlidXRlOiBUaXBwZWNhbm9lTGF5ZXJBdHRyaWJ1dGUgPSB7dmFsdWVzOiBbXX0pOiBWZWN0b3JUaWxlRmllbGQge1xuICAvLyBhdHRyaWJ1dGU6IFwiX3NlYXNvbl9wZWFrc19jb2xvclwiXG4gIC8vIGNvdW50OiAxMDAwXG4gIC8vIG1heDogMC45NVxuICAvLyBtaW46IDAuMjQzNzVcbiAgLy8gdHlwZTogXCJudW1iZXJcIlxuICBjb25zdCBmaWVsZFR5cGVzID0gYXR0cmlidXRlVHlwZVRvRmllbGRUeXBlKGF0dHJpYnV0ZS50eXBlKTtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBhdHRyaWJ1dGUuYXR0cmlidXRlIGFzIHN0cmluZyxcbiAgICBpZDogYXR0cmlidXRlLmF0dHJpYnV0ZSBhcyBzdHJpbmcsXG4gICAgZm9ybWF0OiAnJyxcbiAgICBmaWx0ZXJQcm9wczogZ2V0RmlsdGVyUHJvcHMoZmllbGRUeXBlcy50eXBlLCBhdHRyaWJ1dGUpLFxuICAgIC4uLmZpZWxkVHlwZXNcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0QXR0cmlidXRlRG9tYWluKHR5cGU6IHN0cmluZyB8IG51bGwsIGF0dHJpYnV0ZTogVGlwcGVjYW5vZUxheWVyQXR0cmlidXRlKTogbnVtYmVyW10ge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5yZWFsOlxuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLmludGVnZXI6XG4gICAgICByZXR1cm4gW1xuICAgICAgICBOdW1iZXIuaXNGaW5pdGUoYXR0cmlidXRlLm1pbikgPyAoYXR0cmlidXRlLm1pbiBhcyBudW1iZXIpIDogTmFOLFxuICAgICAgICBOdW1iZXIuaXNGaW5pdGUoYXR0cmlidXRlLm1heCkgPyAoYXR0cmlidXRlLm1heCBhcyBudW1iZXIpIDogTmFOXG4gICAgICBdO1xuXG4gICAgY2FzZSBBTExfRklFTERfVFlQRVMuYm9vbGVhbjpcbiAgICAgIHJldHVybiBbMCwgMV07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBbMCwgMV07XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0gZmllbGQgVGhpcyBmdW5jdGlvbiBtdXRhdGVzIHRoZSBmaWVsZCBwYXJhbWV0ZXJcbiAqL1xuZnVuY3Rpb24gbWVyZ2VBdHRyaWJ1dGVEb21haW4oZmllbGQ6IEtlcGxlckZpZWxkLCBhdHRyaWJ1dGU6IFRpcHBlY2Fub2VMYXllckF0dHJpYnV0ZSk6IHZvaWQge1xuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlIEFMTF9GSUVMRF9UWVBFUy5yZWFsOlxuICAgIGNhc2UgQUxMX0ZJRUxEX1RZUEVTLmludGVnZXI6IHtcbiAgICAgIGNvbnN0IGRvbWFpbiA9IGZpZWxkLm1ldGFkYXRhPy5kb21haW4gfHwgZmllbGQuZmlsdGVyUHJvcHM/LmRvbWFpbjtcbiAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgZG9tYWluLm1pbiA9IGNvbXBhcmUoYXR0cmlidXRlLm1pbiwgZG9tYWluWzBdLCAnbWluJyk7XG4gICAgICAgIGRvbWFpbi5tYXggPSBjb21wYXJlKGF0dHJpYnV0ZS5tYXgsIGRvbWFpblsxXSwgJ21heCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuO1xuICB9XG59XG5cbi8vIHBvc3NpYmxlIHR5cGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvdGlwcGVjYW5vZSNtb2RpZnlpbmctZmVhdHVyZS1hdHRyaWJ1dGVzXG5jb25zdCBhdHRyVHlwZU1hcCA9IHtcbiAgbnVtYmVyOiB7XG4gICAgdHlwZTogQUxMX0ZJRUxEX1RZUEVTLnJlYWwsXG4gICAgYW5hbHl6ZXJUeXBlOiBEQVRBX1RZUEVTLkZMT0FUXG4gIH0sXG4gIG51bWVyaWM6IHtcbiAgICB0eXBlOiBBTExfRklFTERfVFlQRVMucmVhbCxcbiAgICBhbmFseXplclR5cGU6IERBVEFfVFlQRVMuRkxPQVRcbiAgfSxcbiAgc3RyaW5nOiB7XG4gICAgdHlwZTogQUxMX0ZJRUxEX1RZUEVTLnN0cmluZyxcbiAgICBhbmFseXplclR5cGU6IERBVEFfVFlQRVMuU1RSSU5HXG4gIH0sXG4gIHZhY2hhcjoge1xuICAgIHR5cGU6IEFMTF9GSUVMRF9UWVBFUy5zdHJpbmcsXG4gICAgYW5hbHl6ZXJUeXBlOiBEQVRBX1RZUEVTLlNUUklOR1xuICB9LFxuICBmbG9hdDoge1xuICAgIHR5cGU6IEFMTF9GSUVMRF9UWVBFUy5yZWFsLFxuICAgIGFuYWx5emVyVHlwZTogREFUQV9UWVBFUy5GTE9BVFxuICB9LFxuICBpbnQ6IHtcbiAgICB0eXBlOiBBTExfRklFTERfVFlQRVMuaW50ZWdlcixcbiAgICBhbmFseXplclR5cGU6IERBVEFfVFlQRVMuSU5UXG4gIH0sXG4gIGludDQ6IHtcbiAgICB0eXBlOiBBTExfRklFTERfVFlQRVMuaW50ZWdlcixcbiAgICBhbmFseXplclR5cGU6IERBVEFfVFlQRVMuSU5UXG4gIH0sXG4gIGJvb2xlYW46IHtcbiAgICB0eXBlOiBBTExfRklFTERfVFlQRVMuYm9vbGVhbixcbiAgICBhbmFseXplclR5cGU6IERBVEFfVFlQRVMuQk9PTEVBTlxuICB9LFxuICBib29sOiB7XG4gICAgdHlwZTogQUxMX0ZJRUxEX1RZUEVTLmJvb2xlYW4sXG4gICAgYW5hbHl6ZXJUeXBlOiBEQVRBX1RZUEVTLkJPT0xFQU5cbiAgfVxufTtcblxuZnVuY3Rpb24gYXR0cmlidXRlVHlwZVRvRmllbGRUeXBlKGFUeXBlPzogc3RyaW5nKToge3R5cGU6IHN0cmluZzsgYW5hbHl6ZXJUeXBlOiBzdHJpbmd9IHtcbiAgY29uc3QgdHlwZSA9IGFUeXBlPy50b0xvd2VyQ2FzZSgpO1xuICBpZiAoIXR5cGUgfHwgIWF0dHJUeXBlTWFwW3R5cGVdKSB7XG4gICAgQ29uc29sZS53YXJuKFxuICAgICAgYGNhbm5vdCBjb252ZXJ0IGF0dHJpYnV0ZSB0eXBlICR7dHlwZX0gdG8ga2VwbGVyLmdsIGRhdGEgdHlwZSwgdXNlIHN0cmluZyBieSBkZWZhdWx0YFxuICAgICk7XG4gICAgcmV0dXJuIGF0dHJUeXBlTWFwLnN0cmluZztcbiAgfVxuXG4gIHJldHVybiBhdHRyVHlwZU1hcFt0eXBlXTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkYXRhc2V0IGNhbiBiZSB1c2VkIGFzIHNvdXJjZSBkYXRhIGZvciBhIGxheWVyLlxuICogQHBhcmFtIGRhdGFzZXQgQSBkYXRhc2V0LlxuICogQHBhcmFtIGxheWVyIEEgbGF5ZXIuXG4gKiBAcmV0dXJucyBSZXR1cm5zIHRydWUgaWYgYSBkYXRhc2V0IGNhbiBiZSB1c2VkIGFzIHNvdXJjZSBkYXRhIGZvciBhIGxheWVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hEYXRhc2V0VHlwZShkYXRhc2V0OiBLZXBsZXJEYXRhc2V0LCBsYXllcjogS2VwbGVyTGF5ZXIpOiBib29sZWFuIHtcbiAgLy8gYWxsb3cgc2VsZWN0aW9uIGlmIHR5cGUgaXMgbm90IGFzc2lnbmVkIHlldFxuICBpZiAoIWxheWVyLnR5cGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvLyBhbGxvdyBzZWxlY3Rpb24gaWYgaXMgY3VycmVudCBzZWxlY3RlZCBkYXRhc2V0XG4gIGlmIChsYXllci5jb25maWcuZGF0YUlkID09PSBkYXRhc2V0LmlkKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gYWxsb3cgc2VsZWN0aW9uIGlmIGxheWVyIGRvZXNuJ3QgaGF2ZSBzdXBwb3J0ZWREYXRhc2V0VHlwZXNcbiAgaWYgKCFsYXllci5zdXBwb3J0ZWREYXRhc2V0VHlwZXMpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgQXJyYXkuaXNBcnJheShsYXllci5zdXBwb3J0ZWREYXRhc2V0VHlwZXMpICYmXG4gICAgbGF5ZXIuc3VwcG9ydGVkRGF0YXNldFR5cGVzLmluY2x1ZGVzKGRhdGFzZXQudHlwZSB8fCAnJylcbiAgKTtcbn1cblxudHlwZSBHZXRGaWVsZHNGcm9tVGlsZVByb3BzID0ge1xuICByZW1vdGVUaWxlRm9ybWF0OiBSZW1vdGVUaWxlRm9ybWF0O1xuICB0aWxlc2V0VXJsOiBzdHJpbmcgfCBudWxsO1xuICBtZXRhZGF0YVVybDogc3RyaW5nIHwgbnVsbDtcbiAgbWV0YWRhdGE6IFZlY3RvclRpbGVNZXRhZGF0YSB8IG51bGw7XG59O1xuXG4vKipcbiAqIEV4dHJhY3RzIGZpZWxkcyBmcm9tIGEgdGlsZSBhbmQgdXBkYXRlcyB0aGUgbWV0YWRhdGEgb2JqZWN0IHdpdGggZm91bmQgZmllbGRzLlxuICogTm90ZTogdGhpcyBmdW5jdGlvbiBpcyBmb3IgdGlsZXNldHMgdGhhdCBkb24ndCBpbmNsdWRlIGZpZWxkcyBpbiBtZXRhZGF0YSAobW9zdCBsaWtlbHkgc2F2ZWQgd2l0aCBvbGRlciBzcGVjLikuXG4gKiBAcGFyYW0gcGFyYW1zLnJlbW90ZVRpbGVGb3JtYXQgVGhlIGZvcm1hdCBvZiB0aGUgcmVtb3RlIHRpbGUgKE1WVCBvciBQTVRpbGVzKS5cbiAqIEBwYXJhbSBwYXJhbXMudGlsZXNldFVybCBUaGUgVVJMIG9mIHRoZSB0aWxlc2V0LlxuICogQHBhcmFtIHBhcmFtcy5tZXRhZGF0YVVybCBUaGUgVVJMIG9mIHRoZSBtZXRhZGF0YS5cbiAqIEBwYXJhbSBwYXJhbXMubWV0YWRhdGEgVGhlIG1ldGFkYXRhIG9iamVjdCBjb250YWluaW5nIGZpZWxkcyBhbmQgdGlsZSBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgY29uc3QgZ2V0RmllbGRzRnJvbVRpbGUgPSBhc3luYyAoe1xuICByZW1vdGVUaWxlRm9ybWF0LFxuICB0aWxlc2V0VXJsLFxuICBtZXRhZGF0YVVybCxcbiAgbWV0YWRhdGFcbn06IEdldEZpZWxkc0Zyb21UaWxlUHJvcHMpID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoXG4gICAgICB0aWxlc2V0VXJsICYmXG4gICAgICBtZXRhZGF0YVVybCAmJlxuICAgICAgbWV0YWRhdGEgJiZcbiAgICAgIG1ldGFkYXRhLmZpZWxkcz8ubGVuZ3RoID09PSAwICYmXG4gICAgICBtZXRhZGF0YS5taW5ab29tICYmXG4gICAgICBtZXRhZGF0YS5ib3VuZHM/Lmxlbmd0aCA9PT0gNCAmJlxuICAgICAgKCFtZXRhZGF0YS5wbXRpbGVzVHlwZSB8fCBtZXRhZGF0YS5wbXRpbGVzVHlwZSA9PT0gUE1UaWxlc1R5cGUuTVZUKVxuICAgICkge1xuICAgICAgY29uc3QgbG9uID0gKG1ldGFkYXRhLmJvdW5kc1swXSArIG1ldGFkYXRhLmJvdW5kc1syXSkgLyAyO1xuICAgICAgY29uc3QgbGF0ID0gKG1ldGFkYXRhLmJvdW5kc1sxXSArIG1ldGFkYXRhLmJvdW5kc1szXSkgLyAyO1xuICAgICAgY29uc3QgdGlsZUluZGljZXMgPSBsb25MYXRUb1RpbGVJbmRleChsb24sIGxhdCwgbWV0YWRhdGEubWluWm9vbSk7XG5cbiAgICAgIGNvbnN0IHRpbGVTb3VyY2UgPVxuICAgICAgICByZW1vdGVUaWxlRm9ybWF0ID09PSBSZW1vdGVUaWxlRm9ybWF0Lk1WVFxuICAgICAgICAgID8gTVZUU291cmNlLmNyZWF0ZURhdGFTb3VyY2UoZGVjb2RlVVJJQ29tcG9uZW50KHRpbGVzZXRVcmwpLCB7XG4gICAgICAgICAgICAgIG12dDoge1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhVXJsOiBkZWNvZGVVUklDb21wb25lbnQobWV0YWRhdGFVcmwpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiBQTVRpbGVzU291cmNlLmNyZWF0ZURhdGFTb3VyY2UodGlsZXNldFVybCwge30pO1xuICAgICAgY29uc3QgdGlsZSA9IGF3YWl0IHRpbGVTb3VyY2UuZ2V0VGlsZURhdGEoe2luZGV4OiB0aWxlSW5kaWNlc30gYXMgYW55KTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRGaWVsZHMgPSB0aWxlVG9GaWVsZHModGlsZSkubWFwKGYgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmYsXG4gICAgICAgICAgYW5hbHl6ZXJUeXBlOiBmLmFuYWx5emVyVHlwZSB8fCBBTExfRklFTERfVFlQRVMuc3RyaW5nLFxuICAgICAgICAgIGlkOiBmLmlkIHx8IGYubmFtZVxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIG1ldGFkYXRhLmZpZWxkcyA9IHVwZGF0ZWRGaWVsZHM7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICAvLyBpZ25vcmUsIGFzIHRoaXMgaXMgZXhwZXJpbWVudGFsIGZhbGxiYWNrXG4gIH1cbn07XG5cbi8qKlxuICogQ29udmVydHMgdGlsZSBmZWF0dXJlcyBpbnRvIEtlcGxlciBmaWVsZHMuXG4gKiBAcGFyYW0gdGlsZSBUaGUgdGlsZSBvYmplY3QgY29udGFpbmluZyBmZWF0dXJlcy5cbiAqIEByZXR1cm5zIEFuIGFycmF5IG9mIEtlcGxlciBmaWVsZHMgZGVyaXZlZCBmcm9tIHRoZSB0aWxlJ3MgZmVhdHVyZXMuXG4gKi9cbmNvbnN0IHRpbGVUb0ZpZWxkcyA9ICh0aWxlOiB7ZmVhdHVyZXM6IEZlYXR1cmVbXX0pOiBLZXBsZXJGaWVsZFtdID0+IHtcbiAgaWYgKHRpbGU/LmZlYXR1cmVzPy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgaGVhZGVyID0gT2JqZWN0LmtleXModGlsZS5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzKTtcbiAgICBjb25zdCBvdXRwdXQgPSB0aWxlLmZlYXR1cmVzLm1hcChmID0+IHtcbiAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgaGVhZGVyLmZvckVhY2goY29sdW1uTmFtZSA9PiB7XG4gICAgICAgIG9ialtjb2x1bW5OYW1lXSA9IGYucHJvcGVydGllc1tjb2x1bW5OYW1lXTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9KTtcblxuICAgIGNvbnN0IGZpZWxkcyA9IGdldEZpZWxkc0Zyb21EYXRhKG91dHB1dCwgaGVhZGVyKTtcbiAgICAvLyBleHRyYSB0cmFuc2Zvcm1hdGlvbiBvZiBzdHJpbmdzIHRvIG51bWJlcnMgZm9yIHRpbGVzIGlzbid0IGltcGxlbWVudGVkLCBzbyB1c2Ugc3RyaW5nLCBub3QgY29tcHV0ZWQgdHlwZXNcbiAgICByZXR1cm4gZmllbGRzLm1hcChmID0+IHtcbiAgICAgIGNvbnN0IGZvcmNlU3RyaW5nID1cbiAgICAgICAgKGYudHlwZSA9PT0gJ2ludGVnZXInIHx8IGYudHlwZSA9PT0gJ2Zsb2F0JykgJiZcbiAgICAgICAgdHlwZW9mIHRpbGUuZmVhdHVyZXNbMF0ucHJvcGVydGllc1tmLm5hbWVdID09PSAnc3RyaW5nJztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZixcbiAgICAgICAgYW5hbHl6ZXJUeXBlOiBmb3JjZVN0cmluZyA/IEFOQUxZWkVSX0RBVEFfVFlQRVMuU1RSSU5HIDogZi5hbmFseXplclR5cGUsXG4gICAgICAgIHR5cGU6IGZvcmNlU3RyaW5nID8gJ3N0cmluZycgOiBmLnR5cGVcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIFtdO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBsb25naXR1ZGUsIGxhdGl0dWRlLCBhbmQgem9vbSBsZXZlbCBpbnRvIHZlY3RvciB0aWxlIGluZGljZXMgKHgsIHksIHopLlxuICogQHBhcmFtIGxvbiBMb25naXR1ZGUgaW4gZGVncmVlcywgcmFuZ2luZyBmcm9tIC0xODAgdG8gMTgwLlxuICogQHBhcmFtIGxhdCBMYXRpdHVkZSBpbiBkZWdyZWVzLCByYW5naW5nIGZyb20gLTkwIHRvIDkwLlxuICogQHBhcmFtIHpvb20gWm9vbSBsZXZlbCAoaW50ZWdlciksIHdoZXJlIGhpZ2hlciB2YWx1ZXMgcHJvdmlkZSBtb3JlIGRldGFpbC5cbiAqIEByZXR1cm5zIFRpbGUgaW5kaWNlcyB3aXRoIHggYW5kIHkgY29vcmRpbmF0ZXMgYW5kIHpvb20gbGV2ZWwgei5cbiAqL1xuZnVuY3Rpb24gbG9uTGF0VG9UaWxlSW5kZXgobG9uOiBudW1iZXIsIGxhdDogbnVtYmVyLCB6b29tOiBudW1iZXIpIHtcbiAgaWYgKGxhdCA8IC04NS4wNTExIHx8IGxhdCA+IDg1LjA1MTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0xhdGl0dWRlIG91dCBvZiByYW5nZS4gTXVzdCBiZSBiZXR3ZWVuIC04NS4wNTExIGFuZCA4NS4wNTExLicpO1xuICB9XG4gIGlmICh6b29tIDwgMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignWm9vbSBsZXZlbCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIuJyk7XG4gIH1cblxuICAvLyAyXnpvb20gKG51bWJlciBvZiB0aWxlcyBwZXIgYXhpcyBhdCBnaXZlbiB6b29tIGxldmVsKVxuICBjb25zdCBzY2FsZSA9IDEgPDwgem9vbTtcbiAgLy8gQ29udmVydCBsb25naXR1ZGUgdG8gdGlsZSBYXG4gIGNvbnN0IHggPSBNYXRoLmZsb29yKCgobG9uICsgMTgwKSAvIDM2MCkgKiBzY2FsZSk7XG4gIC8vIENvbnZlcnQgbGF0aXR1ZGUgdG8gdGlsZSBZXG4gIGNvbnN0IGxhdFJhZCA9IChsYXQgKiBNYXRoLlBJKSAvIDE4MDtcbiAgY29uc3QgeSA9IE1hdGguZmxvb3IoXG4gICAgKCgxIC0gTWF0aC5sb2coTWF0aC50YW4obGF0UmFkKSArIDEgLyBNYXRoLmNvcyhsYXRSYWQpKSAvIE1hdGguUEkpIC8gMikgKiBzY2FsZVxuICApO1xuXG4gIHJldHVybiB7eCwgeSwgejogem9vbX07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxJQUFBQSxhQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxRQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBSSxLQUFBLEdBQUFELHNCQUFBLENBQUFILE9BQUE7QUFHQSxJQUFBSyxJQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxRQUFBLEdBQUFOLE9BQUE7QUFFQSxJQUFBTyxZQUFBLEdBQUFQLE9BQUE7QUFPQSxJQUFBUSxVQUFBLEdBQUFSLE9BQUE7QUFTQSxJQUFBUyxNQUFBLEdBQUFULE9BQUE7QUFBZ0csU0FBQVUsMkJBQUFDLENBQUEsRUFBQUMsQ0FBQSxRQUFBQyxDQUFBLHlCQUFBQyxNQUFBLElBQUFILENBQUEsQ0FBQUcsTUFBQSxDQUFBQyxRQUFBLEtBQUFKLENBQUEscUJBQUFFLENBQUEsUUFBQUcsS0FBQSxDQUFBQyxPQUFBLENBQUFOLENBQUEsTUFBQUUsQ0FBQSxHQUFBSywyQkFBQSxDQUFBUCxDQUFBLE1BQUFDLENBQUEsSUFBQUQsQ0FBQSx1QkFBQUEs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