"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.parseUri = parseUri;
// SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project

/**
 * Allows to break down a url into multiple params
 * from http://blog.stevenlevithan.com/archives/parseuri
 */
function parseUri(str) {
  var o = parseUri.options;
  var m = o.parser[o.strictMode ? 'strict' : 'loose'].exec(str);
  var uri = {};
  var i = 14;
  while (i--) uri[o.key[i]] = (m === null || m === void 0 ? void 0 : m[i]) || '';
  uri[o.q.name] = {};
  uri[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {
    if ($1) uri[o.q.name][$1] = $2;
  });
  return uri;
}
parseUri.options = {
  strictMode: false,
  key: ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'],
  q: {
    name: 'queryKey',
    parser: /(?:^|&)([^&=]*)=?([^&]*)/g
  },
  parser: {
    strict:
    // eslint-disable-next-line no-useless-escape
    /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
    loose:
    // eslint-disable-next-line no-useless-escape
    /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXJzZVVyaSIsInN0ciIsIm8iLCJvcHRpb25zIiwibSIsInBhcnNlciIsInN0cmljdE1vZGUiLCJleGVjIiwidXJpIiwiaSIsImtleSIsInEiLCJuYW1lIiwicmVwbGFjZSIsIiQwIiwiJDEiLCIkMiIsInN0cmljdCIsImxvb3NlIl0sInNvdXJjZXMiOlsiLi4vc3JjL3VybC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG4vKipcbiAqIEFsbG93cyB0byBicmVhayBkb3duIGEgdXJsIGludG8gbXVsdGlwbGUgcGFyYW1zXG4gKiBmcm9tIGh0dHA6Ly9ibG9nLnN0ZXZlbmxldml0aGFuLmNvbS9hcmNoaXZlcy9wYXJzZXVyaVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VVcmkoc3RyOiBzdHJpbmcpOiB7W2tleTogc3RyaW5nXTogYW55fSB7XG4gIGNvbnN0IG8gPSBwYXJzZVVyaS5vcHRpb25zO1xuICBjb25zdCBtID0gby5wYXJzZXJbby5zdHJpY3RNb2RlID8gJ3N0cmljdCcgOiAnbG9vc2UnXS5leGVjKHN0cik7XG4gIGNvbnN0IHVyaSA9IHt9O1xuICBsZXQgaSA9IDE0O1xuXG4gIHdoaWxlIChpLS0pIHVyaVtvLmtleVtpXV0gPSBtPy5baV0gfHwgJyc7XG5cbiAgdXJpW28ucS5uYW1lXSA9IHt9O1xuICB1cmlbby5rZXlbMTJdXS5yZXBsYWNlKG8ucS5wYXJzZXIsICgkMCwgJDEsICQyKSA9PiB7XG4gICAgaWYgKCQxKSB1cmlbby5xLm5hbWVdWyQxXSA9ICQyO1xuICB9KTtcblxuICByZXR1cm4gdXJpO1xufVxuXG5wYXJzZVVyaS5vcHRpb25zID0ge1xuICBzdHJpY3RNb2RlOiBmYWxzZSxcbiAga2V5OiBbXG4gICAgJ3NvdXJjZScsXG4gICAgJ3Byb3RvY29sJyxcbiAgICAnYXV0aG9yaXR5JyxcbiAgICAndXNlckluZm8nLFxuICAgICd1c2VyJyxcbiAgICAncGFzc3dvcmQnLFxuICAgICdob3N0JyxcbiAgICAncG9ydCcsXG4gICAgJ3JlbGF0aXZlJyxcbiAgICAncGF0aCcsXG4gICAgJ2RpcmVjdG9yeScsXG4gICAgJ2ZpbGUnLFxuICAgICdxdWVyeScsXG4gICAgJ2FuY2hvcidcbiAgXSxcbiAgcToge1xuICAgIG5hbWU6ICdxdWVyeUtleScsXG4gICAgcGFyc2VyOiAvKD86XnwmKShbXiY9XSopPT8oW14mXSopL2dcbiAgfSxcbiAgcGFyc2VyOiB7XG4gICAgc3RyaWN0OlxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXG4gICAgICAvXig/OihbXjpcXC8/I10rKTopPyg/OlxcL1xcLygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KFteOlxcLz8jXSopKD86OihcXGQqKSk/KSk/KCgoKD86W14/I1xcL10qXFwvKSopKFtePyNdKikpKD86XFw/KFteI10qKSk/KD86IyguKikpPykvLFxuICAgIGxvb3NlOlxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXG4gICAgICAvXig/Oig/IVteOkBdKzpbXjpAXFwvXSpAKShbXjpcXC8/Iy5dKyk6KT8oPzpcXC9cXC8pPygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KFteOlxcLz8jXSopKD86OihcXGQqKSk/KSgoKFxcLyg/OltePyNdKD8hW14/I1xcL10qXFwuW14/I1xcLy5dKyg/Ols/I118JCkpKSpcXC8/KT8oW14/I1xcL10qKSkoPzpcXD8oW14jXSopKT8oPzojKC4qKSk/KS9cbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNBLFFBQVFBLENBQUNDLEdBQVcsRUFBd0I7RUFDMUQsSUFBTUMsQ0FBQyxHQUFHRixRQUFRLENBQUNHLE9BQU87RUFDMUIsSUFBTUMsQ0FBQyxHQUFHRixDQUFDLENBQUNHLE1BQU0sQ0FBQ0gsQ0FBQyxDQUFDSSxVQUFVLEdBQUcsUUFBUSxHQUFHLE9BQU8sQ0FBQyxDQUFDQyxJQUFJLENBQUNOLEdBQUcsQ0FBQztFQUMvRCxJQUFNTyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQ2QsSUFBSUMsQ0FBQyxHQUFHLEVBQUU7RUFFVixPQUFPQSxDQUFDLEVBQUUsRUFBRUQsR0FBRyxDQUFDTixDQUFDLENBQUNRLEdBQUcsQ0FBQ0QsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFBTCxDQUFDLGFBQURBLENBQUMsdUJBQURBLENBQUMsQ0FBR0ssQ0FBQyxDQUFDLEtBQUksRUFBRTtFQUV4Q0QsR0FBRyxDQUFDTixDQUFDLENBQUNTLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ2xCSixHQUFHLENBQUNOLENBQUMsQ0FBQ1EsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUNHLE9BQU8sQ0FBQ1gsQ0FBQyxDQUFDUyxDQUFDLENBQUNOLE1BQU0sRUFBRSxVQUFDUyxFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFLO0lBQ2pELElBQUlELEVBQUUsRUFBRVAsR0FBRyxDQUFDTixDQUFDLENBQUNTLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUNHLEVBQUUsQ0FBQyxHQUFHQyxFQUFFO0VBQ2hDLENBQUMsQ0FBQztFQUVGLE9BQU9SLEdBQUc7QUFDWjtBQUVBUixRQUFRLENBQUNHLE9BQU8sR0FBRztFQUNqQkcsVUFBVSxFQUFFLEtBQUs7RUFDakJJLEdBQUcsRUFBRSxDQUNILFFBQVEsRUFDUixVQUFVLEVBQ1YsV0FBVyxFQUNYLFVBQVUsRUFDVixNQUFNLEVBQ04sVUFBVSxFQUNWLE1BQU0sRUFDTixNQUFNLEVBQ04sVUFBVSxFQUNWLE1BQU0sRUFDTixXQUFXLEVBQ1gsTUFBTSxFQUNOLE9BQU8sRUFDUCxRQUFRLENBQ1Q7RUFDREMsQ0FBQyxFQUFFO0lBQ0RDLElBQUksRUFBRSxVQUFVO0lBQ2hCUCxNQUFNLEVBQUU7RUFDVixDQUFDO0VBQ0RBLE1BQU0sRUFBRTtJQUNOWSxNQUFNO0lBQ0o7SUFDQSx5SUFBeUk7SUFDM0lDLEtBQUs7SUFDSDtJQUNBO0VBQ0o7QUFDRixDQUFDIiwiaWdub3JlTGlzdCI6W119