"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.filter = void 0;
// SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project

var fs = "uniform float filterMin1;\nuniform float filterMax1;\nuniform float filterMin2;\nuniform float filterMax2;\nuniform float filterMin3;\nuniform float filterMax3;\nuniform float filterMin4;\nuniform float filterMax4;\n";

// You can't pass JS' -Infinity or Infinity to a shader as a uniform
var inf = Math.pow(2, 62);

// eslint-disable-next-line complexity
function getUniforms() {
  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var filterMin1 = opts.filterMin1,
    filterMin2 = opts.filterMin2,
    filterMin3 = opts.filterMin3,
    filterMin4 = opts.filterMin4,
    filterMax1 = opts.filterMax1,
    filterMax2 = opts.filterMax2,
    filterMax3 = opts.filterMax3,
    filterMax4 = opts.filterMax4;
  if (Number.isFinite(filterMin1) || Number.isFinite(filterMin2) || Number.isFinite(filterMin3) || Number.isFinite(filterMin4) || Number.isFinite(filterMax1) || Number.isFinite(filterMax2) || Number.isFinite(filterMax3) || Number.isFinite(filterMax4)) {
    return {
      filterMin1: Number.isFinite(filterMin1) ? filterMin1 : -inf,
      filterMin2: Number.isFinite(filterMin2) ? filterMin2 : -inf,
      filterMin3: Number.isFinite(filterMin3) ? filterMin3 : -inf,
      filterMin4: Number.isFinite(filterMin4) ? filterMin4 : -inf,
      filterMax1: Number.isFinite(filterMax1) ? filterMax1 : inf,
      filterMax2: Number.isFinite(filterMax2) ? filterMax2 : inf,
      filterMax3: Number.isFinite(filterMax3) ? filterMax3 : inf,
      filterMax4: Number.isFinite(filterMax4) ? filterMax4 : inf
    };
  }
  return null;
}
var filter = exports.filter = {
  name: 'filter',
  fs: fs,
  getUniforms: getUniforms,
  inject: {
    'fs:DECKGL_MUTATE_COLOR': "\n    if (image.r < filterMin1) discard;\n    if (image.g < filterMin2) discard;\n    if (image.b < filterMin3) discard;\n    if (image.a < filterMin4) discard;\n    if (image.r > filterMax1) discard;\n    if (image.g > filterMax2) discard;\n    if (image.b > filterMax3) discard;\n    if (image.a > filterMax4) discard;\n    "
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsImluZiIsIk1hdGgiLCJwb3ciLCJnZXRVbmlmb3JtcyIsIm9wdHMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJmaWx0ZXJNaW4xIiwiZmlsdGVyTWluMiIsImZpbHRlck1pbjMiLCJmaWx0ZXJNaW40IiwiZmlsdGVyTWF4MSIsImZpbHRlck1heDIiLCJmaWx0ZXJNYXgzIiwiZmlsdGVyTWF4NCIsIk51bWJlciIsImlzRmluaXRlIiwiZmlsdGVyIiwiZXhwb3J0cyIsIm5hbWUiLCJpbmplY3QiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvcmFzdGVyL3dlYmdsL2NvbG9yL2ZpbHRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQge0dldFVuaWZvcm1zT3V0cHV0LCBTaGFkZXJNb2R1bGV9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgZnMgPSBgXFxcbnVuaWZvcm0gZmxvYXQgZmlsdGVyTWluMTtcbnVuaWZvcm0gZmxvYXQgZmlsdGVyTWF4MTtcbnVuaWZvcm0gZmxvYXQgZmlsdGVyTWluMjtcbnVuaWZvcm0gZmxvYXQgZmlsdGVyTWF4MjtcbnVuaWZvcm0gZmxvYXQgZmlsdGVyTWluMztcbnVuaWZvcm0gZmxvYXQgZmlsdGVyTWF4MztcbnVuaWZvcm0gZmxvYXQgZmlsdGVyTWluNDtcbnVuaWZvcm0gZmxvYXQgZmlsdGVyTWF4NDtcbmA7XG5cbi8vIFlvdSBjYW4ndCBwYXNzIEpTJyAtSW5maW5pdHkgb3IgSW5maW5pdHkgdG8gYSBzaGFkZXIgYXMgYSB1bmlmb3JtXG5jb25zdCBpbmYgPSBNYXRoLnBvdygyLCA2Mik7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiBnZXRVbmlmb3JtcyhcbiAgb3B0czoge1xuICAgIGZpbHRlck1pbjE/OiBudW1iZXI7XG4gICAgZmlsdGVyTWluMj86IG51bWJlcjtcbiAgICBmaWx0ZXJNaW4zPzogbnVtYmVyO1xuICAgIGZpbHRlck1pbjQ/OiBudW1iZXI7XG4gICAgZmlsdGVyTWF4MT86IG51bWJlcjtcbiAgICBmaWx0ZXJNYXgyPzogbnVtYmVyO1xuICAgIGZpbHRlck1heDM/OiBudW1iZXI7XG4gICAgZmlsdGVyTWF4ND86IG51bWJlcjtcbiAgfSA9IHt9XG4pOiBHZXRVbmlmb3Jtc091dHB1dCB7XG4gIGNvbnN0IHtcbiAgICBmaWx0ZXJNaW4xLFxuICAgIGZpbHRlck1pbjIsXG4gICAgZmlsdGVyTWluMyxcbiAgICBmaWx0ZXJNaW40LFxuICAgIGZpbHRlck1heDEsXG4gICAgZmlsdGVyTWF4MixcbiAgICBmaWx0ZXJNYXgzLFxuICAgIGZpbHRlck1heDRcbiAgfSA9IG9wdHM7XG5cbiAgaWYgKFxuICAgIE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNaW4xKSB8fFxuICAgIE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNaW4yKSB8fFxuICAgIE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNaW4zKSB8fFxuICAgIE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNaW40KSB8fFxuICAgIE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNYXgxKSB8fFxuICAgIE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNYXgyKSB8fFxuICAgIE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNYXgzKSB8fFxuICAgIE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNYXg0KVxuICApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmlsdGVyTWluMTogTnVtYmVyLmlzRmluaXRlKGZpbHRlck1pbjEpID8gZmlsdGVyTWluMSA6IC1pbmYsXG4gICAgICBmaWx0ZXJNaW4yOiBOdW1iZXIuaXNGaW5pdGUoZmlsdGVyTWluMikgPyBmaWx0ZXJNaW4yIDogLWluZixcbiAgICAgIGZpbHRlck1pbjM6IE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNaW4zKSA/IGZpbHRlck1pbjMgOiAtaW5mLFxuICAgICAgZmlsdGVyTWluNDogTnVtYmVyLmlzRmluaXRlKGZpbHRlck1pbjQpID8gZmlsdGVyTWluNCA6IC1pbmYsXG4gICAgICBmaWx0ZXJNYXgxOiBOdW1iZXIuaXNGaW5pdGUoZmlsdGVyTWF4MSkgPyBmaWx0ZXJNYXgxIDogaW5mLFxuICAgICAgZmlsdGVyTWF4MjogTnVtYmVyLmlzRmluaXRlKGZpbHRlck1heDIpID8gZmlsdGVyTWF4MiA6IGluZixcbiAgICAgIGZpbHRlck1heDM6IE51bWJlci5pc0Zpbml0ZShmaWx0ZXJNYXgzKSA/IGZpbHRlck1heDMgOiBpbmYsXG4gICAgICBmaWx0ZXJNYXg0OiBOdW1iZXIuaXNGaW5pdGUoZmlsdGVyTWF4NCkgPyBmaWx0ZXJNYXg0IDogaW5mXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgY29uc3QgZmlsdGVyOiBTaGFkZXJNb2R1bGUgPSB7XG4gIG5hbWU6ICdmaWx0ZXInLFxuICBmcyxcbiAgZ2V0VW5pZm9ybXMsXG4gIGluamVjdDoge1xuICAgICdmczpERUNLR0xfTVVUQVRFX0NPTE9SJzogYFxuICAgIGlmIChpbWFnZS5yIDwgZmlsdGVyTWluMSkgZGlzY2FyZDtcbiAgICBpZiAoaW1hZ2UuZyA8IGZpbHRlck1pbjIpIGRpc2NhcmQ7XG4gICAgaWYgKGltYWdlLmIgPCBmaWx0ZXJNaW4zKSBkaXNjYXJkO1xuICAgIGlmIChpbWFnZS5hIDwgZmlsdGVyTWluNCkgZGlzY2FyZDtcbiAgICBpZiAoaW1hZ2UuciA+IGZpbHRlck1heDEpIGRpc2NhcmQ7XG4gICAgaWYgKGltYWdlLmcgPiBmaWx0ZXJNYXgyKSBkaXNjYXJkO1xuICAgIGlmIChpbWFnZS5iID4gZmlsdGVyTWF4MykgZGlzY2FyZDtcbiAgICBpZiAoaW1hZ2UuYSA+IGZpbHRlck1heDQpIGRpc2NhcmQ7XG4gICAgYFxuICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBOztBQUlBLElBQU1BLEVB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